<application>
  <component name="YouTrack Issues">
    <option name="persistentIssues">
      <map>
        <entry key="bpm_engine p.nikulshin@https://balance.myjetbrains.com/youtrack" value="[{&quot;id&quot;:&quot;ARGS-1962&quot;,&quot;entityId&quot;:&quot;86-81183&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Возможность изменять стейт у нескольких заявок в админке БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586336725760&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1962&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Задача: Возможность изменять стейт у нескольких заявок в админке БПМ&lt;/h1&gt;\n&lt;h1&gt;Что реализовано:&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В админке на странице /admin/bpm/walker/ появился action &amp;quot;Confirm mass force state&amp;quot;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28048?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjgwNDh8MjRHZFlhdUROb0hiMUZ3UkZCSTVzZ3N4RnZW%0D%0AX0xYbXN6cTNfWkJfRmhxWQ0K%0D%0A&amp;amp;updated=1586792983776\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-28048\&quot; /&gt;&lt;br/&gt;Его применение ведет на страницу подтверждения, на которой можно выбрать интервал (delta) с которым будут форсится заявки, целевой стейт, и к чему могут быть применены заявки. Присутсвует валидация введенных данных. Краткая информация о том к каким валкерам будет применен форс-стейт&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28049?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjgwNDl8bFJZR2JjcHNNbU5qS2JGbTBwNnliOW5UQnZB%0D%0AdzlvcmhteEFIa2RCWTJ2dw0K%0D%0A&amp;amp;updated=1586793020798\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-28049\&quot; /&gt;&lt;br/&gt;Подтверждение действия приводит к тому что в бпм послыается сообщение с отложенным таймером. Таймер расчитывается как i*delta, где i номер по порядку волкера. При применении действия записываются логи о том кто и когда применил форс-стейт&lt;/li&gt;\n&lt;li&gt;В &amp;quot;движке&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Системный экшн &amp;#39;force_state&amp;#39; может принимать дополнительный параметр &amp;quot;timeout&amp;quot;, если он установлен то вместо немедленного изменения стейта будет установлен таймер &amp;#39;force_state_timeout&amp;#39; на количество секунд указанное в timeout&lt;/li&gt;\n&lt;li&gt;Таймер принимает параметр &amp;quot;state&amp;quot;, при срабатывании переводит заявку в &amp;quot;state&amp;quot;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h1&gt;Как тестировать:&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Зайти не под админской учеткой, убедится что пункт Action: Confirm mass force state - недоступен&lt;/li&gt;\n&lt;li&gt;Зайти под админской учеткой, убедится что пункт доступен&lt;/li&gt;\n&lt;li&gt;Выбрать пару заявок которые не жалко\n&lt;ul class=\&quot;wiki-list1\&quot;&gt;\n&lt;li&gt;выбрать Action: Confirm mass force state&lt;/li&gt;\n&lt;li&gt;проверить что без выбранного стейта или с некорректным интервалом стейт форсануть не получится (если умеете отключите валидацию браузераа то он не даст нажать кнопку применить с некорректными настройками)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Выбрать корректные значения\n&lt;ul class=\&quot;wiki-list1\&quot;&gt;\n&lt;li&gt;в целях тестирования new_state - timeout_decline_state&lt;/li&gt;\n&lt;li&gt;интервал смены - 30 секунд&lt;br/&gt;Нажать применить&lt;/li&gt;\n&lt;li&gt;Ожидаемое поведение, вернет на предыдущую страницу, зеленым напишет что стейты форсированы.&lt;br/&gt;Зайти в пару стейтов&lt;/li&gt;\n&lt;li&gt;Убедится что установлен таймер force_state_timeout, было отправлено сообщение force_state_timeout с параметром timeout&lt;br/&gt;Подождать когда таймер сработает, ожидаемое поведение - заявка перейдет в целевой стейт&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Выбрать на странице &lt;a href=\&quot;http://0.0.0.0:8000/admin/bpm/walker/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;http://0.0.0.0:8000/admin/bpm/walker/&lt;/a&gt; какойнибудь фильтр, после выбрать пару заявок, выбрать action\n&lt;ul class=\&quot;wiki-list1\&quot;&gt;\n&lt;li&gt;Ожидаемое поведение, на странице подтверждения появиться дополнительная кнопка &amp;quot;Применить к фильтру&amp;quot;, ее нажатие приводит к установке таймеров на изменение стейтов ко всем заявкам которые попадают под фильтр&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Зайти в history заявки, проверить что в history записалось кто форсил&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1589383111673&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Снимок экрана 2020-04-13 в 18.25.58.png&quot;,&quot;id&quot;:&quot;88-28048&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28048?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNDh8TExmSk8tNkFyVExTdm9JbE0tbW8wNjZIakNr%0D%0AcURDMVBnM3NkLVBwYTE1bw0K%0D%0A&amp;updated=1586792983776&quot;},{&quot;value&quot;:&quot;Снимок экрана 2020-04-13 в 18.36.31.png&quot;,&quot;id&quot;:&quot;88-28049&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28049?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNDl8NkRuMXJLWGo1RFBNYzZWNzc5SlNjQjRJUzBT%0D%0AVkNhbmF6eTFjN1AxNXQ2WQ0K%0D%0A&amp;updated=1586793020798&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-56783&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1962&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm done&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;---\nbpm_ng_admin_git_version: feature/ARGS-1962\nbpm_ng_engine_version: feature/ARGS-1962\nbpm_ng_transport_version: develop\nbpm_ng_composite_version: develop\nbpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1962\n    version_name: pre_release\n    import_name: sm1\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586789694700,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-57981&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1962&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;blockquote&gt;\n&lt;p&gt;Зайти под админской учеткой, убедится что пункт доступен&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;ФР == ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1589383111679,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-2002&quot;,&quot;entityId&quot;:&quot;86-81691&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Программа Кредит С2С&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586862271383&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;2002&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Добавить новый продукт &amp;quot;Залоговый кредит С2С&amp;quot;&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;h2&gt;FRONT&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить отображение нового продукта &amp;quot;Залоговый кредит С2С&amp;quot; в калькулятор (&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28068?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjgwNjh8ZTFHM0RkWFFzd29RbEpTTUk2NkpxcUJPeFk3%0D%0AYndJWHJXZWtyN3RzVFhJRQ0K%0D%0A&amp;amp;updated=1586867967491\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;макет во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;Если выбран продукт &amp;quot;Залоговый кредит С2С&amp;quot;, то &lt;strong&gt;НЕ&lt;/strong&gt; должны быть доступны:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;выбор нового ТС&lt;/li&gt;\n&lt;li&gt;выбор гос. программы&lt;/li&gt;\n&lt;li&gt;промо&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Отправлять выбранный параметр на BACK {id: &amp;quot;rgsb_pledge_true_c2c&amp;quot;}&lt;/li&gt;\n&lt;li&gt;Для продукта &lt;code class=\&quot;inline-code\&quot;&gt;Залоговый кредит С2С (id: &amp;quot;rgsb_pledge_true_c2c&amp;quot;) И Страхование жизни (insurance_types == 1) И РГСБ (insurance_companies == 1) &lt;/code&gt; расширить срок страховки от &lt;code class=\&quot;inline-code\&quot;&gt;6 месяцев до 72&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Для продукта &lt;code class=\&quot;inline-code\&quot;&gt;Залоговый кредит С2С (id: &amp;quot;rgsb_pledge_true_c2c&amp;quot;) И ВместоКАСКО (insurance_types == 2) И РГСБ (insurance_companies == 1) &lt;/code&gt; сделать срок страховки равный сроку кредита (по аналогии с задачей &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1403\&quot; title=\&quot;Фиксация сроков по СУ к сроку кредита\&quot; data-issue-id=\&quot;86-71280\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1403&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;Для продукта &lt;code class=\&quot;inline-code\&quot;&gt;Залоговый кредит С2С (id: &amp;quot;rgsb_pledge_true_c2c&amp;quot;)&lt;/code&gt; при выборе страховок из таблицы ниже сделать обязательными страховки в кредит (залочить свитч &lt;code class=\&quot;inline-code\&quot;&gt;в кредит == true&lt;/code&gt;):&lt;/li&gt;\n&lt;/ol&gt;\n&lt;table class=\&quot;wiki-tbl\&quot;&gt;\n&lt;thead&gt;\n&lt;tr&gt;&lt;th align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Название страховки (insurane_type_id)&lt;/th&gt;&lt;th align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Название компании (insurance_company_id)&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Страхование жизни (1)&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;ПАО СК РГС (1)&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;ВместоКАСКО (2)&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;ПАО СК РГС (1)&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;ДКАСКО (3)&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;ПАО СК РГС (1)&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Сервис Помощь на дороге (5)&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Этнамед (3)&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;партнерский GAP (3), партнерское СЖ (1), партнерский сревисный пакет (5), партнерский продленная гарантия (6)&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;type_reward != RGSB&lt;/td&gt;&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;ol start=\&quot;7\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Для нового продукта на 8 шаге вместо реквизитов на оплату ТС отображать поле для ввода PAN карты (номер карты получателя средств оплаты ТС). Маска ввода по аналогии с полем &amp;quot;PAN дебетовая карта&amp;quot;. Название поле - &lt;code class=\&quot;inline-code\&quot;&gt;pan_seller&lt;/code&gt;. Передавать поле на BACK&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить новый продукт в каталог - &lt;code class=\&quot;inline-code\&quot;&gt;products.yaml&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;условия_кредит_с_залогом_c2c: &amp;amp;default_constraints_pledge_true_C2C\n  имя_для_предложений: Залоговый кредит C2C\n  базовая_ставка: 0.159\n   пск:\n    сумма_кредита_от:\n      100000: 0.24381\n      300000: 0.20595\n  размер_кредита:\n    величина: [100_000, 1_500_000]\n  первоначальный_платеж: [0.0, 1.0]\n____________________________________________________________________________\n  - ruby:\n      active: true\n      id: rgsb_pledge_true_c2c\n    название: Залоговый кредит C2C\n    необходимые_условия:\n      &amp;lt;&amp;lt;: *default_constraints\n      &amp;lt;&amp;lt;: *default_constraints_pledge_true_c2c\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Передавать на фронт в каталоге новый продукт&lt;/li&gt;\n&lt;li&gt;Для нового продукта (id: &amp;quot;rgsb_pledge_true_c2c&amp;quot;)  при переходе в &lt;code class=\&quot;inline-code\&quot;&gt;verification_state&lt;/code&gt; добавить в условия ОТДЕЛЬНУЮ проверку (реализовано в &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1403\&quot; title=\&quot;Фиксация сроков по СУ к сроку кредита\&quot; data-issue-id=\&quot;86-71280\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1403&lt;/a&gt;):&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если  insurance_companies == 1 И product_type == &amp;quot;rgsb_pledge_true_c2c&amp;quot; И insurance_types == 2 И `Срок страхования = срок кредитования`:\n       ок\nИначе:\n     Не переходить на verification_state, Отправлять на фронт ошибку, в selected_calculation: errors: [&amp;quot;Срок страхования должен приравниваться к сроку кредитования&amp;quot;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;limit_apporve_state&lt;/code&gt; запрашивать &lt;code class=\&quot;inline-code\&quot;&gt;ПТС/ЭПТС/Инфо письма&lt;/code&gt; у FRONT&lt;/li&gt;\n&lt;li&gt;Для &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_c2c&lt;/code&gt; условия перехода из &lt;code class=\&quot;inline-code\&quot;&gt;limmit_approve_state&lt;/code&gt;  в &lt;code class=\&quot;inline-code\&quot;&gt;change_condition_state&lt;/code&gt; оставить как и для залогового ТС (реализовано в &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-969\&quot; title=\&quot;В стейт машину добавить рассмотрение\&quot; data-issue-id=\&quot;86-63916\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-969&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;Для &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_c2c&lt;/code&gt; в &lt;code class=\&quot;inline-code\&quot;&gt;check_object_sate&lt;/code&gt; ожидать  доработки такие же как и для залогового кредита&lt;/li&gt;\n&lt;li&gt;Для нового продукта действуют логика, заложенная в  &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1398\&quot; title=\&quot;БАГ с некорректным отображением Полиса Дорожная/Сервисная карта\&quot; data-issue-id=\&quot;86-71212\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1398&lt;/a&gt; (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1623\&quot; title=\&quot;Добавление нового продукта в список страховых и сервисных услуг\&quot; data-issue-id=\&quot;86-74784\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1623&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;Для нового продукта необходимо добавить логику подтверждения дохода как у &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_every_ts&lt;/code&gt; (последние правки &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1884\&quot; title=\&quot;Подтверждение дохода для залога на любое ТС\&quot; data-issue-id=\&quot;86-79572\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1884&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;В таблице &lt;code class=\&quot;inline-code\&quot;&gt;cars&lt;/code&gt; добавить в атрибут &lt;code class=\&quot;inline-code\&quot;&gt;available_for_products&lt;/code&gt; значение &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_c2c&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Запрашивать и принимать все документы как для залогового ТС (счета по страховкам, полисы)&lt;/li&gt;\n&lt;li&gt;Принимать от FRONT поле &lt;code class=\&quot;inline-code\&quot;&gt;pan_seller&lt;/code&gt;. Записывать поле в блок &lt;code class=\&quot;inline-code\&quot;&gt;bank_details&lt;/code&gt;. Передавать поле на BPM в  &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition_done&lt;/code&gt; в &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; bank_detail -&amp;gt; pan_seller&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Убрать валидацию наличия каско или вкаско (по аналогии с &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_ts&lt;/code&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;ABACUS&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать название нового продукта &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_с2с&lt;/code&gt; от БЭКа при расчете условий кредита, по нему ходить в products.yaml&lt;/li&gt;\n&lt;li&gt;Принимать название нового продукта &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_c2c&lt;/code&gt; от БПМ при расчете Риск-грейдов\\сегментов, меп\\лимит\\LTV, pdn (расчеты аналогичны &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_ts&lt;/code&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK Бумага&lt;/h2&gt;\n&lt;p&gt;Для нового типа продукта генерировать набор документов по аналогии с залоговым кредитом (&lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true&lt;/code&gt;)&lt;/p&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить валидацию для нового продукта по PD согласно таблице ниже:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;table class=\&quot;wiki-tbl\&quot;&gt;\n&lt;thead&gt;\n&lt;tr&gt;&lt;th align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Segment&lt;/th&gt;&lt;th align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Онлайн заявка&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;1&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;2&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;3&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;4&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В условиях по отправке на прозвон и андеррайтинг,прописать &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_c2c&lt;/code&gt; по аналогии с &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_ts&lt;/code&gt;( например если по какой, то фиче стоит условие что если продукт-залог на любое тс, то проверяем, значит для нового продукта будет такая же проверка)&lt;/li&gt;\n&lt;li&gt;Для нового продукта, если приходит &lt;code class=\&quot;inline-code\&quot;&gt;check_object&lt;/code&gt;, также создавать проверки ПТС&lt;/li&gt;\n&lt;li&gt;Для нового продукта также проверять документы на этапе сделки (по аналогии с &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_every_ts&lt;/code&gt;). Для заданий на верификацию (ДКП, счет на оплату ТС) использовать расчетный счет и инн продавца из &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; request -&amp;gt; bank_detail&lt;/code&gt; (смотри &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-2005\&quot; title=\&quot;Card_request для залогового кредита C2C\&quot; data-issue-id=\&quot;86-81718\&quot;&gt;ARGS-2005&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;В rgsb_proxy.lookup_request посылать в параметре product_id для нового продукта значение ?????????????????????????&lt;/li&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;approval_history&lt;/code&gt; записывать одобрение по новому продукту отдельно (products: {id: &amp;quot;rgsb_pledge_true_c2c&amp;quot;})&lt;/li&gt;\n&lt;li&gt;Принимать поле &lt;code class=\&quot;inline-code\&quot;&gt;pan_seller&lt;/code&gt; из &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; и записывать в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; request -&amp;gt; bank_detail&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В условиях отправки pay_request не учитывать условие про КАСКО( т е если оно не в кредит, то его не нужно отправлять)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Тестирование&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В калькуляторе должен отображаться новый продукт как на мекете&lt;/li&gt;\n&lt;li&gt;Для нового продукта не должны быть доступны гос программа, новое тс, промо&lt;/li&gt;\n&lt;li&gt;ДЛЯ НОВОГО ПРОДУКТА: для РГСБ и Страхование жизни должен быть доступен срок страховки от 6 месяцев до 72; для РГСБ и страховки ВместоКАСКО срок страховки должен быть равен сроку кредита; страховки, указанные в пункте 6 FRONT (в зависимости от компаний) должны быть в кредит&lt;/li&gt;\n&lt;li&gt;После прохождения 6 шага должны создаваться проверки ПТС. Должны приходить ошибки, доработки&lt;/li&gt;\n&lt;li&gt;Проверить переход из &lt;code class=\&quot;inline-code\&quot;&gt;limit_approved_state&lt;/code&gt; в &lt;code class=\&quot;inline-code\&quot;&gt;change_condition_state&lt;/code&gt; (условия в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-969\&quot; title=\&quot;В стейт машину добавить рассмотрение\&quot; data-issue-id=\&quot;86-63916\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-969&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;На 8-9 шаге должны запрашивать счета на оплату страховок, полисы, номера полисов, даты окончания согласно задачам &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1398\&quot; title=\&quot;БАГ с некорректным отображением Полиса Дорожная/Сервисная карта\&quot; data-issue-id=\&quot;86-71212\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1398&lt;/a&gt; и &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1623\&quot; title=\&quot;Добавление нового продукта в список страховых и сервисных услуг\&quot; data-issue-id=\&quot;86-74784\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1623&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;При превышении лимита 1_000_001 необходим документ, подтверждающий доход&lt;/li&gt;\n&lt;li&gt;Риск-грейдов\\сегментов, меп\\лимит\\LTV, pdn рассчитываются как для &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_everu_ts&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Сегмент PD должен рассчитываться также как и для &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_ts&lt;/code&gt;. cut-off должен срабатывать согласно измененным условиям в таблице&lt;/li&gt;\n&lt;li&gt;На 8 шаге для нового продукта должно отображаться поле для ввода PAN карты продавца ТС. Введенный PAN должен отправляться на BACK, сохраняться в memeory. Введенный PAN должен отправлять в card_request. В ответе card_request должен приходить инн продавца и расчетный счет. Полученный инн продавца и расчетный счет должны сохраняться в memory и отправлять в заданиях ДКП и счет на оплату ТС на верификацию&lt;/li&gt;\n&lt;li&gt;В lookup_request должен отправляться новый id продукта&lt;/li&gt;\n&lt;li&gt;на 6 шаге не требует обязательно каско или вкаско&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586946070535&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-2005&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Major&quot;],&quot;valueId&quot;:[&quot;Major&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Бумага&quot;,&quot;Front&quot;,&quot;BPM&quot;,&quot;Abacus&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Бумага&quot;,&quot;Front&quot;,&quot;BPM&quot;,&quot;Abacus&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Новый калькулятор.png&quot;,&quot;id&quot;:&quot;88-28068&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28068?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNjh8SXU4dmNNU1lPci1nTWw1T0IxeXlVRnVDeVUz%0D%0ATFdyc2lYYXhSWlU4cDBIMA0K%0D%0A&amp;updated=1586867967491&quot;},{&quot;value&quot;:&quot;Новый калькулятор1586868721767.png&quot;,&quot;id&quot;:&quot;88-28069&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28069?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNjl8Rm1UaEdUX3htX2Rwc2lUdE8wN1JCWFE0eE5w%0D%0AYm43S1MwRlZ4WGZ1bTFBZw0K%0D%0A&amp;updated=1586868722623&quot;},{&quot;value&quot;:&quot;новый калькулятор.png&quot;,&quot;id&quot;:&quot;88-28070&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28070?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNzB8X3hudnBNWnAyZ2lmOEhuU29rTzA1MnIxc2My%0D%0AVHo3LW9uckFvQ0Z1cnE2WQ0K%0D%0A&amp;updated=1586871204287&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-56836&quot;,&quot;author&quot;:&quot;arseny&quot;,&quot;authorFullName&quot;:&quot;Арсений Культиасов&quot;,&quot;issueId&quot;:&quot;ARGS-2002&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;можно вот так&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586867911617,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56841&quot;,&quot;author&quot;:&quot;arseny&quot;,&quot;authorFullName&quot;:&quot;Арсений Культиасов&quot;,&quot;issueId&quot;:&quot;ARGS-2002&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Больше кликов&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586868727306,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-2005&quot;,&quot;entityId&quot;:&quot;86-81718&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Card_request для залогового кредита C2C&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586889653370&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;2005&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Для продукта &amp;quot;Залоговый кредит С2С&amp;quot; отправлять в сообщение card_request ПАН карты продавца для получения ИНН и Расчетного счета продавца&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщение &lt;code class=\&quot;inline-code\&quot;&gt;card_request&lt;/code&gt; отправлять &lt;code class=\&quot;inline-code\&quot;&gt;memeory -&amp;gt; request -&amp;gt; bank_detail -&amp;gt; pan_seller&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В ответе ожидать &lt;code class=\&quot;inline-code\&quot;&gt;inn_seller&lt;/code&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;account_number&lt;/code&gt;. Записывать в блок &lt;code class=\&quot;inline-code\&quot;&gt;memeory -&amp;gt; request -&amp;gt; bank_detail&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586889683275&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-2002&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Major&quot;],&quot;valueId&quot;:[&quot;Major&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1840&quot;,&quot;entityId&quot;:&quot;86-78711&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Распознавание договоров о приемной семье, опекунах&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584363355425&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1840&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Обрабатывать документы, отличные от свидетельства о рождении/усыновлении для Госпрограммы-Семейный&lt;/p&gt;\n&lt;h2&gt;FRONT:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;При выборе гос. программы &amp;quot;семейный автомобиль&amp;quot; отображать подзаголовок &amp;quot;Документы по детям&amp;quot; и два блока для добавления вложений&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Названия блоков:\n1. свидетельство о рождении (усыновлении)/договор об осуществлении опеки  \n2. договор о приемной семье/постановление суда об опеке   \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Отправлять новое вложение &amp;quot;договор о приемной семье/постановление суда об опеке&amp;quot; на BACK (&lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;Ограничить максимальное количество вложений равное 2 для каждого блока. Ограничить минимальное количество вложений равное 0 для каждого блока&lt;/li&gt;\n&lt;li&gt;Принимать от BACK валидацию на 6 шаге&lt;/li&gt;\n&lt;li&gt;Принимать  подсказки от BACK для каждого пункта&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить в &lt;strong&gt;catalogue.yaml&lt;/strong&gt; новый cid &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; ( если нужно то добавить &lt;code class=\&quot;inline-code\&quot;&gt;afterloading_documents_groups&lt;/code&gt; &lt;strong&gt;== 49&lt;/strong&gt;) и  для &amp;quot;Договор о приемной семье/Постановление о назначении опекуна&amp;quot;&lt;/li&gt;\n&lt;li&gt;Принимать новые типы документов с FRONT&lt;/li&gt;\n&lt;li&gt;Добавить валидацию на 6 шаге - если выбрана &lt;code class=\&quot;inline-code\&quot;&gt;гос. программа: семейный автомобиль&lt;/code&gt;, то валидоровать количество документов равное 2 (должно быть приложено в сумме два документа, где &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;in (51, 49)&lt;/strong&gt;). Если условие не выполнено - не пускать дальше и посылать ошибку на FRONT, иначе идти по процессу&lt;/li&gt;\n&lt;li&gt;Отправлять в BPM новый тип вложений в сообщении &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Добавить в блок &lt;code class=\&quot;inline-code\&quot;&gt;document_config&lt;/code&gt; массив &lt;code class=\&quot;inline-code\&quot;&gt;documents_for_childrens&lt;/code&gt;.  Отправлять в блоке &lt;code class=\&quot;inline-code\&quot;&gt;document_for_childrens&lt;/code&gt; ключ  &lt;code class=\&quot;inline-code\&quot;&gt;tips&lt;/code&gt; только для &lt;code class=\&quot;inline-code\&quot;&gt;documents_gorups&lt;/code&gt; in &lt;strong&gt;(49, 51)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;table class=\&quot;wiki-tbl\&quot;&gt;\n&lt;thead&gt;\n&lt;tr&gt;&lt;th align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;documents_groups&lt;/th&gt;&lt;th align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;tips&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;свидетельство о рождении (усыновлении)/договор об осуществлении опеки - &lt;strong&gt;51&lt;/strong&gt;&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Главный разворот и первая страница договора&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;договор о приемной семье/постановление суда об опеке - &lt;strong&gt;49&lt;/strong&gt;&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Договор - первая страница; постановление - страница с разделом &amp;quot;Постановляю&amp;quot;&lt;/td&gt;&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object &lt;/code&gt; сохранять новый тип вложений в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В начале шага &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; изменить проверку &lt;strong&gt;Свидетельство о рождении/усыновлении&lt;/strong&gt; (реализовано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;) на конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwMDB8U0tVZURTcmRCT3pNc3BGbFNOZXZWWFdwZDdB%0D%0AYU91ZnNsMGpoel9SUmQxYw0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список изменений:\n1. Заменил название свитча # логика срабатывания свитча остается прежней\n2. Изменил название задания \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В начале шага  &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwMDB8U0tVZURTcmRCT3pNc3BGbFNOZXZWWFdwZDdB%0D%0AYU91ZnNsMGpoel9SUmQxYw0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; И &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26999?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjY5OTl8ajU4Y2xUNERqdDlNV2MwRTc0TTkyQVlrSVdQ%0D%0ASEs3QjV1amhkNDdjaDhGNA0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26998?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjY5OTh8WU04dmcyOEc2eDJldU5WaE1sZkxXU1hLd1h5%0D%0ANG5oc1JsOHNJYV9ueUplUQ0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ждать ответ от верификации&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Для всех конструкторов&lt;/strong&gt; если сработал свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt; отправлять на доработку с ошибкой &amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot; (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;После ответа верификации делать дополнительные проверки (описаны ниже) если проверка пройдена, то одобрять семейную программу, иначе посылать доработку (текст ошибок описан ниже) (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Условия успешной проверки:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    (parent_last_name_1 &amp;amp; parent_first_name_1 == last_name &amp;amp; first_name)       ИЛИ       (parent_first_name_1 &amp;amp; parent_patronymic_name_1 == first_name &amp;amp; patronymic_name) ИЛИ (parent_last_name_2 &amp;amp; parent_first_name_2 = last_name &amp;amp; first_name)       ИЛИ        (parent_first_name_2 &amp;amp; parent_patronymic_name_2 = first_name &amp;amp; patronymic_name):\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;ФИО родителя не совпадает с ФИО из анкеты&amp;quot;\n\nЕсли   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 213 ИЛИ которых целое_число_месяцев(текущая дата - \n           date_of_birth_1)  &amp;lt; 213) &amp;gt;= 2 :\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Один из детей старше 17-ти лет. Приложите другой документ&amp;quot;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Тест-кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;На верификации надо ввести по обоим документам:&lt;br/&gt;Фамилию клиента&lt;br/&gt;Имя клиента&lt;br/&gt;Отчество клиента&lt;br/&gt;Дата рождения ребенка&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если приложен только для одного ребенка договор о приемной семье, на верификации можно ввести несколько дат рождения для одного документа&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если приложен для двух детей договор о приемной семье, на верификации можно ввести несколько дат рождения для нескольких документов&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Проверить, что проверка по детям делается параллельно проверке ПТС&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Доработки работают&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Кравченко&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;anna.kravchenko&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586878481173&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1878&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1879&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1880&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1822&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;anna.kravchenko&quot;,&quot;fullName&quot;:&quot;Анна Кравченко&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Шаг 5, госпрограмма 1 (РГС) L (1).png&quot;,&quot;id&quot;:&quot;88-26983&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26983?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY5ODN8akZkUUY5TXYyejdsX05pcHBoU3BaeUk4RHB0%0D%0ANGJrRG92NEZNSV9FVjg4NA0K%0D%0A&amp;updated=1584535922386&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье.txt&quot;,&quot;id&quot;:&quot;88-26998&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26998?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY5OTh8TVVWMTlPRXVURl9raFBtcFBvOGh2bEkxNzcz%0D%0AWWVVYzNZUWFaWURQY3BZNA0K%0D%0A&amp;updated=1584603354467&quot;},{&quot;value&quot;:&quot;конструкто - договор и свидетельство.txt&quot;,&quot;id&quot;:&quot;88-26999&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26999?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY5OTl8eHZnaElhSEVpSWRCbDB1by1kYTU3OWNxellS%0D%0AM2lRRG1hdy1wTkN4Q0RnRQ0K%0D%0A&amp;updated=1584603354467&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27000&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcwMDB8eWxfbC1MNW5LRWZNQ2JHcG9VZkVwU19xX2lN%0D%0AdlNiRFNlZnR1RWdDSnpuaw0K%0D%0A&amp;updated=1584603354467&quot;},{&quot;value&quot;:&quot;image1586330270420.png&quot;,&quot;id&quot;:&quot;88-27884&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27884?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc4ODR8MFhDTmVRR1RmYUhkVzBva3FJLVhoYVVWUklj%0D%0AaVRsaS1LUnRBZFd3SlFINA0K%0D%0A&amp;updated=1586330271178&quot;},{&quot;value&quot;:&quot;image1586331136790.png&quot;,&quot;id&quot;:&quot;88-27885&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27885?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc4ODV8Z2t3RkJNQ2pmZUtVODROOHZHckRRYmFuTTZy%0D%0AYTd5TUhlelRGUDNHYV9wRQ0K%0D%0A&amp;updated=1586331137426&quot;},{&quot;value&quot;:&quot;image1586866909187.png&quot;,&quot;id&quot;:&quot;88-28065&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28065?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNjV8dXJMdnYtTWtRaktOZ1lYQmVMUnM4eG9CalM2%0D%0AbVNvMFp2cHRFa2hlYm1PRQ0K%0D%0A&amp;updated=1586866909660&quot;},{&quot;value&quot;:&quot;image1586878286264.png&quot;,&quot;id&quot;:&quot;88-28075&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28075?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNzV8V3ZFcEhKbW1NZnk3anBocnBYY3Ayc1FUcW9H%0D%0AMWRtbk1kVUVidlJXRnV0UQ0K%0D%0A&amp;updated=1586878287279&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-56852&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1840&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Два договора об опеке.&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Доработка по свитчу &lt;code class=\&quot;inline-code\&quot;&gt;wellReadableAndHasNoDefects&lt;/code&gt;:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27884?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc4ODR8VWpGNmx6bHNEXzdsZEtwYzZ0M1gxdlpQT1FO%0D%0AY3RBZnFWRWpXUjJiQ19qaw0K%0D%0A&amp;amp;updated=1586330271178\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27884\&quot; /&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;verification&amp;quot;: {\n&amp;quot;status&amp;quot;: &amp;quot;rejected&amp;quot;,\n-&amp;quot;document_errors&amp;quot;: [\n&amp;quot;Документ нечёткий или не читается из-за дефектов.&amp;quot;\n],\n-&amp;quot;document_error_codes&amp;quot;: [\n&amp;quot;wellReadableAndHasNoDefects&amp;quot;\n]\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Доработка по свитчу &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt;:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27885?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc4ODV8X0cxU1JsRUZzNU41cGFXZGJvWklocExQRU1m%0D%0AVklPdEt2UkZiM0d4ZE5JZw0K%0D%0A&amp;amp;updated=1586331137426\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27885\&quot; /&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;verification&amp;quot;: {\n&amp;quot;status&amp;quot;: &amp;quot;rejected&amp;quot;,\n-&amp;quot;document_errors&amp;quot;: [\n&amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot;\n],\n-&amp;quot;document_error_codes&amp;quot;: [\n&amp;quot;thereIsBirthCertificate&amp;quot;\n]\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Доработка по двум свитчам:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28065?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjgwNjV8NTJfQl82bkhLSEhGVHFCXzNTOGdQVmdZQ2VQ%0D%0AeElfOUdpSEpLdVg2SHdzSQ0K%0D%0A&amp;amp;updated=1586866909660\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-28065\&quot; /&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;verification&amp;quot;: {\n&amp;quot;status&amp;quot;: &amp;quot;rejected&amp;quot;,\n-&amp;quot;document_errors&amp;quot;: [\n&amp;quot;Документ нечёткий или не читается из-за дефектов.&amp;quot;,\n&amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot;\n],\n-&amp;quot;document_error_codes&amp;quot;: [\n&amp;quot;wellReadableAndHasNoDefects&amp;quot;,\n&amp;quot;thereIsBirthCertificate&amp;quot;\n]\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Если приложен только для одного ребенка договор о приемной семье, на верификации можно ввести несколько дат рождения для одного документа&lt;br/&gt;Если приложен для двух детей договор о приемной семье, на верификации можно ввести несколько дат рождения для нескольких документов&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28075?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjgwNzV8X2YxVHliZTZGSEtoNkhLSVZ5LTJ3TmNVSVBX%0D%0AUDVNM1VyQmxVQWNKYmN5Zw0K%0D%0A&amp;amp;updated=1586878287279\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-28075\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Если   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 213 ИЛИ которых целое_число_месяцев(текущая дата -&lt;br/&gt;date_of_birth_1)  &amp;lt; 213) &amp;gt;= 2 :&lt;br/&gt;ок&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Проверено, ФР = ОР&lt;/p&gt;\n&lt;p&gt;Вышеперечисленные пункты были проверены для кейса, когда приложено &lt;strong&gt;два свидетельства&lt;/strong&gt;.&lt;br/&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586878481175,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1880&quot;,&quot;entityId&quot;:&quot;86-79398&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;BPM Распознавание договоров о приемной семье, опекунах&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584956620637&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1880&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Обрабатывать документы, отличные от свидетельства о рождении/усыновлении для Госпрограммы-Семейный&lt;/p&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object &lt;/code&gt; сохранять новый тип вложений в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В начале шага &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; изменить проверку &lt;strong&gt;Свидетельство о рождении/усыновлении&lt;/strong&gt; (реализовано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;) на конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcyMzB8UDIzWHN0ZHhiQWNkUXpIcnRzQkdEc3hEWFBP%0D%0ANHVvRDVHbGIwejlzYkVHQQ0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список изменений:\n1. Заменил название свитча # логика срабатывания свитча остается прежней\n2. Изменил название задания \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В начале шага  &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcyMzB8UDIzWHN0ZHhiQWNkUXpIcnRzQkdEc3hEWFBP%0D%0ANHVvRDVHbGIwejlzYkVHQQ0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; И &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27231?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcyMzF8ZHFyWmVUa1BsLUptbUl5MUkzX0toZHRCVDN0%0D%0AdWMxYnRhcDFqMmVqTGNNUQ0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27232?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcyMzJ8T0EyVHBkUVhIaUQ5UDZCdGstUVhVN0kzaVFQ%0D%0ATXVldXMzcFdsMERic0JoSQ0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ждать ответ от верификации&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Для всех конструкторов&lt;/strong&gt; если сработал свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt; отправлять на доработку с ошибкой &amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot; (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;После ответа верификации делать дополнительные проверки (описаны ниже) если проверка пройдена, то одобрять семейную программу, иначе посылать доработку (текст ошибок описан ниже) (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Условия успешной проверки:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    (parent_last_name_1 &amp;amp; parent_first_name_1 == last_name &amp;amp; first_name ИЛИ parent_first_name_1 &amp;amp; parent_patronymic_name_1 == first_name &amp;amp; patronymic_name) И (parent_last_name_2 &amp;amp; parent_first_name_2 = last_name &amp;amp; first_name ИЛИ parent_first_name_2 &amp;amp; parent_patronymic_name_2 = first_name &amp;amp; patronymic_name):\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;ФИО родителя не совпадает с ФИО из анкеты&amp;quot;\n\nЕсли   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 216 ИЛИ которых целое_число_месяцев(текущая дата - \n           date_of_birth_2)  &amp;lt; 216) &amp;gt;= 2 :\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Один из детей старше 17-ти лет. Приложите другой документ&amp;quot;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586874109222&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1822&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1840&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Шаг 5, госпрограмма 1 (РГС) L (1).png&quot;,&quot;id&quot;:&quot;88-27116&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27116?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcxMTZ8cHRocnJXS1hDMjdVNVZrYUVTNFVHMUx5TWdE%0D%0AZGQ1d0tfSnplaEdwZGhjOA0K%0D%0A&amp;updated=1584956620645&quot;},{&quot;value&quot;:&quot;конструктор - договор и свидетельство (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27223&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27223?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMjN8aVBuU3VWX0Vlb0pIbk5wb3lsNnBHWnJQb2Qw%0D%0ASnFTRzluMExPUUZpOHAwbw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27224&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27224?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMjR8dGozdFJlb1U4cXU4MXphM2N3ZmptMzFYOU1R%0D%0AOTFtM3RTcjhVb1NnV2VYMA0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27225&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27225?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMjV8bDktSmcwZzRMcnBNa1FmVE10SnNHNVMtWW02%0D%0AbXY4M1V4bVh1M0JYczRqVQ0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27227&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27227?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMjd8WmNudnhvNzBtbkJlMXFMdzdZVVhTaFZ5X2Ja%0D%0AZG5JX01zdk9oVVVzVHo0Zw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конуструктор - свидетельство (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27228&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27228?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMjh8ZmFBMjVseWRubGFfd1VwSHhtR0NDRFpKX1gz%0D%0ARnBYZ3QxRDBKUjdnRk93MA0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - договор и свидететльство (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27229&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27229?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMjl8SVpueUVzTFcwQTJDTGtrODByd1M3RDd3NlR0%0D%0AX1V0RUp4amVEZnJudTNLOA0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27230&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMzB8UzlMdlFSRHJqRUJuVzF0V3RkYXcwTk1EcXBF%0D%0ATzlJX05qeW1VZ0JoY1l0Yw0K%0D%0A&amp;updated=1585131097983&quot;},{&quot;value&quot;:&quot;конструкто - договор и свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27231&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27231?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMzF8cFhOSnJkZjhxbFVUcm50YjdTaV9zYkNjWU9i%0D%0ANTBxeWl3YlVzeEQyME1rVQ0K%0D%0A&amp;updated=1585131097983&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье.txt&quot;,&quot;id&quot;:&quot;88-27232&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27232?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyMzJ8WUhQTnRXVG8tbWYyQUl1ME00RkNmMFJBbUh1%0D%0AeExEQWVaX0pkUVlmTmlMdw0K%0D%0A&amp;updated=1585131097983&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54805&quot;,&quot;author&quot;:&quot;alexander.kan&quot;,&quot;authorFullName&quot;:&quot;Александр Кан&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;заменил конструктор для двух договоров о приемной семье - убрал селектор&lt;/li&gt;\n&lt;li&gt;добавил ответы для каждого&lt;/li&gt;\n&lt;li&gt;для полей фио в каждом конструкторе нужно подавать на вход данные из анкеты&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585131076405,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54888&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm_ng_engine_version: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1880\&quot; title=\&quot;BPM Распознавание договоров о приемной семье, опекунах\&quot; data-issue-id=\&quot;86-79398\&quot;&gt;ARGS-1880&lt;/a&gt;&lt;br/&gt;bpm_ng_composite_version: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1880\&quot; title=\&quot;BPM Распознавание договоров о приемной семье, опекунах\&quot; data-issue-id=\&quot;86-79398\&quot;&gt;ARGS-1880&lt;/a&gt;&lt;br/&gt;bpm_ng_state_machines_versions:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;version_name: pre_release&lt;br/&gt;import_name: sm1&lt;br/&gt;name: sm_rgsb&lt;br/&gt;version_tag: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1880\&quot; title=\&quot;BPM Распознавание договоров о приемной семье, опекунах\&quot; data-issue-id=\&quot;86-79398\&quot;&gt;ARGS-1880&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585150645572,&quot;updated&quot;:1586353128473,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55259&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В рамках долго разработчика нужно заменить доступ к параметрам из request: на verified: и поправить тесты.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585573810741,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1976&quot;,&quot;entityId&quot;:&quot;86-81369&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Рисковик - одобрение, параметры выданного кредита, проверка залога_BPM REPORTS&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586426030491&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1976&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Доработать отображение истории одобренных заявок&lt;/li&gt;\n&lt;li&gt;Доработать отображение продукта и типа ТС&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Решение:&lt;/h1&gt;\n&lt;h2&gt;BPM_Reports&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Убрать условие, реализованное в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1674\&quot; title=\&quot;Добавить в рисковик данные по программе &amp;quot;Залоговый кредит на любое ТС&amp;quot;\&quot; data-issue-id=\&quot;86-75895\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1674&lt;/a&gt;. Передавать в полях &lt;code class=\&quot;inline-code\&quot;&gt;rpf_&lt;/code&gt; всегда значения для беззалогового кредита&lt;/li&gt;\n&lt;li&gt;Передавать значения для &amp;quot;залогового кредита на любое тс&amp;quot; из блока &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; approval_history -&amp;gt; rgsb_pledge_true_every_ts&lt;/code&gt;, если &lt;code class=\&quot;inline-code\&quot;&gt;flag_approve == true&lt;/code&gt; по продукту, в полях:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;rptet_risk_grade&lt;/li&gt;\n&lt;li&gt;rptet_segment&lt;/li&gt;\n&lt;li&gt;rptet_ch_quality&lt;/li&gt;\n&lt;li&gt;rptet_pd&lt;/li&gt;\n&lt;li&gt;rptet_initial_payment_fraction&lt;/li&gt;\n&lt;li&gt;rptet_initial_payment&lt;/li&gt;\n&lt;li&gt;rptet_super_min_initial_payment&lt;/li&gt;\n&lt;li&gt;rptet_incoming_payment&lt;/li&gt;\n&lt;li&gt;rptet_other_income_confirmed&lt;/li&gt;\n&lt;li&gt;rptet_other_total_income&lt;/li&gt;\n&lt;li&gt;rptet_other_max_payment&lt;/li&gt;\n&lt;li&gt;rptet_dti_incoming&lt;/li&gt;\n&lt;li&gt;rptet_dti_total&lt;/li&gt;\n&lt;li&gt;rptet_max_limit&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Отправлять &lt;del&gt;для продукта rgsb_pledge_true_every_ts&lt;/del&gt; на BACK поле &lt;code class=\&quot;inline-code\&quot;&gt;d_credit_term&lt;/code&gt; (&lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; request -&amp;gt;conditions -&amp;gt; credit_term&lt;/code&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586869433305&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1964&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1967&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;,&quot;Рисковик&quot;,&quot;Reports&quot;],&quot;valueId&quot;:[&quot;BPM&quot;,&quot;Рисковик&quot;,&quot;Reports&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-27927&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27927?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc5Mjd8ZVRLZmU3R0JNeTZsci04M1REX29rc0FmM1Y2%0D%0AeXBENjQ4NEVDRkFVM2VrOA0K%0D%0A&amp;updated=1586426030506&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1967&quot;,&quot;entityId&quot;:&quot;86-81269&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Починить flag_approve&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586359794626&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1967&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h2&gt;Цель&lt;/h2&gt;\n&lt;p&gt;Починить проставление флага flag_approve&lt;/p&gt;\n&lt;h2&gt;Решение&lt;/h2&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;h2&gt;Как сейчас&lt;/h2&gt;\n&lt;p&gt;После первого одобрения кредитного лимита (т.е. все флаги абакуса из блока flags != true И от партнерки флаг (irr_very_big) != true) во флаг &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; approval_history -&amp;gt; rgsb_pledge_true (rgsb_pledge_true_every_ts, rgsb_pledge_false) -&amp;gt; flag_approve&lt;/code&gt; пишется &lt;strong&gt;NULL&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Примеры неправильных заявок:&lt;/strong&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15734/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15734/details/&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14979/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14979/details/&lt;/a&gt;&lt;/p&gt;\n&lt;h2&gt;Как надо&lt;/h2&gt;\n&lt;p&gt;В рамках задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1460\&quot; title=\&quot;Approval_history\&quot; data-issue-id=\&quot;86-71894\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1460&lt;/a&gt; необходимо, &lt;strong&gt;начиная с первого одобрения кредитного лимита,&lt;/strong&gt;  записывать условия по продукту и проставлять признак flag_approve равный true (если все флаги абакуса из блока flags != true И от партнерки флаг (irr_very_big) != true),  иначе  и flag_approve равен false.&lt;br/&gt;Перезаписываем условия только тогда, когда кредит снова одобрили: flag_approve=true&lt;/p&gt;\n&lt;h2&gt;Тест кейс&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создать заявку в пп, дойти до 6 шага, получить одобрение кредитного лимита (получить одобрение условий по продукту или получить неодобрение)&lt;/li&gt;\n&lt;li&gt;В BPM должен быть заполнен блок &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; approval_history -&amp;gt; rgsb_pledge_true (rgsb_pledge_true_every_ts, rgsb_pledge_false)&lt;/code&gt; и flag_approve = true (true&lt;br/&gt;если одобрен, false если не одобрен)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586869407956&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1974&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1975&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1976&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1964&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1806&quot;,&quot;entityId&quot;:&quot;86-78314&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Заявка не реагировала на восстановление сделки&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Евгений Панков&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583854609890&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1806&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Заявка 3437285 не реагирована на команду восстановления сделки, из за падения в таймаут делайн перед сменой дня. Можно ли как то доработать систему дабы избежать подобных зависаний? ( или сделать кнопку &amp;quot;восстановления сделки&amp;quot; недоступной при активной ошибке из ЦФТ.&lt;/p&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26738?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjY3Mzh8Q2ctT1ZPano3RG9MSmJwSTJiYnlqN3lWU201%0D%0ALVJUNVRoMTNFUDBJd1VQRQ0K%0D%0A&amp;amp;updated=1583854306698\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26738\&quot; /&gt;   &lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26739?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjY3Mzl8TmVEVFExZmM5R3ZnUUxrT29HMGdBNUFyR0t6%0D%0AX2NUeVZGMGlub202SHdiVQ0K%0D%0A&amp;amp;updated=1583854567624\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26739\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.pankov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586867286127&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26738&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26738?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY3Mzh8aFd1RkNMMWxfTzJ4OTNHS0JTVTQtXzRrb2lo%0D%0ASm5kbldlX0RQRU85NFdsNA0K%0D%0A&amp;updated=1583854306698&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26739&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26739?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY3Mzl8RmZxaDdQcTBJU1FJOXF5RFFmbEcwd3FQSUho%0D%0AX1IteWRKMlFtLXNJckhfVQ0K%0D%0A&amp;updated=1583854567624&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1969&quot;,&quot;entityId&quot;:&quot;86-81292&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Шасси_РОДИТЕЛЬ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586365488672&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1969&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Сделать поле шасси на 6 шаге не обязательным для заполнения&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;h2&gt;Back&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;На 6 шаге убрать валидацию обязательного заполнения поля шасси&lt;/li&gt;\n&lt;li&gt;Если в &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; номер шасси  &lt;code class=\&quot;inline-code\&quot;&gt;(params -&amp;gt; car -&amp;gt; chassis_number)&lt;/code&gt; не равен номеру шасси на BACK &lt;code class=\&quot;inline-code\&quot;&gt;(vehicle -&amp;gt; chassis_number)&lt;/code&gt;, то обновлять номер шасси на BACK из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condititon&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если в сообщении &lt;code class=\&quot;inline-code\&quot;&gt;check_object&lt;/code&gt; поле &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; vehicle -&amp;gt; chassis_number&lt;/code&gt; &lt;strong&gt;== NULL&lt;/strong&gt;,&lt;br/&gt;&lt;strong&gt;ТО отправлять измененный конструктор заданий&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;ПТС/ЕПТС/ИНФОПИСЬМА ПТС/ИНФОПИСЬМА ЕПТС&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Убрать входные данные для поля &lt;strong&gt;chassis&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Убрать  параметр &lt;strong&gt;reject&lt;/strong&gt; из поля  &lt;strong&gt;chassis&lt;/strong&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;Пример&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;chassis&amp;quot;: {\n                &amp;quot;do_recheck&amp;quot;: true\n            }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;ИНАЧЕ отправлять конструкторы как сейчас&lt;/strong&gt;&lt;/p&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Не отправлять на доработку по шасси (&lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; chassis&lt;/code&gt;) если в ответе от верификации  &lt;code class=\&quot;inline-code\&quot;&gt;(document_vehicle_passport&lt;/code&gt; или &lt;code class=\&quot;inline-code\&quot;&gt;document_electronic_vehicle_passport)&lt;/code&gt; признак &lt;code class=\&quot;inline-code\&quot;&gt;is_valid == false&lt;/code&gt; (признак успешного прохождения проверки)&lt;/li&gt;\n&lt;li&gt;Всегда отправлять в &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition (params -&amp;gt; car -&amp;gt; chassis_number)&lt;/code&gt; из ответа верификации поле шасси &lt;code class=\&quot;inline-code\&quot;&gt;(params -&amp;gt; chassis -&amp;gt; out)&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Тест кейс&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Дойти до 6 шага. Не вводить номер шасси. Перейти на след шаг. Не должна срабатывать валидацию&lt;/li&gt;\n&lt;li&gt;Должно быть создано задание на верификацию. После выполнения задания в ПП должен отобразится номер шасси, введенный верификаторами&lt;/li&gt;\n&lt;li&gt;Дойти до 6 шага. Ввести номер шасси. перейти на след шаг&lt;/li&gt;\n&lt;li&gt;Должно быть создано задание на верификацию. Ввести на верификации номер шасси отличный от пп. В пп не должна придти доработка по полю шасси. Поле на back должно стать равным полю, введенным верификатором.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586864706266&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1979&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1980&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Major&quot;],&quot;valueId&quot;:[&quot;Major&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;anna.kravchenko&quot;,&quot;fullName&quot;:&quot;Анна Кравченко&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;шасси.docx&quot;,&quot;id&quot;:&quot;88-27905&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27905?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc5MDV8SjM5WVJUcXhpX3VkWmJzazhYd2puSVdQME5L%0D%0AVUJjRXl5LXBwSUdmd21Xaw0K%0D%0A&amp;updated=1586365486924&quot;},{&quot;value&quot;:&quot;image1586862189943.png&quot;,&quot;id&quot;:&quot;88-28057&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28057?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNTd8N2J0SXhjSDQ3QjRkNkdUNlVtVHA0cnM3TDFC%0D%0AQVludXFnMVlqdWFORGZqOA0K%0D%0A&amp;updated=1586862190496&quot;},{&quot;value&quot;:&quot;image1586862200520.png&quot;,&quot;id&quot;:&quot;88-28058&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28058?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjgwNTh8aUwxaXg4dmZUSF9ESFdETkc0TlNUdEs4N1Ba%0D%0AZldpREwzVklUbnBuU0pUUQ0K%0D%0A&amp;updated=1586862201105&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-56826&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1969&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Кейс:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Дойти до 6 шага. Не вводить номер шасси. Перейти на след шаг. Не должна срабатывать валидацию&lt;br/&gt;Должно быть создано задание на верификацию. После выполнения задания в ПП должен отобразится номер шасси, введенный верификаторами&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28057?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjgwNTd8aFN1QVJGcnB5cVJWbjZ0TWZIaWFDMVl3WVJ2%0D%0AWXc2cHZWUmpET1hWOHVuNA0K%0D%0A&amp;amp;updated=1586862190496\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-28057\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-28058?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjgwNTh8Zl90U2szNTc4VU1PNlkycWpuVThnc3NTTjZl%0D%0ALXYwTVBnZlhWMlphdjBmYw0K%0D%0A&amp;amp;updated=1586862201105\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-28058\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;Тестовая заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16247/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16247/details/&lt;/a&gt; , ПТС&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Убрать входные данные для поля chassis&lt;br/&gt;Убрать параметр reject из поля chassis&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;chassis&amp;quot;: {\n&amp;quot;in&amp;quot;: &amp;quot;&amp;quot;,\n&amp;quot;reject&amp;quot;: false,\n&amp;quot;do_recheck&amp;quot;: true\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Проверены ПТС, ЭПТС, Инф. письмо ПТС, Инф. письмо ЭПТС&lt;/p&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586862213554,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56831&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1969&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Задача протестирована ФР == ОР, комментарии см. по ссылкам&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1979#focus=streamItem-96-56827.0-0\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;Шасси_BACK - кейс 3 и 4&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1979#focus=streamItem-96-56829.0-0\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;Шасси_BACK - кейс выдача + бумага&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586864706268,&quot;updated&quot;:1586864717253,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1980&quot;,&quot;entityId&quot;:&quot;86-81403&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Шасси_BPM&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586433868720&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1980&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Сделать поле шасси на 6 шаге не обязательным для заполнения&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если в сообщении &lt;code class=\&quot;inline-code\&quot;&gt;check_object&lt;/code&gt; поле &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; vehicle -&amp;gt; chassis_number&lt;/code&gt; &lt;strong&gt;== NULL&lt;/strong&gt;,&lt;br/&gt;&lt;strong&gt;ТО отправлять измененный конструктор заданий&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;ПТС/ЕПТС/ИНФОПИСЬМА ПТС/ИНФОПИСЬМА ЕПТС&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Убрать входные данные для поля &lt;strong&gt;chassis&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Убрать  параметр &lt;strong&gt;reject&lt;/strong&gt; из поля  &lt;strong&gt;chassis&lt;/strong&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;Пример&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;chassis&amp;quot;: {\n                &amp;quot;do_recheck&amp;quot;: true\n            }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;ИНАЧЕ отправлять конструкторы как сейчас&lt;/strong&gt;&lt;/p&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Не отправлять на доработку по шасси (&lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; chassis&lt;/code&gt;) если в ответе от верификации  &lt;code class=\&quot;inline-code\&quot;&gt;(document_vehicle_passport&lt;/code&gt; или &lt;code class=\&quot;inline-code\&quot;&gt;document_electronic_vehicle_passport)&lt;/code&gt; признак &lt;code class=\&quot;inline-code\&quot;&gt;is_valid == false&lt;/code&gt; (признак успешного прохождения проверки)&lt;/li&gt;\n&lt;li&gt;Всегда отправлять в &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition (params -&amp;gt; car -&amp;gt; chassis_number)&lt;/code&gt; из ответа верификации поле шасси &lt;code class=\&quot;inline-code\&quot;&gt;(params -&amp;gt; chassis -&amp;gt; out)&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Тест кейс&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Дойти до 6 шага. Не вводить номер шасси. Перейти на след шаг. Не должна срабатывать валидацию&lt;/li&gt;\n&lt;li&gt;Должно быть создано задание на верификацию. После выполнения задания в ПП должен отобразится номер шасси, введенный верификаторами&lt;/li&gt;\n&lt;li&gt;Дойти до 6 шага. Ввести номер шасси. перейти на след шаг&lt;/li&gt;\n&lt;li&gt;Должно быть создано задание на верификацию. Ввести на верификации номер шасси отличный от пп. В пп не должна придти доработка по полю шасси. Поле на back должно стать равным полю, введенным верификатором.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586864434196&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1969&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Major&quot;],&quot;valueId&quot;:[&quot;Major&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;шасси.docx&quot;,&quot;id&quot;:&quot;88-27938&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27938?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc5Mzh8TUNKMUFaN3ZZVUFOYjNwUXJrLUVGbmNqVFZF%0D%0ASDRYSkJVejhsd29QamdKYw0K%0D%0A&amp;updated=1586433868724&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-56677&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1980&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1980\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1980\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586526744083,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1926&quot;,&quot;entityId&quot;:&quot;86-80323&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Четкое объяснение доработок&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585664736749&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1926&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;От банка:&lt;br/&gt;Есть ли возможность при ошибках верификации более корректно указывать причину доработки в следующем случае:&lt;br/&gt;например, при отсутствии подписи в документах, БП выдает ошибку, что подписи не совпадают. Сотрудник печатает документы, прикладывает снова, и опять выдает ошибку.&lt;br/&gt;А реальная причина была в том, что не хватало 1 подписи на странице.&lt;br/&gt;Замечание не критичное, но было бы здорово, если бы смогли скорректировать.&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Дополнить (конкретизировать) отображение доработок в ПП&lt;/p&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;p&gt;Доработать задания, посылаемые на верификацию:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_signature&lt;/code&gt; (Анкета-заявление) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfTheClient&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27711?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc3MTF8amh0dFdOZ3JZSlIzQzZVUGtqUGFER09xbGxY%0D%0AV0lJN29NNUpscHNHREhmVQ0K%0D%0A&amp;amp;updated=1585843347754\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если для скана сработал свитч thereIsASignatureOfTheClient, то необходимо посылать в deal_revision_state в сообщении deal_revision доработку на BACK по скану (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_signature&lt;/code&gt; (Договор-залога) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfThePledger&lt;/code&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfThePledgeHolder&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27712?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc3MTJ8Ni1WblpFYm5QN1VBX2w5LTc0S0R3eWJTRU16%0D%0AQW9sMjVCSDE3UzM5VG50WQ0K%0D%0A&amp;amp;updated=1585846734855\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если для скана сработал свитч thereIsASignatureOfThePledger, то необходимо посылать в deal_revision_state в сообщении deal_revision доработку на BACK по скану (текст ошибки из свитча), иначе как сейчас\n___\nЕсли сработал свитч thereIsASignatureOfThePledgeHolder, то необходимо посылать в deal_revision_state в сообщении deal_revision доработку на BACK по договору залогу (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_constructor&lt;/code&gt; (Соглашение о взаимодействии) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfTheClient&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27734?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc3MzR8Y1NqUWZWbjFDZnBwam5RNlFTUm1WSVMxNzhL%0D%0AZm1VY1Ezdmd2Q1FYZXcwRQ0K%0D%0A&amp;amp;updated=1585895411403\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если сработал свитч thereIsASignatureOfTheClient, то необходимо посылать в deal_revision_state в сообщении deal_revision на BACK доработку (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_signature&lt;/code&gt; (Индивидуальные условия) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfTheClient&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27737?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc3Mzd8M2s5ZEJ0YUJUUzF1WWFkbzRWQ1dlaGxuYWZy%0D%0AeUMwQjdTUHlkU2xSaHg1dw0K%0D%0A&amp;amp;updated=1585895711871\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если для скана сработал свитч thereIsASignatureOfTheClient, то необходимо посылать в deal_revision_state в сообщении deal_revision на BACK доработку по скану (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Тест-кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;После прохождения 9 шага ПП должны создаваться по приложенным документам проверки на верификацию. Если в заданиях &amp;quot;Проверка подписей Анкета-заявление&amp;quot;, &amp;quot;Проверка подписей Индивидуальные условия&amp;quot; сработал свитч thereIsASignatureOfTheClient, то должна приходить доработка для скана&lt;/li&gt;\n&lt;li&gt;После прохождения 9 шага ПП должны создаваться по приложенным документам проверки на верификацию.  Если в задании &amp;quot;Проверка договор-залога&amp;quot; сработал свитч thereIsASignatureOfThePledger, то должна приходить доработка по скану&lt;/li&gt;\n&lt;li&gt;После прохождения 9 шага ПП должны создаваться по приложенным документам проверки на верификацию. Если в задании &amp;quot;Проверка договор-залог&amp;quot; сработал свитч thereIsASignatureOfThePledgeHolder,  то должна приходить доработка по договор залогу&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586792348739&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1381&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;анкета-заявление отрицательный ответ по скану.txt&quot;,&quot;id&quot;:&quot;88-27710&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27710?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MTB8b2RnaXJqUW03X3ljcEdDZ3F2TmlMeTdUZXNJ%0D%0AS0MtMjFXdFEyMVJLeW1XQQ0K%0D%0A&amp;updated=1585843347754&quot;},{&quot;value&quot;:&quot;конструктор анкета-заявление.txt&quot;,&quot;id&quot;:&quot;88-27711&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27711?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MTF8M0dzYnZfUW11LXdERVFOSEZCRWkxT29SZWl5%0D%0AZWZHdXBvM0RmOGhHZUkwbw0K%0D%0A&amp;updated=1585843347754&quot;},{&quot;value&quot;:&quot;конструктор договор залога.txt&quot;,&quot;id&quot;:&quot;88-27712&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27712?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MTJ8U1AtQnNyU2owb2J0LVVtdkpXSE1qdGYzS0ZV%0D%0ASkgwdXBCcDBIQ1FzVEZSOA0K%0D%0A&amp;updated=1585846734855&quot;},{&quot;value&quot;:&quot;договр залога отрицательный ответ.txt&quot;,&quot;id&quot;:&quot;88-27713&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27713?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MTN8LWZack5aRGhWc1JOblFFZDM4V2NfME9sSE1Z%0D%0AdUU2MEFUUDE2VGlIVGNHUQ0K%0D%0A&amp;updated=1585846734855&quot;},{&quot;value&quot;:&quot;конструктор свидетельство о взаимодействии.txt&quot;,&quot;id&quot;:&quot;88-27734&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27734?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MzR8Wk1RazZabWRyOTl5cHptdWo5R0R6Q240aWR0%0D%0ASFo2OGxPZHdmUjdqOG5HUQ0K%0D%0A&amp;updated=1585895411403&quot;},{&quot;value&quot;:&quot;свидетельство о взаимодействии отриательный ответ.txt&quot;,&quot;id&quot;:&quot;88-27735&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27735?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MzV8ME40d3hBYVgxNFhTeDNXTGJQbWoxT29vQWZH%0D%0AWW9JaG9QNUVqQTBmNXJBcw0K%0D%0A&amp;updated=1585895411403&quot;},{&quot;value&quot;:&quot;индивидуальные условия отрицательный ответ.txt&quot;,&quot;id&quot;:&quot;88-27736&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27736?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MzZ8d3dwTGs4cWRBVjNrMHFBSGhEWVh1QWRzWjRk%0D%0ANlZmamZ4Nl91RWpEZ1RnTQ0K%0D%0A&amp;updated=1585895711872&quot;},{&quot;value&quot;:&quot;конструктор индивидуальные условия.txt&quot;,&quot;id&quot;:&quot;88-27737&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27737?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3Mzd8WTlFaHdLVEw0TGpoMmZZbkVIQ0lXWElLdkUy%0D%0ANXhpREJ0TUlCTzJFemdIMA0K%0D%0A&amp;updated=1585895711871&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-56779&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1926&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1926\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1926\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586788833668,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1728&quot;,&quot;entityId&quot;:&quot;86-77025&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Добавление дополнительного контактного номера клиента&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582269191433&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1728&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;8824&lt;/p&gt;\n&lt;h2&gt;Дизайн&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Дизайн&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо отрисовать макет &lt;strong&gt;Шаг 1, Общие сведения&lt;/strong&gt; с полем (ячейкой) для ввода дополнительного контактного номера клиента. Поле (ячейка) должна называться &lt;strong&gt;Дополнительные номер&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;Отрисовать валидацию (под полем), если введенный номер совпадает с основным. Текст валидации: &amp;quot;Не должен совпадать с основным мобильным&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;ПП FRONT&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt; фронт&lt;/label&gt;&lt;br/&gt;Изменить первый шаг, согласно приложенным шаблонам.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Поле (ячейка) &lt;strong&gt;Дополнительный номер&lt;/strong&gt; должно отвечать следующим требованиям:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Должны быть все валидации, что и у поля &lt;strong&gt;Мобильный телефон&lt;/strong&gt;;&lt;/li&gt;\n&lt;li&gt;Плейсхолдер (шаблон) должен быть что и у поля &lt;strong&gt;Мобильный телефон&lt;/strong&gt;;&lt;/li&gt;\n&lt;li&gt;Дополнительный номер не должен совпадать с основным номером (поле &lt;strong&gt;Мобильный телефон&lt;/strong&gt;);&lt;/li&gt;\n&lt;li&gt;Поле &lt;strong&gt;Дополнительные номер&lt;/strong&gt; необязательно для заполнения.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;ПП BACK&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; бэк&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Для хранения дополнительного контактного номера клиента, необходимо в таблицу &lt;strong&gt;msisdns&lt;/strong&gt;&lt;br/&gt;записывать новую строку с атрибутом is_current is FALSE, если в заявке он указан.&lt;/li&gt;\n&lt;li&gt;Передавать на BPM доп номер в блоке &amp;quot;additional_msisdn&amp;quot; (аналогично основному номеру, см. структуру в блоке BPM п.1)&lt;br/&gt;Для ИнФО: Таким образом, у заемщика может быть 1 основной (is_current is TRUE) и 1 дополнительный номер телефона (is_current is FALSE).&lt;br/&gt;При изменении основного или дополнительного номера телефона, должны перезаписываться текущие данные (msisdn, updated_at).&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt; BPM&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать от партнерки в extend допномер клиента в блоке &amp;quot;additional_msisdn&amp;quot;:&lt;br/&gt;Должен выглядеть так:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;additional_msisdn&amp;quot;: {\n&amp;quot;id&amp;quot;: 14626,\n&amp;quot;state&amp;quot;: 0,\n&amp;quot;msisdn&amp;quot;: 79099099990,\n&amp;quot;created_at&amp;quot;: &amp;quot;2020-02-28T09:30:01.519Z&amp;quot;,\n&amp;quot;is_current&amp;quot;: false,\n&amp;quot;updated_at&amp;quot;: &amp;quot;2020-02-28T09:30:01.519Z&amp;quot;,\n&amp;quot;customer_id&amp;quot;: 14642\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В memory добавить и сохранять новый атрибут &lt;strong&gt;additional_phone&lt;/strong&gt; в блоке &lt;code class=\&quot;inline-code\&quot;&gt;requets-&amp;gt;additional_phone&lt;/code&gt; (после атрибута &lt;strong&gt;phone&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;На вопросник по Клиенту отправлять оба номера телефона.  В блоке &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt; phones-&amp;gt;client-&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;client-&amp;gt;additional_phones&lt;/code&gt;&lt;br/&gt;Принимать ответы по всем номерам.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;UserData&lt;/h2&gt;\n&lt;p&gt;Необходимо в userdata записывать доп номер по клиенту: type_user=user. ! ПОСМОТРЕТЬ, НА ЧТО ЭТО ПОВЛИЯЕТ!&lt;br/&gt;Почему записывать с таким же типом?&lt;br/&gt;Потом что по нему должны срабатывать фичи как по соновному номеру:&lt;br/&gt;Фича №2 - Номер мобильного телефона клиента совпадает с номером телефона другого клиента - &amp;quot;client_phone_other_user_client&amp;quot;&lt;br/&gt;Фича №4 - Номер мобильного телефона контактного лица совпадает с номером другого клиента  по user data - &amp;quot;contact_phone_other_user_client&amp;quot;&lt;/p&gt;\n&lt;h2&gt;Мегафон&lt;/h2&gt;\n&lt;p&gt;За один запрос проверки телефона можно проверить только один телефон.&lt;br/&gt;Так как у нас теперь будет 2 телефона, необходимо делать 2-й запрос в мегафон, только если указано 2 номера телефона.&lt;/p&gt;\n&lt;p&gt;Необходимо так же как и с основным номером телефона запрашивать:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;скор (&amp;quot;SCORE&amp;quot;)&lt;/li&gt;\n&lt;li&gt;срок действия номера (&amp;quot;LIFETIME_BIN&amp;quot;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Полученную информацию (&amp;quot;value&amp;quot;, &amp;quot;status&amp;quot;) логировать и добавить в memory.&lt;/p&gt;\n&lt;p&gt;Фичи по мегафону должны срабатывать аналогично фичам с основным номеров : фичи 11 и 12&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;11&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586788291522&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1774&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1786&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1963&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1997&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Окружение&quot;,&quot;value&quot;:[&quot;uat&quot;],&quot;valueId&quot;:[&quot;uat&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;xxxx_АВТO_КН_Добавление контактного номера телефона.docx&quot;,&quot;id&quot;:&quot;88-26031&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26031?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjYwMzF8VnR3dENUQk8yTzU0aHQ0RU5ZTk5FcFlqWFpN%0D%0AM2k0WFVPVzQ1Tnc4dUN5WQ0K%0D%0A&amp;updated=1582269200557&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26142&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26142?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjYxNDJ8c2Q5WklEbHczTjN1U3Y2LV9ibUhaR091eG44%0D%0AUGU1YTJNSHNoaW96MUJGMA0K%0D%0A&amp;updated=1582637178984&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26161&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26161?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjYxNjF8ZTV1cWFsX2VmQ2VGc0VvMTlicURFOEJaR1B1%0D%0AaDM5QkhFR2pIZjR4VnR2MA0K%0D%0A&amp;updated=1582702974711&quot;},{&quot;value&quot;:&quot;8824_АВТО+КН. Добавление контактного номера телефона.docx&quot;,&quot;id&quot;:&quot;88-26284&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26284?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjYyODR8NDY4amdLMm5XbjYtR3ZUWUJhcS0tUXVWMHVE%0D%0ANDRoV1JuQkRxbjZ6T2tpZw0K%0D%0A&amp;updated=1582875749253&quot;},{&quot;value&quot;:&quot;image1584633539259.png&quot;,&quot;id&quot;:&quot;88-27057&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27057?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcwNTd8bjBkOUZXVU9oZDdXamFjUEJHbGpmdkFHRWtB%0D%0AT1BZdHRYUGVDbXBYVE40bw0K%0D%0A&amp;updated=1584633539910&quot;},{&quot;value&quot;:&quot;image1584633573143.png&quot;,&quot;id&quot;:&quot;88-27058&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27058?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcwNTh8cFRheXNTMV9udlFaUUE3cmVqTzR3V2RDOExW%0D%0AbE90aVFWRlVOVnJJNlRvSQ0K%0D%0A&amp;updated=1584633573714&quot;},{&quot;value&quot;:&quot;image1584633586885.png&quot;,&quot;id&quot;:&quot;88-27059&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27059?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcwNTl8d0hzWlpWeUQtUVQ5YXhYRzRBYUl5eDdqQXdF%0D%0AZTZMQVNUNUtvUHFYYzNuQQ0K%0D%0A&amp;updated=1584633587462&quot;},{&quot;value&quot;:&quot;image1584707470195.png&quot;,&quot;id&quot;:&quot;88-27077&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27077?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcwNzd8UFpRNkY2eTh2dmwwbnFwVW5KRFpOQnhZUU95%0D%0AMUhILVMwWlo5Qmt5eldGdw0K%0D%0A&amp;updated=1584707470848&quot;},{&quot;value&quot;:&quot;image1584707523759.png&quot;,&quot;id&quot;:&quot;88-27078&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27078?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcwNzh8V0Y0bktYQ0NLemdVTktMdzBZQlZRaUNGOWtN%0D%0ARjRHTXctZFhaRXJQX2k2UQ0K%0D%0A&amp;updated=1584707524257&quot;},{&quot;value&quot;:&quot;image1584707599477.png&quot;,&quot;id&quot;:&quot;88-27079&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27079?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcwNzl8d25lWmczNFpzajNUaTlhMFRsb3VIbzZ2aUt6%0D%0AamtNeTYxcF8tU25nSlhzYw0K%0D%0A&amp;updated=1584707600137&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52196&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Доработки: Фронт, бэк, бпм, вопросник, мегафон (допномер), интеграция с цфт (использование допномера).&lt;/p&gt;\n&lt;p&gt;Вопросы: как повлияет допномер на фичи? нужна инфа от рисков.&lt;/p&gt;\n&lt;p&gt;Предварительно: 20SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582291138804,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52591&quot;,&quot;author&quot;:&quot;vitaly.pervoy&quot;,&quot;authorFullName&quot;:&quot;Виталий Первой&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;По вопроснику доработок не требуется (Паша Косых)&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582815693162,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52842&quot;,&quot;author&quot;:&quot;vitaly.pervoy&quot;,&quot;authorFullName&quot;:&quot;Виталий Первой&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Задача на интеграцию с ЦФТ по дополнительному номеру выделена в отдельную задачу - &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1774\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://balance.myjetbrains.com/youtrack/issue/ARGS-1774&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583157261445,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52916&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка ПП &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583237983390,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53415&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветки&lt;br/&gt;bpm_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;br/&gt;rgsb_userdata_ng_main_version: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583925089469,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54206&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;по комментарию разработчиков - &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.bogomolov\&quot; title=\&quot;Алексей Богомолов\&quot; data-user-id=\&quot;24-208\&quot;&gt;@Алексей Богомолов&lt;/a&gt;  - требуется более детальное описание задачи по части разработки и валидации полей&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584627850465,&quot;updated&quot;:1584627890130,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54207&quot;,&quot;author&quot;:&quot;a.bogomolov&quot;,&quot;authorFullName&quot;:&quot;Алексей Богомолов&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;у нас везде вся валидация на бэке&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584628072504,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54236&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1 Дизайн ПП FRONT &lt;strong&gt;ОР == ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020784\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020784&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ввел только дополнительный номер (ОР==ФР):&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27057?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwNTd8aGdldW85ZmlZVEtuRFI5NkZadU1sMHJWWkVX%0D%0AdmNTUVRqR1hEbnI0a18xaw0K%0D%0A&amp;amp;updated=1584633539910\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27057\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Ввел только «Мобильный телефон» перешел на 2 шаг (ОР == ФР).&lt;/li&gt;\n&lt;li&gt;Ввел два одинаковых номера (ОР==ФР):&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27058?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwNTh8UkoweUpRQjJwWnNYZkxJcWQ3Q19PR0d2eW1p%0D%0AZTI3ckJ4LXM4S0s5Z2lzbw0K%0D%0A&amp;amp;updated=1584633573714\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27058\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Ввел два номера телефона: дополнительный и основной (ОР==ФР).&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27059?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwNTl8VlNKRk5hOFRHNmtvME9RdzFRWnVjNnVWR2pX%0D%0AR1dFcTNvZXY2SllCZGZUSQ0K%0D%0A&amp;amp;updated=1584633587462\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27059\&quot; /&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584633642407,&quot;updated&quot;:1584711016606,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54356&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 2  ПП BACK, BPM :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020851\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020851&lt;/a&gt;&lt;br/&gt;Указал два номера:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27077?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwNzd8TC16MlZtdEFkODhyLUhCM0VMaWdNcDhidmct%0D%0AaXJuYmhXQ20yc25abDVHYw0K%0D%0A&amp;amp;updated=1584707470848\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27077\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Прошел верификацию.&lt;/li&gt;\n&lt;li&gt;Прошел верификацию автомобиля.&lt;/li&gt;\n&lt;li&gt;Открыл консоль:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;Для хранения дополнительного контактного номера клиента, необходимо в таблицу msisdns&lt;br/&gt;записывать новую строку с атрибутом is_current is FALSE, если в заявке он указан.&amp;quot;&lt;/p&gt;\n&lt;p&gt;additional_msisdn: {id: 16126, msisdn: 79994446666, state: 0, is_current: false, customer_id: 16080,…}&lt;br/&gt;1. id: 16126&lt;br/&gt;2. msisdn: 79994446666&lt;br/&gt;3. state: 0&lt;br/&gt;4. is_current: false&lt;br/&gt;5. customer_id: 16080&lt;br/&gt;6. created_at: &amp;quot;2020-03-20T09:42:15.037Z&amp;quot;&lt;br/&gt;7. updated_at: &amp;quot;2020-03-20T11:22:48.697Z&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;Передавать на BPM доп номер в блоке &amp;quot;additional_msisdn&amp;quot; (аналогично основному номеру, см. структуру в блоке BPM п.1)&lt;br/&gt;Для ИнФО: Таким образом, у заемщика может быть 1 основной (is_current is TRUE) и 1 дополнительный номер телефона (is_current is FALSE).&lt;br/&gt;При изменении основного или дополнительного номера телефона, должны перезаписываться текущие данные (msisdn, updated_at).&amp;quot;&lt;/p&gt;\n&lt;p&gt;Изменил номер:&lt;/p&gt;\n&lt;p&gt;additional_msisdn: {id: 16124, msisdn: 79993332222, state: 0, is_current: false, customer_id: 16079,…}&lt;br/&gt;1. id: 16124&lt;br/&gt;2. msisdn: 79993332222&lt;br/&gt;3. state: 0&lt;br/&gt;4. is_current: false&lt;br/&gt;5. customer_id: 16079&lt;br/&gt;6. created_at: &amp;quot;2020-03-20T09:40:36.930Z&amp;quot;&lt;br/&gt;7. updated_at: &amp;quot;2020-03-20T09:40:36.930Z&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;В memory добавить и сохранять новый атрибут additional_phone в блоке requets-&amp;gt;additional_phone (после атрибута phone)&amp;quot;&lt;br/&gt;Откры BPM: &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/&lt;/a&gt;&lt;br/&gt;открыл блок «request»:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27078?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwNzh8VW1mNXJYUmVPdkVDM0FnUWFwVGN4TThfRVBf%0D%0AaG5NRUpoSHp6dURtdGFqcw0K%0D%0A&amp;amp;updated=1584707524257\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27078\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;На вопросник по Клиенту отправлять оба номера телефона. В блоке params-&amp;gt; phones-&amp;gt;client-, params-&amp;gt;client-&amp;gt;additional_phones&lt;br/&gt;Принимать ответы по всем номерам.&amp;quot;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27079?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjcwNzl8Y0xOYnlDSkxuU202VFpxRUZDYkRQSzJWM29G%0D%0AbUYyclVDZTNRbklrRHZtdw0K%0D%0A&amp;amp;updated=1584707600137\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27079\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584707748538,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54371&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 3 МЕГАФОН &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;открыл БПМ:&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;megafon&amp;quot;: {&lt;br/&gt;&amp;quot;not_answer&amp;quot;: false,&lt;br/&gt;-&amp;quot;other_phones&amp;quot;: {&lt;br/&gt;+&amp;quot;additional_phone&amp;quot;: { … }&lt;br/&gt;},&lt;br/&gt;&amp;quot;megafon_score&amp;quot;: 5,&lt;br/&gt;&amp;quot;megafon_lifetime&amp;quot;: 5,&lt;br/&gt;&amp;quot;megafon_one_month&amp;quot;: false,&lt;br/&gt;&amp;quot;megafon_three_month&amp;quot;: false,&lt;br/&gt;&amp;quot;megafon_response_received_at&amp;quot;: 1571916146&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584710702132,&quot;updated&quot;:1584710767802,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54372&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 4 UserData &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;br/&gt;Фича №4 - Номер мобильного телефона контактного лица совпадает с номером другого клиента по user data - “contact_phone_other_user_client”&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15489/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15489/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;triggered_features&amp;quot;: [&lt;br/&gt;&amp;quot;3&amp;quot;,&lt;br/&gt;&amp;quot;4&amp;quot;&lt;br/&gt;],&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584710907106,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;},{&quot;value&quot;:&quot;0&quot;,&quot;cssClass&quot;:&quot;c3&quot;}]}, {&quot;id&quot;:&quot;ARGS-1999&quot;,&quot;entityId&quot;:&quot;86-81627&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Изменение СПР по онлайн заявкам&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586783097914&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1999&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h2&gt;Цель&lt;/h2&gt;\n&lt;p&gt;Изменить СПР&lt;/p&gt;\n&lt;h2&gt;FRONT&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;is_online&lt;/code&gt; == &lt;strong&gt;TRUE&lt;/strong&gt;, то не отображать на 9 шаге окошко по кредитной карте&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Передавать признак &lt;code class=\&quot;inline-code\&quot;&gt;is_online&lt;/code&gt; в первом &lt;strong&gt;extend&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать признак &lt;code class=\&quot;inline-code\&quot;&gt;is_online&lt;/code&gt; для заявки от  BACK в первом &lt;strong&gt;extend&lt;/strong&gt;. Сохранять признак &lt;code class=\&quot;inline-code\&quot;&gt;is_online&lt;/code&gt; в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; request&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Передавать признак &lt;code class=\&quot;inline-code\&quot;&gt;is_online&lt;/code&gt; в &lt;strong&gt;ABACUS&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;scoring_verification -&amp;gt; questions -&amp;gt; work_and_income -&amp;gt; result&lt;/code&gt; == &lt;strong&gt;success_without_income&lt;/strong&gt; AND  &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; request -&amp;gt; is_online&lt;/code&gt; == ** TRUE** AND  &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; request -&amp;gt;conditions -&amp;gt; loan_amount&lt;/code&gt; &amp;gt; &lt;strong&gt;1_000_000&lt;/strong&gt;, то передавать в ABACUS доход из анкеты&lt;/li&gt;\n&lt;li&gt;Добавить cut_off для заявки с признаком &lt;code class=\&quot;inline-code\&quot;&gt;is_online&lt;/code&gt; == &lt;strong&gt;true&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;table class=\&quot;wiki-tbl\&quot;&gt;\n&lt;thead&gt;\n&lt;tr&gt;&lt;th align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Segment&lt;/th&gt;&lt;th align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Онлайн заявка&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;1&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;2&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;3&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;4&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;содержимое «б»&lt;/td&gt;&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;h2&gt;ABACUS&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Реализовано в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1897\&quot; title=\&quot;Изменить расчет Лимита_Антикризисные меры\&quot; data-issue-id=\&quot;86-79782\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1897&lt;/a&gt; - рассчитывать &lt;code class=\&quot;inline-code\&quot;&gt;Max limit&lt;/code&gt; как для беззалога (залога на любоое ТС)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586783132333&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1929&quot;,&quot;entityId&quot;:&quot;86-80372&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Снятие ограничения VIN для «Кредит на авто с залогом» БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585723497935&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1929&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в в check_object будет приходить новый параметр на БПМ vehicle-&amp;gt;right_hand_drive_car-ТС праворульное&lt;/li&gt;\n&lt;li&gt;теперь проверка ПТС и ЭПТС изменена, необходимо в зависимости от параметра right_hand_drive_car включать и выключать поля VIN (их согласно связной задаче будет теперь 2 )&lt;/li&gt;\n&lt;li&gt;если параметр right_hand_drive_car: false, то ВКЛ vin и ВЫКЛ vin_2&lt;/li&gt;\n&lt;li&gt;если параметр right_hand_drive_car: true, то ВЫКЛ vin и ВКЛ vin_2&lt;/li&gt;\n&lt;li&gt;подробности включения и выключения будут известны  после реализации связной задачи , см &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/VR-4427\&quot; title=\&quot;Добавить в проверку ПТС(ЭПТС) 2 поле VIN\&quot; data-issue-id=\&quot;86-80432\&quot; class=\&quot;issue-resolved\&quot;&gt;VR-4427&lt;/a&gt;, а так же vin_2, тоже могут назвать по другому , так же см связную задачу.&lt;/li&gt;\n&lt;li&gt;если продукт &amp;quot;rgsb_pledge_true_every_ts&amp;quot;, то больше не посылать никакие проверки ТС в верификацию( розыск, ограничение, история и тд) то есть отключить ВСЕ, то есть для перехода а следующий стейт достаточно что проверка птс прошла успешно, и все&lt;/li&gt;\n&lt;li&gt;для БПМ поле vin и vin_2 верификации соответствует одному и тому же полю vin в системе авто, то есть если включено одно из полей, то туда мы отправляем данные на вход (и в нашей систем не будет никакого второго ВИН , это разделение только для верификации)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;тестировать и выкатывать вместе со связными&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586783083871&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;VR-4427&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;Z-1345&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1823&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;подзадача&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1941&quot;,&quot;entityId&quot;:&quot;86-80538&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;ЭПТС для БУ БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585825482028&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1941&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;открыть эптс  для бу машин&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;сейчас стоит ограничение из связной задачи , что ЭПТС( а с ним и ИНФ. письмо) доступно только для НОВЫХ машин при &amp;quot;Залоговом кредите&amp;quot; и &amp;quot;Залоговый кредит на любое ТС&amp;quot;&lt;br/&gt;необходимо это ограничение снять , то есть доступность ЭПТС будет и для БУ и для новых ТС (Это не касается инф.писем!!)&lt;br/&gt;то есть теперь может прийти&lt;br/&gt;для БУ : ПТС,&lt;strong&gt;ЭПТС&lt;/strong&gt;&lt;br/&gt;для новых: ПТС,ЭПТС, инф письмо ПТС, инф письмо ЭПТС&lt;br/&gt;Т. е быть готовым принять для БУ машин ПТС и ЭПТС и в зависимости от типа отправить проверку в верификацию&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;на проверку истории ТС посылать в серии и номере  NULL для ЭПТС, задача на верификацию позволит игнорировать отсутствие полей и проверка совершится&lt;br/&gt;&lt;strong&gt;без связной задачи&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1919\&quot; title=\&quot;ЭПТС для БУ БЭК\&quot; data-issue-id=\&quot;86-80120\&quot;&gt;ARGS-1919&lt;/a&gt;( и 4420) проверка в гибдд на историю тс не пройдет и тестить нельзя&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586779455606&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1116&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1875&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;},{&quot;value&quot;:&quot;ARGS-1919&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;},{&quot;value&quot;:&quot;VR-4420&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ПТС-ЭПТС для БУ.docx&quot;,&quot;id&quot;:&quot;88-27687&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27687?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc2ODd8QVNIa2pFYms5cGxjTTJhM2M1RGxLeDB2TU51%0D%0AX2JacWZEUXVCNnk4c1otNA0K%0D%0A&amp;updated=1585825482046&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55865&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1941&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1941\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1941\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585916746156,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56725&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1941&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;запрос &lt;code class=\&quot;inline-code\&quot;&gt;verification / check_task_vehicle_history.verify&lt;/code&gt; отработал без ошибок при содержании&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;params&amp;quot;: {\n&amp;quot;id&amp;quot;: 1238930,\n&amp;quot;action&amp;quot;: &amp;quot;verify&amp;quot;,\n-&amp;quot;fields&amp;quot;: {\n+&amp;quot;vin&amp;quot;: { … },\n+&amp;quot;year&amp;quot;: { … },\n+&amp;quot;is_new&amp;quot;: { … },\n-&amp;quot;number&amp;quot;: {\n&amp;quot;in&amp;quot;: null,\n&amp;quot;reject&amp;quot;: true,\n&amp;quot;do_recheck&amp;quot;: true\n},\n-&amp;quot;series&amp;quot;: {\n&amp;quot;in&amp;quot;: null,\n&amp;quot;reject&amp;quot;: true,\n&amp;quot;do_recheck&amp;quot;: true\n},\n+&amp;quot;engine_type&amp;quot;: { … },\n+&amp;quot;engine_capacity&amp;quot;: { … }\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586773997861,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56749&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1941&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;выдача кредита. БУ ТС + ЭПТС&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30022421/step/10\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30022421/step/10&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586778841341,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1008&quot;,&quot;entityId&quot;:&quot;86-64522&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;(userdata-app) SSO KeyCloak&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Кубасов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1570458154594&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1008&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Аутентификацию на ресурсе &lt;a href=\&quot;https://userdata-app-1.auto-rgsb-st1.cloud.b-pl.pro\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://userdata-app-1.auto-rgsb-st1.cloud.b-pl.pro&lt;/a&gt; (userdata-app) нужно настроить для работы через SSO KeyCloak. т.е. перевести внутренний сервис на работу с единой системой идентификации и управления доступом&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Нужный&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;dmitry.kubasov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;m.nuzhnyj&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586518246396&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ADM-8986&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-717&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирует&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;m.nuzhnyj&quot;,&quot;fullName&quot;:&quot;Максим Нужный&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-46399&quot;,&quot;author&quot;:&quot;ka&quot;,&quot;authorFullName&quot;:&quot;Константин Астраханцев&quot;,&quot;issueId&quot;:&quot;ARGS-1008&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Вопрос тот же, что и для &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1005\&quot; title=\&quot;(bpm-ng-app) SSO KeyCloak\&quot; data-issue-id=\&quot;86-64516\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1005&lt;/a&gt;: поддержка КК в админке уже есть? В ЮД вроде тоже джанговская.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1574960746459,&quot;updated&quot;:1574960768291,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;ИБ-средний&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1209&quot;,&quot;entityId&quot;:&quot;86-67864&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Два транша&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1573331976433&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1209&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;ЦЕЛЬ&lt;/strong&gt;&lt;br/&gt;В марте/апреле собираются запускать программу &amp;quot;Два транша&amp;quot;. Изменяется интеграция и КОД.&lt;br/&gt;На текущий момент нужно внести изменения в интеграцию, потестить на препроде  и откатить это назад до марта/апреля.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение BPM&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Внести изменения в части интеграции. Изменяется csd_response. Измененный файл во вложении.:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;code class=\&quot;inline-code\&quot;&gt;АК_Этапы интеграции***&lt;/code&gt;-описание новых полей&lt;/li&gt;\n&lt;li&gt;пример ответа csd файла описан во вложении &lt;code class=\&quot;inline-code\&quot;&gt;csd (1).dms&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;1.1 Принимать новые поля в csd: изменяется блок credit_schedule:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;loan_agreements:{\n        agreement:{\n            type_contract\n            term_cred\n            loan_amount\n            date_return\n            payment_count\n                   {credit_schedule: {\n                       -&amp;quot;return&amp;quot;: [\n                       -{\n                          return_date                        \n                          fv\n                          iv\n                          amount\n                          rest\n                                               },\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;1.2 Необходимо учесть вариант кредита со страховками и без страховок&lt;br/&gt;Код type_contract может содержать значения:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;CRED_LINE - Кредит верхнего уровня;\nMAIN - Основной транш;\nSERVICE - Сервисный транш.\nБудет ПУСТО, если страховка отсутствует.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;То есть если в заявке страховка отсутствует, то в ответе ЦФТ значение тэга «type_contract» будет пустым и в массиве «loan_agreements» блок «agreement» будет содержаться только 1 раз.&lt;br/&gt;Пример ответа csd по заявке без страховки можно посмотреть в банкпрокси по заявке КН (2903164).&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;8&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586511396539&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1988&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;БФТ_2 транша_БП.DOCX&quot;,&quot;id&quot;:&quot;88-22347&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-22347?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjIzNDd8aE10TEYtRks4c0hLeTNwWW95NTIzMTdsWjN5%0D%0ARlRTWUJmeHpqSWpzbkFpZw0K%0D%0A&amp;updated=1573331994905&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-22348&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-22348?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjIzNDh8VTZSNFQtOGNJTzhhNlhmVHkwclJEdU91c1JD%0D%0ATV9JLXFMMnBkbFpqdnZJYw0K%0D%0A&amp;updated=1573332189419&quot;},{&quot;value&quot;:&quot;Пример графика по 2 траншам.xlsx&quot;,&quot;id&quot;:&quot;88-22415&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-22415?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjI0MTV8dU5lRzM0dDBjNnlrTk9uVzBRMEQ0OWFqV1JN%0D%0AdEl6anZOeE01WHc0TU1VUQ0K%0D%0A&amp;updated=1573494032428&quot;},{&quot;value&quot;:&quot;БФТ_2 транша_БП_коммент20191217.docx&quot;,&quot;id&quot;:&quot;88-23996&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-23996?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjM5OTZ8dVlHeHg1d3liNE9Rakg3UzgyNVBHSWlydlFN%0D%0AS2h1dERwekRUMlZLYlpPVQ0K%0D%0A&amp;updated=1576591804109&quot;},{&quot;value&quot;:&quot;График платежей 2 транша.docx&quot;,&quot;id&quot;:&quot;88-24564&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24564?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjQ1NjR8ODRNRVZNMzhUTC0ySmpNUGFYR0oycmNKTF9z%0D%0ASTMxcU9ETFllRHVoeHpsMA0K%0D%0A&amp;updated=1579098964235&quot;},{&quot;value&quot;:&quot;Заявление на выдачу кредита_транша_.docx&quot;,&quot;id&quot;:&quot;88-24565&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24565?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjQ1NjV8Q1lOdENRVkRkYUZJaFRDaUVIU3FKRV9RNldO%0D%0Acl9zemdMQThpTmtPTzlxUQ0K%0D%0A&amp;updated=1579098964232&quot;},{&quot;value&quot;:&quot;ИУ по двум траншам.docx&quot;,&quot;id&quot;:&quot;88-24566&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24566?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjQ1NjZ8ODV5Z2dLM29zUFROdXNKQ2tZeUlaRmpVOHFv%0D%0AX0tUczBvVVNwMm5Nd1Z3Zw0K%0D%0A&amp;updated=1579098964236&quot;},{&quot;value&quot;:&quot;АК_Этапы интеграции_20191212 (1).xlsx&quot;,&quot;id&quot;:&quot;88-25065&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25065?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjUwNjV8dXhpTHRFU0ZpUVRWZWxZQld4NTZRMEVwbnRE%0D%0AMkNWSzdwSGwwYklqYUV0Yw0K%0D%0A&amp;updated=1580207101249&quot;},{&quot;value&quot;:&quot;csd (1).dms&quot;,&quot;id&quot;:&quot;88-25066&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25066?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjUwNjZ8aVNISndIY1hhU0RSSGxxbUZPOFE2Yk9aeXVp%0D%0AV0V0RHVZUU5TY0x6d0VUMA0K%0D%0A&amp;updated=1580207226957&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-44632&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;SP = 10&lt;br/&gt;будет новый еще один ГП&lt;br/&gt;надо менять формат с ЦФТ&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1573332810993,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-47532&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;на анализ 10 часов&lt;br/&gt;дата сдачи 17.12.19&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1576134233089,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-47976&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем измененный КОД&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1576672712367,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49270&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Во вложении предварительный КОД по программе 2 транша. Здесь добавлены только те документы, которые будут изменены по данной программе.&lt;br/&gt;КОД является предварительным, т.к. финальное согласование внутри банка будет проводится уже перед запуском самой программы, но стоит отметить, что правки возможно в части статичного текста.&lt;br/&gt;Поля, которые заполняются путем взаимодействия между БП и ЦФТ, с большой долей вероятности останутся неизменными.&lt;/p&gt;\n&lt;p&gt;Прошу принять в работу, готов ответить на вопросы, в случае необходимости.&lt;/p&gt;\n&lt;p&gt;Если возникнут вопросы – готов на них ответить.&lt;/p&gt;\n&lt;p&gt;Спасибо.&lt;/p&gt;\n&lt;p&gt;Любушкин Вадим,&lt;br/&gt;Тел: 077-10-32&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579098995666,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49364&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;свитчи на верификацию (все поедет)&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579187303605,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49425&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Задача нужна к июню.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579263999321,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51339&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;11.02.2020 г: Интеграционное тестирование с ЦФТ завершено успешно  (И. Кобяков, М. Гвоздик).&lt;br/&gt;Согласно договоренности, дальнейшие работы будут начаты за 3 недели до даты установки данной задачи на ПРОД&lt;br/&gt;При условии представления актуальных утвержденных в Банке КОД.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581495117206,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54266&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; почему задача в статуса готова к разработке, если тестирвание уже пройдено? какой-то кусок не сделан? если все ок, то переводи статус задачи&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584686075527,&quot;updated&quot;:1584686096446,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;},{&quot;value&quot;:&quot;proxy&quot;,&quot;cssClass&quot;:&quot;c17&quot;}]}, {&quot;id&quot;:&quot;ARGS-1749&quot;,&quot;entityId&quot;:&quot;86-77338&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Отправлять timestamp&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582719624263&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1749&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Отправлять timestamp при отправке задачи на верификацию&lt;br/&gt;Для приоритетных добавлять плюс 3 часа&lt;br/&gt;для остальных 24 часа&lt;/p&gt;\n&lt;p&gt;Проблема:&lt;br/&gt;на верификации из-за приоритетов по дате задачи сдвигаются на стыке месяцев&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Увеличить приоритет задач на верификации, созданных на этапе сделки&lt;/p&gt;\n&lt;h2&gt;Как сейчас:&lt;/h2&gt;\n&lt;p&gt;В задании верификации, создаваемом в BPM, мы посылаем параметр &lt;code class=\&quot;inline-code\&quot;&gt;priority&lt;/code&gt;, который считается по формуле (&lt;strong&gt;Пункт 1&lt;/strong&gt;). Далее верификация обрабатывает показатель согласно логике (&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/909049920\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/909049920&lt;/a&gt; модель 1):&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;В этом случае верификатор получает сначала задачи из инстанса с наиБОЛЬшим весом, в группах с которым он находится. Затем смотрим столбец &amp;quot;Пр.&amp;quot; - приоритет\n\nЧем меньше число, тем больше приоритет, значит задача с мЕньшим числом будет взята в работу раньше, чем задача с бОльшим числом\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Пункт 1. Формула расчет приоритета задач&lt;/strong&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;(Текущая дата (без миллисекунд) + timedelta) * 100 + приоритет&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;где приоритет:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;preorities -&amp;gt; pre-scoring -&amp;gt; priority = 1&lt;/li&gt;\n&lt;li&gt;preorities -&amp;gt; scoring -&amp;gt; priority = 2&lt;/li&gt;\n&lt;li&gt;preorities -&amp;gt; deal -&amp;gt; priority = 3&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Решение:&lt;/h2&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;p&gt;&lt;strong&gt;Новая формула:&lt;/strong&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;(Текущая дата (без миллисекунд) )  + (24 час - (приоритет - 1) * 10,5 час.)&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ПЕРЕВЕСТИ ЧАСЫ В СЕКУНДЫ&lt;/strong&gt;&lt;/p&gt;\n&lt;h2&gt;Тест - кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от создания заявки и до скоринга, должны иметь приоритет текущая_дата  + 24 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от начала скоринга до одобрения, должны иметь приоритет текущая_дата  + 13,5 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от начала одобрения до выдачи, должны иметь приоритет текущая_дата + 3 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;li&gt;Задания, создающиеся на андерайтинг должны иметь приоритет текущая_дата + 13,5 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Кравченко&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;12&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;anna.kravchenko&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586503579944&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-27538&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27538?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc1Mzh8NzdIWEotMHdDNlN3cUlCTkMzaVVzQXo5VE0y%0D%0AWXNBSmVtNjVMakxsS2FRVQ0K%0D%0A&amp;updated=1585657065973&quot;},{&quot;value&quot;:&quot;image1586326558995.png&quot;,&quot;id&quot;:&quot;88-27883&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27883?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc4ODN8OFFvQVZuU2JSUVZ6dHZfbVZtQjhuMXBPajcz%0D%0AQzNsazhmUEYxX0ZmanVGbw0K%0D%0A&amp;updated=1586326560151&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55648&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1749\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1749\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585756827493,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56269&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от создания заявки и до скоринга, должны иметь приоритет текущая_дата + 24 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;заявка &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16210/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16210/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;document_passport_issuer.verify&lt;br/&gt;document_passport_fullname.verify&lt;br/&gt;document_passport_address.verify&lt;/p&gt;\n&lt;p&gt;request_time: &amp;quot;2020-04-07T14:50:21+00:00&amp;quot;,&lt;br/&gt;&amp;quot;priority&amp;quot;: 1586357421, (Wed, 08 Apr 2020 14:50:21 GMT)&lt;/p&gt;\n&lt;p&gt;ФР == ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586271812361,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56278&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16210/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16210/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;error_on_processing&lt;/code&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;bpm.st1.auto.rgsb / sm_rgsb.extend error_on_processing&lt;/code&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Traceback (most recent call last):\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/api/bpm_api.py&amp;quot;, line 494, in apply_api\nstate(api, step_num)\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/base_classes/base_state.py&amp;quot;, line 25, in __init__\nself.__use()\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/base_classes/base_state.py&amp;quot;, line 35, in __use\nstep()\nFile &amp;quot;/opt/bpm-ng/current/state_machines/sm1/states/scoring/scoring_start.py&amp;quot;, line 14, in step1\nself.api.memory.memory['priority'] = get_verification_priority(self.api.constants_sm['priorities']['scoring'])\nAttributeError: 'FlatDict' object has no attribute 'memory'\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586273836578,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56295&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16138/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16138/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;bpm.st1.auto.rgsb / scoring.done error_on_processing&lt;/code&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Show traceback\nTraceback (most recent call last):\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/api/bpm_api.py&amp;quot;, line 494, in apply_api\nstate(api, step_num)\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/base_classes/base_state.py&amp;quot;, line 25, in __init__\nself.__use()\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/base_classes/base_state.py&amp;quot;, line 35, in __use\nstep()\nFile &amp;quot;/opt/bpm-ng/current/state_machines/sm1/states/scoring/scoring_start.py&amp;quot;, line 14, in step1\nself.api.memory.memory['priority'] = get_verification_priority(self.api.constants_sm['priorities']['scoring'])\nAttributeError: 'FlatDict' object has no attribute 'memory'\nThe above exception was the direct cause of the following exception:\nTraceback (most recent call last):\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/dispatchers/auto_dispatcher.py&amp;quot;, line 214, in parse\nawait self._processing_event(manager, publish_key)\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/dispatchers/auto_dispatcher.py&amp;quot;, line 259, in _processing_event\nawait manager.handle()\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/dispatchers/auto_dispatcher.py&amp;quot;, line 259, in _processing_event\nawait manager.handle()\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/managers/subscription.py&amp;quot;, line 64, in handle\nawait self.api.apply_api()\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/api/bpm_api.py&amp;quot;, line 497, in apply_api\nawait api.apply_api()\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/api/bpm_api.py&amp;quot;, line 497, in apply_api\nawait api.apply_api()\nFile &amp;quot;/opt/bpm-ng/releases/20200407144516/bpm_engine/core/api/bpm_api.py&amp;quot;, line 496, in apply_api\nraise BpmException('Error in processing sm', self.walker, self.walker_state) from exc\ncore.utils.exceptions.BpmException: (BpmException(...), 'Error with Walker 30021747 in state scoring_start_state: Error in processing sm')\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586326086440,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56298&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;blockquote&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от начала одобрения до выдачи, должны иметь приоритет текущая_дата + 3 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16194/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16194/details/&lt;/a&gt;&lt;br/&gt;6132402 - это 3/13/1970, 2:26:42 AM&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27883?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc4ODN8OEtkYmpaR080WVdSMzgwYXVjOWotZHNCVnpV%0D%0AekM5Xy01c1JaVkxncGpmbw0K%0D%0A&amp;amp;updated=1586326560151\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27883\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586326670452,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56343&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от начала скоринга до одобрения, должны иметь приоритет текущая_дата + 13,5 час (unix время, перевести часы в секунды)&lt;br/&gt;Заявка &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16215/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16215/details/&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;driving_licence&lt;br/&gt;delivered 08.04.20 09:46:42&lt;br/&gt;&amp;quot;priority&amp;quot;: 1586387800, (09.04.2020, 02:16:40)&lt;/p&gt;\n&lt;p&gt;ФР == ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586339574714,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56420&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;verification / document_photo.verify  - &amp;quot;priority&amp;quot;: 1586371846, (08.04.2020, 21:50:46)&lt;br/&gt;contract_of_sale_pledge_rgsb - &amp;quot;priority&amp;quot;: 1586371846, (08.04.2020, 21:50:46)&lt;br/&gt;Счет на оплату ТС (document_invoice) - &amp;quot;priority&amp;quot;: 1586371846, (08.04.2020, 21:50:46)&lt;/p&gt;\n&lt;p&gt;+3 часа&lt;br/&gt;ФР == ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586361295369,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56457&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;заявка: &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16226/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16226/details/&lt;/a&gt;&lt;br/&gt;scoring_verification.create&lt;br/&gt;там&lt;br/&gt;“priority”: 1586463987, == 09.04.2020, 23:26:27&lt;br/&gt;время создания проверки 09.04.20 06:56:51&lt;/p&gt;\n&lt;p&gt;ФР == ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586415918678,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56458&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16224/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16224/details/&lt;/a&gt;&lt;br/&gt;Счет на оплату (221) :&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;priority&amp;quot;: 1586425409&lt;/code&gt; - Thu, 09 Apr 2020 09:43:29 GMT&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;request_time&amp;quot;: &amp;quot;2020-04-09T06:43:29+00:00&amp;quot;,&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;Полис ВместоКАСКО (vkasko):&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;priority&amp;quot;: 1586426082,&lt;/code&gt; - Thu, 09 Apr 2020 09:54:42 GMT&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;request_time&amp;quot;: &amp;quot;2020-04-09T06:54:42+00:00&amp;quot;,&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;verification / document_signature.verify:&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;priority&amp;quot;: 1586426082,&lt;/code&gt; - Thu, 09 Apr 2020 09:54:42 GMT&lt;br/&gt;`&amp;quot;request_time&amp;quot;: &amp;quot;2020-04-09T06:54:42+00:00&amp;quot;,&lt;/p&gt;\n&lt;p&gt;Соглашение о взаимодействии (agree):&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;priority&amp;quot;: 1586426082,&lt;/code&gt; - Thu, 09 Apr 2020 09:54:42 GMT&lt;br/&gt;`&amp;quot;request_time&amp;quot;: &amp;quot;2020-04-09T06:54:42+00:00&amp;quot;,&lt;/p&gt;\n&lt;p&gt;+3 часа&lt;br/&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586415983021,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56469&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Андреррайтинг&lt;br/&gt;ФР == ОР&lt;br/&gt;09.04.20 08:54:25 Андреррайтинг (number_one)&lt;br/&gt;&amp;quot;priority&amp;quot;: 1586470966, == Thu, 09 Apr 2020 22:22:46 GMT&lt;br/&gt;Заявка &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16227/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16227/details/&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586422761679,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56471&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тегирование&lt;br/&gt;verification / document_passport_tag.verify delivered&lt;br/&gt;09.04.20 09:01:52&lt;br/&gt;&amp;quot;priority&amp;quot;: 1586509267, == Fri, 10 Apr 2020 09:01:07 GMT&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;24 часа&lt;br/&gt;ФР == ОР&lt;br/&gt;Заявка  &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16228/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16228/details/&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586423035046,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56589&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15694/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15694/details/&lt;/a&gt;&lt;br/&gt;Свидетельство о рождении/усыновлении (birth_certificate) и &lt;code class=\&quot;inline-code\&quot;&gt;verification / document_vehicle_passport.verify &lt;/code&gt;:&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;priority&amp;quot;: 1586549984,&lt;/code&gt; - Fri, 10 Apr 2020 20:19:44 GMT&lt;br/&gt;`&amp;quot;request_time&amp;quot;: &amp;quot;2020-04-10T06:51:39+00:00&amp;quot;,&lt;br/&gt;+13.5 часов&lt;/p&gt;\n&lt;p&gt;ФР=ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586503571419,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1912&quot;,&quot;entityId&quot;:&quot;86-80057&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Новые свитчи по отклонению ЭПТС\\Инфописем_Родитель&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Урпина Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585320963753&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1912&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Нужно добавить свитч с приведениями по нехватке данных: отсутствуют&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Категория ТС&lt;/li&gt;\n&lt;li&gt;Количество л.с.&lt;/li&gt;\n&lt;li&gt;Объем двигателя&lt;/li&gt;\n&lt;li&gt;Тип двигателя&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить везде свитч &lt;code class=\&quot;inline-code\&quot;&gt;Хорошо читается&lt;/code&gt;, где нужна проверка каких-то детальных данных&lt;/li&gt;\n&lt;/ol&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Для ЭПТС и Инфописем убрать свитч &lt;code class=\&quot;inline-code\&quot;&gt;Категория ТС - В&lt;/code&gt;, так как информация о категории автомобиля не указывается в этих типах документов&lt;/li&gt;\n&lt;li&gt;Отправлять доработку в ПП в случае отсутствия полей, указанных выше&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;p&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; для ЭПТС, ИНФОПИСЬМА ПТС И ИНФОПИСЬМА ЭПТС:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В заданиях для ЭПТС, ИНФОПИСЬМА ПТС И ИНФОПИСЬМА ЭПТС передавать свитч &lt;code class=\&quot;inline-code\&quot;&gt;vehicleCategoryIsB&lt;/code&gt; с &lt;code class=\&quot;inline-code\&quot;&gt;type = none&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Закоментить часть кода, обрабатывающую свитч &lt;code class=\&quot;inline-code\&quot;&gt;vehicleCategoryIsB&lt;/code&gt;, для ЭПТС, ИНФОПИСЬМА ПТС И ИНФОПИСЬМА ЭПТС&lt;/li&gt;\n&lt;li&gt;В заданиях ЭПТС, ИНФОПИСЬМА ЭПТС  добавить свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereAreEngineSpec&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;      &amp;quot;thereAreEngineSpec&amp;quot;:{\n          &amp;quot;type&amp;quot;: &amp;quot;reject&amp;quot;,\n          &amp;quot;caption&amp;quot;: &amp;quot;Указаны мощность/тип/объем двигателя&amp;quot;,\n          &amp;quot;error_message&amp;quot;: &amp;quot;В документе не указаны мощность/тип/объем двигателя&amp;quot;\n      }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если пришел отказ по свитчу &lt;code class=\&quot;inline-code\&quot;&gt;thereAreEngineSpec&lt;/code&gt;, отправлять доработку в &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; с ошибкой из свитча&lt;/li&gt;\n&lt;li&gt;Добавить в задания ПТС/ЕПТС/ИНФОПИСЬМО ПТС/ИНФОПИСЬМО ЕПТС свитч &lt;code class=\&quot;inline-code\&quot;&gt;wellReadableAndHasNoDefects&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;wellReadableAndHasNoDefects&amp;quot;:{\n          &amp;quot;type&amp;quot;: &amp;quot;reject&amp;quot;,\n          &amp;quot;caption&amp;quot;: &amp;quot;Хорошо читается&amp;quot;,\n          &amp;quot;error_message&amp;quot;: &amp;quot;Документ нечёткий или не читается из-за дефектов&amp;quot;\n      }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;6\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если пришел отказ по свитчу &lt;code class=\&quot;inline-code\&quot;&gt;wellReadableAndHasNoDefects&lt;/code&gt;, отправлять доработку в &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; с ошибкой из свитча&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Дополнительная информация:&lt;/h2&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Запрос из BPM:\nЭПТС,  ИНФОПИСЬМО ЭПТС - document_electronic_vehicle_passport\nИНФОПИСЬМО ПТС - document_vehicle_passport\n____\nПризнак типа документа:\nЕПТС - memory -&amp;gt; request -&amp;gt; car -&amp;gt; thereAreEngineSpec == epts\nИНФОПИСЬМО ПТС - memory -&amp;gt; request -&amp;gt; car -&amp;gt; thereAreEngineSpec == info_mail_pts\nИНФОПИСЬМО ЕПТС - memory -&amp;gt; request -&amp;gt; car -&amp;gt; thereAreEngineSpec == info_mail_epts\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Тест - кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;На 6 шаге должны создаваться задания в верификацию для проверки ПТС, ЭПТС, ИНФОПИСЬМА ЭПТС и ИНФОПИСЬМА ПТС&lt;/li&gt;\n&lt;li&gt;В каждом из задний для проверки ЭПТС, ИНФОПИСЬМА ЭПТС и ИНФОПИСЬМА ПТС  не должен отображаться свитч &lt;code class=\&quot;inline-code\&quot;&gt;Категория ТС — B&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В каждом из заданий  для проверки ЭПТС, ИНФОПИСЬМА ЭПТС должен отображаться свитч &lt;code class=\&quot;inline-code\&quot;&gt;Указаны мощность/тип/объем двигателя&lt;/code&gt;. При отказе по данному свитчу должна приходить доработку с соответствующей ошибкой на back и front&lt;/li&gt;\n&lt;li&gt;В каждом из заданий  для проверки ПТС, ЭПТС, ИНФОПИСЬМА ЭПТС и ИНФОПИСЬМА ПТС должен отображаться свитч &lt;code class=\&quot;inline-code\&quot;&gt;Хорошо читается&lt;/code&gt;. При отказе по свитчу должна приходить доработка с соответствующей ошибкой на back и front&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.urpina&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586444460666&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55158&quot;,&quot;author&quot;:&quot;a.urpina&quot;,&quot;authorFullName&quot;:&quot;Урпина Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1912&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Задача наверное по все проектам, но массово на РГСБ, поэтому поставила здесь&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585321016399,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56550&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1912&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1912\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1912\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586444444955,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;support&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1554&quot;,&quot;entityId&quot;:&quot;86-73311&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Проработать устаревание заявки КК&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1578911470641&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1554&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Требуется додумать реализацию устаревания заявки на КК в ПП.&lt;br/&gt;На текущий момент получается так :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Была попытка создания заявки в КК на оформление.&lt;/li&gt;\n&lt;li&gt;Заявка сменила стейт&lt;/li&gt;\n&lt;li&gt;Заявка устарела в КК (её например бросили заводить)&lt;/li&gt;\n&lt;li&gt;На ПП мы видим ссылку на КК и один из стейтов (последний пришедший по шине)&lt;/li&gt;\n&lt;li&gt;Мы не можем узнать, что заявка устарела в КК&lt;br/&gt;Что предлагаю (Дима) :&lt;br/&gt;Фронт должен смотреть на поле &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Обработка в КН. Относится к заявкам, по которым доступна выдача КК и агент начал оформление КК.&lt;br/&gt;&lt;strong&gt;КН&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;получать от нас  &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt; .&lt;/li&gt;\n&lt;li&gt;Сделать устаревание заявок Авто. Если  &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt; наступило, а карту не выдали, то присылать нам стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;, что заявка по карте устарела. (СВЯЗАННАЯ ЗАДАЧА)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt;&lt;br/&gt;Передавать на бэк дату и время первого одобрения &lt;code class=\&quot;inline-code\&quot;&gt;first_approve_time&lt;/code&gt;:&lt;br/&gt;брать из &lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;flags_rgsb-&amp;gt;first_approve&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; принимать от bpm дату первого одобрения &lt;code class=\&quot;inline-code\&quot;&gt;first_approve_time&lt;/code&gt; (нужно будет для будущей доработки)&lt;/li&gt;\n&lt;li&gt;Отправлять в КН &amp;#39;cc_available_until`, когда начали оформлять КК.&lt;/li&gt;\n&lt;li&gt;Принимать от КН новый стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;, что заявка КК устарела. В нашей стет-машине это будет один из терминальных стейтов.&lt;/li&gt;\n&lt;li&gt;Передавать стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt; фронту.&lt;/li&gt;\n&lt;li&gt;При подсчете количества заявок в cc_available_state не учитывать заявки в стейте &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;. И при формировании заявок для этого фильтра фронту.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;Если пришел стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;,  не давать возможность оформить такую карту - то есть убрать с 10-го шага плашку &amp;quot;кредитная карта&amp;quot; слева в меню и под надписью &amp;quot;кредит выдан&amp;quot;.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Не показываются в списке кк заявки в стейте &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Обработка в АВТО. Относится к заявкам, по которым доступна выдача КК, но агент так и не начал оформлять КК.&lt;br/&gt;БЭК Отправляет на фронт значение поля &amp;#39;cc_available_until&lt;code class=\&quot;inline-code\&quot;&gt;. Предложение действует до окончания следующего дня после выдачи Автокредита. Если 'cc_available_until&lt;/code&gt; наступил и заявка так и не ушла с первоначального стейта, то  карта больше не доступна.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586429911523&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54268&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1554&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;это что еще не сделано? да быть такого не может, проверьте актуальность, если что закрывайте&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584686269396,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1964&quot;,&quot;entityId&quot;:&quot;86-81243&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Рисковик - одобрение, параметры выданного кредита, проверка залога_ РОДИТЕЛЬ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586349139020&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1964&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Доработать отображение истории одобренных заявок&lt;/li&gt;\n&lt;li&gt;Доработать отображение продукта и типа ТС&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Решение:&lt;/h1&gt;\n&lt;h2&gt;FRONT Рисковик:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Разделить блок &amp;quot;Одобрение&amp;quot; на 3 колонки по типам продуктов:&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Залоговый|Беззалоговый (Залоговый кредит на любое ТС)&lt;/code&gt; -&amp;gt; &lt;code class=\&quot;inline-code\&quot;&gt;Залоговый|Беззалоговый|Залоговый кредит на любое ТС&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Отображать в колонке &amp;quot;Беззалог&amp;quot; значения из полей &lt;code class=\&quot;inline-code\&quot;&gt;rpf_&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Отображать в колонке &amp;quot;Залоговый кредит на любое ТС&amp;quot; значения из полей &lt;code class=\&quot;inline-code\&quot;&gt;rptet_&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Добавить новую программу &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pldege_true_every_ts&lt;/code&gt; (Залоговый кредит на любое ТС)&lt;/li&gt;\n&lt;li&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Проверка залога -&amp;gt; Тип ТС&lt;/code&gt; доработать поле &lt;code class=\&quot;inline-code\&quot;&gt;car_used_type&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Неверное отображается поле &lt;code class=\&quot;inline-code\&quot;&gt;additional_document_issued_at&lt;/code&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27904?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc5MDR8alE2SlFUTF9tWUJHcnA4WXNjOHVKNko0RTJw%0D%0AaU5BLUVQMnJXME5vNnFrTQ0K%0D%0A&amp;amp;updated=1586362727814\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27904\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK Рисковик:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить в БД репортс новые поля и передавать на FRONT:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;rptet_risk_grade&lt;/li&gt;\n&lt;li&gt;rptet_segment&lt;/li&gt;\n&lt;li&gt;rptet_ch_quality&lt;/li&gt;\n&lt;li&gt;rptet_pd&lt;/li&gt;\n&lt;li&gt;rptet_initial_payment_fraction&lt;/li&gt;\n&lt;li&gt;rptet_initial_payment&lt;/li&gt;\n&lt;li&gt;rptet_super_min_initial_payment&lt;/li&gt;\n&lt;li&gt;rptet_incoming_payment&lt;/li&gt;\n&lt;li&gt;rptet_other_income_confirmed&lt;/li&gt;\n&lt;li&gt;rptet_other_total_income&lt;/li&gt;\n&lt;li&gt;rptet_other_max_payment&lt;/li&gt;\n&lt;li&gt;rptet_dti_incoming&lt;/li&gt;\n&lt;li&gt;rptet_dti_total&lt;/li&gt;\n&lt;li&gt;rptet_max_limit&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;BPM_Reports&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Убрать условие, реализованное в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1674\&quot; title=\&quot;Добавить в рисковик данные по программе &amp;quot;Залоговый кредит на любое ТС&amp;quot;\&quot; data-issue-id=\&quot;86-75895\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1674&lt;/a&gt;. Передавать в полях &lt;code class=\&quot;inline-code\&quot;&gt;rpf_&lt;/code&gt; всегда значения для беззалогового кредита&lt;/li&gt;\n&lt;li&gt;Передавать значения для &amp;quot;залогового кредита на любое тс&amp;quot; из блока &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; approval_history -&amp;gt; rgsb_pledge_true_every_ts&lt;/code&gt;, если &lt;code class=\&quot;inline-code\&quot;&gt;flag_approve == true&lt;/code&gt; по продукту, в полях:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;rptet_risk_grade&lt;/li&gt;\n&lt;li&gt;rptet_segment&lt;/li&gt;\n&lt;li&gt;rptet_ch_quality&lt;/li&gt;\n&lt;li&gt;rptet_pd&lt;/li&gt;\n&lt;li&gt;rptet_initial_payment_fraction&lt;/li&gt;\n&lt;li&gt;rptet_initial_payment&lt;/li&gt;\n&lt;li&gt;rptet_super_min_initial_payment&lt;/li&gt;\n&lt;li&gt;rptet_incoming_payment&lt;/li&gt;\n&lt;li&gt;rptet_other_income_confirmed&lt;/li&gt;\n&lt;li&gt;rptet_other_total_income&lt;/li&gt;\n&lt;li&gt;rptet_other_max_payment&lt;/li&gt;\n&lt;li&gt;rptet_dti_incoming&lt;/li&gt;\n&lt;li&gt;rptet_dti_total&lt;/li&gt;\n&lt;li&gt;rptet_max_limit&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Отправлять для продукта &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_ts&lt;/code&gt; на BACK поле &lt;code class=\&quot;inline-code\&quot;&gt;d_credit_term&lt;/code&gt; (&lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; request -&amp;gt;conditions -&amp;gt; credit_term&lt;/code&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Тест кейсы&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Зайти в рисковик в карточку заявки. В блоке одобрения должны отображаться последние одобренные условия кредита по трем типам продуктов&lt;/li&gt;\n&lt;li&gt;Должны отображаться тип кредита и срок для &amp;quot;залога на любое тс&amp;quot; в блоке &amp;quot;Параметры выданного кредита&amp;quot;&lt;/li&gt;\n&lt;li&gt;В блоке &amp;quot;Проверка залога&amp;quot; должен отображаться тип тс&lt;/li&gt;\n&lt;li&gt;В блоке ВУ должна отображаться корректная дата выдачи ВУ&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586428038866&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1967&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1974&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1975&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1976&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Front&quot;,&quot;BPM&quot;,&quot;Рисковик&quot;,&quot;Reports&quot;],&quot;valueId&quot;:[&quot;Front&quot;,&quot;BPM&quot;,&quot;Рисковик&quot;,&quot;Reports&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-27904&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27904?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc5MDR8cnNyQndhZFJoRENBelpZUkRaVzRfSWZDd1pm%0D%0ANWYyZXhFQTNYMUYza01jYw0K%0D%0A&amp;updated=1586362727814&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1906&quot;,&quot;entityId&quot;:&quot;86-79976&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Рефакторинг bpm_composite&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585291406953&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1906&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В core.base_classes.base_composite.BaseComposite._constructor есть ад, тоска и печаль свзанная с функцией clean_strings.&lt;br/&gt;Что приводит к усложнению шаблонов /bpm_composite/templates и ненужным преобразованиям&lt;br/&gt;Решение:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;рефакторинг core.base_classes.base_composite.BaseComposite._constructor - удалить clean_strings&lt;/li&gt;\n&lt;li&gt;рефакторинг /bpm_composite/templates - изменить использование {{ value }} на {{ value|tojson }}&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586417903088&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55559&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1906&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_engine_version: feature/ARGS-1906\nbpm_ng_composite_version: feature/ARGS-1906\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1906\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585735116978,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1922&quot;,&quot;entityId&quot;:&quot;86-80194&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Чистка кода BPM от legacy (31.03.2020)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585639365409&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1922&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Проверить весь код на наличие пометок об удалении/изменении кода с датой меньше 31.03.2020.&lt;br/&gt;Внести изменения, указанные в коментариях.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586269991998&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55372&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1922&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1922\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1922\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585656303566,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56224&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1922&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестирование: регресс&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586264484507,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56259&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1922&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;регресс&lt;br/&gt;новая заявка &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30022400/step/10\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30022400/step/10&lt;/a&gt;&lt;br/&gt;восстановленная заявка &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021711/step/10\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021711/step/10&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586269986053,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1959&quot;,&quot;entityId&quot;:&quot;86-81065&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;refactor engine constructor as_object ?&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586269157187&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1959&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;зачем тут as_object&lt;/p&gt;\n&lt;p&gt;def _constructor(self, file: str, context: dict, as_object: bool = True) -&amp;gt; dict:&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586269157187&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;d.podshchekoldin&quot;,&quot;fullName&quot;:&quot;Дмитрий Подщеколдин&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1952&quot;,&quot;entityId&quot;:&quot;86-80768&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Скрипты инициализации для фич по кредитым картам&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1586160859407&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1952&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Для проекта авто сделать инициализацию данных в юзердате для расчета следующих фич&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; limit_approved_smaller_exists_30_days&lt;/label&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt; companion_credit_card_is_not_available_30_days&lt;/label&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; max_limit_real_small_30_days&lt;/label&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h1&gt;ОТ КН ТРЕБУЕТСЯ&lt;/h1&gt;\n&lt;p&gt;Необходимо подготовить файл первичной загрузки данных.&lt;br/&gt;Формат json или csv&lt;/p&gt;\n&lt;p&gt;Поля&lt;/p&gt;\n&lt;p&gt;internal_id: int - номер заявки&lt;/p&gt;\n&lt;p&gt;cc_companion_is_available: bool - установлен ли флаг доступности карты True/False/None&lt;br/&gt;cc_companion_is_available_at: str - дата строкой с указанием tz&lt;/p&gt;\n&lt;p&gt;limit_approved: int - одобренный лимит в копейках (или None)&lt;br/&gt;limit_approved_at: str - дата строкой с указанием tz&lt;/p&gt;\n&lt;p&gt;max_limit_real_small: bool - установлен ли флаг, True/False/None&lt;br/&gt;max_limit_real_small_at: str - дата строкой с указанием tz&lt;/p&gt;\n&lt;p&gt;internal_id - обязательный параметр&lt;br/&gt;остальные параметры обрабатываются парами, если задано значение (отличное от None) то обязательна дата&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586261544877&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1777&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-56204&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1952&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;userdata: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1777\&quot; title=\&quot;Stand-alone кредитная карта\&quot; data-issue-id=\&quot;86-77729\&quot;&gt;ARGS-1777&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586261369958,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56205&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1952&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;КН оповещены о требованиях к файлу для первичной загрузки&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586261544878,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1899&quot;,&quot;entityId&quot;:&quot;86-79828&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Код отказа по мегафону&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585212191416&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1899&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h2&gt;Цель&lt;/h2&gt;\n&lt;p&gt;Запрашивать новый параметр в Мегафоне. Добавить новый отказ по Мегафону&lt;/p&gt;\n&lt;h2&gt;Userdata:&lt;/h2&gt;\n&lt;p&gt;Добавить новый код  отказа (см. приложенный файл с кодами отказов):&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;код &lt;code class=\&quot;inline-code\&quot;&gt;MEG004&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;описание отказа &lt;code class=\&quot;inline-code\&quot;&gt;Cрок жизни абонентского номера менее 6 месяцев и максимальный средне месячный платёж за период менее 100 рублей&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;сообщение на фронт &lt;code class=\&quot;inline-code\&quot;&gt;Отказ. Несоответствие политике банка&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;мораторий 90 дней&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В запросе &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.process&lt;/code&gt; передавать дополнительный параметр &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; varaibles == &amp;quot;PAY_MAX&amp;quot;&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Обрабатывать из ответа &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.done&lt;/code&gt;  в блоке &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;pay_max&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Если&lt;/strong&gt; &lt;em&gt;в ответе&lt;/em&gt;  &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;(params -&amp;gt; lifetime_bin -&amp;gt; value) in (0, 1, 2) AND (params -&amp;gt; pay_max -&amp;gt; value) in (0,  1)&lt;/code&gt;, то переводить заявку в отказ с кодом &lt;code class=\&quot;inline-code\&quot;&gt;MEG004&lt;/code&gt; - передавать ошибку в ПП &amp;quot;Отказ. Несоответствие политике банка&amp;quot;&lt;br/&gt;, Иначе дальше по процессу&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586257775358&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9030_Новый код отказа Мегафон авто.doc&quot;,&quot;id&quot;:&quot;88-27295&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27295?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjcyOTV8MzZmUFYxRnlNeEFwcEg4ZkRIRVQwQVpQRmhn%0D%0AUzU5b2cyVEJqYnhlUXE0MA0K%0D%0A&amp;updated=1585212187858&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_1110.xlsx&quot;,&quot;id&quot;:&quot;88-27314&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27314?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjczMTR8X0VyY0VqRjRIVExFU2p5eC1QZG9aSXBPNGRr%0D%0AcDIzRVNEUDNQdmx5c1U5bw0K%0D%0A&amp;updated=1585218847741&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55066&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1899&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt; это касается всех номеров(основного и дополнительного) или только основного?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585300307562,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55079&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1899&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Только основного. На текущий момент с банком такая договоренность&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585303511313,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55160&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1899&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Сделал часть касательно BPM т.к к Userdata у меня пока нет доступов&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1899\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1899\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585321816362,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-56182&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1899&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;новый код отказа получен&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16202/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16202/details/&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;reject&amp;quot;: {\n-&amp;quot;info&amp;quot;: [\n&amp;quot;Отказ. Несоответствие политике банка&amp;quot;\n],\n-&amp;quot;codes&amp;quot;: [\n&amp;quot;MEG004&amp;quot;\n],\n&amp;quot;status&amp;quot;: &amp;quot;DECLINE&amp;quot;,\n&amp;quot;is_cascade&amp;quot;: false\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1586256910139,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1795&quot;,&quot;entityId&quot;:&quot;86-77995&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Сумма НДС в назначении платежа&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583390230427&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1795&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Спринт 5  8749 АВТО. Сумма НДС в назначении платежа&lt;br/&gt;Цель в Спринте 4: 10.03.2020 задача проанализирована (должны быть проанализированы совместно с аналитиками на стороне ЦФТ), реализация согласована с Заказчиком и задача переведена в &amp;quot;Ready for Development&amp;quot;&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Решение:&lt;/h2&gt;\n&lt;h3&gt;BPM:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В state &lt;code class=\&quot;inline-code\&quot;&gt;pre_deal_verification_state&lt;/code&gt;: Добавить в конструктор заданий (&amp;quot;Счет на оплату&amp;quot; и &amp;quot;Счет на оплату ТС&amp;quot;) на верификацию поле для ввода НДС - &lt;code class=\&quot;inline-code\&quot;&gt;vat_amount&lt;/code&gt; (пример конструкторов во вложении)&lt;/li&gt;\n&lt;li&gt;Сохранять из ответа поле &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; vat_amount -&amp;gt; out&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Счет на оплату ТС - &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; verified -&amp;gt; invoice_vehicle -&amp;gt; vat_amount&lt;/code&gt;&lt;br/&gt;Счет на оплату - &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; verified -&amp;gt; invoice_additional -&amp;gt; страховка -&amp;gt; vat_amount&lt;/code&gt;&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;strong&gt;Изменить формулировку назначения платежа&lt;/strong&gt;, отсылаемое в сообщении pay_request в cfd:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Для всех формулировок, в которых есть фраза &amp;quot;В том числе НДС&amp;quot; добавить строку: &lt;code class=\&quot;inline-code\&quot;&gt;Сумма НДС без копеек&lt;/code&gt; &amp;amp; &lt;code class=\&quot;inline-code\&quot;&gt;(Сумма НДС без копеек прописью)&lt;/code&gt; &amp;amp; &amp;quot;руб.&amp;quot; &amp;amp; &lt;code class=\&quot;inline-code\&quot;&gt;Сумма копеек&lt;/code&gt; &amp;amp; &amp;quot;коп.&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;Пример:&lt;/em&gt;&lt;br/&gt;В том числе НДС 10 833 (Десять тысяч восемьсот тридцать три) руб 33 коп.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Найти задания в верификации &amp;quot;счет на оплату&amp;quot;, &amp;quot;счет на оплату ТС&amp;quot;&lt;/li&gt;\n&lt;li&gt;Выбрать в каждом задании облагает ндс, указать сумму&lt;/li&gt;\n&lt;li&gt;Убедиться в том, что сумма ндс сохраняется в memory для тс (обычный счет) и страховок (счет на оплату страховки) для заявки&lt;/li&gt;\n&lt;li&gt;Убедиться в том, что в cfd в pay_request отправляется формулировка согласно описанию таска (для счета на оплату ТС и счета на оплату страховки)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586182224837&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-385&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1679&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Окружение&quot;,&quot;value&quot;:[&quot;uat&quot;],&quot;valueId&quot;:[&quot;uat&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;Дата начала работы&quot;,&quot;value&quot;:[&quot;1583409600000&quot;],&quot;valueId&quot;:[&quot;1583409600000&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8749_АВТО. Сумма НДС в назначении платежа.docx&quot;,&quot;id&quot;:&quot;88-26578&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26578?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY1Nzh8ZWdVc0RzNWdMZk1nMDdxTzA3VzQ1ZDV0ZVk0%0D%0Ab2hmX2RlWHcxRVBnbXhZaw0K%0D%0A&amp;updated=1583396257817&quot;},{&quot;value&quot;:&quot;счет на оплату тс - ответ с ндс.txt&quot;,&quot;id&quot;:&quot;88-26723&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26723?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY3MjN8UkMxSzQ4T1FVQVcycWItY0RKVnFNUkdqU1hZ%0D%0AZ2t0MTVaU2NSSWtLbVdpTQ0K%0D%0A&amp;updated=1583843077440&quot;},{&quot;value&quot;:&quot;счет на оплату - ответ с ндс без тс.txt&quot;,&quot;id&quot;:&quot;88-26725&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26725?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY3MjV8VnZYdE1ZbGVSMXNzQjZfZWRMQXZHWVVLSFht%0D%0ARVJkQlZmX2ZmMkxqRUVndw0K%0D%0A&amp;updated=1583843077440&quot;},{&quot;value&quot;:&quot;счет на оплату - конструкотр с ндс.txt&quot;,&quot;id&quot;:&quot;88-26727&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26727?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY3Mjd8aFJDZ3NrQUJWZXJvbmtTR0hyV3VBNnJYd1dy%0D%0AakRHbzZWUHJORGh2VTBqWQ0K%0D%0A&amp;updated=1583843143086&quot;},{&quot;value&quot;:&quot;счет на оплату тс - конструктор поле ввода ндс.txt&quot;,&quot;id&quot;:&quot;88-26728&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26728?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY3Mjh8R25rTEZESkZsVDNZX1hjQmtnRTBEd0EwdkQt%0D%0AeFg3Y3UwWmZESVF4ZmI5cw0K%0D%0A&amp;updated=1583843143086&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53112&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Где требования?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583396176999,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53136&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Была еще проблема, что некорректно отправляем номер сервисной карты. В рамках этой задачи тоже можно уточнить повторно у банка. Письма у &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kriventsova\&quot; title=\&quot;Кривенцова Александра\&quot; data-user-id=\&quot;24-205\&quot;&gt;@Кривенцова Александра&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583407403891,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53728&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветки:&lt;br/&gt;bpm_ng_engine: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;br/&gt;bpm_ng_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584372706535,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;},{&quot;value&quot;:&quot;1&quot;,&quot;cssClass&quot;:&quot;c3&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;АнализСпринт&quot;,&quot;cssClass&quot;:&quot;c13&quot;}]}, {&quot;id&quot;:&quot;ARGS-1777&quot;,&quot;entityId&quot;:&quot;86-77729&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Stand-alone кредитная карта&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583158787055&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1777&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;em&gt;Описание требований от банка:&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;В рамках проработки бизнес требований по кредитным картам Stand Alone выявили необходимость дополнить функционал проверки в Userdata:&lt;br/&gt;2.2.      По сочетанию ФИО, серия и номер паспорта провести проверку на наличие отказов по Кредитной карте Компаньон в течение последних 30 дней до даты подачи заявки на Кредитную карту. При наличии отказа по Кредитной карте Компаньон по заявке на Кредитную карту формируется отказ с кодом M002.&lt;br/&gt;2.3.      При наличии у клиента в течение 30 дней одобренной заявки по продукту, отличному от Кредитной карты, с лимитом менее запрошенного по данному продукту формируется отказ с кодом M003.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Бизнес-цель&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;В РГС добавляется новый продукт - кредитная карта Stand Alone. Реализацию данного продукта на КН, но со стороны Авто необходимо предусмотреть возможность перейти на форму оформления КК, а так же предоставить данные (лимит, дата) по одобренным\\выданным заявкам Авто для КН, путем добавления необходимой информации в user data.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ФРОНТ&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить кнопку с ссылкой на StandAlone в меню: см. приложенный макет (кнопка называется &lt;code class=\&quot;inline-code\&quot;&gt;Кредитные карты&lt;/code&gt;).&lt;br/&gt;Переход должен осуществляться по ссылке: &lt;a href=\&quot;https://front-cc-internal-st1.cash.b-pl.pro/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://front-cc-internal-st1.cash.b-pl.pro/&lt;/a&gt;&lt;br/&gt;(пока что есть только стейдж - обращаться к Салавату.)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Userdata&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; Userdata&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;0\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Добавить в юзердату новый проект &lt;code class=\&quot;inline-code\&quot;&gt;credit&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;ввести у заявки атрибут &lt;code class=\&quot;inline-code\&quot;&gt;limit_approved&lt;/code&gt;-одобренный лимит :&lt;br/&gt;При создании заявки все параметры равны 0 &lt;em&gt;(что значит все параметры? почему 0 а не None?)&lt;/em&gt;.&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;ДАВАЙ none&lt;/code&gt;&lt;br/&gt;По ходу жизни заявки бпм авто и КН будут записывать в них значения ОДОБРЕННОГО лимита и читать их. &lt;em&gt;(Считывать сумму по user или только значение по конкретной заявке?)&lt;/em&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;по конкретной заявке&lt;/code&gt;&lt;br/&gt;В случае изменения одобренного лимита необходимо его перезаписывать.&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;limit_approved&lt;/code&gt; - int, значение в копейках, ожидаем в копейках&lt;br/&gt;&lt;em&gt;(Нужна ли инициализация для предыдущих заявок?)&lt;/em&gt; &lt;code class=\&quot;inline-code\&quot;&gt;если такое сделать можно, то да, давай для последних, заведенных в последние 3 месяца&lt;/code&gt;&lt;br/&gt;Текущее значение &lt;code class=\&quot;inline-code\&quot;&gt;limit_approved&lt;/code&gt; сохраняется в &lt;code class=\&quot;inline-code\&quot;&gt;flags:limit_approved_kopecks&lt;/code&gt; независимо от выбранной программы кредитования&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;добавить поле для заявки для отображение флага доступности КК-Компаньон.&lt;br/&gt;Например, &lt;code class=\&quot;inline-code\&quot;&gt;companion_is_available&lt;/code&gt;:&lt;br/&gt;Значения: true/false/null (Дополнительно согласовать с КН).&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;2.1 Заполнить данный признак для заявок последних трех месяцев и заполнять всегда для новых заявок, когда заявка дошла до decision_state.&lt;br/&gt;Для новых заявок заполнять значением флага  cc_is_available. Всегда перезаписывать при изменении.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;2.2 Для Кредитных карт: Если &lt;code class=\&quot;inline-code\&quot;&gt;companion_is_available&lt;/code&gt;:false, то срабатывает отказ по кредитной карте M002. К АВТО или Компаньону это не относится&lt;br/&gt;&lt;em&gt;Подумать&lt;/em&gt; - предусмотреть, что флаг доступности мы учитываем только на протяжении 30 дней (сделать протухание флага или добавить время изменения статуса флага)&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить поля для заявки: max_limit_real_small.&lt;br/&gt;Для Авто &lt;em&gt;(что это значит? для запроса из проекта авто?)&lt;/em&gt;: заполняем &lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt;, если хотя бы раз из абакуса к нам пришло значение abacus:max_limit_real_small:true. True не перезаписываем.&lt;br/&gt;Иначе &lt;code class=\&quot;inline-code\&quot;&gt;false&lt;/code&gt;&lt;br/&gt;Для Кредитных карт &lt;em&gt;(что это значит? для запроса из проекта кредитных карт?)&lt;/em&gt;: Если по заявке  max_limit_real_small:true, то срабатывает отказ по кредитной карте M003.К АВТО или Компаньону это не относится&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Инициализация:&lt;/h1&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;strong&gt;companion_is_available&lt;/strong&gt; заполнить данный признак для заявок последних трех месяцев и заполнять всегда для новых заявок, когда заявка дошла до decision_state. Мигрировать данные в userdata по заявкам 3-х месяцев (с какого момента? смысл устанавлить null для companion_is_available_auto отсутствует): Если по Авто заявке флаг &lt;code class=\&quot;inline-code\&quot;&gt;credit_card:is_available == True&lt;/code&gt; и не прошло 30 дней &lt;em&gt;(не прошло с какого момента?)&lt;/em&gt;&lt;code class=\&quot;inline-code\&quot;&gt;не прошло в момента обновления данного статуса&lt;/code&gt;, то пишем  companion_is_available: True. Если &lt;code class=\&quot;inline-code\&quot;&gt;credit_card:is_available == False&lt;/code&gt; и не прошло 30 дней, то False. Иначе null (&lt;em&gt;а смысл устанавливать null&lt;/em&gt;)&lt;/li&gt;\n&lt;li&gt;Добавить коды отказа по кредитным картам M002 и M003. Моратория по ним нет. Нужны для КН. Описание в приложенном файле эксель. &lt;em&gt;(где файл?)&lt;/em&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h1&gt;Как реализовано&lt;/h1&gt;\n&lt;h1&gt;Введены следующие поля в userdata&lt;/h1&gt;\n&lt;ol start=\&quot;0\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;добавлен через миграциию новый проект с project_id &amp;quot;credit&amp;quot;. В юзердату через миграцию добавлены коды отказа M002, M003&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;limit_approved&lt;/p&gt;\n&lt;p&gt;текущий одобренный лимит по заявке: int, в копейках&lt;/p&gt;\n&lt;p&gt;из bpm отправляется запрос в юзердату из стейта decision_state если:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; 1) изменилось значение abacus:max_limit\n 2) условия считаются одобренными  \n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;max_limit_real_small&lt;/p&gt;\n&lt;p&gt;значение флага max_limit_real_small: bool из абакуса&lt;/p&gt;\n&lt;p&gt;из bpm отправляется запрос в юзердату при каждом ответе от абакуса&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;cc_companion_is_available&lt;/p&gt;\n&lt;p&gt;значение флага доступности кредитной карты компаньон&lt;/p&gt;\n&lt;p&gt;из bpm отправляется запрос в юзердату если значение флага credit_card:is_available изменилось&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Для обновления полей limit_approved, max_limit_real_small, cc_companion_is_available используется запрос&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;method&amp;quot;: &amp;quot;log_field_update_or_create&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;internal_id&amp;quot;: 30021686,\n    &amp;quot;fields&amp;quot;: {\n      &amp;quot;limit_approved&amp;quot;: 20000,\n      &amp;quot;max_limit_real_small&amp;quot;: false,\n      &amp;quot;cc_companion_is_available&amp;quot;: true,\n    },\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;в параметре params:fields может быть передано как одно значении так и несколько&lt;/p&gt;\n&lt;h1&gt;Логика сохранения полей в Userdata&lt;/h1&gt;\n&lt;p&gt;Поля limit_approved, max_limit_real_small, cc_companion_is_available&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если небыло значений то они сохраняются&lt;/li&gt;\n&lt;li&gt;если значение было, то обновляется метка &lt;code class=\&quot;inline-code\&quot;&gt;updated&lt;/code&gt; у поля&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Новые &amp;quot;фичи&amp;quot; в Userdata&lt;/h1&gt;\n&lt;p&gt;Пример запроса&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 1221134,\n\n    &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n    &amp;quot;method&amp;quot;: &amp;quot;check_limit_in_other_projects&amp;quot;,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;checking_limit&amp;quot;: 15000\n\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;credit&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Параметр &lt;code class=\&quot;inline-code\&quot;&gt;checking_limit&lt;/code&gt; может отсутсвовать, тогда расчет по фиче limit_approved_smaller_exists_30_days произведен не будет&lt;/p&gt;\n&lt;p&gt;Расчет всех фич происходит за последние 30 дней, по заявкам которые в статусе активные/выданные.&lt;br/&gt;Расчет производится по каждому &lt;code class=\&quot;inline-code\&quot;&gt;другому&lt;/code&gt; проекту банка отличному от того из которого пришел запрос.&lt;br/&gt;В пределах проекта выбираются самые свежие данные по заявкам.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;limit_approved_smaller_exists_30_days - есть ли одобренный лимит который меньше запрашиваемого &lt;code class=\&quot;inline-code\&quot;&gt;checking_limit&lt;/code&gt; в других проектах&lt;/li&gt;\n&lt;li&gt;companion_credit_card_is_not_available_30_days - есть ли флаг доступности карты компаньон в других проектах&lt;/li&gt;\n&lt;li&gt;max_limit_real_small_30_days - был ли установлен флаг max_limit_real_small в других проектах&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Если расчет фичи невозможен (например отсутсвует параметр &lt;code class=\&quot;inline-code\&quot;&gt;checking_limit&lt;/code&gt; или нет заявок в которых задавались расчетные поля), то возвращаемые значения будут null&lt;/p&gt;\n&lt;p&gt;Пример ответа:&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;credit&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;limit_approved_smaller_exists_30_days&amp;quot;: false,\n    &amp;quot;companion_credit_card_is_not_available_30_days&amp;quot;: false,\n    &amp;quot;max_limit_real_small_30_days&amp;quot;: true,\n    &amp;quot;error&amp;quot;: {},\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1&gt;Примеры запросов&lt;/h1&gt;\n&lt;p&gt;Запрос на установку флагов&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;method&amp;quot;: &amp;quot;log_field_update_or_create&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;internal_id&amp;quot;: 300,\n    &amp;quot;fields&amp;quot;: {\n      &amp;quot;limit_approved&amp;quot;: 10000,\n      &amp;quot;max_limit_real_small&amp;quot;: false,\n      &amp;quot;cc_companion_is_available&amp;quot;: true,\n    },\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;cash&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;limit_approved: int - значение одобренного лимита в копейках&lt;br/&gt;max_limit_real_small: bool - флаг max_limit_real_small&lt;br/&gt;cc_companion_is_available: bool - флаг cc_companion_is_available&lt;/p&gt;\n&lt;p&gt;если значение устанавливать ненужно, то ненужно передавать&lt;/p&gt;\n&lt;p&gt;ответ&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;cash&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;updated&amp;quot;: true,\n    &amp;quot;error&amp;quot;: {},\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;в случае если что-то переданно некоректно ключ params:error будет содержать ошибку&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;project_id&amp;quot;: &amp;quot;cash&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;error&amp;quot;: {\n      &amp;quot;params&amp;quot;: {\n        &amp;quot;fields&amp;quot;: {\n          &amp;quot;cc_companion_is_available&amp;quot;: [\n            &amp;quot;Field may not be null.&amp;quot;\n          ]\n        }\n      }\n    },\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;запрос на получение фич&lt;/p&gt;\n&lt;p&gt;checking_limit: int - проверяемый лимит в копейках&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 1221134,\n\n    &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n    &amp;quot;method&amp;quot;: &amp;quot;check_limit_in_other_projects&amp;quot;,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;checking_limit&amp;quot;: 15000\n\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto_&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ответ&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto_&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;limit_approved_smaller_exists_30_days&amp;quot;: true,\n    &amp;quot;companion_credit_card_is_not_available_30_days&amp;quot;: false,\n    &amp;quot;max_limit_real_small_30_days&amp;quot;: true,\n    &amp;quot;error&amp;quot;: {},\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;В ответе будут содержатся поля&lt;/p&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;limit_approved_smaller_exists_30_days&lt;/code&gt; : true/false/null&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;companion_credit_card_is_not_available_30_days&lt;/code&gt;: true/false/null&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;max_limit_real_small_30_days&lt;/code&gt;: true/false/null&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;true - признак сработал (например limit_approved_smaller_exists_30_days: true - существуют заявки в других проектак в которых за последние 30 дней последний одобренный лимит меньше запрашиваемого)&lt;/li&gt;\n&lt;li&gt;false - признак не сработал&lt;/li&gt;\n&lt;li&gt;none - невозможно определить признак (например limit_approved_smaller_exists_30_days: none, если не передан в запросе checking_limit или нет заявок в других проектах с одобренным лимитом )&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;9&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1586160954015&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1796&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1950&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1952&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;01-2–Направление (РГС) КК.pdf&quot;,&quot;id&quot;:&quot;88-26450&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26450?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY0NTB8YUR5bHlPbEo4SWpVbU5YNEpBOFhRZ2QzVjNH%0D%0AN2tHSnJ0a0ttazVnb3dVaw0K%0D%0A&amp;updated=1583226271522&quot;},{&quot;value&quot;:&quot;Коды_отказа_РГС_МетодикаСПР_КК_БП v5.xls&quot;,&quot;id&quot;:&quot;88-27427&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27427?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc0Mjd8Q0lqaEZPZlIyRmNOMmQ3VGUwb1VNVW5vRWR1%0D%0AY1dlNkRhdFRwa1ExdjN4dw0K%0D%0A&amp;updated=1585557871454&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53593&quot;,&quot;author&quot;:&quot;a.bogomolov&quot;,&quot;authorFullName&quot;:&quot;Алексей Богомолов&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;$app_credit_card  добавить в nginx&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584096004805,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53596&quot;,&quot;author&quot;:&quot;a.bogomolov&quot;,&quot;authorFullName&quot;:&quot;Алексей Богомолов&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt;  в остальных местах где был переход для получения кк ссылку не надо менять ?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584096766202,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53800&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Появились ответы от банка (обновленное СПР), необходимо внести изменения в задачу.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584450057192,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55242&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Вопросы:&lt;br/&gt;2.2. По сочетанию ФИО, серия и номер паспорта провести проверку на наличие отказов по Кредитной карте Компаньон в течение последних 30 дней до даты подачи заявки на Кредитную карту. При наличии отказа по Кредитной карте Компаньон по заявке на Кредитную карту формируется отказ с кодом M002.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Что считается датой отказа по кредитное карте - момент расчета этого флага? Если он рассчитался заново, но не изменился, должна ли обновиться дата?&lt;/li&gt;\n&lt;li&gt;Нужно ли в transfer отправлять флажок в юзердату&lt;/li&gt;\n&lt;li&gt;На стороне юзердаты рассчитывать фичу (вместо отказа M002) companion_credit_card_is_not_available_30_days, отказ будут делать КН на своей стороне.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585569634541,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55243&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;2.3. При наличии у клиента в течение 30 дней одобренной заявки по продукту, отличному от Кредитной карты, с лимитом менее запрошенного по данному продукту формируется отказ с кодом M003.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Зачем добавляем поле лимит? В задаче далее никак не участвует&lt;/li&gt;\n&lt;li&gt;&amp;quot;лимит менее запрошенного по данному продукту&amp;quot; - речь о наличии в заявке флага max_limit_real_small?&lt;/li&gt;\n&lt;li&gt;Что означает &amp;quot;True не перезаписываем&amp;quot;?&lt;br/&gt;Если было true, а потом изменили условия, и стало false - в юзердате должно остаться true?&lt;br/&gt;Если было true, а потом изменили условия, и стало false, потом снова стало false - в юзердате должно остаться true с более новой датой?&lt;/li&gt;\n&lt;li&gt;Должна ли все-таки участвовать дата в проверке? В бизнес-описании есть, в тексте задачи нет?&lt;/li&gt;\n&lt;li&gt;На стороне юзердаты рассчитывать фичу (вместо отказа M003) max_limit_real_small_30_days,  отказ будут делать КН на своей стороне на основании фичи.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585569657917,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55268&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;2.2&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Что считается датой отказа по кредитное карте - момент расчета этого флага? Если он рассчитался заново, но не изменился, должна ли обновиться дата?&lt;br/&gt;Ответ: Да, обновляем дату&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Нужно ли в transfer отправлять флажок в юзердату&lt;br/&gt;Ответ: Да (так как флаг мог измениться).&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;2.3&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Зачем добавляем поле лимит? В задаче далее никак не участвует&lt;br/&gt;Ответ: нужно для того, чтоб делать отказы по Кредитной Карте в КН (При наличии у клиента в течение 30 дней одобренной заявки по продукту, отличному от Кредитной карты, с лимитом менее запрошенного по данному продукту формируется отказ с кодом M003.)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&amp;quot;лимит менее запрошенного по данному продукту&amp;quot; - речь о наличии в заявке флага max_limit_real_small?&lt;br/&gt;Ответ: Нет. сравниваются лимиты по заявке Авто, КН и запрошенный по Кредитной карте.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Что означает &amp;quot;True не перезаписываем&amp;quot;?&lt;br/&gt;Если было true, а потом изменили условия, и стало false - в юзердате должно остаться true?&lt;br/&gt;Ответ: да&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если было true, а потом изменили условия, и стало false, потом снова стало false - в юзердате должно остаться true с более новой датой?&lt;br/&gt;Ответ: не поняла вопрос. Имелось ввиду, что потом снова стало true? Если снова true, то давайте обновлять более новой датой.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Должна ли все-таки участвовать дата в проверке? В бизнес-описании есть, в тексте задачи нет?&lt;br/&gt;На стороне юзердаты рассчитывать фичу (вместо отказа M003) max_limit_real_small_30_days, отказ будут делать КН на своей стороне на основании фичи.&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Нужна дата проставлении данной фичи для КН&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585575956330,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55632&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;заметки с обсуждения Лиза, Федя, Я&lt;br/&gt;--добавить project_id для standalone&lt;/p&gt;\n&lt;p&gt;? что делать если КН прислали лимит 500&lt;br/&gt;а авто потом прислали 400&lt;/p&gt;\n&lt;p&gt;Что выводить как лимит&lt;/p&gt;\n&lt;p&gt;max_limit_real_small - 30 дней&lt;/p&gt;\n&lt;p&gt;по всем проектам кроме КК&lt;/p&gt;\n&lt;p&gt;запрос от стедналоне придет с лимитом&lt;br/&gt;если хоть один лимит меньше чем он запросил сейчас превышает&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;берем самый свежий по проекту&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;все что мы считаем в пределах 30 дней&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;возвращаем три фичи&lt;/p&gt;\n&lt;p&gt;projectd_id credit&lt;/p&gt;\n&lt;p&gt;check_limit&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585752151723,&quot;updated&quot;:1585909134429,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55700&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; добавить коды отказа в юзердату stage&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt;  добавить коды отказа в юзердату prod&lt;/label&gt;&lt;br/&gt;реализовано миграцией&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;p&gt;для какого проекта? или для всех трех?&lt;br/&gt;нужен код проекта stand-alone&lt;/p&gt;\n&lt;hr /&gt;\n&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot;&gt; скрипты инициализации&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt; проверить что из другого проекта поля обновляются и вносят изменения&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot; checked=\&quot;\&quot;&gt; написать примеры вызовов к юзердате&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot;&gt; написать тесты в стейтмашине&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585821251796,&quot;updated&quot;:1585909147377,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55777&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;span class=\&quot;markdown-language-tag\&quot;&gt;yaml&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-yaml\&quot;&gt;userdata_ng_admin_git_version: feature/ARGS-1777\nuserdata_ng_bpm_engine_version: develop\nuserdata_ng_bpm_transport_version: develop\nuserdata_ng_main_version: feature/ARGS-1777\n\n\nbpm_ng_composite_version: feature/ARGS-1777\nbpm_ng_engine_version: feature/ARGS-1777\nbpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1777\n    version_name: pre_release\n    import_name: sm1\nbpm_ng_transport_version: develop\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/bpm_composite/pull-requests/134/args-1777-stand-alone\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/bpm_composite/pull-requests/134/args-1777-stand-alone&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/sm_rgsb/pull-requests/136/args-1777-stand-alone\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/sm_rgsb/pull-requests/136/args-1777-stand-alone&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/bpm_engine/pull-requests/22/feature-args-1777\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/bpm_engine/pull-requests/22/feature-args-1777&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/userdata/pull-requests/14/args-1777-stand-alone\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/userdata/pull-requests/14/args-1777-stand-alone&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/userdata_admin/pull-requests/6/args-1777-updated\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/userdata_admin/pull-requests/6/args-1777-updated&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585840446766,&quot;updated&quot;:1585847179639,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Согл деплой с КН&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1627&quot;,&quot;entityId&quot;:&quot;86-74794&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Справочник агентов и автосалонов (настройка антифрода по автосалонам)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580233132054&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1627&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9009 Справочник агентов и автосалонов (настройка антифрода по автосалонам)&lt;br/&gt;Нужен функционал в Баланс платформе.&lt;/p&gt;\n&lt;hr /&gt;\n&lt;p&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; &lt;/label&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;В УП создается новая страничка &amp;quot;Антифрод&amp;quot;&lt;br/&gt;При нажатии на кнопку &amp;quot;Добавить&amp;quot; открывается карточка добавления антифрода.&lt;br/&gt;Содержимое карточки:&lt;br/&gt;Кнопка активации настроек&lt;br/&gt;выбор типа сущности,на которую назначается проверка(автосалон/маб/агент)&lt;br/&gt;соответственно выбранному типу в следующую выпадайку передается список автосалонов,мабов или агентов(вместе с id и поиском по нему)&lt;br/&gt;поле &amp;quot;тип проверки&amp;quot;(занятость, личность, контактное лицо, андеррайтинг)&lt;br/&gt;поля дата начала и дата конца проверки&lt;br/&gt;сумма кредита (начиная с этой суммы кредита и выше осуществляется перевод на проверку)&lt;br/&gt;Причина (будет комментарием фичи)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Фильтры&lt;br/&gt;Тип: автосалон,маб,агент&lt;br/&gt;Дата (с... по ...)&lt;br/&gt;Регион&lt;/p&gt;\n&lt;p&gt;выводить id карточки на самой карточке и в списке&lt;br/&gt;выводить id сущности (автосалон,маб,агент)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;ГК&lt;/strong&gt;&lt;br/&gt;сделать метод, по которому передавать в УП список пользователей&lt;br/&gt;Фильтровать его по:&lt;br/&gt;-доступ в приложение in (Партнерка Авто,КН)&lt;br/&gt;-роль=agent&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;Бэк УП&lt;/strong&gt;&lt;br/&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;(Для заполнения карточки смотри п.на фронт)&lt;br/&gt;Когда заполняется карточка и выбирается тип &amp;quot;Агент&amp;quot;&lt;br/&gt;из ГК запрашивать список пользователей (см п. на ГК)&lt;br/&gt;&lt;strong&gt;таблица antifrod&lt;/strong&gt;&lt;br/&gt;id&lt;br/&gt;enabled:true/false&lt;br/&gt;scope_type:AutoShow/MAB/Manager&lt;br/&gt;scope_id&lt;br/&gt;verification_type:(соответственно типу)&lt;br/&gt;(занятость-work_and_income, личность-person, контактное лицо-third_person, андеррайтинг-manual_check)&lt;br/&gt;start_date&lt;br/&gt;end_date&lt;br/&gt;credit_amount&lt;br/&gt;reason&lt;/p&gt;\n&lt;p&gt;Все поля в карточке являются обязательными&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;БэкПП&lt;/strong&gt;&lt;br/&gt;при заведении заявки по мабу, автосалону,агенту проверять наличие карточки антифрод enabled:true и start_date &amp;lt;= текущая дата &amp;lt;= end_date&lt;br/&gt;Передавать на BPM в extend2 этот признак &amp;quot;antifrod:true&amp;quot;, а также &amp;quot;credit_amount&amp;quot;,&amp;quot;reason&amp;quot;, &amp;quot;verification_type&amp;quot;&lt;br/&gt;(если у нас сработали несколько карточек по автосалону,мабу и агенту,то передаем все карточки)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;в scoring_1_state смотреть, если по автосалону,мабу или агенту пришел признак &amp;quot;antifrod:true&amp;quot;,&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;расшифровывать тип проверки и преобразовывать в соответствующую матрицу для верификации&lt;br/&gt;(manual_check- подразумевает и manual_check_documents, и manual_check_expert)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;matrix = [0,0,0,0,0]\nгде \nmatrix[0] - прозвоны (work_and_income) \nmatrix[1] - прозвоны (person) \nmatrix[2] - прозвоны (third_person) \nmatrix[3] - underwriting (manual_check_documents)\nmatrix[4] - underwriting (manual_check_expert)\nпринимает два значения 0 и 1, если 1 то производим верификацию данного типа, иначе нет\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверять,что&lt;br/&gt;-сумма кредита &amp;gt;= credit_amount&lt;br/&gt;-segment in (3, 4)&lt;br/&gt;тогда в verification_state направлять заявку на конкретный тип проверки &amp;quot;verification_type&amp;quot; и в качестве комментария(для андеррайтинга) передавать содержимое поля &amp;quot;reason&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;(фича №44-антифрод рисков)&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt;для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;пример1:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=400тыс\nкарточка на прозвон с суммой кредита=200тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка прозвон по сумме 200тыс, комментарий на андеррайтинг не учитывается&lt;/p&gt;\n&lt;p&gt;пример2:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=200тыс\nкарточка на прозвон с суммой кредита=400тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка на андеррайтинг по сумме 200тыс с комментарием &lt;em&gt;андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot; checked=\&quot;\&quot;&gt;доработать селект для КН&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;“SELECT point_of_sales.*, auto_business_modules.*, point_of_sales.species FROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}”\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjYxNTd8cm9zN2daMGZVNzVUZFR6dHJsWFRwOVU0TkpY%0D%0Ab1c0cjhQS21XaDBLUHpCMA0K%0D%0A&amp;amp;updated=1582702719772\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26157\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjYxNTl8S3g5MXhNdmpLWnJpeEdCWXpRSnIzWG55TUdE%0D%0AaVNlUGh3RmdWYjNvd0Rmdw0K%0D%0A&amp;amp;updated=1582702742130\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26159\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjYyNTF8eW83WG1wSEdyM3BZLVVUaC1pYmZLTW1ld0R4%0D%0ASjBZdFBoT1htbGxlTVhVcw0K%0D%0A&amp;amp;updated=1582809897473\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26251\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Кравченко&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;25&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;anna.kravchenko&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585918245566&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;anna.kravchenko&quot;,&quot;fullName&quot;:&quot;Анна Кравченко&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Справочник агентов (1).doc&quot;,&quot;id&quot;:&quot;88-25892&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25892?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjU4OTJ8YnV2bWU2OWc1R2dRQWN6eE42S3I3SERTN2RU%0D%0ASmh5UGxkUFhyYUg1X3VQMA0K%0D%0A&amp;updated=1582103461421&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26157&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjYxNTd8eDVhelI5WDRRQndsa0RYeUFsbFN6ZXkxMzlr%0D%0AQmtuZk1IcjZzclFncWQ1Yw0K%0D%0A&amp;updated=1582702719772&quot;},{&quot;value&quot;:&quot;image2.png&quot;,&quot;id&quot;:&quot;88-26159&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjYxNTl8WmQ3dmRRa2E3RVc4bk54UUlQUzRsTUxzWWx4%0D%0AaTdMTkdFeGNBVEpjTTduUQ0K%0D%0A&amp;updated=1582702742130&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26251&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjYyNTF8bXlJX19Dbl9EdE4xU24wQXZWME9nZDRPZ1Rz%0D%0AMjJwdjhDOEtfLXl1VUJHbw0K%0D%0A&amp;updated=1582809897473&quot;},{&quot;value&quot;:&quot;image1585820109080.png&quot;,&quot;id&quot;:&quot;88-27678&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27678?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc2Nzh8eDlLcVQtQTJWdWhLQmtlblEwRGNQNWFxM0JB%0D%0AMUJkbktEellJMGxUbFVscw0K%0D%0A&amp;updated=1585820109693&quot;},{&quot;value&quot;:&quot;image1585821544231.png&quot;,&quot;id&quot;:&quot;88-27680&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27680?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc2ODB8d09QeVgzZHNIVmZnOUtwcmpibzZKUG1vYXZ4%0D%0AbE9fZ2dRYjRNczNfdGptaw0K%0D%0A&amp;updated=1585821544945&quot;},{&quot;value&quot;:&quot;image1585821955844.png&quot;,&quot;id&quot;:&quot;88-27681&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27681?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc2ODF8RWZPZW9jLVBGa19ucDNGd1pRYklpa3NQQmR4%0D%0AQm54bmhkODMxLVJHanJGcw0K%0D%0A&amp;updated=1585821956477&quot;},{&quot;value&quot;:&quot;image1585832993152.png&quot;,&quot;id&quot;:&quot;88-27700&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27700?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MDB8amdnTGFMUnlkdmpZRzRPX0JpZkc1N3RoUm9z%0D%0AVWdHeGNrTmplSUhkN3ZDcw0K%0D%0A&amp;updated=1585832993970&quot;},{&quot;value&quot;:&quot;image1585833017220.png&quot;,&quot;id&quot;:&quot;88-27701&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27701?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc3MDF8M0ZEOGlzWmRvM2JnQ0VSaDZHN3BXUjU1eFVV%0D%0ALXV3TFJhVFZiLS1mQXBuVQ0K%0D%0A&amp;updated=1585833017890&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50528&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;нужно приложить письмо&lt;br/&gt;требования не готовы, как именно на верификацию попадают?&lt;/p&gt;\n&lt;p&gt;делать будем в УП, предварительно 50-70 SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580715089476,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52672&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582896179438,&quot;updated&quot;:1582896702266,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52764&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; как будет использоваться&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;instance:rgsb_auto/rgsb_cash(может быть оба значения,если доступ есть и там,и там)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;предлагаю в базу писать gatekeeper_id в поле scope_id, тогда по нему можно будет сразу отсекать тех, кто не принадлежит текущему приложению&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583136194955,&quot;updated&quot;:1583136206644,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52776&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;p&gt;фильтр по региону оставляет только записи с МАБом или все салоны и агентов тоже надо фильтровать?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583138832460,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52779&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/i.smelkov\&quot; title=\&quot;Илья Смелков\&quot; data-user-id=\&quot;24-251\&quot;&gt;@Илья Смелков&lt;/a&gt; на первый вопрос ок,можно сделать так&lt;br/&gt;На второй,нужно фильтровать все записи по мабу. И агентов с автосалонами тоже&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139386646,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52782&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139978839,&quot;updated&quot;:1583143544279,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52848&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{:id=&amp;gt;2831,\n :action=&amp;gt;&amp;quot;extend&amp;quot;,\n :resource=&amp;gt;&amp;quot;sm_rgsb&amp;quot;,\n :bank_id=&amp;gt;&amp;quot;rgsb&amp;quot;,\n :project_id=&amp;gt;&amp;quot;auto&amp;quot;,\n :params=&amp;gt;\n  {:request_id=&amp;gt;2831,\n   :id=&amp;gt;2831,\n   :point_of_sale=&amp;gt;\n    {:id=&amp;gt;4507,\n     :title=&amp;gt;&amp;quot;Iona Frisbee&amp;quot;,\n     :cluster=&amp;gt;\n      {:id=&amp;gt;33451,\n       :name=&amp;gt;nil,\n       :role=&amp;gt;&amp;quot;director_light_network&amp;quot;,\n       :auto_business_module=&amp;gt;\n        {:id=&amp;gt;7168,\n         :title=&amp;gt;&amp;quot;Izzy Backyet&amp;quot;,\n         :is_dfo=&amp;gt;false,\n         :subsidiary=&amp;gt;{:id=&amp;gt;7353, :director_level_1=&amp;gt;{:id=&amp;gt;33450, :full_name=&amp;gt;&amp;quot;  &amp;quot;}},\n         :antifrods=&amp;gt;[{:id=&amp;gt;67, :verification_type=&amp;gt;&amp;quot;third_person&amp;quot;, :credit_amount=&amp;gt;0.33333e3, :reason=&amp;gt;&amp;quot;reason3&amp;quot;}]}}},\n   :auto_show=&amp;gt;\n    {:id=&amp;gt;6819,\n     :antifrods=&amp;gt;[{:id=&amp;gt;66, :verification_type=&amp;gt;&amp;quot;person&amp;quot;, :credit_amount=&amp;gt;0.22222e3, :reason=&amp;gt;&amp;quot;reason2&amp;quot;}]},\n   :manager=&amp;gt;\n    {:id=&amp;gt;5810,\n     :antifrods=&amp;gt;[{:id=&amp;gt;65, :verification_type=&amp;gt;&amp;quot;work_and_income&amp;quot;, :credit_amount=&amp;gt;0.11111e3, :reason=&amp;gt;&amp;quot;reason1&amp;quot;}]}}}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160165070,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52849&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка ПП &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160289908,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52955&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка УП и каталог &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583248604146,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53204&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;В связи с обновлением в требованиях, в каком случае должна быть одна проверка с двумя комментариями?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479273986,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53206&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; в примерах в задаче описано&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479796760,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53208&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Ок&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583480720517,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53236&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt; для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;пример2:&lt;br/&gt; карточка на андерратинг с суммой кредита=200тыс&lt;br/&gt; карточка на прозвон с суммой кредита=400тыс&lt;br/&gt; карточка на андерратинг с суммой кредита=300тыс&lt;br/&gt; -выполняется проверка на андеррайтинг по сумме 200тыс с комментарием андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;Я правильно понимаю, что когда у нас несколько карточек, мы ищем тип проверки, у которой сумма минимальна, по ней выполняем сравнение суммы, и, если условие сработало, комментарии используем от всех карточек с таким же типом проверки, даже если у них условие на сумму не выполняется?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583493805292,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53238&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; да,верно. Но это только если у нас андеррайтинг как проверка проходит&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494514532,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53241&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Но это только если у нас андеррайтинг как проверка проходит&lt;/div&gt;&lt;br/&gt;Что это означает?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494743231,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53244&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; мы же для других типов проверок не отправляем комментарий&lt;br/&gt;смотри пример 1&lt;br/&gt;Если у нас выпал прозвон,то мы игнорируем комментарии в карточках андеррайтинга&lt;br/&gt;но если у нас выпал андеррайтинг, то мы берем и отправляем комментарии со всех присутствующих для заявки карточек андеррайтинга&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583495282302,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53929&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; фича с номером 39 уже участвует в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1625\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-74790\&quot; title=\&quot;Интеграция с сервисом Дирекции по управлению Рисками\&quot;&gt;ARGS-1625&lt;/a&gt;, нужно поменять номер здесь или там&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517542037,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53932&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; давай 44, раз все меньше занято&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517806033,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54046&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1627-refactor&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1627-refactor&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584546390717,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54440&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;доработать селект для КН&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;SELECT \n  point_of_sales.*, \n  auto_business_modules.*, \n  point_of_sales.species,\n  antifrods.*\n\nFROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_shows ON auto_shows.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  INNER JOIN antifrods ON \n    (scope_id = auto_business_modules.id AND scope_type = 'MAB')\n    OR\n    (scope_id = auto_shows.id AND scope_type = 'AutoShow')\n    OR\n    (scope_id = #{@gatekeeper_id} AND scope_type = 'Manager')\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584950554270,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55698&quot;,&quot;author&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Синельников&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ГК&lt;br/&gt;branch: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585820908491,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55701&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;АКТЫ &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585821512359,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55763&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В ГК появилась новая роль:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27678?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc2Nzh8dGZ1TzA5NFNUenFGS1hCWEEzdE0xa0ZmOVdW%0D%0ANGozNnhNRXVyN0JYa3Z0RQ0K%0D%0A&amp;amp;updated=1585820109693\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27678\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;выводить id карточки на самой карточке и в списке&lt;br/&gt;выводить id сущности (автосалон,маб,агент)&lt;br/&gt;Фильтры&lt;br/&gt;Тип: автосалон,маб,агент&lt;br/&gt;Дата (с... по ...)&lt;br/&gt;Регион&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27680?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc2ODB8WkRqOC1rM0RVSjNIb2JxNW5YcTg4Si1uTmhN%0D%0Ab2tqY2RFQWRJbmRweEZXUQ0K%0D%0A&amp;amp;updated=1585821544945\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27680\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Все поля в карточке являются обязательными&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27681?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc2ODF8MFRKRE5jRDB0aGRPZU96RjNwR0VVU0pqNnBm%0D%0AN0stSzR5Mk1DeW1DU1ktSQ0K%0D%0A&amp;amp;updated=1585821956477\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27681\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;соответственно выбранному типу в следующую выпадайку передается список автосалонов,мабов или агентов(вместе с id и поиском по нему)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27700?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc3MDB8M29QNjZydWpoRkJNWWRERThoR0F6dFlLZFNp%0D%0AX05VdXVEVm9DZHBIMGNVZw0K%0D%0A&amp;amp;updated=1585832993970\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27700\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27701?sign=MTU5MTY2MDgwMDAwMHwyNC0xODF8ODgtMjc3MDF8eEtYSjJ2eFV0NGtRbWNnb2h5MEdsQVpnZHdW%0D%0AaEVfMFZZeno5MXBXWVNSSQ0K%0D%0A&amp;amp;updated=1585833017890\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27701\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585833082140,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55866&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестовая заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16186/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16186/details/&lt;/a&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Передавать на BPM в extend2 этот признак &amp;quot;antifrod:true&amp;quot;, а также &amp;quot;credit_amount&amp;quot;,&amp;quot;reason&amp;quot;, &amp;quot;verification_type&amp;quot;&lt;br/&gt;(если у нас сработали несколько карточек по автосалону,мабу и агенту,то передаем все карточки)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;antifrods&amp;quot;: [\n-{\n&amp;quot;id&amp;quot;: 13,\n&amp;quot;reason&amp;quot;: &amp;quot;Уловка 22&amp;quot;,\n&amp;quot;credit_amount&amp;quot;: 100,\n&amp;quot;verification_type&amp;quot;: &amp;quot;manual_check&amp;quot;\n},\n-{\n&amp;quot;id&amp;quot;: 14,\n&amp;quot;reason&amp;quot;: &amp;quot;42&amp;quot;,\n&amp;quot;credit_amount&amp;quot;: 100,\n&amp;quot;verification_type&amp;quot;: &amp;quot;manual_check&amp;quot;\n},\n-{\n&amp;quot;id&amp;quot;: 10,\n&amp;quot;reason&amp;quot;: &amp;quot;some_reason&amp;quot;,\n&amp;quot;credit_amount&amp;quot;: 10,\n&amp;quot;verification_type&amp;quot;: &amp;quot;person&amp;quot;\n}\n\n&amp;quot;antifrods&amp;quot;: [\n-{\n&amp;quot;id&amp;quot;: 15,\n&amp;quot;reason&amp;quot;: &amp;quot;автосалон&amp;quot;,\n&amp;quot;credit_amount&amp;quot;: 10,\n&amp;quot;verification_type&amp;quot;: &amp;quot;manual_check&amp;quot;\n}\n],\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Сработала фича 44:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;triggered_features&amp;quot;: [\n44\n],\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;-выполняется проверка на андеррайтинг по сумме 200тыс с комментарием андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;a href=\&quot;https://underwriting-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;id=6037&amp;amp;entity=Document\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://underwriting-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;id=6037&amp;amp;entity=Document&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;reason_underwriting: &amp;quot;[ &amp;quot;42&amp;quot;, &amp;quot;Уловка 22&amp;quot;, &amp;quot;автосалон&amp;quot; ]&amp;quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585917985403,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55867&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестовая заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16189/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16189/details/&lt;/a&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt;для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Назначен только один звонок, хотя было две карточки антифрода - &lt;a href=\&quot;https://underwriting-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;id=6561&amp;amp;entity=Call\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://underwriting-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;id=6561&amp;amp;entity=Call&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;antifrods&amp;quot;: [\n-{\n&amp;quot;id&amp;quot;: 11,\n&amp;quot;reason&amp;quot;: &amp;quot;агент антифрод&amp;quot;,\n&amp;quot;credit_amount&amp;quot;: 500000,\n&amp;quot;verification_type&amp;quot;: &amp;quot;work_and_income&amp;quot;\n}\n],\n...\n&amp;quot;antifrods&amp;quot;: [\n-{\n&amp;quot;id&amp;quot;: 12,\n&amp;quot;reason&amp;quot;: &amp;quot;маб антифрод&amp;quot;,\n&amp;quot;credit_amount&amp;quot;: 1000000,\n&amp;quot;verification_type&amp;quot;: &amp;quot;work_and_income&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585918240237,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1823&quot;,&quot;entityId&quot;:&quot;86-78526&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Снятие ограничения VIN для «Кредит на авто с залогом» РОДИТЕЛЬ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584085754756&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1823&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;идея&lt;/strong&gt;&lt;br/&gt;для праворульных авто снять ограничение на валидацию поля VIN&lt;br/&gt;туда можно вводить любые символы&lt;br/&gt;&lt;strong&gt;тестировать и выкатывать вместе со связными, где задача РОДИТЕЛЬ&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;тест&lt;/strong&gt;&lt;br/&gt;для нового продукта - залоговый кредит на любое тс-доступен свитч &amp;quot;Праворульное ТС&amp;quot;&lt;br/&gt;при его активации поле VIN становится полем свободной формы заполнения( не более 30 символов) и поле все еще обязательно как для ПТС ,так и для ЭПТС&lt;br/&gt;параметр праворульного тс передается на БПМ, если параметр true, то БПМ передает  в верификацию новую проверку с измененным полем VIN (оно в свободной форме и не более 30 символов)&lt;br/&gt;проверить что ошибки на VIN приходят на фронт&lt;br/&gt;верификация успешная( БПМ включает нужное поле и они соответствуют требованиям задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/VR-4427\&quot; title=\&quot;Добавить в проверку ПТС(ЭПТС) 2 поле VIN\&quot; data-issue-id=\&quot;86-80432\&quot; class=\&quot;issue-resolved\&quot;&gt;VR-4427&lt;/a&gt;)&lt;br/&gt;после БПМ больше не посылает проверки тс(розыск ограничение и тд) в верификацию, только проверка птс(эптс ) и все&lt;br/&gt;заявка после поверки птс(эптс) проходит дальше&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585826126209&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1836&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;VR-4427&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1927&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;},{&quot;value&quot;:&quot;ARGS-1928&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;},{&quot;value&quot;:&quot;ARGS-1929&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.kriventsova&quot;,&quot;fullName&quot;:&quot;Кривенцова Александра&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;правый руль для КнАЗ.docx&quot;,&quot;id&quot;:&quot;88-26819&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26819?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjY4MTl8TFZtSjFhcFY1SFdwTERncFBYb3lubFg2UGs2%0D%0AR1FCVF9MV3VSa3phNDE0dw0K%0D%0A&amp;updated=1584085765159&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-27444&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27444?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc0NDR8azdUTV9rRTU5bkI4bC1seGd6TlpjZDZYMl90%0D%0AVkQ5NlQ1SVI3ZWZjUkZjOA0K%0D%0A&amp;updated=1585569818664&quot;},{&quot;value&quot;:&quot;Шаг 5 (РГС) L.png&quot;,&quot;id&quot;:&quot;88-27445&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27445?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc0NDV8eHJlYXFKLVBPaThaRWZRMGljSmltZUpTc0dK%0D%0AbHpZTGprOXpETVpTOWxWUQ0K%0D%0A&amp;updated=1585571202202&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-27446&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27446?sign=MTU5MDcxMDQwMDAwMHwyNC0xODF8ODgtMjc0NDZ8WG1Ca3MyMVQxOEJkaU5TVEJMWWhLOWVBaGpp%0D%0AZWJkVl9iSTlUdUJFMi1CQQ0K%0D%0A&amp;updated=1585571227930&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55250&quot;,&quot;author&quot;:&quot;arseny&quot;,&quot;authorFullName&quot;:&quot;Арсений Культиасов&quot;,&quot;issueId&quot;:&quot;ARGS-1823&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585571252073,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55397&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1823&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;от банка::&lt;/p&gt;\n&lt;p&gt;единственный вопрос, тестировали ли ЦФТ. Со стороны ЦФТ прорабатывали? ВИН передается в ЦФТ, в ЦФТ имеется определенная размерность, если аналитики бП вместе с вами и аналитиками ЦФТ не проработали данный вопрос может сломаться выдача там, где размерность вин будет превышена.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585661826766,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55568&quot;,&quot;author&quot;:&quot;arseny&quot;,&quot;authorFullName&quot;:&quot;Арсений Культиасов&quot;,&quot;issueId&quot;:&quot;ARGS-1823&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;По верификации. В системе есть два поля VIN. Одно с маской и ограничениями, другое — без. Верификатору показывается только одно в задаче.&lt;/p&gt;\n&lt;p&gt;Задача верификатора — вводить то, что видит. Задача масок и ограничений — минимизировать количество ошибок с учётом заданных правил. С учётом этого, верификатору даже не обязательно помечать, что поле с ограничениями или без. Можно попробовать запустить и потестировать так. Если увидим, что лучше всё-таки помечать — будем помечать.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585736806261,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;support&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}]" />
      </map>
    </option>
  </component>
</application>