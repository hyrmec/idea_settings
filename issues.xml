<application>
  <component name="YouTrack Issues">
    <option name="persistentIssues">
      <map>
        <entry key="bpm_engine p.nikulshin@https://balance.myjetbrains.com/youtrack" value="[{&quot;id&quot;:&quot;ARGS-1675&quot;,&quot;entityId&quot;:&quot;86-75913&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Точка интеграции : одобрение клиента&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1581082054397&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1675&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Номер задачи для банка&lt;/strong&gt;&lt;br/&gt;1140: схема этапности интеграции и параметры интеграции по новому продукту &amp;quot;Кредит на авто с залогом&amp;quot;.&lt;br/&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Реализовать точку интеграции, после одобрения клиента&lt;br/&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;При переходе заявки в decision_state (первый раз) ПЕРЕД ОТПРАВКОЙ &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; на бэк&lt;br/&gt;Отправлять в банк-прокси инф о том что клиента одобрили - сообщение &lt;code class=\&quot;inline-code\&quot;&gt;bank_proxy / rgsb_proxy.approved_request&lt;/code&gt;&lt;br/&gt;&lt;em&gt;пример запроса:&lt;/em&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n  &amp;quot;id&amp;quot;: 9920579,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.prod.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;approved_request&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 9920579,\n    &amp;quot;meta&amp;quot;: {\n      &amp;quot;from&amp;quot;: &amp;quot;balance-platform&amp;quot;,\n      &amp;quot;action&amp;quot;: &amp;quot;approved_request&amp;quot;,\n      &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-07 13:50:32 +0000&amp;quot;\n    },\n    &amp;quot;action&amp;quot;: &amp;quot;approved_request&amp;quot;,\n    &amp;quot;request&amp;quot;: {\n      &amp;quot;status&amp;quot;: &amp;quot;APPROVED_CLIENT&amp;quot;,\n      &amp;quot;request_id&amp;quot;: 3071071,\n    },\n    &amp;quot;resource&amp;quot;: &amp;quot;rgsb_proxy&amp;quot;,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;rgsb_proxy&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;получать ответ &lt;code class=\&quot;inline-code\&quot;&gt;bank_proxy / rgsb_proxy.approved_request_done&lt;/code&gt;&lt;br/&gt;&lt;em&gt;пример ответа:&lt;/em&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n  &amp;quot;id&amp;quot;: 10226555,\n  &amp;quot;to&amp;quot;: &amp;quot;bpm.prod.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;approved_request_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 10226555,\n    &amp;quot;ok&amp;quot;: true,\n    &amp;quot;data&amp;quot;: {\n      &amp;quot;root&amp;quot;: {\n        &amp;quot;meta&amp;quot;: {\n          &amp;quot;ok&amp;quot;: true,\n          &amp;quot;from&amp;quot;: &amp;quot;rgs&amp;quot;,\n          &amp;quot;action&amp;quot;: &amp;quot;approved_response&amp;quot;,\n          &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-10 16:23:06 +0300&amp;quot;,\n          &amp;quot;error_message&amp;quot;: &amp;quot;&amp;quot;\n          &amp;quot;error_code&amp;quot;: &amp;quot;&amp;quot;\n        },\n        &amp;quot;response&amp;quot;: {\n          &amp;quot;status&amp;quot;: &amp;quot;APPROVED_CLIENT&amp;quot;\n        }\n      }\n    },\n    &amp;quot;action&amp;quot;: &amp;quot;approved_request_done&amp;quot;,\n    &amp;quot;resource&amp;quot;: &amp;quot;rgsb_proxy&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;rgsb_proxy&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Обрабатывать поле &lt;code class=\&quot;inline-code\&quot;&gt;error_code&lt;/code&gt; согласно уже реализованным реакциям &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-604\&quot; title=\&quot;code_error\&quot; data-issue-id=\&quot;86-58201\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-604&lt;/a&gt;&lt;br/&gt;&lt;em&gt;варианты входящих ошибок:&lt;/em&gt;&lt;br/&gt;XMLCHK001                                       -              реакция уже реализована&lt;br/&gt;DATACHK001                                      -              реакция уже реализована&lt;br/&gt;APPLCHK001                                      -             реакция уже реализована&lt;br/&gt;APPLCHK002                                     -              реакция уже реализована&lt;br/&gt;APPLCHK006                                      -             Действие &amp;quot;approved_request&amp;quot; запрещено. Требуется вмешательство сотрудника банка&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;На БЭК отдать доработку(ближайшую по процессу)  :Для дальнейшей обработки обратитесь в ЦПОД&lt;/code&gt;&lt;br/&gt;APPROVEDSTATECHK001            -              Для дальнейшей обработки обратитесь в поддержку банка (Состояние заявки не подходящее);&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;На БЭК отдать доработку(ближайшую по процессу) :Для дальнейшей обработки обратитесь в ЦПОД&lt;/code&gt;&lt;br/&gt;APPROVEDSTATECHK002            -              Заявка уже находится в целевом состоянии;&lt;br/&gt;timeout_decline&lt;br/&gt;APPROVEDSTATECHK003            -              Для дальнейшей обработки обратитесь в поддержку банка (Ошибка перехода)&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;На БЭК отдать доработку(ближайшую по процессу) :Для дальнейшей обработки обратитесь в ЦПОД&lt;/code&gt;&lt;br/&gt;APPROVEDSTATECHK004            -              Для дальнейшей обработки обратитесь в поддержку банка (Ошибка перехода)&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;На БЭК отдать доработку(ближайшую по процессу) :Для дальнейшей обработки обратитесь в ЦПОД&lt;/code&gt;&lt;br/&gt;APPROVEDGOUNIVERR001        -              Для дальнейшей обработки обратитесь в поддержку банка (Ошибка перехода)&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;На БЭК отдать доработку(ближайшую по процессу) :Для дальнейшей обработки обратитесь в ЦПОД&lt;/code&gt;&lt;br/&gt;APPROVEDINTERR001                  -              Для дальнейшей обработки обратитесь в поддержку банка (Ошибка: [SQLERRM])&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;На БЭК отдать доработку(ближайшую по процессу) :Для дальнейшей обработки обратитесь в ЦПОД&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Под ближайшей доработкой&lt;/strong&gt; подразумевается отправка сообщения об ошибке в &lt;code class=\&quot;inline-code\&quot;&gt;partnerka / sm_rgsb.choose_deal_condition&lt;/code&gt;&lt;br/&gt;если клиент не смотря на ошибку пытается опять пройти дальше (т е  бэк прислал partnerka choose_deal_condition_done, object_verification, change_product-то есть во всех видах сообщений на этом этапе), то перед тем как продолжить иди по процессу мы отправляем повторный запрос в интеграцию&lt;br/&gt;если интеграция не реагирует ошибкой , то перезатираем ошибку в мемори и идем дальше&lt;br/&gt;если реагирует ошибкой, то  отправляем БЭКу повторную ошибку , уже реализовано в задаче (Ваша проблема не решена. Дождитесь ответа от сотрудника ЦПОД) (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1349\&quot; title=\&quot;Доработка расшифровки ошибок\&quot; data-issue-id=\&quot;86-70418\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1349&lt;/a&gt;)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Back&lt;/strong&gt;&lt;br/&gt;в сообщении  &lt;code class=\&quot;inline-code\&quot;&gt;partnerka choose_deal_condition&lt;/code&gt;  ждать  от БПМ  сообщение об ошибке, согласовать с ним в какой переменной&lt;br/&gt;аналогично задаче (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-604\&quot; title=\&quot;code_error\&quot; data-issue-id=\&quot;86-58201\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-604&lt;/a&gt;) прокидывать ошибку на фронт&lt;br/&gt;и в случае если клиент с 6 шага нажимает кнопку &amp;quot;далее&amp;quot;(т е БЭК посылает на БПМ  choose_deal_condition_done, object_verification, change_product)&lt;br/&gt;должны появляться окна предупреждения(вы решили свою проблему?), согласно задаче  &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1502\&quot; title=\&quot;1043 Расшифровка ошибок ЦФТ\&quot; data-issue-id=\&quot;86-72463\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1502&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;Быть готовым на 6 шаге(одобрение лимита) показывать сообщения об ошибке от бэка, согласно задачам &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1349\&quot; title=\&quot;Доработка расшифровки ошибок\&quot; data-issue-id=\&quot;86-70418\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1349&lt;/a&gt; и &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1502\&quot; title=\&quot;1043 Расшифровка ошибок ЦФТ\&quot; data-issue-id=\&quot;86-72463\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1502&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Банк-прокси&lt;/strong&gt;&lt;br/&gt;сделать 9 точку интеграции с банком&lt;br/&gt;пример сообщений ниже&lt;/p&gt;\n&lt;p&gt;Примеры запросов «approved_request»&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;lt;root&amp;gt;\n  &amp;lt;meta&amp;gt;\n    &amp;lt;action&amp;gt;approved_request&amp;lt;/action&amp;gt;\n    &amp;lt;created_at&amp;gt;2020-02-12 02:56:21 +0000&amp;lt;/created_at&amp;gt;\n    &amp;lt;from&amp;gt;test_rgsb&amp;lt;/from&amp;gt;\n  &amp;lt;/meta&amp;gt;\n  &amp;lt;request&amp;gt;\n    &amp;lt;request_id&amp;gt;3321036&amp;lt;/request_id&amp;gt;\n    &amp;lt;status&amp;gt;APPROVED_CLIENT&amp;lt;/status&amp;gt;\n  &amp;lt;/request&amp;gt;\n&amp;lt;/root&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Пример ответа «approved_response»&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;lt;root&amp;gt;\n  &amp;lt;meta&amp;gt;\n    &amp;lt;from&amp;gt;rgs&amp;lt;/from&amp;gt;\n    &amp;lt;created_at&amp;gt;2020-02-12 10:54:46 +0300&amp;lt;/created_at&amp;gt;\n    &amp;lt;action&amp;gt;approved_response&amp;lt;/action&amp;gt;\n    &amp;lt;ok&amp;gt;true&amp;lt;/ok&amp;gt;\n   &amp;lt;error_message/&amp;gt;\n    &amp;lt;error_code/&amp;gt;\n  &amp;lt;/meta&amp;gt;\n  &amp;lt;response&amp;gt;\n    &amp;lt;request_id&amp;gt;3321036&amp;lt;/request_id&amp;gt;\n    &amp;lt;status&amp;gt;APPROVED_CLIENT&amp;lt;/status&amp;gt;\n  &amp;lt;/response&amp;gt;\n&amp;lt;/root&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Тест-препрод-ЦФТ&lt;/strong&gt;&lt;br/&gt;завести заявку, одобрить клиента , проверить что все отправляется корректно в банк-прокси,  и принимается , и если приходит  error_code, то обработка согласно написанным реакциям(остается в decision_state или таймаут деклайн)- +окошко об ошибке для фронта&lt;br/&gt;проверить что Back принял ошибку корректно, показывает всплывающие окна для пользователя, если он хочет идти дальше и со всем соглашается , то еще раз послали сообщение на бпм,  в случае если опять интеграция ответила ошибкой , то мы показали сообщение о том что проблема не решена,&lt;br/&gt;если с интеграцией все хорошо то мы пошли дальше по процессу.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анастасия Кряжова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kryazhova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581932420965&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;SCOR-1734&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1463&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;АК_Этапы интеграции_20200130.xlsx&quot;,&quot;id&quot;:&quot;88-25517&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25517?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU1MTd8QmREK1JMMlFTVWkyRUlJcTVlcC9CeHdhRHp5ekliRHR5TmpwVVBuZG1Pcz0=&amp;updated=1581082096359&quot;},{&quot;value&quot;:&quot;Этапность процесса автокредита_4v3_1_коммент интеграция.pdf&quot;,&quot;id&quot;:&quot;88-25518&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25518?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU1MTh8bE5wOFRNeDU1WWxWK2g3UGI3UVIwRzNJYWphNkNaNlh1RE10UHhhSlh5TT0=&amp;updated=1581082096357&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1642&quot;,&quot;entityId&quot;:&quot;86-40620&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Сделать сервис каталога устойчивым к разрывам соединений&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1547218189292&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1642&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;При разрыве коннекта с базой/rmq сервис неправильно завершает работу и зависает.&lt;br/&gt;Старый модуль для переподключения к RMQ плохо работает с асинхронным кодом.&lt;br/&gt;Необходимо перенести решение с userdata-ng/bpm-ng.&lt;br/&gt;Обратить внимание на количество используемых коннектов (сервис сейчас ест очень много коннектов, желательно уменьшить)&lt;/p&gt;\n&lt;p&gt;Тестирование:&lt;br/&gt;Регресс тест запросов catalog.income и catalog.rosstat_income.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581925710974&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ADM-8341&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;Z-1141&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1640&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирована&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;High&quot;],&quot;valueId&quot;:[&quot;High&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Релиз&quot;],&quot;valueId&quot;:[&quot;Релиз&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#42a3df&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-20967&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1642&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Все еще отваливается&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1547563255083,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51270&quot;,&quot;author&quot;:&quot;a.urpina&quot;,&quot;authorFullName&quot;:&quot;Урпина Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1642&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;11/02 в 15:01 повторение проблемы, обнаружили и пофиксили за 4 минуты&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581423166762,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51312&quot;,&quot;author&quot;:&quot;m.nuzhnyj&quot;,&quot;authorFullName&quot;:&quot;Максим Нужный&quot;,&quot;issueId&quot;:&quot;ARGS-1642&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Создан отдельный сервер для приложения и БД.&lt;br/&gt;Сдеалн новый шаблон развертывания сервиса с рассчетом на масштабирование.&lt;br/&gt;Сервис готов для тестирования в stage окружении.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581434209411,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51467&quot;,&quot;author&quot;:&quot;a.urpina&quot;,&quot;authorFullName&quot;:&quot;Урпина Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1642&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;повторение ситуации 12.02 - 10 минут&lt;br/&gt;повторение ситуации 13.02 - отвалился в 4 утра, заявки висели 3 часа(!) до момента начала смены сапорта&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581567578437,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;},{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1639&quot;,&quot;entityId&quot;:&quot;86-75029&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Изменение порядка отправления запросов из BPM в Scoring&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Никита Лукьянов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580395573668&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1639&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Для того, чтобы при повторном запросе в скоринг по тому же клиенту использовать не протухшие данные, необходимо реализовать процесс подачи запросов в форме каскада.&lt;/p&gt;\n&lt;p&gt;На данный момент из BPM РГСБ отправляются запросы по клиенту в скоринг в формате:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;ФССП&lt;/li&gt;\n&lt;li&gt;НБКИ&lt;/li&gt;\n&lt;li&gt;Эквифакс&lt;/li&gt;\n&lt;li&gt;ОКБ&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;Необходимо&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;pre_scoring_state&lt;/code&gt; привести запросы BPM в формат каскада, то есть запросы по клиенту в скоринг должны выглядеть таким образом:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;ФССП&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ + Эквифакс&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ + Эквифакс + ОКБ&lt;br/&gt;Уточнения по &lt;code class=\&quot;inline-code\&quot;&gt;source&lt;/code&gt;:&lt;br/&gt;-&amp;quot;fssp&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;nbki&amp;quot;: &amp;quot;ch_only&amp;quot;&lt;br/&gt;-&amp;quot;equifax&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;okb&amp;quot;: &amp;quot;user_info&amp;quot;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;в scoring_1_state&lt;br/&gt;ДОПОЛНИТЕЛЬНО Запрашивать историю по клиенту&lt;br/&gt;Т. е к sources добавить: (получиться как в reverify - все возможные проверки - кэш не нужен)&lt;br/&gt;-&amp;quot;fssp&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;nbki&amp;quot;: &amp;quot;ch_only&amp;quot;&lt;br/&gt;-&amp;quot;equifax&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;okb&amp;quot;: &amp;quot;user_info&amp;quot;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;В reverify_state&lt;br/&gt;Убиваем свой кэш (ходим всегда в скоринг со всеми сорсами - как в scoring_1_state)&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;! Также необходимо приложить комит по отправляемым запросам для Дмитрия Г. (&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/houdini\&quot; title=\&quot;Дима Голубь\&quot; data-user-id=\&quot;24-1\&quot;&gt;@Дима Голубь&lt;/a&gt;)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;br/&gt;Разные поведения заявок проверить&lt;br/&gt;Проверить отказы, доработки (предеклайны)&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;nikita.lukyanov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581921220733&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;SCOR-1729&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;подзадача&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;High&quot;],&quot;valueId&quot;:[&quot;High&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1479&quot;,&quot;entityId&quot;:&quot;86-72088&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Заявка виснет при отсутствии ИНН работодателя&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Карина Сафарова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576747771528&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1479&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В заявке 3159568 клиент указал как место работы ликвидированную компанию ООО &amp;quot;ПАМО&amp;quot;, в Дадате у этой компании нет ИНН, в следствии чего заявка зависла на pre_scoring_decision_state и не могла пройти далее.&lt;/p&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24048?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjQwNDh8S1M4SDRiT3lVV1kwQjl2R2N1UFJqbENJMktNU2FRdkJjVHJuY2hLYWNkZz0=&amp;amp;updated=1576747692636\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;k.safarova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581916290467&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;High&quot;],&quot;valueId&quot;:[&quot;High&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Queue&quot;],&quot;valueId&quot;:[&quot;Queue&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-24048&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24048?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQwNDh8Ym5IdlFITktUT20wY0M0OXlXUWVzUEhXaWxMSERnaFJZdGVUeFJPelMrdz0=&amp;updated=1576747692636&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-49478&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Баг всплывает периодически, свежий пример:&lt;br/&gt;3238464&lt;br/&gt;АИО &amp;quot;АГЕНСТВО РАЗВИТИЯ ИНВЕСТИЦИЙ И ИННОВАЦИЙ&amp;quot;&lt;/p&gt;\n&lt;p&gt;Нужно автоматизировать решение проблемы, либо выработать ручной алгоритм решения такой проблемы&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579419757069,&quot;updated&quot;:1579419767729,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51659&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Повторение: 3342216&lt;br/&gt;ООО &amp;quot;ГАЗПРОМ ПЕРЕРАБОТКА ОРЕНБУРГ&amp;quot;&lt;br/&gt;По ЕГРЮЛ компания ликвидирована, отправил в отказ&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581915938497,&quot;updated&quot;:1581916306396,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51660&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Запрос в СПАРК можно осуществлять как по ИНН, так и по ОГРН:&lt;br/&gt;&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/825163825\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/825163825&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/952205393\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/952205393&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;На ИНН компании так же завязана логика определения типа работодателя (ИП или ЮЛ), нужно найти другой способ получения этой информации&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581916290469,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1463&quot;,&quot;entityId&quot;:&quot;86-71943&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Программа залоговый кредит на любое ТС&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576610951530&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1463&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Требование&lt;/strong&gt;&lt;br/&gt;1140: Срок установки на Пре-ПРод = третья декада января. От Банка будут: СПР и тест-кейсы.&lt;br/&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;Дизайн&lt;/strong&gt;&lt;br/&gt;на калькуляторе будет добавить и продумать 3 продукт(Залоговый кредит на любое ТС)&lt;br/&gt;см вложение&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ЦУ&lt;/strong&gt;&lt;br/&gt;Если есть места, которые не учтены тут, и там жестко разные правила обработки для залог\\беззалог, опишите их списком в коммент, разберем что делать.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;реализовать шаблон дизайнера ( название для нового продукта: Залоговый кредит на любое ТС)&lt;br/&gt;комментарий по шаблону:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если выбирается &amp;quot;залоговый кредит на любое ТС&amp;quot; , то госпрограмма не доступна ( products: {id: &amp;quot;rgsb_pledge_true_every_ts&amp;quot;})&lt;/li&gt;\n&lt;li&gt;нет ограничений на выбор бу\\новое&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;отправлять выбранные параметры БЭКу как новый продукт  {id: &amp;quot;rgsb_pledge_true_every_ts&amp;quot;}&lt;/li&gt;\n&lt;li&gt;условие фиксации срока кредитования к сроку страхования оставить без изменений для нового продукта (т. е. таких условий нет и не надо)&lt;/li&gt;\n&lt;li&gt;НЕ выводить промо окошко, как для залогового тс, но предусмотреть  что для нового продукта будет реализована аналогичное промо&lt;/li&gt;\n&lt;li&gt;на 6 шаге показывать птс\\эптс\\инф.письмо птс\\эптс , поля  и загрузку документов как для залогового тс&lt;/li&gt;\n&lt;li&gt;БЭК будет присылать новый атрибут в cars - available_for_product&lt;br/&gt;внутри атрибута будут перечислены продукты для которых доступна данная марка модель&lt;br/&gt;логика такая:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;в зависимости от того, какой продукт выбирает пользователя нужно показывать  определенные марки и модели\nнапример пользователь выбрал залоговый кредит тс, то нужно дать на выбор все марки\\модели у которых присутствует в available_for_every_ts: rgsb_pledge_true\nесли пользователь выбрал изначально для залогового кредита киа рио, а потом переключил на беззалоговый кредит( при котором эта марка модель не доступна), то перед тем как отправлять на БЭК данные , валидировать на доступность марки модели у продукта, в случае недоступности, выдать ошибку и не пропускать дальше&amp;quot;Данная марка\\модель не доступна для выбранного продукта&amp;quot;(валидация на калькуляторе)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Реализовать новый продукт в products.yaml (на уровне залог\\беззалог)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;условия_кредит_с_залогом\nусловия_кредит_без_залога\nусловия_кредит_с_залогом_любое_тс: &amp;amp;default_constraints_pledge_true_every_ts\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;условия_кредит_с_залогом_любое_тс: &amp;amp;default_constraints_pledge_true_every_ts\nимя_для_предложений: Залоговый кредит на любое ТС\n  базовая_ставка: 0.169\n  размер_кредита:\n    величина: [100_000, 1_500_000]\n  первоначальный_платеж: [0.0, 1.0]\n  условия_изменения_ставки:\n    первоначальный_платеж_от:\n      0.2: 0\n      0.4: 0\nпродукт:\n  - ruby:\n      active: true\n      id: rgsb_pledge_true_every_ts\n    название: Автокредит залоговый на любое ТС\n    необходимые_условия:\n      &amp;lt;&amp;lt;: *default_constraints\n      &amp;lt;&amp;lt;: *default_constraints_pledge_true_every_ts\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;передавать на фронт в каталоге новый продукт&lt;/li&gt;\n&lt;li&gt;валидацию задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1403\&quot; title=\&quot;Фиксация сроков по СУ к сроку кредита\&quot; data-issue-id=\&quot;86-71280\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1403&lt;/a&gt; НЕ распространять и на новый продукт&lt;/li&gt;\n&lt;li&gt;в limit_approved_state запрашивать ПТС/ЭПТС /ИНФ письмо у Фронта как для залогового ТС&lt;/li&gt;\n&lt;li&gt;условия при изменении Стоимость ТС (vehicle_cost) Модель машины (model) Марка машины (brand) Новое ТС или с пробегом (is_new) -оставить как для залогового тс (описание  в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-969\&quot; title=\&quot;В стейт машину добавить рассмотрение\&quot; data-issue-id=\&quot;86-63916\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-969&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;Для продукта &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_ts&lt;/code&gt; при переходе с шага (где данные ТС) переходить в object_check_state. Доработки ожидать такие же как для залога.&lt;/li&gt;\n&lt;li&gt;алгоритм ,зафиксированный  в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1398\&quot; title=\&quot;БАГ с некорректным отображением Полиса Дорожная/Сервисная карта\&quot; data-issue-id=\&quot;86-71212\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1398&lt;/a&gt;, где СУ не в кредит и кредит залоговый и выбрано каско, для нового продукта не действует, т е не должны будем ничего запрашивать&lt;/li&gt;\n&lt;li&gt;для нового продукта оставить логику подтверждения дохода (во всех стейтах, где есть валидации пдн) как для беззалога(если лимит  &amp;gt;500000, то требует приложить документ подтверждающий доход) последние правки были в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1556\&quot; title=\&quot;не пропускает заявку до 500 000 беззалог после после смены условий на предыдущем шаге\&quot; data-issue-id=\&quot;86-73383\&quot;&gt;ARGS-1556&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;добавить в таблицу cars новый атрибут available_for_product(многозначное поле)&lt;br/&gt;для настройки пока что поставить у всех записей в таблице cars в этом атрибуте все 3 значения(через запятую):&lt;br/&gt;rgsb_pledge_true_every_ts,  rgsb_pledge_true и  rgsb_pledge_false&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;при формировании каталога для фронта в cars добавить атрибут available_for_product и отправлять его значения&lt;/li&gt;\n&lt;li&gt;в limit_approved_state когда фронт посылает данные машины(марка\\модель) валидировать признак available_for_product , если у выбранной марки\\модели не доступен выбранный продукт, то присылать ошибку фронту &amp;quot;Данная марка\\модель не доступна для выбранного продукта&amp;quot; и не пропускать дальше )&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;10\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Запрашивать и принимать документы как для залогового тс (Счета по страховкам, полисы)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Абакус&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать название нового продукта rgsb_pledge_true_every_ts от БЭКа при расчете условий кредита, по нему ходить в products.yaml&lt;/li&gt;\n&lt;li&gt;Принимать название нового продукта rgsb_pledge_true_every_ts от БПМ при расчете Риск-грейдов\\сегментов, меп\\лимит\\LTV, pdn&lt;br/&gt;Для нового продукта( rgsb_pledge_true_every_ts) все расчеты аналогичные как для беззалога (rgsb_pledge_false)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;БЭК-бумага&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;набор КОДа как для продукта rgsb_pledge_true, т е запрашивать и принимать документы как для залогового тс, !кроме договора залога, новый шаблон во вложении!!!&lt;/li&gt;\n&lt;li&gt;для параметра в ИУ [CONDITIONS_FOR_CONTRACTS] добавить условие по новому продукту rgsb_pledge_true_every_ts&lt;br/&gt;если rgsb_pledge_true_every_ts, то подставлять текст:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Заемщик обязан предоставить обеспечение исполнения обязательств по Договору, заключив Договор залога.\n*Договоры заключаются только при условии  оформления Анкеты-заявления Заемщика о предоставлении потребительского кредита, содержащего согласие Заемщика на оказание ему таких услуг.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Для нового продукта валидация по PD аналогично как у rgsb_pledge_false( не забыть это учесть и для ключевых партнеров &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1306\&quot; title=\&quot;Корректировка СПР в части ключевых партнёров\&quot; data-issue-id=\&quot;86-69607\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1306&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;в условиях по отправке на прозвон  и андеррайтинг,прописать rgsb_pledge_true_every_ts&amp;quot; аналогично   rgsb_pledge_false( например если по какой, то фиче стоит условие что если продукт-беззалог, то проверяем, значит для нового продукта будет такая же проверка)&lt;/li&gt;\n&lt;li&gt;Для продукта &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_pledge_true_every_ts&lt;/code&gt;, когда БЭК присылает &lt;code class=\&quot;inline-code\&quot;&gt;check_object&lt;/code&gt;&lt;br/&gt;Проверять ПТС (и аналогичные доки) и делать запросы на внешние проверки как для залога, при этом&lt;br/&gt;проверка стоимости ТС (av100) для нового продукта не требуется( см задачу &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-159\&quot; title=\&quot;decision_state  + change_product_state\&quot; data-issue-id=\&quot;86-52777\&quot;&gt;ARGS-159&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;принимать от БЭКа и посылать на верификацию документы (согласования сделки, сделки) как для залогового ТС&lt;/li&gt;\n&lt;li&gt;в  rgsb_proxy.lookup_request посылать в  параметре product_id для нового продукта значение &lt;code class=\&quot;inline-code\&quot;&gt;BP_AUTO2_ZALOG&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;в approval_history записывать одобрение по новому продукту отдельно (products: {id: &amp;quot;rgsb_pledge_true_every_ts&amp;quot;)&lt;/li&gt;\n&lt;li&gt;В условиях отправки pay_request не учитывать условие про КАСКО( т е если оно не в кредит, то его не нужно отправлять)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Интеграция-Тест пре-прод&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;проверить что интеграция корректно обрабатывает название нового продукта: &lt;code class=\&quot;inline-code\&quot;&gt;BP_AUTO2_ZALOG&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;на фронте новый продукт отображается и выбирается корректно&lt;br/&gt;2 госпрограмма при нем не доступна&lt;/li&gt;\n&lt;li&gt;нет ограничений на выбор новое\\бу тс&lt;/li&gt;\n&lt;li&gt;проверить соответствие продуктовому каталогу, промо должны быть не доступны (рекламных промо окошек так же нет, проверять на автосалоне , где они доступны)&lt;/li&gt;\n&lt;li&gt;условие фиксации срока кредитования к сроку страхования не работает на НП(далее новый продукт)&lt;/li&gt;\n&lt;li&gt;идет запрос на ПТС\\ЭПТС\\ИНФ письмо , , бпм принимает , проверяет и возвращает ошибки&lt;/li&gt;\n&lt;li&gt;в таблице cars новый атрибут available_for_every_ts(проверить на новом продукте, что если у марки модели стоит только признак нового продукта, то она появится в списке только для новго продукта, а если переключить на старый, где она не доступна , то придет ошибка и на 5 шаге тоже)&lt;/li&gt;\n&lt;li&gt;у НП алгоритм задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-969\&quot; title=\&quot;В стейт машину добавить рассмотрение\&quot; data-issue-id=\&quot;86-63916\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-969&lt;/a&gt; реализован как для беззалога&lt;/li&gt;\n&lt;li&gt;алгоритм ,зафиксированный  в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1398\&quot; title=\&quot;БАГ с некорректным отображением Полиса Дорожная/Сервисная карта\&quot; data-issue-id=\&quot;86-71212\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1398&lt;/a&gt;, где СУ не в кредит и кредит залоговый и выбрано каско, для нового продукта не действует, т е не должны будем ничего запрашивать-проверить&lt;/li&gt;\n&lt;li&gt;при превышении лимита(&amp;gt;500000) необходим документ подтверждающий доход&lt;/li&gt;\n&lt;li&gt;для НП  Риск-грейдов\\сегментов, меп\\лимит\\LTV,  рассчитывается как для беззалога&lt;/li&gt;\n&lt;li&gt;рассчет пдн, как для беззалога, &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-545\&quot; title=\&quot;Требования ПДН\&quot; data-issue-id=\&quot;86-57541\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-545&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;шаблон ДЗ соответствует приложенному для НП&lt;/li&gt;\n&lt;li&gt;сегмент РD определяется как для беззалога( проверить pd так же для ключевых партнеров &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1306\&quot; title=\&quot;Корректировка СПР в части ключевых партнёров\&quot; data-issue-id=\&quot;86-69607\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1306&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;в интеграции (lookup) НП отсылается как BP_AUTO2_ZALOG&lt;/li&gt;\n&lt;li&gt;одобрение по новому продукту записывается отдельно (и перезаписывается)&lt;/li&gt;\n&lt;li&gt;на 6 шаге не требует обязательно каско или вкаско&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;13&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581685954799&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1675&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1605&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Бумага&quot;,&quot;Front&quot;,&quot;BPM&quot;,&quot;Abacus&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Бумага&quot;,&quot;Front&quot;,&quot;BPM&quot;,&quot;Abacus&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;New&quot;],&quot;valueId&quot;:[&quot;Feature&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#409600&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;TestPREprod&quot;],&quot;valueId&quot;:[&quot;TestPREprod&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;fullName&quot;:&quot;Дмитрий Синельников&quot;}]},{&quot;name&quot;:&quot;Due Date&quot;,&quot;value&quot;:[&quot;1579694400000&quot;],&quot;valueId&quot;:[&quot;1579694400000&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Дата внедрения&quot;,&quot;value&quot;:[&quot;1579694400000&quot;],&quot;valueId&quot;:[&quot;1579694400000&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;1140_Автокредит на любое ТС.docx&quot;,&quot;id&quot;:&quot;88-23999&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-23999?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjM5OTl8L0FwV2VRamVhSTNNQzAwQVhqNEQzb1dYOWYxU3NTL1VHa2t6aitRZkNVbz0=&amp;updated=1576610970132&quot;},{&quot;value&quot;:&quot;1116_новая программа кредитования залоговый кредит на любое ТС.docx&quot;,&quot;id&quot;:&quot;88-24363&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24363?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQzNjN8V2xmRDZ0azBWZG5DVG9pUENGbjhwSE02ZkN4MzVGMk1YVU1wTDlxNzhBND0=&amp;updated=1577780564170&quot;},{&quot;value&quot;:&quot;залог на любое тс.png&quot;,&quot;id&quot;:&quot;88-24884&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24884?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ4ODR8NWEzZ21BckNnWUQ0dGl4Mk4xQ05ZSzhHbmM0ZHVMSWdueWtrdmUwbFlKRT0=&amp;updated=1579775494704&quot;},{&quot;value&quot;:&quot;image1580115950017.png&quot;,&quot;id&quot;:&quot;88-25005&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25005?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUwMDV8VHU5QTl3LzVuSnNRd1NGTnBTWEhNTDFmZTZEc2hJRmVKd3RYRGV1UXRhbz0=&amp;updated=1580115950997&quot;},{&quot;value&quot;:&quot;Договор залога по кредиту на ТС с залогом.doc&quot;,&quot;id&quot;:&quot;88-25236&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25236?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUyMzZ8UURUaTdhSWU3Y0hqWHNTNVJuMjhoYVAwV0xjRXBvUTF0SGJuOXFLT2RMOD0=&amp;updated=1580399096746&quot;},{&quot;value&quot;:&quot;ИУ кредит на авто с залогом.doc&quot;,&quot;id&quot;:&quot;88-25237&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25237?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUyMzd8UUJXQlZ2bFpka3RrYW95Nzd0N1NTNllBcFJMZDJqWlQrNytsVUMxeForbz0=&amp;updated=1580399096745&quot;},{&quot;value&quot;:&quot;pledge_agreement_every_ts.odt&quot;,&quot;id&quot;:&quot;88-25276&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25276?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUyNzZ8ZkhlbHllMU12OWtYTGRhWlIvVGJaZk8yMVNkdkMrWGZwRjdLVUluNXdWND0=&amp;updated=1580479669567&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-47992&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;предварительно 40 SP&lt;br/&gt;на анализ 20 часов - задача будет декомпозированна&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1576676450457,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49402&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Какая должна быть предсмотрена зависисмость суммы кредита от ПСК?&lt;br/&gt;Базовая ставка, размер кредита и клияние страховок  как у беззалогового кредита?&lt;br/&gt;Если аналогично беззалогу , то никакие промо не предусмотрены?&lt;br/&gt;ПТС является обязательным документом(так же подойдут ЭПТС, инф письмо)?&lt;br/&gt;расчет ПДН и оценка ТС как для залогового или беззалогового?&lt;br/&gt;УП&lt;br/&gt;Добавляем для выбора разрешенных продуктов на выбор залог\\беззалог + залог на любое ТС?&lt;br/&gt;Добавляем отдельный продукт в Расчёт вознаграждений?&lt;br/&gt;Для актов остается такой же бизнес процесс?&lt;br/&gt;КОД&lt;br/&gt;Набор КОДа как у залогового ТС?(например есть условие, если СУ не в кредит и продукт залоговый&lt;br/&gt;и есть КАСКО, то мы будет запрашивать квитанцию, полис, дату ококнчания полиса и номер полиса,&lt;br/&gt;а если  продукт не залоговый и нет КАСКО, то не запрашивается ничего, нужно понимать приравнивать ли в таких случаях&lt;br/&gt;продукт к залоговому )&lt;br/&gt;Изменения в ИУ и прочем, как у залогового?или какие-то свои &lt;br/&gt;Интеграция&lt;br/&gt;Будет передаваться новое название программы?(rgsb_pledge_true\\false)&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579256443321,&quot;updated&quot;:1579256675924,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49956&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;открытые вопросы, это КОД и интеграция&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579861304944,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50020&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25005?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjUwMDV8ZXh6VlJtZndqbXlPOWhxTDNYUXVqM1RUUUFES2diMlN6UkwwcC85VCtJQT0=&amp;updated=1580115950997\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580115953631,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50409&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;прислали&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580399054161,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51074&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Для инфо аналитикам и тестировщикам:&lt;br/&gt;1) Фичи, в которых есть условие по программе: &lt;br/&gt; - Если сработала только 7-я фича, для залогового продукта таймаут 30, для остальных 60 (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1072\&quot; class=\&quot;issue-resolved\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-65459\&quot; title=\&quot;Верификация пункт 6\&quot;&gt;ARGS-1072&lt;/a&gt;)&lt;br/&gt; - Если для беззалогового кредита и нового продукта доход не подтвержден, берем средний доход за основной&lt;br/&gt;&lt;br/&gt;2) &amp;quot;В условиях отправки pay_request использовать правила как для залогового продукта&amp;quot;&lt;br/&gt;В csd и pay отправляем страховки, включенные в кредит, и каско для залогового кредита и нового продукта (даже если не в кредит)&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581326932589,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51075&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Вопросы &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kriventsova\&quot; title=\&quot;a.kriventsova\&quot; data-user-id=\&quot;24-205\&quot;&gt;Кривенцова Александра&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kryazhova\&quot; title=\&quot;a.kryazhova\&quot; data-user-id=\&quot;24-126\&quot;&gt;Анастасия Кряжова&lt;/a&gt;&lt;br/&gt;1) Нужен program_name для визуального андеррайтинга. Сейчас так:&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&amp;quot;rgsb_pledge_true&amp;quot;: &amp;quot;Автокредит залоговый&amp;quot;,&lt;br/&gt; &amp;quot;rgsb_pledge_false&amp;quot;: &amp;quot;Автокредит беззалоговый&amp;quot;,&lt;/pre&gt;&lt;br/&gt;2) Проверка регионов на прескоринге и скоринге (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-73\&quot; class=\&quot;issue-resolved\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-51493\&quot; title=\&quot;проверка адресов\&quot;&gt;ARGS-73&lt;/a&gt;) - проверять ли на скоринге для нового продукта?&lt;br/&gt;&lt;br/&gt;3) Нужно ли для нового продукта в CSD отправлять блок с Авто?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581326954984,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51096&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;1.фича 7 как для беззалога&lt;br/&gt;2. про доход, как для беззалога, да &lt;br/&gt;3. rgsb_pledge_true_every_ts: &amp;quot;Автокредит залоговый на любое ТС&amp;quot; ,&lt;br/&gt;4. на скоринге как для беззалога&lt;br/&gt;5. блок с авто нужно отправлять, тк мы всегда проверяем ТС для нового продукта&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;fedor.hramov\&quot; data-user-id=\&quot;24-90\&quot;&gt;Федор Храмов&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581331776702,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51097&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Ок&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581331916444,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51337&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kriventsova\&quot; title=\&quot;Кривенцова Александра\&quot; data-user-id=\&quot;24-205\&quot;&gt;@Кривенцова Александра&lt;/a&gt;&lt;br/&gt;По обновленным требованиям:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;В условиях отправки pay_request не учитывать условие про КАСКО( т е если оно не в кредит, то его не нужно отправлять)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;На верификации сделки есть два условия про КАСКО:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;проверяем квитанцию по каско только для залогового кредита и если каско не входит в кредит&lt;/li&gt;\n&lt;li&gt;проверяем полис только для страховок, включенных в кредит, и каско для залогового кредита независомо от того, включено ли каско в кредит или нет.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;В задаче указано:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;принимать от БЭКа и посылать на верификацию документы (согласования сделки, сделки) как для залогового ТС&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;В связи с обновлением в тексте задачи про КАСКО, в этих двух условиях новый продукт считается залоговым или нет?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581491814497,&quot;updated&quot;:1581491832839,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51347&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;проверяем квитанцию по каско только для залогового кредита и если каско не входит в кредит&lt;/div&gt;&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;fedor.hramov\&quot; data-user-id=\&quot;24-90\&quot;&gt;Федор Храмов&lt;/a&gt; у БЭКа настроено: что если СУ не в кредит, это каско и это залог, то для нового продукта мы ничего ждать не будем (ни полис, ни квитанцию)&lt;br/&gt;поэтому условие для залогового кредита на полис и на квитанцию не объединять с новым продуктом&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581497798229,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51429&quot;,&quot;author&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Синельников&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;pp back branch: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1463&lt;/code&gt;&lt;br/&gt;abacus branch: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1463&lt;/code&gt;&lt;br/&gt;bumaga branch: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1463&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581513147708,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51453&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1463&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1463\nbpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1463\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581517078667,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;}]}, {&quot;id&quot;:&quot;ARGS-1695&quot;,&quot;entityId&quot;:&quot;86-76377&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Обновить доход по Росстату&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1581603308230&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1695&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Catalog который сервис (для РГСБ)&lt;br/&gt;Обновить Список ЗП по росстату для каждого региона (во вложении файл с ЗП)&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581670718080&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;Med&quot;],&quot;valueId&quot;:[&quot;Med&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#fed74a&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;rosstat3.xlsx&quot;,&quot;id&quot;:&quot;88-25709&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25709?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU3MDl8R3R3RWdXQTBvV3RYNGhaL0xSVFBIVzBIZzlnZ3BKUEVXU2d2SmZEZTNUbz0=&amp;updated=1581670707432&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51546&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1695&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Первая задача см. &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-773\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://balance.myjetbrains.com/youtrack/issue/ARGS-773&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581603345890,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1683&quot;,&quot;entityId&quot;:&quot;86-76083&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Добавить свитч в проверку \&quot;паспорт адрес\&quot;&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1581412216658&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1683&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Создать верификаторам  свитч для определения правил проверки паспорта&lt;br/&gt;Мы убрали свитч &amp;quot;адрес без улицы и дома&amp;quot; и для них проверка стала похожей на  проверку ипотеки , а они никогда не заводят адрес вручную, только по дадате&lt;br/&gt;решение является временным:&lt;br/&gt;в связной задача на верификацию для нормального решения проблемы проверки адреса &lt;br/&gt;&lt;br/&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;в проверке document_passport_address.verify отправлять кастомный свитч&lt;br/&gt;название :&lt;br/&gt;&amp;quot;На сканах присутствуют страницы паспорта&amp;quot;&lt;br/&gt;При отклонении этого свича(такого не будет с вероятностью 99.99%) не отказывать и не отсылать никакую ошибку на БЭК(игнорировать)&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;На проверке Паспорт адрес есть свитч :&lt;br/&gt;&amp;quot;На сканах присутствуют страницы паспорта&amp;quot;&lt;br/&gt;При его отклонении БПМ не отказывает и не отсылает ошибку на БЭК, проверка считается корректной и заявка идет дальше по процессу.&lt;br/&gt;&lt;br/&gt;- Сходить к Светлане&lt;/div&gt;\n&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581655908611&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;VR-4286&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;New&quot;],&quot;valueId&quot;:[&quot;Feature&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#409600&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;d.podshchekoldin&quot;,&quot;fullName&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;value&quot;:&quot;alexander.karateev&quot;,&quot;fullName&quot;:&quot;Александр Каратеев&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51542&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1683&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; При отклонении этого свича(такого не будет с вероятностью 99.99%) не отказывать и не отсылать никакую ошибку на БЭК(игнорировать)&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;Если на свитч все-таки нажмут, данные по адресу не будут заполнены, мы не можем это игнорировать&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kriventsova\&quot; title=\&quot;a.kriventsova\&quot; data-user-id=\&quot;24-205\&quot;&gt;Кривенцова Александра&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581602627088,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51544&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1683&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;fedor.hramov\&quot; data-user-id=\&quot;24-90\&quot;&gt;Федор Храмов&lt;/a&gt; отправляем еще раз на проверку верификации, если еще раз такое , то в таймаут деклайн&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581603057076,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51545&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1683&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; отправляем еще раз на проверку верификации&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;Предлагаю тип свитча сделать problematic, тогда задача автоматически повторно назначится на супервайзера&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581603133627,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51547&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1683&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;fedor.hramov\&quot; data-user-id=\&quot;24-90\&quot;&gt;Федор Храмов&lt;/a&gt; тогда после первого раза в деклайн&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581603422781,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51571&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1683&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1683&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1683&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581655874628,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1066&quot;,&quot;entityId&quot;:&quot;86-65352&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Логика для ЮЛ и ИП, по которым нет данных в СПАРК&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1571139993966&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1066&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Проблема&lt;/h1&gt;\n&lt;p&gt;На проде возникла ситуация, когда в заявке по проверке Спарк вернулись пустые значения, в том числе год создания компании.&lt;/p&gt;\n&lt;p&gt;Заявка 3031295 (прод)&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-21529?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjE1Mjl8WWQ2dFFqdDhEOG85VEZ5azZmZWM1K0FlektlblJ6Wmw0OENkLzdBTm04az0=&amp;amp;updated=1571133991946\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;На срок жизни компании завязана логика выставления прозвона по фичам:&lt;br/&gt;5) Стаж из анкеты до 6 мес (job_experience= 1 или 2), при сроке существования организации до 1 года&lt;br/&gt;23) Если стаж клиента по данным анкеты &amp;gt; 1 года И Срок действия организации &amp;lt; 1года&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;Сделать каскадную проверку &lt;strong&gt;ИП&lt;/strong&gt; по сроку действия организации:&lt;br/&gt;В расчете 5 И 23 фичи для прозвонов, если &amp;quot;check_task_company_extended.verification_done&amp;quot; -&amp;gt; &amp;quot;createdYear&amp;quot; ==NULL (нет данных даты из спарка), то&lt;br/&gt;Используем дату создания организации из Dadata (Из сообщения Васк &amp;quot;sm_rgsb.extend&amp;quot;: params-&amp;gt;customer-&amp;gt; job-&amp;gt;name_dadata-&amp;gt; data-&amp;gt;state-&amp;gt;registration_date)&lt;/p&gt;\n&lt;p&gt;Если из дадаты даты создания организации тоже нет, то считать что &lt;em&gt;компании больше года&lt;/em&gt;&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Как определять, кто такой ИП у вас есть стандартная функция по длине  ИНН организации. (Если нет, то напишите в коммент.)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Сделать каскадную проверку &lt;strong&gt;ЮЛ&lt;/strong&gt; по сроку действия организации:&lt;/p&gt;\n&lt;p&gt;В расчете 5, 30 и  23 фичи для прозвонов, если &amp;quot;check_task_company_extended.verification_done&amp;quot; -&amp;gt; &amp;quot;registrationDate&amp;quot; =NULL  (нет данных даты из спарка), то&lt;br/&gt;Используем дату создания организации из Dadata (Из сообщения Васк &amp;quot;sm_rgsb.extend&amp;quot;: params-&amp;gt;customer-&amp;gt; job-&amp;gt;name_dadata-&amp;gt; data-&amp;gt;state-&amp;gt;registration_date)&lt;/p&gt;\n&lt;p&gt;Если из дадаты даты создания организации тоже нет, то считается что &lt;em&gt;компании больше года&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Дата в дадате: нужно обработать, формат такой &amp;quot;677376000000&amp;quot;&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Пример организации для &amp;quot;sm_rgsb.extend&amp;quot;: params-&amp;gt;customer-&amp;gt; job-&amp;gt;name_dadata-&amp;gt; data-&amp;gt;state-&amp;gt;registration_date) = NULL ОТДЕЛЕНИЕ ФИЛИАЛА ООО ЦАБ-ИНДУСТРИТЕХНИК &amp;amp; СЕРВИС ГМБХ (ГЕРМАНИЯ) В РОССИЙСКОЙ ФЕДЕРАЦИИ В Г.НОВОТРОИЦКЕ&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;Данные для теста ИП 1:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;createdYear =NULL\nregistration_date !=  &amp;quot;null&amp;quot;\nтогда 3 кейса:\n- (текущая дата - дата регистрации) &amp;gt; 1 года и стаж &amp;gt; 6 мес == фича 5 не сработала\n- (текущая дата - дата регистрации) &amp;gt; 1 года и стаж &amp;lt; 6 мес == фича 5 не сработала\n- (текущая дата - дата регистрации) &amp;lt; 1 года и стаж &amp;gt; 6 мес == фича 5 не сработала\n\nпроверить все случаи \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Данные для теста ИП 3:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;createdYear =NULL\nregistration_date =  &amp;quot;null&amp;quot; == записали что компании больше года ==23 и 5 фичи не сработали \n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Данные для теста ЮЛ 1:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;registrationDate =NULL\nregistration_date =  &amp;quot;null&amp;quot; == записали что компании больше года==23 и 30 фичи не сработали\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Данные для теста ЮЛ 2:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;registrationDate =NULL\nregistration_date !=  &amp;quot;null&amp;quot; \nтогда 2 кейса:\n- (текущая дата - дата регистрации) &amp;lt; 1 года  и стаж меньше 6 мес == сработала 5 фича,заявка ушла на андеррайтинг\n- (текущая дата - дата регистрации) &amp;lt; 3 мес  с == сработала 30 фича,заявка ушла на андеррайтинг\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Данные для теста ЮЛ 3:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;registrationDate =NULL\nregistration_date !=  &amp;quot;null&amp;quot; \n(текущая дата - дата регистрации) &amp;lt; 1 года и   стаж &amp;gt; 1 года ==сработала 23 фича,заявка ушла на андеррайтинг\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;22&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581600907464&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;Low&quot;],&quot;valueId&quot;:[&quot;Low&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6e6e6&quot;,&quot;fg&quot;:&quot;#888&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;TestPREprod&quot;],&quot;valueId&quot;:[&quot;TestPREprod&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.kryazhova&quot;,&quot;fullName&quot;:&quot;Анастасия Кряжова&quot;},{&quot;value&quot;:&quot;a.kriventsova&quot;,&quot;fullName&quot;:&quot;Кривенцова Александра&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-21529&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-21529?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjE1Mjl8T1JOZWhCaFVQMXJqZHY0aHZ4NTJBSWYvV2x4RkU4T2l0cW14M0VaSHlGbz0=&amp;updated=1571133991946&quot;},{&quot;value&quot;:&quot;Схема фичей 30 5 23 как сейчас.png&quot;,&quot;id&quot;:&quot;88-25350&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25350?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUzNTB8d2o5MTRBMFRqRUVKTUlobTQvMDhYa3NvVFV3MTVvZWg4cCs1SEpRUHZBVT0=&amp;updated=1580820292453&quot;},{&quot;value&quot;:&quot;image1581526347476.png&quot;,&quot;id&quot;:&quot;88-25659&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25659?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU2NTl8MGlBZWlxdDVueGNld3VJOU9kU3FzZmltQjc2aU9LakVsV3dUWGp4T0NVWT0=&amp;updated=1581526348271&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-46760&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm done&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1066\nbpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1066\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1575395106648,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49483&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;.&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579506354080,&quot;updated&quot;:1579512703798,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49495&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;ИП1:&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; - (текущая дата - дата регистрации) &amp;gt; 1 года и стаж &amp;gt; 6 мес == фича 5 не сработала&lt;/div&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12236/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12236/details/&lt;/a&gt;&lt;br/&gt;ОК&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; - (текущая дата - дата регистрации) &amp;gt; 1 года и стаж &amp;lt; 6 мес == фича 5 не сработала&lt;/div&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11745/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11745/details/&lt;/a&gt;&lt;br/&gt;ОК&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; - (текущая дата - дата регистрации) &amp;lt; 1 года и стаж &amp;gt; 6 мес == фича 5 не сработала&lt;/div&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12231/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12231/details/&lt;/a&gt;&lt;br/&gt;ОК&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579512691109,&quot;updated&quot;:1580112375182,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49503&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11748/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11748/details/&lt;/a&gt;&lt;br/&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;&lt;li&gt; (текущая дата - дата регистрации) &amp;lt; 1 года и стаж &amp;lt; 6 мес == заявка ушла на андеррайтинг, 5 фича сработала&lt;/li&gt;&lt;/ul&gt;не сработала фича&lt;br/&gt;от Спарка createdYear: null&lt;br/&gt;от дадаты: registration_date: 1557187200000&lt;br/&gt;от бэка: experience_cid: 2&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579514525677,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49505&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;не срабатывают никакие фичи, если Спарк ничего не вернул, а в дадате status: LIQUIDATED&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.rgsb-prod.cloud.b-pl.pro/admin/bpm/walker/28143/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.rgsb-prod.cloud.b-pl.pro/admin/bpm/walker/28143/details/&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579514613146,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49521&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;Доработка логики работы = ЕСЛИ СТАТУСА КОМПАНИИ НЕТ В СПАРК (и для ИП и для ЮЛ)&lt;br/&gt;если &amp;quot;check_task_company_extended.verification_done&amp;quot; -&amp;gt;params-&amp;gt;fields-&amp;gt;companyStatus: null&lt;br/&gt;Используем статус организации из Dadata (Из сообщения Васк &amp;quot;sm_rgsb.extend&amp;quot;: params-&amp;gt;customer-&amp;gt;job-&amp;gt;name_dadata-&amp;gt; data-&amp;gt;state-&amp;gt;status&lt;br/&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;&lt;li&gt; если статус &amp;quot;: &amp;quot;ACTIVE&amp;quot;, то ОК, если нет(любой другой) то срабатывает фича 22&lt;br/&gt;&lt;/li&gt;&lt;li&gt;если  данные null , то пропускаем дальше заявку(логика осталась такая же как для данных из спарка)&lt;/li&gt;&lt;/ul&gt;логика с сегментами остается&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579521989244,&quot;updated&quot;:1579526224801,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49886&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Данные для теста ЮЛ 1:&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; registrationDate =NULL&lt;br/&gt; registration_date =  &amp;quot;null&amp;quot; == записали что компании больше года==23 и 30 фичи не сработали&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11994/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11994/details/&lt;/a&gt;&lt;br/&gt;Фичи не сработали - ОК.&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579789801318,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50038&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12255/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12255/details/&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;registrationDate =NULL&lt;br/&gt;registration_date !=  &amp;quot;null&amp;quot; &lt;br/&gt;- (текущая дата - дата регистрации) &amp;lt; 3 мес  с == сработала 30 фича,заявка ушла на андеррайтинг&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;фича 30 не сработала&lt;br/&gt;она выставляется на основе флага от спарка &lt;code class=\&quot;inline-code\&quot;&gt;too_young&lt;/code&gt; , а в случае когда в спарке этих данных нет, то и этого флага нет. нужно изменить логику срабатывания фичи.&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;ИСПРАВЛЕНО&lt;/strong&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12678/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12678/details/&lt;/a&gt;&lt;br/&gt;сработала 30 фича&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580118890390,&quot;updated&quot;:1580715870457,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50039&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Данные для теста ЮЛ 3:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;registrationDate =NULL\nregistration_date !=  &amp;quot;null&amp;quot; \n(текущая дата - дата регистрации) &amp;gt; 1 года и   стаж &amp;lt; 1 года ==сработала 23 фича,заявка ушла на андеррайтинг\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Фичи не сработали, заявка не ушла на андеррайтинг&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12252/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12252/details/&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016125/step/6\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016125/step/6&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580119069112,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50050&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Изменить сторону проверки фичи 30&lt;br/&gt;больше не проверять &amp;quot;status_code&amp;quot;(ответ верификации) а проверять данные спарка:&lt;br/&gt;если  registrationDate&amp;lt;3 мес, то идем на прозвоны&lt;br/&gt;если данных из спарка нет , то берем данные из дадаты :&lt;br/&gt;если registration_date &amp;lt; 3 мес, то идем на прозвоны , если данных нет , то пропускаем как и раньше&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580120965473,&quot;updated&quot;:1580733417864,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50085&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;.&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580132246365,&quot;updated&quot;:1580134010694,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50103&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580140151487,&quot;updated&quot;:1580141117730,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50534&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест ЮЛ3:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;registrationDate =NULL\nregistration_date !=  &amp;quot;null&amp;quot; \n(текущая дата - дата регистрации) &amp;lt; 1 года и   стаж &amp;gt; 1 года ==сработала 23 фича,заявка ушла на андеррайтинг\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12686/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12686/details/&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;triggered_features&amp;quot;: [\n&amp;quot;23&amp;quot;\n],\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Фича сработала - ОК&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580718345784,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50550&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест ИП2:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;- (текущая дата - дата регистрации) &amp;lt; 1 года и стаж &amp;lt; 6 мес == заявка ушла на андеррайтинг, 5 фича сработала\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12696/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12696/details/&lt;/a&gt;&lt;br/&gt;Фича не сработала, заявка ушла в отказ с кодом &lt;code class=\&quot;inline-code\&quot;&gt;SP002&lt;/code&gt; - не ОК&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;- (текущая дата - дата регистрации) &amp;lt; 1 года и стаж &amp;gt; 1 года, заявка ушла на андеррайтинг, 23 фича сработала\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12698/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12698/details/&lt;/a&gt;&lt;br/&gt;Фича не сработала, заявка ушла в отказ с кодом &lt;code class=\&quot;inline-code\&quot;&gt;SP002&lt;/code&gt; - не ОК&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580722093421,&quot;updated&quot;:1580722635426,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50558&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kriventsova\&quot; title=\&quot;a.kriventsova\&quot; data-user-id=\&quot;24-205\&quot;&gt;Кривенцова Александра&lt;/a&gt; тесты по ИП2 невалидны, так как при сроке существования ИП &amp;lt; года заявка уходит в отказ&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580725038521,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50559&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;+ если срок существования ЮЛ &amp;lt; 3 месяцев мы должны уходить в отказ или на прозвоны? Сейчас такие заявки уходят на прозваны&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580725084263,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50575&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.rybakova\&quot; title=\&quot;e.rybakova\&quot; data-user-id=\&quot;24-239\&quot;&gt;Рыбакова Екатерина&lt;/a&gt; такой код отказа верно работает , но если другие условия приводят нас к фиче, то заявка должна идти на андеррайтинг,  а не в отказ&lt;br/&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;&lt;li&gt; (текущая дата - дата регистрации) &amp;lt; 1 года и стаж &amp;lt; 6 мес == заявка ушла на андеррайтинг, 5 фича сработала&lt;br/&gt;&lt;/li&gt;&lt;li&gt; (текущая дата - дата регистрации) &amp;lt; 1 года и стаж &amp;gt; 1 года, заявка ушла на андеррайтинг, 23 фича сработала&lt;br/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580732847565,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50576&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.rybakova\&quot; title=\&quot;e.rybakova\&quot; data-user-id=\&quot;24-239\&quot;&gt;Рыбакова Екатерина&lt;/a&gt; все правильно сработало&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580732984718,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50682&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.rybakova\&quot; title=\&quot;e.rybakova\&quot; data-user-id=\&quot;24-239\&quot;&gt;Рыбакова Екатерина&lt;/a&gt;&lt;br/&gt;согласовали с банком, решили что ок если откажем ИП если они существуют меньше 1 года&lt;br/&gt;считать последний тест ИП корретным &lt;br/&gt;ниже смеха согласованная с банком&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580820637038,&quot;updated&quot;:1580820724712,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50805&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Регресс без ошибок.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12911/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12911/details/&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580905293257,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51464&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Дик: В ходе тестирования задачи Логика для ЮЛ и ИП, по которым нет данных в СПАРК было обнаружено, что реализация исправления не совсем корректная.&lt;br/&gt;По факту в СПАРКе есть инфо об ИП, только в другом разделе.&lt;br/&gt;В спарке есть информация о регистрации в блоке «Деятельность ИП» (на примере заявки 3031295)&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25659?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU2NTl8cEVIZkNvd1dQNUEvSUZxUE84NzhuYWFZaWZWbXYyaGcrSHFWREE5SlhPcz0=&amp;amp;updated=1581526348271\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;Просьба скорректировать логику.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581526356412,&quot;updated&quot;:1581526375069,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51538&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1066&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.solonovich\&quot; title=\&quot;a.solonovich\&quot; data-user-id=\&quot;24-231\&quot;&gt;Солонович Алексей&lt;/a&gt; заявка 2019 года, не корректный тест&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581600907467,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;}]}, {&quot;id&quot;:&quot;ARGS-1629&quot;,&quot;entityId&quot;:&quot;86-74876&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Устаревшие ч3 (синхронизация ПП и БЭК)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580299565019&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1629&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;необходимо провести работы по синхронизации стейтов заявок на ПП и БПМ&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;После того как скрипт по устареванию выполнил свою работу (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1027\&quot; title=\&quot;УСТАРЕВШИЕ ч1\&quot; data-issue-id=\&quot;86-64743\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1027&lt;/a&gt;) выяснилось:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;сложная логика по задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1194\&quot; title=\&quot;УСТАРЕВШИЕ ч2\&quot; data-issue-id=\&quot;86-67672\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1194&lt;/a&gt; не нужна, это связано с тем что больше 90 дней прошло с момента запуска штатного механизма устаревания (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-749\&quot; title=\&quot;устаревшие\&quot; data-issue-id=\&quot;86-60403\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-749&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;возникла рассинхронизация, которую необходимо устранить. Рассинхронизация произошла по двум причинам:&lt;br/&gt;2.1) бэк не смог валидировать заявку и обработать сообщение на устаревание&lt;br/&gt;2.2) на бэке заявка была переведена в отказ клиента, но механизма передачи (и/или обработки) данного сообщения на бпм не было .&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Результат работы скрипта делится на три части&lt;/h2&gt;\n&lt;h3&gt;1. Все хорошо&lt;/h3&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm state = 'obsolete_state'\npp state = 'obsolete_state'\n\nСтейт заявки в BPM совпадает с PP и равен obsolete_state\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;2. Все хорошо на BPM&lt;/h3&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm state = 'obsolete_state'\npp state != 'терминальный'\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Решение:&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;BPM&lt;/strong&gt;: Сформировать выгрузку устаревших заявок&lt;br/&gt;bpm_id - номер заявки&lt;br/&gt;obsolete_at - когда устарела&lt;br/&gt;&lt;strong&gt;BACK&lt;/strong&gt;:&lt;br/&gt;Сделать выборку по bpm_id и статус не терминальный из выгрузки&lt;br/&gt;Обновить стейт на &amp;#39;obsolete_state&amp;#39; с временем obsolete_at&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;Работы желательно проводить после того как бэк начнет переводить все заявки получающее сообщение&lt;br/&gt;об устаревании в устаревшии независимо от валидации.&lt;/em&gt;&lt;br/&gt;Это нужно для того чтобы исключить дальнейшую рассинхронизацию по стейтам в БПМ и ПП.&lt;/p&gt;\n&lt;h3&gt;3. Все хорошо на ПП&lt;/h3&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm state = 'obsolete_state'\npp_state in 'терминальный' and pp_state != 'obsolete_state' )\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Сюда попадают заявки которые устарели на БПМ но остались в терминальном статусе на ПП&lt;br/&gt;Решение:&lt;br/&gt;Для заявок в терминальном статусе на ПП &amp;#39;user_decline&amp;#39; ничего не делать.&lt;br/&gt;Для заявок в терминальных статусах на ПП отличных от &amp;#39;user_decline&amp;#39; необходим анализ по факту выявления таких заявок&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Левашов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;aleksandr.levashov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581590475488&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50274&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1629&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;span class=\&quot;markdown-language-tag\&quot;&gt;sql&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-sql\&quot;&gt;select\n\tw.bpm_id,\n\tsm.current_state,\n\tsm.updated_at\nfrom\n\twalkers w,\n\tstate_machines sm\nwhere\n\tw.id = sm.walker_id\n\tand sm.current_state = 'obsolete_state'\norder by\n\tw.bpm_id desc;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580305114925,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1470&quot;,&quot;entityId&quot;:&quot;86-71983&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Игнорировать сумму за КАСКО при проверке полиса и квитанции об оплате при оплате наличными&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анвар Анарбаев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576662850664&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1470&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Описание требования&lt;/strong&gt;&lt;br/&gt;Игнорировать сумму за КАСКО при проверке документа при оплате наличными&lt;br/&gt;При оплате наличными очень часто (почти всегда) при заведении заявки агент ставит примерную сумму за КАСКО и далее на проверке документа и квитанции об оплате сумма не сходится. Необходимо убрать проверку суммы или сделать обогащением.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение_BPM:&lt;/strong&gt;&lt;br/&gt;Актуально только для КАСКО НЕ В КРЕДИТ (insurances-&amp;gt;included:false).&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.anarbaev&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581587204366&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51469&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Актуально только для каско не в кредит (insurances-&amp;gt;included:false).&lt;br/&gt;Возможное решение:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори  и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581578569930,&quot;updated&quot;:1581584094592,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51494&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем согласования банка&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581587204371,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1588&quot;,&quot;entityId&quot;:&quot;86-74127&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Реквизиты - страховки&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анастасия Кряжова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1579605214281&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1588&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Проблема&lt;/strong&gt;&lt;br/&gt;просьба помочь завести реквизиты в Управление партнерами в раздел Страховые партнеров.&lt;br/&gt;При заведении самостоятельно не находит такое название&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Предложение в банк&lt;/strong&gt; - он согласовал подход&lt;br/&gt;Сформировалось предложение:&lt;/p&gt;\n&lt;p&gt;После стандартного ввода &amp;quot;Название юр. лица или ИНН&amp;quot;, если Пользователь приложения видит, что в ДАДАТА содержится немного не подходящее наименование, при этом остальные данные (ИНН и адрес) совпадают,&lt;/p&gt;\n&lt;p&gt;пользователь сможет выключить переключатель о том что &amp;quot;Внутреннее название совпадает с названием юр.лица&amp;quot; и ввести в поле &amp;quot;Внутреннее название юр.лица&amp;quot; правильное значение. (Вложение)&lt;/p&gt;\n&lt;p&gt;В таких случаях за корректировку названия юр. лица ответственность переносится на Пользователя, так как в БП (для сверки счетов, платежек ЦФТ, СФ, Актов и т.д.) будет использовано скорректированное пользователем значение.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Front-УП&lt;/strong&gt;&lt;br/&gt;реализовать согласно шаблону внизу, см комментарий&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В УП при созданни реквизитор для страховых&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ниже поля &amp;quot;Юридическое лицо&amp;quot; Добавить&lt;br/&gt;переключатель переключатель: &amp;quot;Внутреннее название совпадает с названием юр.лица&amp;quot;&lt;/li&gt;\n&lt;li&gt;Если переключатель неактивен, должно появляться поле &amp;quot;Внутреннее название юр.лица&amp;quot; (Вложение)&lt;br/&gt;Требуется копировать в это поле название из поля &amp;quot;Юридическое лицо&amp;quot;, при этом с возможностью изменения содержания данного поля и передавать значение на БЭК в блок &lt;code class=\&quot;inline-code\&quot;&gt;bank_detail_insurance_company:&lt;/code&gt; как &lt;code class=\&quot;inline-code\&quot;&gt;title&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Back- УП&lt;/strong&gt;&lt;br/&gt;Принимать значение для сущности &lt;code class=\&quot;inline-code\&quot;&gt;bank_detail_insurance_company&lt;/code&gt; новый атрибут &lt;code class=\&quot;inline-code\&quot;&gt;title&lt;/code&gt; и сохранять в базу,&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;br/&gt;для отправки реквизитов в БПМ и на фронт заполнять в insurances-&amp;gt;requisites и insurances-&amp;gt;selected_requisite поле &amp;quot;title&amp;quot;  значением &lt;code class=\&quot;inline-code\&quot;&gt;bank_detail_insurance_company.title&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;Если в данных(от БЭКа) поле insurances-&amp;gt;selected_requisite-&amp;gt;title НЕ пустое, то&lt;br/&gt;использовать ЕГО  при отправке в pay_request как наименование юр лица по страховке (&lt;code class=\&quot;inline-code\&quot;&gt;name_to&lt;/code&gt;)&lt;br/&gt;Иначе&lt;br/&gt;использовать значение из дадата (как сейчас)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Бумага+акты&lt;/strong&gt;&lt;br/&gt;Если в таблице bank_detail_insurance_company атрибут title не пустой, подставлять его в соответствующий параметр в бумаге (иначе использовать старый параметр)&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;как понять в какие параметры нужно&lt;/em&gt;:&lt;br/&gt;проверить все шаблоны где используются параметры &amp;quot;full_with_opf&amp;quot;,&amp;quot;short_with_opf&amp;quot;: и в них подставлять новый параметр&lt;br/&gt;title&lt;br/&gt;анкета-[INSURANCE_COMPANY]&lt;br/&gt;иу-[ADDITIONAL_DETAILS]&lt;br/&gt;акты-[INS_COMPANY_FULL_NAME]&lt;br/&gt;если будут найдены еще какие то параметры или шаблоны, просьба отписаться в комментарий&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;завести реквизит страховки вручную, отключив свитч &amp;quot;Внутреннее название совпадает с названием юр.лица&amp;quot;&lt;br/&gt;выдать кредит со страховкой оплаченной по этому реквизиту&lt;br/&gt;проверить что в шаблоны бумаги мы подставили юр лицо введенное вручную&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Убедиться, что БПМ использует в pay_request по платежке за страховку данные &amp;quot;title&amp;quot; в названии юр лица&lt;/li&gt;\n&lt;li&gt;Проверить,что если атрибут title пустой,то продолжают использоваться данные из дадаты и продолжает работать условие ,что везде берем значение из short_with_opf если есть, иначе full_with_opf(делали в &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1212\&quot; title=\&quot;Ошибка проверки входных данных. Платёж\&quot; data-issue-id=\&quot;86-67879\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1212&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kryazhova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581580148399&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1481&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Бумага&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Бумага&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;New&quot;],&quot;valueId&quot;:[&quot;Feature&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#409600&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.bogomolov&quot;,&quot;fullName&quot;:&quot;Алексей Богомолов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Карточка организации Филиал Центр.docx&quot;,&quot;id&quot;:&quot;88-24773&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24773?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ3NzN8WUdBamUzTVAzOUwzSisvOHFQWmFSNU8wVVFjOEFDcVc3OUZ6Mk51WlQ1WT0=&amp;updated=1579605214317&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-24774&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24774?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ3NzR8Ui9oZlZlRnMwdFJWdkdiZThNUkp1TzZUNFhvWE5xdlJrZFVqaXEzNjg3az0=&amp;updated=1579605214367&quot;},{&quot;value&quot;:&quot;Снимок экрана 2020-01-21 в 10.13.16.png&quot;,&quot;id&quot;:&quot;88-24776&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24776?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ3NzZ8RW5Zclh6VzZGVFlLc3ZCSWljMndIR1VwWlZaK2pkRWJPRTU1Q05iT0cwOD0=&amp;updated=1579605214437&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-25010&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25010?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUwMTB8OVU0bFo4MmxVV2MvWklqeDhZZHVqY1l5WWVYTkhvM29pZGQzYkJlVzk5WT0=&amp;updated=1580117781013&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50031&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1588&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25010?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjUwMTB8VjAyc0xHZmRlbzdUMFkra0RGRmtoU2R4bkVBNGxHREdpT2REMW9xWmhZRT0=&amp;updated=1580117781013\&quot;/&gt;&lt;/div&gt;&lt;a href=\&quot;https://files.slack.com/files-pri/T3SL7KXGF-FSUTM2NJD/________________________________________________.png\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://files.slack.com/files-pri/T3SL7KXGF-FSUTM2NJD/________________________________________________.png&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580117771144,&quot;updated&quot;:1580117782658,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51473&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1588&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1588&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;  - name: sm_rgsb&lt;br/&gt;    version_tag: feature/ARGS-1588&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581580146119,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1656&quot;,&quot;entityId&quot;:&quot;86-75476&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;\&quot;Умная логика\&quot; в Faker&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580821603453&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1656&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Проблема:&lt;/h1&gt;\n&lt;p&gt;после выкатки &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1126\&quot; title=\&quot;Изменение логики проверки данных в документах\&quot; data-issue-id=\&quot;86-66443\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1126&lt;/a&gt; на обучающий сервер мы столкнемся с тем что все заявки будут с одним ФИО, одной машиной и т/п&lt;/p&gt;\n&lt;h1&gt;Решение:&lt;/h1&gt;\n&lt;p&gt;Доработать фейкер чтобы он мог возвращать ответ на основе запроса.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;добавить в админку чекбокс &amp;quot;умный фейкер&amp;quot;&lt;/li&gt;\n&lt;li&gt;делать подмену выходных данных на основе входных&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Ниже приводится три алгоритма, стоит выбрать тот который проще реализовать.&lt;/p&gt;\n&lt;h2&gt;1. Алгоритм &amp;quot;халява&amp;quot;&lt;/h2&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Мы передаем сообщение msg_in, можно заметить что &amp;#39;params:fields&amp;#39; содержат названия ключей.&lt;/li&gt;\n&lt;li&gt;В шаблоне &amp;quot;template&amp;quot; (валидный json), есть поля значения которых &amp;quot;@@in&amp;quot; (даллее маркер)&lt;/li&gt;\n&lt;li&gt;Когда фейкер встречает сообщение котрое должно быть обработано с &amp;quot;умный фейкер&amp;quot; то он.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;десереализует шаблон в словарь&lt;/li&gt;\n&lt;li&gt;ищет в нем вложенные ключи значения которых равны маркеру&lt;/li&gt;\n&lt;li&gt;вычисляет ключ из исходного сообщения &amp;quot;in&amp;quot;&lt;/li&gt;\n&lt;li&gt;вычисляет значение из исходного сообщения &amp;quot;in&amp;quot; либо использует None&lt;/li&gt;\n&lt;li&gt;использует это значение как замену маркеру&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;При работе алгоритма важно что в случае если чтото пошло не так (к примеру отстутвует ключ в исходном сообщении),&lt;br/&gt;фейкер не падал а использовал пустое значение для подмены&lt;/p&gt;\n&lt;h1&gt;msg_in&lt;/h1&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 9603941,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.prod.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;verify&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 9603941,\n    &amp;quot;scans&amp;quot;: {\n      &amp;quot;default&amp;quot;: [\n        &amp;quot;uploads/rgsb_pa/request_3294758/attachment_2802298/image.jpg&amp;quot;\n      ]\n    },\n    &amp;quot;action&amp;quot;: &amp;quot;verify&amp;quot;,\n    &amp;quot;fields&amp;quot;: {\n      &amp;quot;gender&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;male&amp;quot;,\n        &amp;quot;reject&amp;quot;: true,\n        &amp;quot;do_recheck&amp;quot;: true\n      },\n      &amp;quot;number&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;777666&amp;quot;,\n        &amp;quot;reject&amp;quot;: true,\n        &amp;quot;do_recheck&amp;quot;: true\n      },\n      &amp;quot;series&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;5544&amp;quot;,\n        &amp;quot;reject&amp;quot;: true,\n        &amp;quot;do_recheck&amp;quot;: true\n      },\n      &amp;quot;born_at&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;1988-01-30&amp;quot;,\n        &amp;quot;reject&amp;quot;: true,\n        &amp;quot;do_recheck&amp;quot;: true\n      },\n      &amp;quot;last_name&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;Храм&amp;quot;,\n        &amp;quot;reject&amp;quot;: true,\n        &amp;quot;do_recheck&amp;quot;: true\n      },\n      &amp;quot;first_name&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;Алексей&amp;quot;,\n        &amp;quot;reject&amp;quot;: true,\n        &amp;quot;do_recheck&amp;quot;: true\n      },\n      &amp;quot;birth_place&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;ГОР.РОДНЫЙ&amp;quot;,\n        &amp;quot;reject&amp;quot;: false,\n        &amp;quot;do_recheck&amp;quot;: true\n      },\n      &amp;quot;second_name&amp;quot;: {\n        &amp;quot;in&amp;quot;: &amp;quot;Александрович&amp;quot;,\n        &amp;quot;reject&amp;quot;: true,\n        &amp;quot;do_recheck&amp;quot;: true\n      }\n    },\n    &amp;quot;priority&amp;quot;: 4102001,\n    &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n    &amp;quot;request_id&amp;quot;: 3294758,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n    &amp;quot;request_time&amp;quot;: &amp;quot;2020-02-04T10:20:30+00:00&amp;quot;,\n    &amp;quot;request_stage&amp;quot;: 1,\n    &amp;quot;quality_checks&amp;quot;: {\n      &amp;quot;wrongScanTag&amp;quot;: {\n        &amp;quot;type&amp;quot;: &amp;quot;reject&amp;quot;,\n        &amp;quot;scope&amp;quot;: &amp;quot;document&amp;quot;,\n        &amp;quot;caption&amp;quot;: &amp;quot;На сканах правильные страницы паспорта&amp;quot;,\n        &amp;quot;error_message&amp;quot;: &amp;quot;На сканах неправильные страницы паспорта&amp;quot;\n      }\n    }\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;template:&lt;/h3&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 9603941,\n  &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 9603941,\n    &amp;quot;scans&amp;quot;: {\n      &amp;quot;default&amp;quot;: [\n        {\n          &amp;quot;url&amp;quot;: &amp;quot;uploads/rgsb_pa/request_3294758/attachment_2802298/image.jpg&amp;quot;,\n          &amp;quot;tags&amp;quot;: [],\n          &amp;quot;angle&amp;quot;: null,\n          &amp;quot;errors&amp;quot;: [],\n          &amp;quot;fields&amp;quot;: [],\n          &amp;quot;error_codes&amp;quot;: [],\n          &amp;quot;internal_id&amp;quot;: 41519465,\n          &amp;quot;page_number&amp;quot;: [],\n          &amp;quot;external_tags&amp;quot;: []\n        }\n      ]\n    },\n    &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n    &amp;quot;sex&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },    \n    &amp;quot;gender&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;number&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;series&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;born_at&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n    &amp;quot;last_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;first_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;birth_place&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;internal_id&amp;quot;: 11814775,\n    &amp;quot;second_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n    &amp;quot;verification&amp;quot;: {\n      &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n      &amp;quot;document_errors&amp;quot;: [],\n      &amp;quot;document_error_codes&amp;quot;: []\n    },\n    &amp;quot;document_verifications&amp;quot;: [\n      {\n        &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n        &amp;quot;user_id&amp;quot;: 1,\n        &amp;quot;duration&amp;quot;: 1,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:34+03:00&amp;quot;,\n        &amp;quot;internal_id&amp;quot;: 18496388,\n        &amp;quot;field_checks&amp;quot;: [],\n        &amp;quot;_field_checks&amp;quot;: &amp;quot;Deprecated. Use %field_name%.is_valid instead.&amp;quot;,\n        &amp;quot;summary_scan_errors&amp;quot;: [],\n        &amp;quot;_summary_scan_errors&amp;quot;: &amp;quot;Deprecated. Use verification.document_errors instead.&amp;quot;,\n        &amp;quot;summary_scan_error_codes&amp;quot;: []\n      }\n    ],\n    &amp;quot;document_ext_verifications&amp;quot;: [\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Fms&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257087,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Spark&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257088,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Terrorist&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257089,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      }\n    ]\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;user_id&amp;quot;: &amp;quot;1&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n  &amp;quot;debug_info&amp;quot;: {\n    &amp;quot;uri&amp;quot;: &amp;quot;http://:&amp;quot;,\n    &amp;quot;script&amp;quot;: &amp;quot;/var/www/verification/bin/console --env=prod event-band:dispatch b3.document.extver -vvv&amp;quot;,\n    &amp;quot;remote_ip&amp;quot;: &amp;quot;cli&amp;quot;,\n    &amp;quot;server_ip&amp;quot;: null,\n    &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:38+03:00&amp;quot;,\n    &amp;quot;server_host&amp;quot;: null\n  },\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;user_email&amp;quot;: &amp;quot;robot_robby@project30.pro&amp;quot;,\n  &amp;quot;application&amp;quot;: &amp;quot;verification&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;response:&lt;/h3&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 9603941,\n  &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 9603941,\n    &amp;quot;scans&amp;quot;: {\n      &amp;quot;default&amp;quot;: [\n        {\n          &amp;quot;url&amp;quot;: &amp;quot;uploads/rgsb_pa/request_3294758/attachment_2802298/image.jpg&amp;quot;,\n          &amp;quot;tags&amp;quot;: [],\n          &amp;quot;angle&amp;quot;: null,\n          &amp;quot;errors&amp;quot;: [],\n          &amp;quot;fields&amp;quot;: [],\n          &amp;quot;error_codes&amp;quot;: [],\n          &amp;quot;internal_id&amp;quot;: 41519465,\n          &amp;quot;page_number&amp;quot;: [],\n          &amp;quot;external_tags&amp;quot;: []\n        }\n      ]\n    },\n    &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n    &amp;quot;sex&amp;quot;: {\n      &amp;quot;in&amp;quot;: null,\n      &amp;quot;out&amp;quot;: null,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;gender&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;male&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;male&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;number&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;777666&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;777666&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;series&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;5544&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;5544&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;born_at&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;1988-01-30&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;1988-01-30&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n    &amp;quot;last_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;Храм&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;Храм&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;first_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;Алексей&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;Алексей&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;birth_place&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;ГОР.РОДНЫЙ&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;ГОР.РОДНЫЙ&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;internal_id&amp;quot;: 11814775,\n    &amp;quot;second_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;Александрович&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;Александрович&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n    &amp;quot;verification&amp;quot;: {\n      &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n      &amp;quot;document_errors&amp;quot;: [],\n      &amp;quot;document_error_codes&amp;quot;: []\n    },\n    &amp;quot;document_verifications&amp;quot;: [\n      {\n        &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n        &amp;quot;user_id&amp;quot;: 1,\n        &amp;quot;duration&amp;quot;: 1,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:34+03:00&amp;quot;,\n        &amp;quot;internal_id&amp;quot;: 18496388,\n        &amp;quot;field_checks&amp;quot;: [],\n        &amp;quot;_field_checks&amp;quot;: &amp;quot;Deprecated. Use %field_name%.is_valid instead.&amp;quot;,\n        &amp;quot;summary_scan_errors&amp;quot;: [],\n        &amp;quot;_summary_scan_errors&amp;quot;: &amp;quot;Deprecated. Use verification.document_errors instead.&amp;quot;,\n        &amp;quot;summary_scan_error_codes&amp;quot;: []\n      }\n    ],\n    &amp;quot;document_ext_verifications&amp;quot;: [\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Fms&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257087,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Spark&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257088,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Terrorist&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257089,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      }\n    ]\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;user_id&amp;quot;: &amp;quot;1&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n  &amp;quot;debug_info&amp;quot;: {\n    &amp;quot;uri&amp;quot;: &amp;quot;http://:&amp;quot;,\n    &amp;quot;script&amp;quot;: &amp;quot;/var/www/verification/bin/console --env=prod event-band:dispatch b3.document.extver -vvv&amp;quot;,\n    &amp;quot;remote_ip&amp;quot;: &amp;quot;cli&amp;quot;,\n    &amp;quot;server_ip&amp;quot;: null,\n    &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:38+03:00&amp;quot;,\n    &amp;quot;server_host&amp;quot;: null\n  },\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;user_email&amp;quot;: &amp;quot;robot_robby@project30.pro&amp;quot;,\n  &amp;quot;application&amp;quot;: &amp;quot;verification&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;2. Алгоритм &amp;quot;Ленивая подстановка&amp;quot;&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Обрабатываем шаблон по старой логике&lt;/li&gt;\n&lt;li&gt;если установлен флажок &amp;quot;Алгоритм &amp;quot;Ленивая подстановка&amp;quot;&amp;quot; то:\n&lt;ul class=\&quot;wiki-list1\&quot;&gt;\n&lt;li&gt;Из исходного сообщения msg_in подставляем в исходящее значения полей взятые из params:fields:{field_name}:in исходного&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;python&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-python\&quot;&gt;    template = {...}    # шаблон\n    msg_in = {...}      # входящее сообщение\n    response = prepare_as_usual(msg_in, template) # обрабатываем как ранее\n    fields_in = msg_in.get('params', {}).get('fields', {})  # получаем словарь полей переданных на вход\n\nfor field_name, value in fields_in:\n    response['params'][field_name] = {\n        'in': value.get('in'),\n        'out': value.get('in'),\n        'is_valid': True\n    }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;template:&lt;/h3&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 9603941,\n  &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 9603941,\n    &amp;quot;scans&amp;quot;: {\n      &amp;quot;default&amp;quot;: [\n        {\n          &amp;quot;url&amp;quot;: &amp;quot;uploads/rgsb_pa/request_3294758/attachment_2802298/image.jpg&amp;quot;,\n          &amp;quot;tags&amp;quot;: [],\n          &amp;quot;angle&amp;quot;: null,\n          &amp;quot;errors&amp;quot;: [],\n          &amp;quot;fields&amp;quot;: [],\n          &amp;quot;error_codes&amp;quot;: [],\n          &amp;quot;internal_id&amp;quot;: 41519465,\n          &amp;quot;page_number&amp;quot;: [],\n          &amp;quot;external_tags&amp;quot;: []\n        }\n      ]\n    },\n    &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n    &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n    &amp;quot;internal_id&amp;quot;: 11814775,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n    &amp;quot;verification&amp;quot;: {\n      &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n      &amp;quot;document_errors&amp;quot;: [],\n      &amp;quot;document_error_codes&amp;quot;: []\n    },\n    &amp;quot;document_verifications&amp;quot;: [\n      {\n        &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n        &amp;quot;user_id&amp;quot;: 1,\n        &amp;quot;duration&amp;quot;: 1,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:34+03:00&amp;quot;,\n        &amp;quot;internal_id&amp;quot;: 18496388,\n        &amp;quot;field_checks&amp;quot;: [],\n        &amp;quot;_field_checks&amp;quot;: &amp;quot;Deprecated. Use %field_name%.is_valid instead.&amp;quot;,\n        &amp;quot;summary_scan_errors&amp;quot;: [],\n        &amp;quot;_summary_scan_errors&amp;quot;: &amp;quot;Deprecated. Use verification.document_errors instead.&amp;quot;,\n        &amp;quot;summary_scan_error_codes&amp;quot;: []\n      }\n    ],\n    &amp;quot;document_ext_verifications&amp;quot;: [\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Fms&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257087,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Spark&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257088,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Terrorist&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257089,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      }\n    ]\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;user_id&amp;quot;: &amp;quot;1&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n  &amp;quot;debug_info&amp;quot;: {\n    &amp;quot;uri&amp;quot;: &amp;quot;http://:&amp;quot;,\n    &amp;quot;script&amp;quot;: &amp;quot;/var/www/verification/bin/console --env=prod event-band:dispatch b3.document.extver -vvv&amp;quot;,\n    &amp;quot;remote_ip&amp;quot;: &amp;quot;cli&amp;quot;,\n    &amp;quot;server_ip&amp;quot;: null,\n    &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:38+03:00&amp;quot;,\n    &amp;quot;server_host&amp;quot;: null\n  },\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;user_email&amp;quot;: &amp;quot;robot_robby@project30.pro&amp;quot;,\n  &amp;quot;application&amp;quot;: &amp;quot;verification&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;3. Алгоритм &amp;quot;Шаблонизатор из исходных данных&amp;quot;&lt;/h2&gt;\n&lt;p&gt;Аналогичен алгоритму &amp;quot;халява&amp;quot;, за исключением того что вместо маркера @@in используется указание на значение из входящего&lt;br/&gt;в формате @@field_name, например &amp;quot;@@params.fields.gender.in&amp;quot;&lt;/p&gt;\n&lt;h3&gt;template:&lt;/h3&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 9603941,\n  &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 9603941,\n    &amp;quot;scans&amp;quot;: {\n      &amp;quot;default&amp;quot;: [\n        {\n          &amp;quot;url&amp;quot;: &amp;quot;uploads/rgsb_pa/request_3294758/attachment_2802298/image.jpg&amp;quot;,\n          &amp;quot;tags&amp;quot;: [],\n          &amp;quot;angle&amp;quot;: null,\n          &amp;quot;errors&amp;quot;: [],\n          &amp;quot;fields&amp;quot;: [],\n          &amp;quot;error_codes&amp;quot;: [],\n          &amp;quot;internal_id&amp;quot;: 41519465,\n          &amp;quot;page_number&amp;quot;: [],\n          &amp;quot;external_tags&amp;quot;: []\n        }\n      ]\n    },\n    &amp;quot;action&amp;quot;: &amp;quot;verification_done&amp;quot;,\n    &amp;quot;sex&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.sex.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.sex.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },    \n    &amp;quot;gender&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.gender.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.gender.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;number&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.number.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.number.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;series&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.series.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.series.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;born_at&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.born_at.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.born_at.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n    &amp;quot;last_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.last_name.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.last_name.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;first_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.first_name.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.first_name.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;birth_place&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.birth_place.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.birth_place.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;internal_id&amp;quot;: 11814775,\n    &amp;quot;second_name&amp;quot;: {\n      &amp;quot;in&amp;quot;: &amp;quot;@@params.fields.second_name.in&amp;quot;,\n      &amp;quot;out&amp;quot;: &amp;quot;@@params.fields.second_name.in&amp;quot;,\n      &amp;quot;is_valid&amp;quot;: true\n    },\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n    &amp;quot;verification&amp;quot;: {\n      &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n      &amp;quot;document_errors&amp;quot;: [],\n      &amp;quot;document_error_codes&amp;quot;: []\n    },\n    &amp;quot;document_verifications&amp;quot;: [\n      {\n        &amp;quot;status&amp;quot;: &amp;quot;verified&amp;quot;,\n        &amp;quot;user_id&amp;quot;: 1,\n        &amp;quot;duration&amp;quot;: 1,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:34+03:00&amp;quot;,\n        &amp;quot;internal_id&amp;quot;: 18496388,\n        &amp;quot;field_checks&amp;quot;: [],\n        &amp;quot;_field_checks&amp;quot;: &amp;quot;Deprecated. Use %field_name%.is_valid instead.&amp;quot;,\n        &amp;quot;summary_scan_errors&amp;quot;: [],\n        &amp;quot;_summary_scan_errors&amp;quot;: &amp;quot;Deprecated. Use verification.document_errors instead.&amp;quot;,\n        &amp;quot;summary_scan_error_codes&amp;quot;: []\n      }\n    ],\n    &amp;quot;document_ext_verifications&amp;quot;: [\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Fms&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257087,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Spark&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257088,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      },\n      {\n        &amp;quot;type&amp;quot;: &amp;quot;Terrorist&amp;quot;,\n        &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:32+03:00&amp;quot;,\n        &amp;quot;successful&amp;quot;: true,\n        &amp;quot;internal_id&amp;quot;: 26257089,\n        &amp;quot;status_code&amp;quot;: &amp;quot;success&amp;quot;,\n        &amp;quot;status_message&amp;quot;: &amp;quot;успешная&amp;quot;\n      }\n    ]\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;user_id&amp;quot;: &amp;quot;1&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;document_passport_fullname&amp;quot;,\n  &amp;quot;debug_info&amp;quot;: {\n    &amp;quot;uri&amp;quot;: &amp;quot;http://:&amp;quot;,\n    &amp;quot;script&amp;quot;: &amp;quot;/var/www/verification/bin/console --env=prod event-band:dispatch b3.document.extver -vvv&amp;quot;,\n    &amp;quot;remote_ip&amp;quot;: &amp;quot;cli&amp;quot;,\n    &amp;quot;server_ip&amp;quot;: null,\n    &amp;quot;created_at&amp;quot;: &amp;quot;2020-02-04T13:20:38+03:00&amp;quot;,\n    &amp;quot;server_host&amp;quot;: null\n  },\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;user_email&amp;quot;: &amp;quot;robot_robby@project30.pro&amp;quot;,\n  &amp;quot;application&amp;quot;: &amp;quot;verification&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Рыбакова Екатерина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.rybakova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581509093757&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1126&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Test done&quot;],&quot;valueId&quot;:[&quot;Test done&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50873&quot;,&quot;author&quot;:&quot;Ruslan_Yarullin&quot;,&quot;authorFullName&quot;:&quot;Руслан Яруллин&quot;,&quot;issueId&quot;:&quot;ARGS-1656&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Сделан 3 вариант&lt;br/&gt;логика автоматом включается если в заданном template присутствуют две собачки идущие подряд&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580980737598,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50874&quot;,&quot;author&quot;:&quot;Ruslan_Yarullin&quot;,&quot;authorFullName&quot;:&quot;Руслан Яруллин&quot;,&quot;issueId&quot;:&quot;ARGS-1656&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветка &lt;code class=\&quot;inline-code\&quot;&gt;master&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580980786307,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50969&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1656&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест OK&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;значение из входных параметров подставляется&lt;/li&gt;\n&lt;li&gt;значение которое отсутсвует заменяется на &lt;code class=\&quot;inline-code\&quot;&gt;null&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;template&lt;/h1&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;\n{\n    &amp;quot;id&amp;quot;:452433,\n    &amp;quot;action&amp;quot;:&amp;quot;verification_done&amp;quot;,\n    &amp;quot;fields&amp;quot;:{\n        &amp;quot;inn&amp;quot;:&amp;quot;7707083893&amp;quot;,\n&amp;quot;123inn&amp;quot;: &amp;quot;@@params.inn&amp;quot;,\n&amp;quot;111inn&amp;quot;: &amp;quot;@@params.in&amp;quot;,\n        &amp;quot;ogrn&amp;quot;:&amp;quot;&amp;quot;,\n        &amp;quot;phones&amp;quot;:[\n            &amp;quot;+7(499)1964168&amp;quot;,\n            &amp;quot;+7(3012)285030&amp;quot;\n        ],\n        &amp;quot;leaders&amp;quot;:[\n            {\n                &amp;quot;fullName&amp;quot;:&amp;quot;Греф Герман Оскарович&amp;quot;,\n                &amp;quot;position&amp;quot;:&amp;quot;президент, председатель правления&amp;quot;\n            }\n        ],\n        &amp;quot;okvedList&amp;quot;:[\n\n        ],\n        &amp;quot;riskIndex&amp;quot;:1,\n        &amp;quot;okved2List&amp;quot;:[\n            &amp;quot;64.19&amp;quot;\n        ],\n        &amp;quot;companyName&amp;quot;:&amp;quot;ПАО СБЕРБАНК&amp;quot;,\n        &amp;quot;legalAddress&amp;quot;:&amp;quot;г. Москва, ул. Вавилова, д. 19&amp;quot;,\n        &amp;quot;paymentIndex&amp;quot;:88,\n        &amp;quot;workersRange&amp;quot;:&amp;quot;5000 и более&amp;quot;,\n        &amp;quot;companyStatus&amp;quot;:&amp;quot;&amp;quot;,\n        &amp;quot;registrationDate&amp;quot;:&amp;quot;02-02-2016&amp;quot;\n    },\n    &amp;quot;resource&amp;quot;:&amp;quot;check_task_company_extended&amp;quot;,\n    &amp;quot;internal_id&amp;quot;:5203,\n    &amp;quot;system_code&amp;quot;:&amp;quot;bpm&amp;quot;,\n    &amp;quot;verification&amp;quot;:{\n        &amp;quot;errors&amp;quot;:[\n\n        ],\n        &amp;quot;status&amp;quot;:&amp;quot;successful&amp;quot;,\n        &amp;quot;error_codes&amp;quot;:[\n\n        ]\n    },\n    &amp;quot;ext_verifications&amp;quot;:[\n        {\n            &amp;quot;type&amp;quot;:&amp;quot;CompanyExtendedCheck&amp;quot;,\n            &amp;quot;created_at&amp;quot;:&amp;quot;2019-07-22T17:03:39+03:00&amp;quot;,\n            &amp;quot;successful&amp;quot;:true,\n            &amp;quot;internal_id&amp;quot;:5203,\n            &amp;quot;status_code&amp;quot;:&amp;quot;success&amp;quot;,\n            &amp;quot;status_message&amp;quot;:&amp;quot;успешная&amp;quot;\n        }\n    ]\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1&gt;response&lt;/h1&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n   &amp;quot;bank_id&amp;quot;:&amp;quot;rgsb&amp;quot;,\n   &amp;quot;project_id&amp;quot;:&amp;quot;auto&amp;quot;,\n   &amp;quot;resource&amp;quot;:&amp;quot;check_task_company_extended&amp;quot;,\n   &amp;quot;system_code&amp;quot;:&amp;quot;bpm&amp;quot;,\n   &amp;quot;id&amp;quot;:1082530,\n   &amp;quot;action&amp;quot;:&amp;quot;verification_done&amp;quot;,\n   &amp;quot;params&amp;quot;:{\n      &amp;quot;id&amp;quot;:1082530,\n      &amp;quot;action&amp;quot;:&amp;quot;verification_done&amp;quot;,\n      &amp;quot;fields&amp;quot;:{\n         &amp;quot;inn&amp;quot;:&amp;quot;7707083893&amp;quot;,\n         &amp;quot;123inn&amp;quot;:&amp;quot;7707083888&amp;quot;,\n         &amp;quot;111inn&amp;quot;:null,\n         &amp;quot;ogrn&amp;quot;:&amp;quot;&amp;quot;,\n         &amp;quot;phones&amp;quot;:[\n            &amp;quot;+7(499)1964168&amp;quot;,\n            &amp;quot;+7(3012)285030&amp;quot;\n         ],\n         &amp;quot;leaders&amp;quot;:[\n            {\n               &amp;quot;fullName&amp;quot;:&amp;quot;\\u0413\\u0440\\u0435\\u0444 \\u0413\\u0435\\u0440\\u043c\\u0430\\u043d \\u041e\\u0441\\u043a\\u0430\\u0440\\u043e\\u0432\\u0438\\u0447&amp;quot;,\n               &amp;quot;position&amp;quot;:&amp;quot;\\u043f\\u0440\\u0435\\u0437\\u0438\\u0434\\u0435\\u043d\\u0442, \\u043f\\u0440\\u0435\\u0434\\u0441\\u0435\\u0434\\u0430\\u0442\\u0435\\u043b\\u044c \\u043f\\u0440\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u044f&amp;quot;\n            }\n         ],\n         &amp;quot;okvedList&amp;quot;:[\n\n         ],\n         &amp;quot;riskIndex&amp;quot;:1,\n         &amp;quot;okved2List&amp;quot;:[\n            &amp;quot;64.19&amp;quot;\n         ],\n         &amp;quot;companyName&amp;quot;:&amp;quot;\\u041f\\u0410\\u041e \\u0421\\u0411\\u0415\\u0420\\u0411\\u0410\\u041d\\u041a&amp;quot;,\n         &amp;quot;legalAddress&amp;quot;:&amp;quot;\\u0433. \\u041c\\u043e\\u0441\\u043a\\u0432\\u0430, \\u0443\\u043b. \\u0412\\u0430\\u0432\\u0438\\u043b\\u043e\\u0432\\u0430, \\u0434. 19&amp;quot;,\n         &amp;quot;paymentIndex&amp;quot;:88,\n         &amp;quot;workersRange&amp;quot;:&amp;quot;5000 \\u0438 \\u0431\\u043e\\u043b\\u0435\\u0435&amp;quot;,\n         &amp;quot;companyStatus&amp;quot;:&amp;quot;&amp;quot;,\n         &amp;quot;registrationDate&amp;quot;:&amp;quot;02-02-2016&amp;quot;\n      },\n      &amp;quot;resource&amp;quot;:&amp;quot;check_task_company_extended&amp;quot;,\n      &amp;quot;internal_id&amp;quot;:5203,\n      &amp;quot;system_code&amp;quot;:&amp;quot;bpm&amp;quot;,\n      &amp;quot;verification&amp;quot;:{\n         &amp;quot;errors&amp;quot;:[\n\n         ],\n         &amp;quot;status&amp;quot;:&amp;quot;successful&amp;quot;,\n         &amp;quot;error_codes&amp;quot;:[\n\n         ]\n      },\n      &amp;quot;ext_verifications&amp;quot;:[\n         {\n            &amp;quot;type&amp;quot;:&amp;quot;CompanyExtendedCheck&amp;quot;,\n            &amp;quot;created_at&amp;quot;:&amp;quot;2019-07-22T17:03:39+03:00&amp;quot;,\n            &amp;quot;successful&amp;quot;:true,\n            &amp;quot;internal_id&amp;quot;:5203,\n            &amp;quot;status_code&amp;quot;:&amp;quot;success&amp;quot;,\n            &amp;quot;status_message&amp;quot;:&amp;quot;\\u0443\\u0441\\u043f\\u0435\\u0448\\u043d\\u0430\\u044f&amp;quot;\n         }\n      ]\n   }\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581065965354,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51218&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1656&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Нужно выкатить на study и закрыть задачу&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581406498350,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;НЕ для ПРОД&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;УчСтенд&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1653&quot;,&quot;entityId&quot;:&quot;86-75334&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Верификация номера договора&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580740416042&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1653&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;1174: Не корректный КОД в отдельных заявках БП, по которым БП повторно присылала  запрос на формирование КОД&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в QR-код шаблона ИУ(всех шаблонов) и ДЗ зашить параметр csd_acc&lt;br/&gt;сейчас БЭК берет это значение от БПМ в partnerka / sm_rgsb.documents_ready-&amp;gt;params-&amp;gt;csd-&amp;gt;acc&lt;br/&gt;зашить нужно только последние 6 цифр  и назвать параметр csd_acc&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Верификация&lt;/strong&gt;&lt;br/&gt;&lt;em&gt;что нужно&lt;/em&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Распознавать новый параметр в  QR-кодe,  &lt;strong&gt;где&lt;/strong&gt; в проверке (document_signature) для документа document_type_code&amp;quot;: &amp;quot;in&amp;quot;: &amp;quot;14&amp;quot; и &amp;quot;in&amp;quot;: &amp;quot;246&amp;quot;,(см пример запроса во вложении),  &lt;strong&gt;как называется&lt;/strong&gt; csd_acc (это 6 цифр)&lt;/li&gt;\n&lt;li&gt;Передавать этот параметр в окончании проверки в verification / document_constructor.verification_done-&amp;gt;params-&amp;gt;document_type_code-&amp;gt;csd_acc&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;em&gt;ожидаемый результат&lt;/em&gt;&lt;br/&gt;БПМ при проверке document_type_code&amp;quot;: &amp;quot;in&amp;quot;: &amp;quot;14&amp;quot; и &amp;quot;in&amp;quot;: &amp;quot;246&amp;quot; получит в verification / document_constructor.verification_done-&amp;gt;params-&amp;gt;document_type_code-&amp;gt;csd_acc&lt;br/&gt;получит 6 значное число&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В verification / document_constructor.verification_done для ИУ(document_type_code&amp;quot;: &amp;quot;in&amp;quot;: &amp;quot;14&amp;quot;и &amp;quot;in&amp;quot;: &amp;quot;246&amp;quot;) принимать параметр params-&amp;gt;document_type_code-&amp;gt;csd_acc&lt;/li&gt;\n&lt;li&gt;Сравнивать значение csd_acc с  последними 6 цифрами параметра Memory-&amp;gt;cft-&amp;gt;csd-&amp;gt;acc&lt;/li&gt;\n&lt;li&gt;если они не сходятся то отправлять на БЭК в deal_revision_state ошибку для document_type_code&amp;quot;: &amp;quot;in&amp;quot;: &amp;quot;14&amp;quot; и &amp;quot;in&amp;quot;: &amp;quot;246&amp;quot; ,&amp;quot;Номера счета в договора не сходится с номером счета клиента&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;br/&gt;отправить на верификацию ИУ и ДЗ(чтобы в QR было зашито одно значение csd_acc ,а в Memory-&amp;gt;cft-&amp;gt;csd-&amp;gt;acc(последние 6 цифр) было другое&lt;br/&gt;проверить что верификация обработала QR -код, вернула значение , БПМ его проверил и отослал ошибку, ошибка на фронте &amp;quot;Номера счета в договора не сходится с номером счета клиента&amp;quot;&lt;br/&gt;(чтобы задача решала проблемные кейсы, нужно проверить что БПМ перезатирает Memory-&amp;gt;cft-&amp;gt;csd-&amp;gt;acc, если ЦФТ присылала его 2 раза , разные )&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581498212288&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1658&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1673&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Backlog&quot;],&quot;valueId&quot;:[&quot;Backlog&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.kriventsova&quot;,&quot;fullName&quot;:&quot;Кривенцова Александра&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Верификация номера договора.docx&quot;,&quot;id&quot;:&quot;88-25307&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25307?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUzMDd8WXh3aWQ3NzE1VWZpMzZaRnVtREZoRmRZdmRRVWJqRWNwS0hkUHl6MDBaaz0=&amp;updated=1580740443341&quot;},{&quot;value&quot;:&quot;Верификация номера договора 1174.docx&quot;,&quot;id&quot;:&quot;88-25363&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25363?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUzNjN8K2VOd01qdEhYQ2pmRm1oNlBuRWVDaUZ1eldIb09JVmdFdXZPTzlSZFlaMD0=&amp;updated=1580889561850&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-25410&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25410?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0MTB8LzhxZGxmaWhOZGhCMGp3dFhjVjNsQ0hlRjg5Q2JkWUFyaWVVUmpwR1RaWT0=&amp;updated=1580919291201&quot;},{&quot;value&quot;:&quot;Верификация номера договора1.docx&quot;,&quot;id&quot;:&quot;88-25440&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25440?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0NDB8L3NjbG1uSy9Yem11TlNGaW9BRDFhcWZpbUZxZC9MdGRhRVlyOFU1MDVuTT0=&amp;updated=1580982849412&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-25442&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25442?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0NDJ8OTZmZ2k5YjFXUERQckhRcHlmY2hHV0cwakIrTVJrMWNQa3NFdzljVlVoaz0=&amp;updated=1580985668014&quot;},{&quot;value&quot;:&quot;Верификация номера договора 1174_1.docx&quot;,&quot;id&quot;:&quot;88-25466&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25466?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0NjZ8WFN5bkFEMDdXTVhyQ2ZKMkZIdUc1V0F0SlpzOWtVQUZLSE9JTHNJWVdCMD0=&amp;updated=1581002072544&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50618&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1653&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;не будем делать&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580800608762,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50756&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1653&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Коллеги, добрый день!&lt;/p&gt;\n&lt;p&gt;В части задачи 1174 по итогам обсуждения требований в рамках рабочей группы в Банке договорились конкретизировать требования в части необходимости проверки одного (любого) из полей ИУ:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;номер кредитного договора;&lt;/li&gt;\n&lt;li&gt;номер счёта (пункт 17 ИУ);&lt;/li&gt;\n&lt;li&gt;номер карты (пункт 27 ИУ).&lt;br/&gt;Критичным является требование о сохранении количества листов ИУ (в результате доработки число листов не должно увеличиться).&lt;br/&gt;При этом допустимо использовать для проверки часть указанных реквизитов по согласованию с Банком (например, последние 6 символов номера карты или номера счёта).&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Дополненные БТ во вложении.&lt;/p&gt;\n&lt;p&gt;С уважением,&lt;/p&gt;\n&lt;p&gt;Иван Харитонов&lt;br/&gt;+7(495) 925-80-80, доб. 077-10-18&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580889534184,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50885&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1653&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Добавлено вложение от А. Фроловой&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580982869284,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50940&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1653&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;см. вложение wor..._1&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581002090965,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51037&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1653&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;необходим анализ номера договора-с Банком&lt;br/&gt;создать таблицу для идентификации короткого ID и номера договора(Qr тяжело с обычным номером договора)&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581088847949,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51351&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1653&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;не делаем&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581498203173,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;},{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1209&quot;,&quot;entityId&quot;:&quot;86-67864&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Два транша&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1573331976433&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1209&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;ЦЕЛЬ&lt;/strong&gt;&lt;br/&gt;В марте/апреле собираются запускать программу &amp;quot;Два транша&amp;quot;. Изменяется интеграция и КОД.&lt;br/&gt;На текущий момент нужно внести изменения в интеграцию, потестить на препроде  и откатить это назад до марта/апреля.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение BPM&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Внести изменения в части интеграции. Изменяется csd_response. Измененный файл во вложении.:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;code class=\&quot;inline-code\&quot;&gt;АК_Этапы интеграции***&lt;/code&gt;-описание новых полей&lt;/li&gt;\n&lt;li&gt;пример ответа csd файла описан во вложении &lt;code class=\&quot;inline-code\&quot;&gt;csd (1).dms&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;1.1 Принимать новые поля в csd: изменяется блок credit_schedule:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;loan_agreements:{\n        agreement:{\n            type_contract\n            term_cred\n            loan_amount\n            date_return\n            payment_count\n                   {credit_schedule: {\n                       -&amp;quot;return&amp;quot;: [\n                       -{\n                          return_date                        \n                          fv\n                          iv\n                          amount\n                          rest\n                                               },\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;1.2 Необходимо учесть вариант кредита со страховками и без страховок&lt;br/&gt;Код type_contract может содержать значения:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;CRED_LINE - Кредит верхнего уровня;\nMAIN - Основной транш;\nSERVICE - Сервисный транш.\nБудет ПУСТО, если страховка отсутствует.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;То есть если в заявке страховка отсутствует, то в ответе ЦФТ значение тэга «type_contract» будет пустым и в массиве «loan_agreements» блок «agreement» будет содержаться только 1 раз.&lt;br/&gt;Пример ответа csd по заявке без страховки можно посмотреть в банкпрокси по заявке КН (2903164).&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;7&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581495117204&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;New&quot;],&quot;valueId&quot;:[&quot;Feature&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#409600&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Story points&quot;,&quot;value&quot;:[&quot;10&quot;],&quot;valueId&quot;:[&quot;10&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;БФТ_2 транша_БП.DOCX&quot;,&quot;id&quot;:&quot;88-22347&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-22347?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjIzNDd8V3RyU043TitkU1paeTVEYkRhYzRkRzZ2cFBxNW5zUURxYmxUaDFiS2xDRT0=&amp;updated=1573331994905&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-22348&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-22348?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjIzNDh8djFlRHRxOWs5QnJhbmpqVmNJcy84UTYyZGprKzc0QzZZbm5JdUhyNGtOZz0=&amp;updated=1573332189419&quot;},{&quot;value&quot;:&quot;Пример графика по 2 траншам.xlsx&quot;,&quot;id&quot;:&quot;88-22415&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-22415?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjI0MTV8cHFZQ2M3N0lQSmpiYSt1bEIxWHZONHgzbWg2N01VaFIwdjFqZ1VHUkM3dz0=&amp;updated=1573494032428&quot;},{&quot;value&quot;:&quot;БФТ_2 транша_БП_коммент20191217.docx&quot;,&quot;id&quot;:&quot;88-23996&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-23996?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjM5OTZ8eFdzWTJPanU5UHpKdUFuSWVRZjJDS3FGYUJ5TWhDNEhuSEJyaW0rclp2ST0=&amp;updated=1576591804109&quot;},{&quot;value&quot;:&quot;График платежей 2 транша.docx&quot;,&quot;id&quot;:&quot;88-24564&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24564?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ1NjR8YnNxNEVDYXYrc0tJV2ErMDdpZVp4M05jdFJFa2dMOWIwSUNpR0F6eFdQQT0=&amp;updated=1579098964235&quot;},{&quot;value&quot;:&quot;Заявление на выдачу кредита_транша_.docx&quot;,&quot;id&quot;:&quot;88-24565&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24565?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ1NjV8OTdTSUR0RjYvT2VzN1dYV1YxL2xaaWErR2JKcFpHeGNRZ1ZOb0JWWndXTT0=&amp;updated=1579098964232&quot;},{&quot;value&quot;:&quot;ИУ по двум траншам.docx&quot;,&quot;id&quot;:&quot;88-24566&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24566?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ1NjZ8RDJEKzJ0Tm1XWTl0ZjE2ZG1yNmliMElhZ2FpbEJzZi9UcU02Q2RnOTViQT0=&amp;updated=1579098964236&quot;},{&quot;value&quot;:&quot;АК_Этапы интеграции_20191212 (1).xlsx&quot;,&quot;id&quot;:&quot;88-25065&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25065?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUwNjV8cEl0RDFzSHk1WVNZRElPSWlheFJyeUthREVISEVTbXU3SU5PdVZLTExUTT0=&amp;updated=1580207101249&quot;},{&quot;value&quot;:&quot;csd (1).dms&quot;,&quot;id&quot;:&quot;88-25066&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25066?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUwNjZ8VWROeUcwYmVPV2NueFRGOG9zaFlkdUNRVjZoZkFqTnlLQjVWK0xzbFNMOD0=&amp;updated=1580207226957&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-44632&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;SP = 10&lt;br/&gt;будет новый еще один ГП&lt;br/&gt;надо менять формат с ЦФТ&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1573332810993,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-47532&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;на анализ 10 часов&lt;br/&gt;дата сдачи 17.12.19&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1576134233089,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-47976&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем измененный КОД&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1576672712367,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49270&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Во вложении предварительный КОД по программе 2 транша. Здесь добавлены только те документы, которые будут изменены по данной программе.&lt;br/&gt;КОД является предварительным, т.к. финальное согласование внутри банка будет проводится уже перед запуском самой программы, но стоит отметить, что правки возможно в части статичного текста.&lt;br/&gt;Поля, которые заполняются путем взаимодействия между БП и ЦФТ, с большой долей вероятности останутся неизменными.&lt;/p&gt;\n&lt;p&gt;Прошу принять в работу, готов ответить на вопросы, в случае необходимости.&lt;/p&gt;\n&lt;p&gt;Если возникнут вопросы – готов на них ответить.&lt;/p&gt;\n&lt;p&gt;Спасибо.&lt;/p&gt;\n&lt;p&gt;Любушкин Вадим,&lt;br/&gt;Тел: 077-10-32&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579098995666,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49364&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;свитчи на верификацию (все поедет)&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579187303605,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49425&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Задача нужна к июню.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579263999321,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51339&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1209&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;11.02.2020 г: Интеграционное тестирование с ЦФТ завершено успешно  (И. Кобяков, М. Гвоздик).&lt;br/&gt;Согласно договоренности, дальнейшие работы будут начаты за 3 недели до даты установки данной задачи на ПРОД&lt;br/&gt;При условии представления актуальных утвержденных в Банке КОД.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581495117206,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;proxy&quot;,&quot;cssClass&quot;:&quot;c17&quot;}]}, {&quot;id&quot;:&quot;ARGS-1658&quot;,&quot;entityId&quot;:&quot;86-75578&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Подсказка о печати нового кредитного договора&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анастасия Кряжова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580904976342&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1658&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;при отправке сообщения &lt;code class=\&quot;inline-code\&quot;&gt;documents_ready&lt;/code&gt;&lt;br/&gt;отправлять на БЭК флаг повторного открытия договора &lt;code class=\&quot;inline-code\&quot;&gt;documents_ready_repeated&lt;/code&gt;&lt;br/&gt;&lt;em&gt;Как формировать значение&lt;/em&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;documents_ready_repeated&lt;/code&gt;: &lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt; в двух случаях:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если ИМЕННО перед этим &lt;code class=\&quot;inline-code\&quot;&gt;documents_ready&lt;/code&gt; был &lt;code class=\&quot;inline-code\&quot;&gt;delete&lt;/code&gt; (запрос на удаление договора в цфт), то&lt;/li&gt;\n&lt;li&gt;если ИМЕННО перед этим &lt;code class=\&quot;inline-code\&quot;&gt;documents_ready&lt;/code&gt; был &lt;code class=\&quot;inline-code\&quot;&gt;rollback&lt;/code&gt; (откат заявки после закрытия операционного дня), и был сформирован кредитный договор (был запрос csd)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Иначе: &lt;code class=\&quot;inline-code\&quot;&gt;false&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;br/&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;documents_ready&lt;/code&gt; получать флаг &lt;code class=\&quot;inline-code\&quot;&gt;documents_ready_repeated&lt;/code&gt; и пробрасывать его фронту&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;code class=\&quot;inline-code\&quot;&gt;documents_ready_repeated&lt;/code&gt;: &lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;Если в &lt;code class=\&quot;inline-code\&quot;&gt;documents_ready&lt;/code&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;documents_ready_repeated&lt;/code&gt;: &lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt;&lt;br/&gt;на 9 шаге отображать сверху красную плашку доработки&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25411?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU0MTF8TDlLYzg4NVhKSWdCM1h6U25xK0djWjZFanJhMlM4NzVXaWhGdGxPbTBzWT0=&amp;amp;updated=1580920074994\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;с текстом:&lt;br/&gt;&amp;quot;Вам требуется распечатать новый набор документов, подписать с клиентом и загрузить в систему&amp;quot;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kryazhova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;12&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581494225886&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1653&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;TestPREprod&quot;],&quot;valueId&quot;:[&quot;TestPREprod&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1576754311549.png&quot;,&quot;id&quot;:&quot;88-25411&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25411?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0MTF8cjh5eDJUOXlFUk1mNUZMeURIMy9DbGMvamM3bVp1T2RuMENpWFBEQnN2WT0=&amp;updated=1580920074994&quot;},{&quot;value&quot;:&quot;image1581057134058.png&quot;,&quot;id&quot;:&quot;88-25484&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25484?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0ODR8UlJqbndVNGw1eGFocVBwQUQzazcwWk1RWXVqbWs4Vi9vY2JTaDF1Nk9nTT0=&amp;updated=1581057134689&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-25486&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25486?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0ODZ8WElVZnVaVk16YVl1UTZPU3d0OUxGMnVvQWp4Y2RIcWVMdkNuQUJCSDJlMD0=&amp;updated=1581058688065&quot;},{&quot;value&quot;:&quot;image1581059490741.png&quot;,&quot;id&quot;:&quot;88-25487&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25487?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0ODd8NFVpV2p0NG02S05FUUowOVlZYlRQSzZQZ0dSdE13VUNJWVVlM2NhVzRKRT0=&amp;updated=1581059491342&quot;},{&quot;value&quot;:&quot;image1581079286706.png&quot;,&quot;id&quot;:&quot;88-25514&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25514?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU1MTR8dWZUblQ4Y2lKdi9NMDFyZEh5QXZsUjZBT01ySHBDRExhR1J5SC9kVlhhND0=&amp;updated=1581079287522&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50844&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: hotfix/ARGS-1658&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: hotfix/ARGS-1658&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580974133877,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50923&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветка бэк &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1658&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580998622021,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50951&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25484?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU0ODR8TzI4VHM5engyZmRYbmtuVTA3WXg0cnJENnlGL1k1SE1PYnhRczhOMmEyQT0=&amp;updated=1581057134689\&quot;/&gt;&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016965/step/9\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016965/step/9&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12834/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12834/details/&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; если ИМЕННО перед этим documents_ready был rollback (откат заявки после закрытия операционного дня)&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;partnerka / sm_rgsb.documents_ready &lt;br/&gt;&lt;br/&gt;&amp;quot;documents_ready_repeated&amp;quot;: true&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581057223855,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50953&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Если был &lt;code class=\&quot;inline-code\&quot;&gt;rollback&lt;/code&gt; не со сделки, а  с &lt;code class=\&quot;inline-code\&quot;&gt;pde_deal_verification&lt;/code&gt;, флаг &lt;code class=\&quot;inline-code\&quot;&gt;“documents_ready_repeated”: true&lt;/code&gt;.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12074/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12074/details/&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;И на фронте появится баннер. Но по идее так как это первый documents_ready, флаг в этом случае не стоит отправлять, так как документы еще не подписывали. &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kryazhova\&quot; title=\&quot;a.kryazhova\&quot; data-user-id=\&quot;24-126\&quot;&gt;Анастасия Кряжова&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581057857486,&quot;updated&quot;:1581058428274,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50954&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Если не было &lt;code class=\&quot;inline-code\&quot;&gt;rollback&lt;/code&gt; или &lt;code class=\&quot;inline-code\&quot;&gt;delete&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;documents_ready_repeated&amp;quot;: false&lt;/code&gt;.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12995/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12995/details/&lt;/a&gt;&lt;br/&gt;Баннера нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25486?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU0ODZ8djg5VDNsMXJSWjh4TnBhUGVSZis2d1QrWFJjVkozS0tNdENkY0pHR0lYVT0=&amp;updated=1581058688065\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581058669188,&quot;updated&quot;:1581058700368,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50956&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12995/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12995/details/&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25487?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU0ODd8bE9oMjVFS1lKRXIxZEVhb2F4Skk5QzRoSDd1bnZSZGZ4RDh5UmdDbmJuMD0=&amp;updated=1581059491342\&quot;/&gt;&lt;/div&gt;&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30017191/step/9\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30017191/step/9&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; если ИМЕННО перед этим documents_ready был delete (запрос на удаление договора в цфт)&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;partnerka / sm_rgsb.documents_ready &lt;br/&gt;&lt;br/&gt;&amp;quot;documents_ready_repeated&amp;quot;: true&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581059558547,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50968&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.rybakova\&quot; title=\&quot;Рыбакова Екатерина\&quot; data-user-id=\&quot;24-239\&quot;&gt;@Рыбакова Екатерина&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Если был rollback не со сделки, а  с pde_deal_verification, флаг “documents_ready_repeated”: true.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12074/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12074/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;И на фронте появится баннер. Но по идее так как это первый documents_ready, флаг в этом случае не стоит отправлять, так как документы еще не подписывали. Анастасия Кряжова&lt;/p&gt;\n&lt;p&gt;Это не хорошо. надо исключить &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581065373777,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50994&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Исправлено, описание задачи обновил в соответствие с текущей реализацией&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581073608994,&quot;updated&quot;:1581073701732,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51007&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Исправлено - &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Если был rollback не со сделки, а с pde_deal_verification, флаг “documents_ready_repeated”: true.&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12688/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12688/details/&lt;/a&gt;&lt;br/&gt;“documents_ready_repeated”: false.&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581077237503,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51008&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Банк просит изменить текст комментария:&lt;/p&gt;\n&lt;p&gt;ВНИМАНИЕ! Сформированы новые документы, которые необходимо подписать с клиентом и&lt;br/&gt;приложить к заявке.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581077455919,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51010&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Прежний функционал так же работает.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12821/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12821/details/&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581078051166,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51013&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1658&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25514?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU1MTR8QTVmakFLMXIxa2laR29IZERRYTVuWkZZbXNBZVdDWFNHcG5PeklCeExmbz0=&amp;updated=1581079287522\&quot;/&gt;&lt;/div&gt;&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016947/step/9\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016947/step/9&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581079289450,&quot;updated&quot;:1581079307622,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;},{&quot;value&quot;:&quot;**&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1632&quot;,&quot;entityId&quot;:&quot;86-74941&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Доработка валидации возраста в проверке свидетельств о рождении&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580375552239&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1632&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;В рамках тестирования &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1620\&quot; class=\&quot;issue-resolved\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-74755\&quot; title=\&quot;Госпрограмма\&quot;&gt;ARGS-1620&lt;/a&gt; было замечено, что если при верификации свидетельства указывается дата рождения из будущего, верификация проходит успешно, заявка уходит дальше - технически отрицательный возраст меньше 18.&lt;br/&gt;&lt;br/&gt;Нужно в bpm добавить проверку, что возраст всех детей неотрицательный.&lt;br/&gt;Если отрицательный, возвращать ошибку по свидетельствам: &amp;quot;Некорректная дата рождения ребенка&amp;quot;&lt;/div&gt;\n&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581489519226&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;Med&quot;],&quot;valueId&quot;:[&quot;Med&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#fed74a&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;TestPREprod&quot;],&quot;valueId&quot;:[&quot;TestPREprod&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1581087281045.png&quot;,&quot;id&quot;:&quot;88-25531&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25531?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU1MzF8WktsZUlZcitvam9Hcnc1YXNhUXQzSStaSi9QQ2o3Wi85akYyZDdwOS9YWT0=&amp;updated=1581087282770&quot;},{&quot;value&quot;:&quot;image1581090134513.png&quot;,&quot;id&quot;:&quot;88-25536&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25536?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU1MzZ8YzRqZHIrajR5dm9CMUxhREFwQlkyb1hrNGl0eS90MjJxRU14UGNySUR4cz0=&amp;updated=1581090135236&quot;},{&quot;value&quot;:&quot;image1581090286781.png&quot;,&quot;id&quot;:&quot;88-25537&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25537?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU1Mzd8emxuR2hjREhmaXV2dHVZdHdGWjFkdGpEVSttL01BWjJTWmdUMk1Ra1Q4az0=&amp;updated=1581090287342&quot;},{&quot;value&quot;:&quot;image1581090311101.png&quot;,&quot;id&quot;:&quot;88-25538&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25538?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU1Mzh8QVB5blRZdFU2TDl4OTZ2TldTbGRzREptcDhVTjdERURubmpLcEcvWTF6MD0=&amp;updated=1581090311750&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50813&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1632&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Если делать отдельную проверку, что дата рождения-текущая дата должна быть неотрицательная, то Возвращать ошибку в разрезе документа: если ошибка по 1-му свидетельству, то писать &amp;quot;Документ 1: Некорректная дата рождения ребенка&amp;quot;, если по 2-му, то &amp;quot;Документ 2: Некорректная дата рождения ребенка&amp;quot;.&lt;/p&gt;\n&lt;p&gt;Если удобнее сделать в рамках общей проверки возраста:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    целое_число_месяцев(текущая дата - date_of_birth_1)        &amp;lt; 213:\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Документ 1: Ребенок старше 17-ти лет. Приложите другое свидетельство&amp;quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;, то добавить условие &amp;gt;0  и изменить текст ошибки (для документа 1 и 2 учесть сответственно)&lt;br/&gt;&amp;quot;Документ 1: Ребенок старше 17-ти лет. Приложите другое свидетельство&amp;quot; на&lt;br/&gt;&amp;quot;Документ 1: Возраст ребенка не подходит для ГосПрограммы. Приложите другое свидетельство&amp;quot;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580912255936,&quot;updated&quot;:1580912317273,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50901&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1632&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sm, composite: feature/ARGS-1632&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580988683115,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51035&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1632&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Свидетельства с датой больше текущей возвращает на доработку - ОК&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25531?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU1MzF8bGJxKzhlNDhnRHF6b1Z1amJTZTNaS0NtT0NoYUtGVGhVTEtCOFVoL3ZWYz0=&amp;amp;updated=1581087282770\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13054/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13054/details/&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581087626861,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51040&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1632&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;регресс отказа по свитчам на СР = ОК&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25536?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU1MzZ8UFI1Y01vTENsQWEycG1lQjlNOVJ0citaVTdvaHI1QXFlcnlZcWdBTitXbz0=&amp;amp;updated=1581090135236\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581090141918,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51042&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1632&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;условие - если ребенку 18 лет = ОК:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25537?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU1Mzd8YjR3OGlhbHAzUHhYR2hndTF3d1paZkFDb1YwUWdJRzVrZ3FlTTZQa0g5TT0=&amp;amp;updated=1581090287342\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25538?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU1Mzh8bnV2SWQxc2RjRHQvSFM5R1pYRVpLcnlwRitEMzl2QXNCTEM2MVNOdlZSMD0=&amp;amp;updated=1581090311750\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581090314559,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51044&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1632&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;БАГ&lt;/strong&gt;&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30017271/step/7\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30017271/step/7&lt;/a&gt;&lt;br/&gt;Кейс:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Получили одобрение по заявке со свидетельством о рождении&lt;/li&gt;\n&lt;li&gt;На 8 шаге &lt;strong&gt;Финальный выбор условий&lt;/strong&gt; вернулись на 7 шаг&lt;/li&gt;\n&lt;li&gt;Удалили 1 скан свидетельства о рождении прикрепили другой скан&lt;/li&gt;\n&lt;li&gt;Нажали ДАЛЕЕ&lt;br/&gt;ОР: свидетельство о рождении ушло на проверку.&lt;br/&gt;ФР: перешли сразу на 8 шаг &lt;strong&gt;Финальный выбор условий&lt;/strong&gt; без проверки нового документа&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581090697416,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;}]}, {&quot;id&quot;:&quot;ARGS-1460&quot;,&quot;entityId&quot;:&quot;86-71894&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Approval_history&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576586906086&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1460&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;BPM:&lt;/strong&gt;&lt;br/&gt;&lt;em&gt;Как сейчас записываем в memory-&amp;gt;approval_history&lt;/em&gt;:&lt;br/&gt;Если условия одобрили, то запись попадает в &lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;approval_history&lt;/code&gt; с флагом&lt;code class=\&quot;inline-code\&quot;&gt; flag_approve: true.&lt;/code&gt; В memory сейчас сохраняется первая одобренная запись по первому одобренному условию.&lt;br/&gt;Далее, если поменяли продукт и условия не одобрили, то запись по новому продукту все равно попадает в &lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;approval_history&lt;/code&gt; с флагом &lt;code class=\&quot;inline-code\&quot;&gt;flag_approve: true.&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;Изменить действие флага &lt;code class=\&quot;inline-code\&quot;&gt;flag_approve&lt;/code&gt;:&lt;/em&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Записывать историю в &lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;approval_history&lt;/code&gt; по следующему алгоритму:&lt;br/&gt;1.1 Записываем первые условия по продукту&lt;br/&gt;(даже если они не одобрены и  флаг &lt;code class=\&quot;inline-code\&quot;&gt;flag_approve&lt;/code&gt; записывать по действительному принятию решения по данным условиям).&lt;br/&gt;Далее:&lt;br/&gt;Если у последующих измененных условий в рамках того же продукта &lt;code class=\&quot;inline-code\&quot;&gt;change_product:true&lt;/code&gt;, то перезаписываем все условия и флаг.&lt;br/&gt;Иначе не перезаписываем.&lt;br/&gt;Алгоритм действует в рамках 1-го продукта. Под продуктом понимается: БезЗалог и Залог.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;дополнение&lt;/strong&gt;&lt;br/&gt;Добавить условие для&lt;code class=\&quot;inline-code\&quot;&gt;flag_approve&lt;/code&gt;:true. Должно выполняться:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;все флаги абакуса из блока flags != true&lt;br/&gt;И&lt;/li&gt;\n&lt;li&gt;от партнерки флаг (irr_very_big) != true&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование:&lt;/strong&gt;&lt;br/&gt;На проде есть заявка 3149360.&lt;br/&gt;Надо завести аналогичные данные и проверить, что в memory-&amp;gt;approval_history по залогу будут последние одобренные условия&lt;br/&gt;а для беззалога будут первые неодобренные условия.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581489459911&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;TestPREprod&quot;],&quot;valueId&quot;:[&quot;TestPREprod&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-47994&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1460&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;sm_rgsb: feature/ARGS-1460\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1576676727009,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49129&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1460&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11328/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11328/details/&lt;/a&gt;&lt;br/&gt;Первая программа по залогу не одобрена, но &lt;code class=\&quot;inline-code\&quot;&gt;approval_history-&amp;gt;rgsb_pledge_true-&amp;gt;flag_approve&lt;/code&gt; значение флага &lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1578997871240,&quot;updated&quot;:1580208294421,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49156&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1460&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt;&lt;br/&gt;В условии задачи по факту не указано, при каких условиях flag_approve считать true, и какая связь у этого флага с флагом change_product_valid (если она есть).&lt;br/&gt;Сейчас это сделано так:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;BPM присылает в партнерку change_product: false, для БПМ условия считаются не одобренным, для партнерки тоже (появляется плашка &amp;quot;Данное предложение для Вас недоступно. Измените условия&amp;quot;).&lt;/li&gt;\n&lt;li&gt;BPM присылает в партнерку change_product: true, но limit_lesser: true. Для БПМ условия  считаются одобренными, а для партнерки нет (появляется плашка &amp;quot;Сумма запрашиваемого кредита превышает одорбенную банком&amp;quot;). Т.е. БПМ не учитывает флаг limit_lesser при вычислении флага &amp;quot;одобрены ли условия&amp;quot; (flag_approve). То же самое с флагом ltv_score_big.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Нужны уточнения, при каких условиях flag_approve true, а при каких false, правильно ли реализовано сейчас в рамках этой задачи.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579008894027,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50165&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1460&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;e.ivanchenkova\&quot; data-user-id=\&quot;24-243\&quot;&gt;Елизавета Иванченкова&lt;/a&gt; &lt;br/&gt;Условие &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;(limit_lesser, irr_very_big, ltv_very_big)=! true&lt;/div&gt;&lt;br/&gt;не до конца понятно, т.к. limit_lesser и ltv_very_big самый актуальные мы храним в ответе от абакуса, а irr_very_big - в сообщении от партнерки.&lt;br/&gt;Нужно брать первые два флага от абакуса, а последний из партнерки?&lt;br/&gt;&lt;br/&gt;Может быть здесь имелось в виду такое условие из задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-698\&quot; class=\&quot;issue-resolved\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-59489\&quot; title=\&quot;Apps pmt реализовать\&quot;&gt;ARGS-698&lt;/a&gt;:&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Если в ответе Абакуса в блоке flags хотя бы у одного из флагов значение = true&lt;/div&gt;&lt;br/&gt;Т.е. в контексте этой задачи &amp;quot;все флаги абакуса из блока flags != true&amp;quot;?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580212414799,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50354&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1460&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12502/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12502/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;approval_history-&amp;gt;rgsb_pledge_true-&amp;gt;flag_approve = false&lt;/code&gt; , условия в рамках одного продукта перезаписались - ОК.&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580381328144,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;},{&quot;value&quot;:&quot;Внутреннее&quot;,&quot;cssClass&quot;:&quot;c27&quot;}]}, {&quot;id&quot;:&quot;ARGS-1613&quot;,&quot;entityId&quot;:&quot;86-74634&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Корректировка фичей отправки на верификацию&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580127111581&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1613&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9110&lt;br/&gt;&lt;strong&gt;Решение:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM и User-data&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Перед расчетом фичей на прозвоны и андеррайтинг&lt;br/&gt;&lt;strong&gt;Если&lt;/strong&gt; (income_proof_document_cid == 1) and &lt;code class=\&quot;inline-code\&quot;&gt;request-&amp;gt;job-&amp;gt;month_income&lt;/code&gt; &amp;gt; 1.60 * catalog_income and initial_payment_fraction &amp;lt; 0.4 and segment in {3, 4}&lt;br/&gt;&lt;strong&gt;То&lt;/strong&gt; дополнительно делать запрос в &lt;strong&gt;абакус&lt;/strong&gt; для расчета ЕЩЕ одного Лимита &lt;code class=\&quot;inline-code\&quot;&gt;max_limit_60&lt;/code&gt;&lt;br/&gt;При этом на вход абакусу как &lt;code class=\&quot;inline-code\&quot;&gt;main_income&lt;/code&gt; отправлять &lt;code class=\&quot;inline-code\&quot;&gt;= 1.60 * catalog-&amp;gt;income&lt;/code&gt;.&lt;br/&gt;Сохранять новый лимит &lt;code class=\&quot;inline-code\&quot;&gt;max_limit_60&lt;/code&gt; в memory[abacus]&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;где income_proof_document_cid - memory[request:[job: income_proof_document_cid]];&lt;br/&gt;month_income - memory[abacus: total_income]; catalog_income - среднестатистический доход из каталога;&lt;br/&gt;initial_payment_fraction - memory[abacus: initial_payment_fraction], segment - memory[abacus: segment]&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Скорректировать фичи отправки на верификацию:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Фича 8&lt;/code&gt;&lt;br/&gt;Численность организации менее 50 чел и с данной организации обратилось 3 и более человека&lt;br/&gt;=&amp;gt;&lt;br/&gt;Численность организации менее 50 чел и с данной организации обратилось 3 и более человека &lt;code class=\&quot;inline-code\&quot;&gt;за последние 30 дней.&lt;/code&gt;,&lt;br/&gt;где человек -- это &lt;code class=\&quot;inline-code\&quot;&gt;user&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Фича 9&lt;/code&gt;&lt;br/&gt;&amp;quot;Серая зона&amp;quot; по Кронос&lt;br/&gt;=&amp;gt;&lt;br/&gt;&amp;quot;Серая зона&amp;quot; по Кронос &lt;code class=\&quot;inline-code\&quot;&gt;и качество кредитной истории == NO_HIST.&lt;/code&gt;&lt;br/&gt;где кредитная история = &lt;strong&gt;(memory[current_scoring: ch_quality])&lt;/strong&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Фича 7&lt;/code&gt;&lt;br/&gt;Поле &amp;quot;Подтверждающий документ&amp;quot; = &amp;quot;без подтверждения&amp;quot; И Доход клиента в анкете больше среднестатистического дохода из каталога более чем на 60 % и ПВ&amp;lt;40%&lt;br/&gt;=&amp;gt;&lt;br/&gt;Поле &amp;quot;Подтверждающий документ&amp;quot; = &amp;quot;без подтверждения&amp;quot; И Доход клиента в анкете больше среднестатистического дохода из каталога более чем на 60 % и ПВ&amp;lt;40%. &lt;code class=\&quot;inline-code\&quot;&gt;При этом max_limit_60 &amp;lt; loan_amount&lt;/code&gt;&lt;br/&gt;где max_limit_60 - memory[abacus: max_limit_60]; loan_amount- memory[request: [conditions: loan_amount]]&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Фича 13&lt;/code&gt;&lt;br/&gt;Паспорт гражданина РФ выдан за последние 12 мес не по сроку замены в 20 и 45 лет (2 мес на изменение паспорта)&lt;br/&gt;=&amp;gt;&lt;br/&gt;Паспорт гражданина РФ выдан за последние 12 мес не по сроку замены в 20 и 45 лет (&lt;strong&gt;6&lt;/strong&gt; мес на изменение паспорта) И &lt;strong&gt;(&lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;verification-&amp;gt;passport-&amp;gt;gender==male&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Тест кейсы:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Численность организации менее 50 чел и с данной организации обратилось 3 и более человека &lt;code class=\&quot;inline-code\&quot;&gt;за последние 30 дней.&lt;/code&gt; Ожидаемый результат  &amp;quot;Андеррайтинг&amp;quot;:  звонки - проверка занятости и дохода, проверка личности; документы&lt;br/&gt;&lt;strong&gt;Проверить&lt;/strong&gt; что фича не отрабатывает при изменении срока на 31 и более дней.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&amp;quot;Серая зона&amp;quot; по Кронос &lt;code class=\&quot;inline-code\&quot;&gt;и качество кредитной истории == NO_HIST.&lt;/code&gt; Ожидаемый результат &amp;quot;Андеррайтинг&amp;quot;: звонки - проверка занятости и дохода; экспертная оценка&lt;br/&gt;&lt;strong&gt;Проверить&lt;/strong&gt; что фича не отрабатывает при memory[current_scoring: ch_quality &amp;lt;&amp;gt; NO_HIST]&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Поле &amp;quot;Подтверждающий документ&amp;quot; = &amp;quot;без подтверждения&amp;quot; И Доход клиента в анкете больше среднестатистического дохода из каталога более чем на 60 % и ПВ&amp;lt;40%. &lt;code class=\&quot;inline-code\&quot;&gt;При этом max_limit_60 &amp;lt; loan_amount&lt;/code&gt;. Ожидаемый результат &amp;quot;Андеррайтинг&amp;quot;: звонки - проверка занятости и дохода&lt;br/&gt;&lt;strong&gt;Проверить&lt;/strong&gt; что фича не отрабатывает если max_limit_60 &amp;gt; loan_amount (сумма кредита)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Паспорт гражданина РФ выдан за последние 12 мес не по сроку замены в 20 и 45 лет (&lt;code class=\&quot;inline-code\&quot;&gt;6&lt;/code&gt; мес на изменение паспорта). Пол клиента - &lt;code class=\&quot;inline-code\&quot;&gt;Мужчины.&lt;/code&gt; Ожидаемый результат &amp;quot;Андеррайтинг&amp;quot;: звонки - проверка занятости и дохода, проверка личности&lt;br/&gt;&lt;strong&gt;Проверить&lt;/strong&gt; что фича не отрабатывает, если пол клиента - &amp;quot;Женщина&amp;quot;&lt;br/&gt;&lt;strong&gt;Проверить&lt;/strong&gt; что фича не отрабатывает &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;возраст клиента больше 45 (20)&lt;/code&gt; &lt;strong&gt;и&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;целое_число_месяцев(Текущая Дата - Дата выдачи паспорта ) &amp;lt;= 12&lt;/code&gt; &lt;strong&gt;и&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;целое_число_месяцев(Дата выдачи паспорта - Дата рождения) &amp;lt; 6 + 45(20)*12&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Рыбакова Екатерина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;8&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.rybakova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581427814829&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Test done&quot;],&quot;valueId&quot;:[&quot;Test done&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9110_Корректировка фичей отправки на верификацию авто.doc&quot;,&quot;id&quot;:&quot;88-25028&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25028?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUwMjh8eTBtbUt5a0g1WnN2NUFjeWpLa1FPWDFUanRyZ2VadmxqdDVXTGJ3T1Q2bz0=&amp;updated=1580127122119&quot;},{&quot;value&quot;:&quot;Прозвоны_v5.1.3.xlsx&quot;,&quot;id&quot;:&quot;88-25181&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25181?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUxODF8MmZ6MnI2U0pvQnVOdHNzNkIyQ1FXNkRJTi8zRHVTNWdEMmZDQVlqSkRHMD0=&amp;updated=1580373802250&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50071&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;на анализ 6 часов&lt;br/&gt;тест-кейсы +&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580127268698,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50588&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sm, composite, userdata: feature/ARGS-1613&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580737418201,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50748&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kryazhova\&quot; title=\&quot;a.kryazhova\&quot; data-user-id=\&quot;24-126\&quot;&gt;Анастасия Кряжова&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/alexander.kan\&quot; title=\&quot;alexander.kan\&quot; data-user-id=\&quot;24-320\&quot;&gt;Александр Кан&lt;/a&gt;&lt;br/&gt;Нужно уточнить несколько моментов:&lt;br/&gt;1. Для упрощения разработки и тестирования, и чтобы не было путаницы в дальнейшем, укажите, пожалуйста, в каждом пункте, о какой фиче (номер) идет речь, и если речь идет о новой фиче, укажите это явно.&lt;br/&gt;&lt;br/&gt;2. &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; &amp;quot;Численность организации менее 50 чел и с данной организации обратилось 3 и более человека за последние 30 дней&amp;quot;.&lt;/div&gt;&lt;br/&gt;Что в этой фиче считать датой обращения? Дата создания юзера, дата создания заявки (например, если на одного человека несколько заявок), другая дата?&lt;br/&gt;&lt;br/&gt;3. Согласно задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-20\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-50127\&quot; title=\&quot;Скоринг 1\&quot;&gt;ARGS-20&lt;/a&gt; у нас сейчас следующий порядок действий в Скоринге 1:&lt;br/&gt;    1) Проверка минимальных требований к заёмщику&lt;br/&gt;    2) Запрос скоринга&lt;br/&gt;    2) Расчет сегмента и риск грейда&lt;br/&gt;    3) Проверка уровня отсечения по скоринговому баллу&lt;br/&gt;    4) Запрос Кронос;&lt;br/&gt;    5) Определение уровня проверки заёмщика с определением типа необходимых звонков и вопросов для проверки.&lt;br/&gt;    6) Расчет лимита&lt;br/&gt;    7) Обновление Apps PMT в юзердате&lt;br/&gt;&lt;br/&gt;Сейчас расчет основного лимита идет после определения зоны прозвона, в какой момент нужно рассчитывать дополнительный лимит?&lt;br/&gt;&lt;br/&gt;4. &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;&amp;quot;Поле &amp;quot;Подтверждающий документ&amp;quot; = &amp;quot;без подтверждения&amp;quot; И Доход клиента в анкете больше среднестатистического дохода из каталога более чем на 60 % и ПВ&amp;lt;40%. При этом max_limit_60 &amp;lt; loan_amount&amp;quot;&lt;/div&gt;&lt;br/&gt; - на всякий случай уточняю, учтено ли, что эта фича будет работать только для &amp;quot;работы по найму&amp;quot; (для других типов занятости нет дохода из каталога)&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580884957189,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50793&quot;,&quot;author&quot;:&quot;alexander.kan&quot;,&quot;authorFullName&quot;:&quot;Александр Кан&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Готово&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Дата создания заявки в БД Userdata (поле  userdata.user_logs.created)&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;3.Поменять местами 5 и 6 шаг&lt;/p&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Фича 7 работает только для типа занятости &amp;quot;работа по найму&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580900077385,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51118&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Фича 13&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Паспорт получен через 6 месяцев и 1 день после 45 лет, муж., фича сработала - ОК&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13134/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13134/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [ &amp;quot;13&amp;quot; ],&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Паспорт получен через 6 месяцев и 1 день после 45 лет, жен., фича НЕ сработала - ОК&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13139/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13139/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [ ],&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Паспорт получен через 5 месяцев и 1 день после 45 лет, муж., фича НЕ сработала - ОК&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13142/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13142/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [ ],&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Паспорт получен через 5 месяцев и 1 день после 20 лет, муж., фича НЕ сработала - ОК&lt;br/&gt;(здесь прозвон по мужскому полу 21-24 лет)&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13144/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13144/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [ &amp;quot;10&amp;quot; ],&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Паспорт получен через 6 месяцев и 1 день после 20 лет, муж., фича сработала - ОК&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13145/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13145/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;triggered_features&amp;quot;: [ &amp;quot;10&amp;quot;, &amp;quot;13&amp;quot; ],&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Паспорт получен через 6 месяцев и 1 день после 20 лет, жен., фича НЕ сработала - ОК&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13146/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13146/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [ ],&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581335817043,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51193&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;Если (income_proof_document_cid == 1) and request-&amp;gt;job-&amp;gt;month_income &amp;gt; 1.60 * catalog_income and initial_payment_fraction &amp;lt; 0.4 and segment in {3, 4}&lt;br/&gt;То дополнительно делать запрос в абакус для расчета ЕЩЕ одного Лимита max_limit_60&lt;br/&gt;При этом на вход абакусу как main_income отправлять = 1.60 * catalog-&amp;gt;income.&lt;br/&gt;Сохранять новый лимит max_limit_60 в memory[abacus]&lt;/div&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;main_income&lt;/code&gt; из анкеты 250_000, в новом запросе в абакус отправляется &lt;code class=\&quot;inline-code\&quot;&gt;main_income&amp;quot;: 126795.2&lt;/code&gt;.&lt;br/&gt;Лимит сохраняется в &lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;abacus-&amp;gt;max_limit_60: 1470000&lt;/code&gt;&lt;br/&gt;&lt;br/&gt;OK.&lt;br/&gt;&lt;strong&gt;Фича 7&lt;/strong&gt;&lt;br/&gt;1. Проверить что фича не отрабатывает если max_limit_60 &amp;gt; loan_amount (сумма кредита)&lt;br/&gt;ФР = ОР.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13147/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13147/details/&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;1. Проверить что фича отрабатывает если max_limit_60 &amp;lt; loan_amount (сумма кредита)&lt;br/&gt;ФР = ОР.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12756/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12756/details/&lt;/a&gt;&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&amp;quot;flags_rgsb&amp;quot;: {&lt;br/&gt;    &amp;quot;new_request&amp;quot;: 1580736547.281698,&lt;br/&gt;    &amp;quot;scoring_feature_6&amp;quot;: true,&lt;br/&gt;    &amp;quot;scoring_feature_7&amp;quot;: true&lt;br/&gt;},&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581347894083,&quot;updated&quot;:1581427805211,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51194&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Фича 9&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&amp;quot;Серая зона&amp;quot; по Кронос и качество кредитной истории &amp;lt;&amp;gt; NO_HIST, фича НЕ сработала - ОК&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13169/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13169/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [],&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&amp;quot;Серая зона&amp;quot; по Кронос и качество кредитной истории == NO_HIST, фича сработала - ОК&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13172/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13172/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [ &amp;quot;9&amp;quot; ],&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581348058748,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51200&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1613&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;strong&gt;Фича 8&lt;/strong&gt;&lt;br/&gt;1. Из компании обратилось более 3 человек за последние 30 дней - сработала фича - ОК.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13164/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13164/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;triggered_features&amp;quot;: [ &amp;quot;8&amp;quot;, &amp;quot;6&amp;quot; ],&lt;/code&gt;&lt;br/&gt;2. Из компании обратилось более 3 человек не за последние 30 дней - не сработала фича - ОК.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12924/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12924/details/&lt;/a&gt;&lt;br/&gt;В подсчете обратившихся сотрудников участвуют только те, кто обратился за последние 30 дней.&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581349604656,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;},{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1623&quot;,&quot;entityId&quot;:&quot;86-74784&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Добавление нового продукта в список страховых и сервисных услуг&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580231503216&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1623&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;1132: Добавление нового продукта в список страховых/ сервисных продуктов&lt;br/&gt;&lt;strong&gt;Цель:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить два типа страховки &amp;quot;ДО&amp;quot; и &amp;quot;Иное&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;В базе &lt;strong&gt;partnerka-admin&lt;/strong&gt;&lt;br/&gt;В таблицу &lt;em&gt;insurance_type&lt;/em&gt; добавить:&lt;br/&gt;два новых типа &amp;quot;Доп. оборудование&amp;quot; (id 9) и &amp;quot;Иное&amp;quot; (id 10), где popular = id, external_type = &amp;quot;BP_INS_0&amp;quot; &amp;amp; &amp;quot;ID&amp;quot;, state = active&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM|BACK|FRONT:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить в условия проверок типов, реализованных в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1250\&quot; title=\&quot;Убрать проверку сторонних СУ\&quot; data-issue-id=\&quot;86-68622\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1250&lt;/a&gt;, типы &lt;strong&gt;9 и 10&lt;/strong&gt;&lt;br/&gt;Измененный алгоритм проверок во вложении&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25290?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjUyOTB8ME5iOFN5Sm9EeHRGcVlwVGVneFNpV2grTnNuZm1JMlJBUlpHVVFlRVRKdz0=&amp;amp;updated=1580721734719\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;catalogue.yaml&lt;/strong&gt;&lt;br/&gt;Добавить в каталог типы документов:&lt;/p&gt;\n&lt;h1&gt;ДО&lt;/h1&gt;\n&lt;p&gt;346: Полис Доп. оборудование&lt;br/&gt;347: Заявление на перевод денег Доп. оборудование&lt;br/&gt;348: Счёт на оплату Доп. оборудование&lt;/p&gt;\n&lt;h1&gt;Иное&lt;/h1&gt;\n&lt;p&gt;349: Полис Иное&lt;br/&gt;350: Заявление на перевод денег Иное&lt;br/&gt;352: Счёт на оплату Иное&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Ожидаемый результат&lt;/strong&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25285?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjUyODV8UzdTOXNYYW1xSFNRbjU3SmVQVU5ZaVNUQW05bDRSRHk1bTBYU1VPQnRFST0=&amp;amp;updated=1580719683272\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавлены новые типа страховок для АО &amp;quot;Альфастрахование&amp;quot;.&lt;/li&gt;\n&lt;li&gt;Убедится в том, что добавленные типы страховок проходят валидацию согласно схеме из вложения&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581427222913&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;TestPREprod&quot;],&quot;valueId&quot;:[&quot;TestPREprod&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Story points&quot;,&quot;value&quot;:[&quot;8&quot;],&quot;valueId&quot;:[&quot;8&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;1132_Добавление нового продукта_авто_v4.docx&quot;,&quot;id&quot;:&quot;88-25111&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25111?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUxMTF8OGRXUzdMNmVyUWJ2WkUybklDczVUUXFMVWZjMFMxVERBRGdKYXN1Sm1LQT0=&amp;updated=1580231511488&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-25285&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25285?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUyODV8a0ZCOEpoWkdpTk1RZVp3RktBN0hNZ0gwWkRpSUoxdXlHU1Q4STJMSUUvYz0=&amp;updated=1580719683272&quot;},{&quot;value&quot;:&quot;Схема печати документов для страховок.png&quot;,&quot;id&quot;:&quot;88-25290&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25290?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUyOTB8L0xId1YzM3Q0MXQvRndjT3NCVmRmL0IySy9kZi9rK1hidE1DN2lhblBRVT0=&amp;updated=1580721734719&quot;},{&quot;value&quot;:&quot;Схема печати документов для страховок1.png&quot;,&quot;id&quot;:&quot;88-25291&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25291?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUyOTF8Snp4U1Jvbmw2K0VGODNrZXo2L3M1Q1lMWEVYcXZpSDlYTVBqaU5zYVBYcz0=&amp;updated=1580721881738&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-25457&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25457?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0NTd8STVpOWpLa2xETlphdlVTbmZ5UnF4TzdjYXAxRzdJTkVET3g0WUhDU0tUcz0=&amp;updated=1580998590983&quot;},{&quot;value&quot;:&quot;image1581001018011.png&quot;,&quot;id&quot;:&quot;88-25465&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25465?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjU0NjV8QVVqa0hpcjF5VHQ5TjZnSHFWdDlNOTk0TFpPYkh5NXo5czUxZnZBM0lDRT0=&amp;updated=1581001018535&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50200&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1623&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;8 SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580231533720,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50720&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1623&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;BPM&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sm: feature/ARGS-1623&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580828928027,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50776&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1623&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветка &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1623&lt;/code&gt; в УП, ПП, АКТЫ&lt;br/&gt;В уп нужно после деплоя запустить задачу &lt;code class=\&quot;inline-code\&quot;&gt;rake create_new_insurance_types&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580894778639,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50922&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1623&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;strong&gt;ДО в кредит&lt;/strong&gt;&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12964/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12964/details/&lt;/a&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;bank_proxy / rgsb_proxy.csd_request &lt;/code&gt;&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&amp;quot;insurances&amp;quot;: {&lt;br/&gt;    &amp;quot;insurance&amp;quot;: [&lt;br/&gt;    {&lt;br/&gt;        &amp;quot;id&amp;quot;: 8045,&lt;br/&gt;        &amp;quot;type&amp;quot;: &amp;quot;BP_INS_09&amp;quot;,&lt;br/&gt;        &amp;quot;summa&amp;quot;: 100,&lt;br/&gt;        &amp;quot;policy&amp;quot;: 8045,&lt;br/&gt;        &amp;quot;date_end&amp;quot;: &amp;quot;2024-11-05&amp;quot;,&lt;br/&gt;        &amp;quot;company_inn&amp;quot;: &amp;quot;7713056834&amp;quot;,&lt;br/&gt;        &amp;quot;included_loan&amp;quot;: 1,&lt;br/&gt;        &amp;quot;upgrade_rate_prc&amp;quot;: 0&lt;br/&gt;    }&lt;br/&gt;    ]&lt;br/&gt;},&lt;/pre&gt;&lt;br/&gt;Требуется только дата окончания - ОК.&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30017148/step/9\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30017148/step/9&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25457?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU0NTd8L1VKVG5WRWcvR3lZQ3lOUis2aFFJbGIzWGpXa1JBSFl0NElkR3c5djdTVT0=&amp;updated=1580998590983\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580998537886,&quot;updated&quot;:1580998763875,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50936&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1623&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;strong&gt;Иное&lt;/strong&gt; в кредит&lt;br/&gt;&lt;strong&gt;ДО&lt;/strong&gt; не в кредит&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;bank_proxy / rgsb_proxy.csd_request&lt;/code&gt;&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&amp;quot;insurances&amp;quot;: {&lt;br/&gt;    &amp;quot;insurance&amp;quot;: [&lt;br/&gt;    { … },&lt;br/&gt;    {&lt;br/&gt;        &amp;quot;id&amp;quot;: 8053,&lt;br/&gt;        &amp;quot;type&amp;quot;: &amp;quot;BP_INS_10&amp;quot;,&lt;br/&gt;        &amp;quot;summa&amp;quot;: 300,&lt;br/&gt;        &amp;quot;policy&amp;quot;: 8053,&lt;br/&gt;        &amp;quot;date_end&amp;quot;: &amp;quot;2023-02-05&amp;quot;,&lt;br/&gt;        &amp;quot;company_inn&amp;quot;: &amp;quot;7713056834&amp;quot;,&lt;br/&gt;        &amp;quot;included_loan&amp;quot;: 1,&lt;br/&gt;        &amp;quot;upgrade_rate_prc&amp;quot;: 0&lt;br/&gt;    }&lt;br/&gt;    ]&lt;br/&gt;},&lt;/pre&gt;&lt;br/&gt;Требуется только дата окончания - ОК.&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016705/step/10\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016705/step/10&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25465?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjU0NjV8UWdpSE14eHBNdElWVGQxV0pjZExyZzYwZlV5OWgvaWJvbG1xeVNhV0ViTT0=&amp;updated=1581001018535\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581001019772,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50937&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1623&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Если страховка не в кредит, счета не запрашиваются - ОК.&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016705/step/10\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30016705/step/10&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581001047246,&quot;updated&quot;:1581001056183,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;}]}, {&quot;id&quot;:&quot;ARGS-1687&quot;,&quot;entityId&quot;:&quot;86-76121&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Баг в платежках для сторонних СУ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1581424967786&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1687&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В платежках для сторонних СУ не заполняется номер полиса, пример из заявки &lt;a href=\&quot;https://bpm-ng-app-1.rgsb-prod.cloud.b-pl.pro/admin/bpm/walker/156518/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;3316189&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Оплата страховой премии по договору № %s от 10.02.2020 г. АНЧУГОВ НИКОЛАЙ ВЯЧЕСЛАВОВИЧ. НДС не облагается.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Причина: в рамках задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1250\&quot; title=\&quot;Убрать проверку сторонних СУ\&quot; data-issue-id=\&quot;86-68622\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1250&lt;/a&gt; убрали проверку полиса для таких страховок.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581424967786&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;High&quot;],&quot;valueId&quot;:[&quot;High&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Backlog&quot;],&quot;valueId&quot;:[&quot;Backlog&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1495&quot;,&quot;entityId&quot;:&quot;86-72309&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Признаки мошенничества в заявках&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577022854414&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1495&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Требования&lt;/strong&gt;&lt;br/&gt;9005&lt;br/&gt;Добавить в Баланс Платформу функционал, позволяющий определять признаки мошенничества в веденных заявках и отправлять их на верификацию с новой фичой.&lt;/p&gt;\n&lt;p&gt;При наличии следующих признаков  система должна формировать новую фичу и выводить на андеррайтинг :&lt;br/&gt;• Дата открытия кредита  находится между диапазоном минус 420 дней от даты обращения в РГСБ и минус 180 дней от текущей даты&lt;br/&gt;(to_date(openeddt, &amp;#39;yyyy-mm-dd&amp;#39;) between trunc(sysdate -420) and trunc(sysdate - 180))&lt;br/&gt;• С  момента  заливки кредитной истории до обращения в РГСБ прошло менее 30 дней&lt;br/&gt;(to_date(filesincedt, &amp;#39;yyyy-mm-dd&amp;#39;) between trunc(sysdate - 30)  and trunc(sysdate))&lt;br/&gt;• Дата заливки кредитной истории превышает дату открытия счета более чем на 180 дней&lt;br/&gt;(to_date(filesincedt, &amp;#39;yyyy-mm-dd&amp;#39;) &amp;gt;  to_date(openeddt, &amp;#39;yyyy-mm-dd&amp;#39;)  + 180)&lt;br/&gt;• Кредитный лимит более 50000(creditlimit &amp;gt; &amp;#39;50000&amp;#39;)&lt;br/&gt;• Кредит выдан через МФО, ломбард и другие(UPPER(businesscategory) in (&amp;#39;MFK&amp;#39;, &amp;#39;MKK&amp;#39;, &amp;#39;OTHER&amp;#39;))&lt;br/&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;Scoring&lt;/strong&gt;&lt;br/&gt;Создать новую фичу&lt;br /&gt;\nФичей будет пользоваться Авто и КН&lt;br/&gt;Для фичи должны соблюдаться все условия по кредиту ( через AND).  Нужно проверить  каждый кредит&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если  &lt;code class=\&quot;inline-code\&quot;&gt;opened_date&lt;/code&gt; (дата открытия счета по кредиту) кредита попадает в диапазон&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;текущая дата - 420 дн&amp;lt; X &amp;lt; текущая дата - 180 дн\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если текущая дата -  &lt;code class=\&quot;inline-code\&quot;&gt;update_date&lt;/code&gt; кредита(дата обновления инф. по кредиту банком) &amp;lt; 30 дней&lt;/li&gt;\n&lt;li&gt;Если  &lt;code class=\&quot;inline-code\&quot;&gt;update_date&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;opened_date&lt;/code&gt; &amp;gt; 180 дн&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;amount&lt;/code&gt;( сумма кредита) &amp;gt; 50 000 тыс р&lt;/li&gt;\n&lt;li&gt;Если partner_type ==99 ( не банк , а другие)&lt;/li&gt;\n&lt;li&gt;Если merged_account_rating &amp;gt; 8 значений&lt;/li&gt;\n&lt;li&gt;Если closed_date(дата закрытия кредита) &amp;gt; текущей даты&lt;br/&gt;название фичи &lt;code class=\&quot;inline-code\&quot;&gt;sign_of_cheater&lt;/code&gt;, если все условия активны, то присылать  &amp;#39;true&amp;#39;&lt;br/&gt;присылать в BPM в &lt;code class=\&quot;inline-code\&quot;&gt;params- &amp;gt;&amp;gt; sign_of_cheater&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Создать новую фичу 38(записывать в triggered_features):&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;в scoring / scoring.done принимать параметр &lt;code class=\&quot;inline-code\&quot;&gt;sign_of_cheater&lt;/code&gt;&lt;br/&gt;Если он &amp;#39;true&amp;#39;, то отправлять заявку на ручную проверку (см. файл), там написано с каким предложением нужно отсылать андеррайтерам&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;Прислать в BPM sign_of_cheater==true&lt;br/&gt;проверить что заявка ушла на ручную проверку андеррайтером&lt;br/&gt;фича 38 записалась в triggered_features&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;10&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581056581704&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;SCOR-1702&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;New&quot;],&quot;valueId&quot;:[&quot;Feature&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#409600&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;TestPREprod&quot;],&quot;valueId&quot;:[&quot;TestPREprod&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Прозвоны_v5.1.xlsx&quot;,&quot;id&quot;:&quot;88-24970&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24970?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ5NzB8YW1iTnZXRHRFYmFsVFFKZE9zUHNEZm9NMDIySUU2dUhXOFJObk1Odm91ND0=&amp;updated=1579856470457&quot;},{&quot;value&quot;:&quot;image1580216420611.png&quot;,&quot;id&quot;:&quot;88-25090&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25090?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUwOTB8UVBzY3RPK0NVbkVRbGJjWlJDOVI2T0ljUjN6RktINkVueWNLR2xvemdxRT0=&amp;updated=1580216421084&quot;},{&quot;value&quot;:&quot;image1580217216684.png&quot;,&quot;id&quot;:&quot;88-25096&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25096?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjUwOTZ8SFBZU0dQUDBKazJmK0hiTFVzWmdORmJLWWhzUm9TRWtSYVppSk9IL1krZz0=&amp;updated=1580217217182&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48794&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;ждем ответ от банка&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1578574128423,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49139&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;новые требования &lt;br/&gt;Можно добавить еще два  правила&lt;br/&gt;«length(paymtpat)&amp;gt; 8 » (Длина платежного паттерна более 8 знаков)&lt;br/&gt;Trunc(close_dt) &amp;lt; trunc(sysdate) (дата закрытия кредита моложе текущей даты)&lt;br/&gt;Переделать  условие «С момента заливки кредитной истории прошло менее 100 дней» на  «С момента заливки кредитной истории прошло менее 30 дней»&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579003164532,&quot;updated&quot;:1579003176332,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50092&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sf-&amp;gt;features-&amp;gt;1-&amp;gt;bank_rgsb-&amp;gt;bki-&amp;gt;sign_of_cheater&lt;/code&gt; - путь до фичи (из задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/SCOR-1702\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-74499\&quot; title=\&quot;РГСБ фича мошенники\&quot;&gt;SCOR-1702&lt;/a&gt;)&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580134566228,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50109&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Обновил фейкеры на всех средах&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580189499968,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50110&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1495&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;  - name: sm_rgsb&lt;br/&gt;    version_tag: feature/ARGS-1495&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580189552473,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50129&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Обязательно выкатывать после выкатки связанной задачи - &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/SCOR-1702\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-74499\&quot; title=\&quot;РГСБ фича мошенники\&quot;&gt;SCOR-1702&lt;/a&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580202871510,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50174&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12365/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12365/details/&lt;/a&gt;&lt;br/&gt;30016250&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;triggered_features&amp;quot;: [\n&amp;quot;38&amp;quot;\n],\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Андеррайтинг:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25090?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjUwOTB8VFhsemprU1F5T2dJaVpvQm5DWTNyNVJXZVNvTkpUWGpLdUJSQURBbGxjZz0=&amp;amp;updated=1580216421084\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580216459667,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50177&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12369/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/12369/details/&lt;/a&gt;&lt;br/&gt;30016254&lt;br/&gt;если работает не только фича 38&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;triggered_features&amp;quot;: [\n&amp;quot;1&amp;quot;,\n&amp;quot;38&amp;quot;,\n&amp;quot;31&amp;quot;\n],\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25096?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjUwOTZ8UXROdE1iYXRiUzVQZlFCZjZ4QXBGRHBCTGhCQlY0dmxXdE9kYThLNjQvOD0=&amp;amp;updated=1580217217182\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580217241280,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50179&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;причина блокировки - ждем задачу скоринга&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580218548832,&quot;updated&quot;:1580218558965,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50889&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1495&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестирование на препроде.&lt;br/&gt;Заявка 2903481.&lt;br/&gt;овый параметр &lt;code class=\&quot;inline-code\&quot;&gt;sign_of_cheater: false&lt;/code&gt;, был передан в scoring done&lt;br/&gt;Скоринг &amp;quot;id&amp;quot;: 4374000,&lt;br/&gt;a) - ни чего не сломалось.&lt;br/&gt;b) - новый параметр имеет место быть.&lt;br/&gt;c) -  стейджинг показал пример отказа при получении &lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580984400341,&quot;updated&quot;:1580984471226,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;},{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1498&quot;,&quot;entityId&quot;:&quot;86-72322&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;ФУТС&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577088829717&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1498&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;1145: Необходимо предоставить возможность в качестве информации о ТС прикладывать ФУТС, в котором отсутствует номер и дата выдачи.&lt;br/&gt;ФУТС - форма учета транспортного средства.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Задача&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;br/&gt;если в заявке отсутствуют госпрограммы: government_program = null&lt;br/&gt;Для типа подтверждения ТС &lt;strong&gt;Инфописьмо&lt;/strong&gt; ПТС/ЭПТС (vehicle_data_source:info_mail_pts и vehicle_data_source:info_mail_epts)&lt;br/&gt;Сделать проверку поля &amp;quot;Номер ПТС/ЭПТС&amp;quot; необязательной&lt;br/&gt;Добавить условие,что если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; не заполнено,то поле &amp;quot;Дата выдачи&amp;quot; также необязательно&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;Если в полях &lt;code class=\&quot;inline-code\&quot;&gt;number,series&lt;/code&gt; &lt;strong&gt;для ПТС&lt;/strong&gt; и  &lt;code class=\&quot;inline-code\&quot;&gt;epts_number&lt;/code&gt;  &lt;strong&gt;для ЭПТС&lt;/strong&gt; пришли пустые значения, то отправить блокировку полей(параметр disabled) на верификацию &amp;quot;Номер ПТС/ЭПТС&amp;quot; и &amp;quot;Дата выдачи&amp;quot;(issued_at)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверить корректность работы задачи ТОЛЬКО для Инфописьма. Подтверждение через ПТС/ЭПТС изменения затрагивать не должны&lt;/li&gt;\n&lt;li&gt;Проверить,что в случаях,когда номер и дата выдачи присутствуют - в верификации поля не блокируются и проверка данных происходит корректно&lt;/li&gt;\n&lt;li&gt;Проверить,что&lt;br/&gt;-если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; заполнено, а &amp;quot;Дата выдачи&amp;quot; не заполнено- выдается ошибка&lt;br/&gt;-если наоборот - не выдается (при этом на верификации поле &amp;quot;Дата выдачи&amp;quot; заблокировано для ввода данных вместе с полем &amp;quot;Номер ПТС/ЭПТС&amp;quot; )&lt;/li&gt;\n&lt;li&gt;Проверить, что данное условие работает ТОЛЬКО в случае отсутствия в заявке гос программы. Если гос программа в заявке присутствует- все поля валидируются. Связано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1566\&quot; title=\&quot;Проверка даты выдачи ПТС\\ЭПТС\\инф письма для госпрограммы\&quot; data-issue-id=\&quot;86-73546\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1566&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1581000923896&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Blocked&quot;],&quot;valueId&quot;:[&quot;Blocked&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1579852994899.png&quot;,&quot;id&quot;:&quot;88-24965&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ5NjV8YWZ3cjN6cTM5MGhBZ0NIVzlxdmdMdGhaSHkwbytwM0JZVHRKUlV2MVNFbz0=&amp;updated=1579852995583&quot;},{&quot;value&quot;:&quot;image1579853145593.png&quot;,&quot;id&quot;:&quot;88-24966&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8ZjJoL2M2Sk1saFg5NTNTdUNkVnhiVjA4Z08yVVNVNjByZ3NZdnJndnRLOD0=&amp;updated=1579853146182&quot;},{&quot;value&quot;:&quot;image1579862047901.png&quot;,&quot;id&quot;:&quot;88-24982&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8b2pialhpcDFVQ0xJdkk0K1FrTTM5Ykl4MWFjK3JxVUIrcDNUQW9LUGV1az0=&amp;updated=1579862048632&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48264&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Какой формат документа?&lt;br/&gt;Сколько страниц, какие поля?&lt;br/&gt;Что нужно проверять по данному документу?&lt;br/&gt;К какому продукту относится? То же самое, как и информационные письма?&lt;/p&gt;\n&lt;p&gt;Доработки следующие:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;6-й шаг добавить новую кнопку&lt;/li&gt;\n&lt;li&gt;Выводить список полей для ФУТС&lt;/li&gt;\n&lt;li&gt;Отправлять с бэка на bpm&lt;/li&gt;\n&lt;li&gt;Отправлять на верификацию и принимать результат проверки&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577097266464,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48710&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;При выборе закладки «Информационное письмо ПТС» или «Информационное письмо ЭПТС» сделать необязательными поля «Номер ЭПТС/ ПТС» и дата выдачи в случае отсутствия в скане/ фото данной информации.&lt;br/&gt;Если в приложенном документе заполнены поля Номер и дата выдачи ЭПТС/ ПТС, то в заявке они также должны быть заполнены.&lt;br/&gt;Обязательными для ввода и верификации оставить следующие поля:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; VIN\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Год изготовления ТС\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Модель, № двигателя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Номер шасси\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Цвет \n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Наличие подписи и печати дилера/ производителя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577780207854,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49338&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветка бэк &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579180707008,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49424&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;BPM&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sm, composite: feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579263091695,&quot;updated&quot;:1579263098436,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49933&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Поля заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/&lt;/a&gt;&lt;br/&gt;1. Даты выдачи и номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjQ5NjV8L2J5bmIvZXdOdXpRdTNoZmhyUWxLZ0RCQWE0OUZta292WXBRV3FGd08vTT0=&amp;updated=1579852995583\&quot;/&gt;&lt;/div&gt;&lt;br/&gt;2. Дата выдачи есть, номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8SERSOEsrQVlnd2FsUVZ0UkI0RHFBMWRwVzNzZEp6QUQyQjRSUlVyWGVBYz0=&amp;updated=1579853146182\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579854186741,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49963&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Инфо письмо ЭПТС - при заполненных полях серия и номер и Дата выдачи поля не заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;entity=Document&amp;amp;id=75317\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;entity=Document&amp;id=75317&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8MERiTE5KYVNMQjc1NlVUYVB6eWc0NFJPQlpPWjc2NFNnN0xpR1hYUlRhYz0=&amp;updated=1579862048632\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579862057441,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1381&quot;,&quot;entityId&quot;:&quot;86-70980&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Рефакторинг проверок подписей в БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1575634061948&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1381&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;em&gt;Проблема&lt;/em&gt;&lt;br/&gt;В рамках задач &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1353\&quot; title=\&quot;ресо проверка подписей\&quot; data-issue-id=\&quot;86-70479\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1353&lt;/a&gt; и &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1359\&quot; title=\&quot;Корректировка проверки подписей СЖ,ВК,ДК\&quot; data-issue-id=\&quot;86-70600\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1359&lt;/a&gt; (фасттреки) в код была внесена логика, не вписывающаяся в текущую структуру кода без ее изменения (т.е. костыли).&lt;br/&gt;Т.к. времени на нормальное решение выделено не было, нужно сделать структуру, более приспособленную к изменениям.&lt;br/&gt;&lt;em&gt;Анализ&lt;/em&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если полис (insurances_type_id in (1,2,3,4), ниже последняя версия изменений&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24769?sign=MTU4MzEwNzIwMDAwMHwyNC0xODF8ODgtMjQ3Njl8dDQ2R2FEREIyMi9ISzJrUTAzcUQvSWVVcGpUbWpGTjB6Um1qTWQ0anh3cz0=&amp;amp;updated=1579599694787\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Если полис (insurances_company_id in (4)&lt;br/&gt;убран свитч signatureMatch&lt;br/&gt;добавлен&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;thereInsSignature&amp;quot;: \n{\n&amp;quot;caption&amp;quot;: &amp;quot;Везде присутствует подпись Страхователя и совпадает с эталоном&amp;quot;,\n&amp;quot;error_message&amp;quot;: &amp;quot;Не везде присутствует подпись Страхователя или не совпадает с эталоном&amp;quot;,\n&amp;quot;type&amp;quot;: &amp;quot;reject&amp;quot;,\n&amp;quot;scope&amp;quot;: &amp;quot;document&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;как работает сейчас&lt;/em&gt;&lt;br/&gt;сейчас каждая проверка инициализирует себя по ID документа, то есть для Вкаско, Каско, СЖ, Гэп проверки отсылаются разные , но состав свичей у них одинаковый&lt;br/&gt;захардкожено 1 условие для компании РЕСО, которое меняет любую из этих проверок (как именно в связной задаче)&lt;br/&gt;скриншоты выше единственные которые используются для проверки подписей в полисах&lt;br/&gt;&lt;em&gt;итог&lt;/em&gt;&lt;br/&gt;на данный момент логика проверки подписей простая&lt;br/&gt;усложняться и модифицироваться могут только логика проверки полисов от определенных компаний(insurances_company_id, но это прогноз, пока доп требований не было)&lt;br/&gt;&lt;strong&gt;что нужно БПМ&lt;/strong&gt;&lt;br/&gt;прорефакторить код условия с ресо, продумать лучшее решение, если условия с компаниями будут еще добавляться&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Каратеев&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.karateev&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1580993559556&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1353&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1359&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;Med&quot;],&quot;valueId&quot;:[&quot;Med&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#fed74a&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Tech&quot;],&quot;valueId&quot;:[&quot;Tech&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#8d5100&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.karateev&quot;,&quot;fullName&quot;:&quot;Александр Каратеев&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-24768&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24768?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ3Njh8Y05TTFZHYWt6RGxMOEtRWk5xdlVkRnQyRTNRR0NuY2M5anFVclBxSGFGWT0=&amp;updated=1579599466366&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-24769&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24769?sign=MTU4MjE1NjgwMDAwMHwyNC0xODF8ODgtMjQ3Njl8dG9FQktKY043ZVVueWMyczV5OWloRjFDNjdwR1ByazkxNTRNWDZYc1JkYz0=&amp;updated=1579599694787&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1528&quot;,&quot;entityId&quot;:&quot;86-72772&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Переделать доход по БКИ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577461684275&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1528&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;принимать от scoring параметр &lt;code class=\&quot;inline-code\&quot;&gt;total_overall_tep&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;передавать абакусу &lt;code class=\&quot;inline-code\&quot;&gt;total_overall_tep&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Абакус&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать от bpm total_overall_tep&lt;/li&gt;\n&lt;li&gt;Исправить алгоритм расчета дохода по БКИ:&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;BKI_income = total_overall_tep&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;8&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1580981095711&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;SCOR-1649&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;,&quot;Abacus&quot;],&quot;valueId&quot;:[&quot;BPM&quot;,&quot;Abacus&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;Med&quot;],&quot;valueId&quot;:[&quot;Med&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#fed74a&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;New&quot;],&quot;valueId&quot;:[&quot;Feature&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#409600&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Blocked&quot;],&quot;valueId&quot;:[&quot;Blocked&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48605&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt;&lt;br/&gt;Из какого именно скоринга брать параметр &lt;code class=\&quot;inline-code\&quot;&gt;total_overall_tep&lt;/code&gt;?&lt;br/&gt;Есть &lt;code class=\&quot;inline-code\&quot;&gt;sf:features:1:bank_rgsb:bki&lt;/code&gt;, а есть &lt;code class=\&quot;inline-code\&quot;&gt;sf:features:1:bki&lt;/code&gt;.&lt;br/&gt;Первый БКИ от РГСБ, насколько понятно по названию, а второй - общий БКИ, наверное... Из общего берутся 2 параметра для госпрограммы.&lt;/p&gt;\n&lt;p&gt;А так же есть &lt;code class=\&quot;inline-code\&quot;&gt;pre_scoring&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;scoring_1&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;reverify_scoring&lt;/code&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;scoring_update_pd&lt;/code&gt; подписки. Во всех должен быть параметр?&lt;/p&gt;\n&lt;p&gt;И что означает этот параметр?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577602974909,&quot;updated&quot;:1577603092226,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48613&quot;,&quot;author&quot;:&quot;Ruslan_Yarullin&quot;,&quot;authorFullName&quot;:&quot;Руслан Яруллин&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Я так понимаю что это нужно брать по всем БКИ. Видимо теперь доходы клиента приравниваются к его расходам на обслуживание кредитов. Раньше они умножались на 2, а теперь просто по всем.&lt;/p&gt;\n&lt;p&gt;Абакус будет ждать этот параметр в запросе &lt;code class=\&quot;inline-code\&quot;&gt;calc_pdn_rgsb&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577607577563,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48614&quot;,&quot;author&quot;:&quot;Ruslan_Yarullin&quot;,&quot;authorFullName&quot;:&quot;Руслан Яруллин&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1528&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577607794562,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48629&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;sm_rgsb: feature/ARGS-1528\nbpm_composite: feature/ARGS-1528\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577690249013,&quot;updated&quot;:1579515229297,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48984&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;blockquote&gt;\n&lt;p&gt;Брать параметр из того БКИ, откуда берется параметр &lt;code class=\&quot;inline-code\&quot;&gt;tep&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;Анастасия Кряжова&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;полный путь такой:&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;&amp;quot;features&amp;quot;-&amp;gt;&amp;quot;1&amp;quot;-&amp;gt;&amp;quot;bank_rgsb&amp;quot;-&amp;gt;&amp;quot;bki&amp;quot;-&amp;gt;&amp;quot;total_overall_tep&amp;quot;&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;Антон Лапшин&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1578905431313,&quot;updated&quot;:1578905735967,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49518&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11762/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11762/details/&lt;/a&gt;&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&amp;quot;action&amp;quot;: &amp;quot;calculate&amp;quot;,&lt;br/&gt;&amp;quot;params&amp;quot;: {&lt;br/&gt;    &amp;quot;id&amp;quot;: 1025438,&lt;br/&gt;    &amp;quot;pdn&amp;quot;: [ ],&lt;br/&gt;    &amp;quot;query&amp;quot;: &amp;quot;calc_pdn_rgsb&amp;quot;,&lt;br/&gt;    &amp;quot;action&amp;quot;: &amp;quot;calculate&amp;quot;,&lt;br/&gt;    ....&lt;br/&gt;    &amp;quot;total_overall_tep&amp;quot;: 1020,&lt;br/&gt;    ...&lt;br/&gt;}&lt;/pre&gt;&lt;br/&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&amp;quot;action&amp;quot;: &amp;quot;calculation_done&amp;quot;,&lt;br/&gt;&amp;quot;params&amp;quot;: {&lt;br/&gt;    &amp;quot;id&amp;quot;: 1025438,&lt;br/&gt;    &amp;quot;pdn&amp;quot;: 0.21423593333333302,&lt;br/&gt;    &amp;quot;action&amp;quot;: &amp;quot;calculation_done&amp;quot;,&lt;br/&gt;    &amp;quot;resource&amp;quot;: &amp;quot;abacus&amp;quot;,&lt;br/&gt;    &amp;quot;bki_income&amp;quot;: 1020,&lt;br/&gt;    ...&lt;br/&gt;}&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579519770765,&quot;updated&quot;:1579519780498,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50836&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;необходимо вернуть функционал после выкатки релиза&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580918921418,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50876&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1528&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Заблокировала А. Дик&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580981095714,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;},{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;},{&quot;value&quot;:&quot;препрод&quot;,&quot;cssClass&quot;:&quot;c4&quot;}]}, {&quot;id&quot;:&quot;ARGS-1512&quot;,&quot;entityId&quot;:&quot;86-72548&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Перенос репозиториев BPM в gitlab&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577347827100&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1512&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;План действий:&lt;/h1&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Экспорт репозиториев в гитлаб&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; Настройка pipeline'ов под гитлаб&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot;&gt; Тестирование деплоя&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot;&gt; Поиграться с докером и пушем в нексус&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Каратеев&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.karateev&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1580812022983&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;New&quot;],&quot;valueId&quot;:[&quot;Feature&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#409600&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;m.nuzhnyj&quot;,&quot;fullName&quot;:&quot;Максим Нужный&quot;},{&quot;value&quot;:&quot;alexander.karateev&quot;,&quot;fullName&quot;:&quot;Александр Каратеев&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48492&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Гитлаб репо:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_engine\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_engine&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_transport\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_transport&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_composite\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_composite&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/sm_rgsb\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/sm_rgsb&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577355744240,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48493&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Настроена протекция ветки &lt;code class=\&quot;inline-code\&quot;&gt;master&lt;/code&gt; - пушить в ветку никому нельзя, можно только мержить.&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577355814366,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48604&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Нужен ssh-ключ, чтобы гитлабовский раннер мог клонировать все 4 БМП репозитория&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/m.nuzhnyj\&quot; title=\&quot;Максим Нужный\&quot; data-user-id=\&quot;24-254\&quot;&gt;@Максим Нужный&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577602057538,&quot;updated&quot;:1577602073679,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50658&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В процессе настройки.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580812022984,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1042&quot;,&quot;entityId&quot;:&quot;86-64914&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Подготовка DRS к масштабированию&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1570692388773&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1042&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Проблема&lt;/h1&gt;\n&lt;p&gt;При выполнении одновременно нескольких задач по распознаванию процессы DRS убиваются OOM киллером. Со временем это приводит к тому, что DRS не работает в принципе.&lt;br/&gt;При получении задачи на распознавание сообщение из Rabbit сразу акается. Из-за этого новые сообщение берутся сразу этой же машиной и выполняются одновременно в большом количестве.&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо переделать структуру проекта таким образом, чтобы сообщение акалось только после обработки, либо при возникновении ошибки.&lt;/li&gt;\n&lt;li&gt;Уменьшить количество процессов и установить prefetch_count равным количеству процессов.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Доработать&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;airbrake - не подключать если нет ключей&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1580716525385&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1523&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;Med&quot;],&quot;valueId&quot;:[&quot;Med&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#fed74a&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;d.podshchekoldin&quot;,&quot;fullName&quot;:&quot;Дмитрий Подщеколдин&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1531&quot;,&quot;entityId&quot;:&quot;86-72778&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Документация&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577474762271&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1531&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Необходима документация&lt;/h1&gt;\n&lt;p&gt;Важно описать что для чего есть, как оно работает, какие сообщения БПМ куда передает с какими параметрами и что оно ожидает в ответе.&lt;/p&gt;\n&lt;h2&gt;Roadmap &lt;em&gt;предварительный&lt;/em&gt;:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создать скелет документации (.rst):&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Composite&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; SM&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Composite:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot;&gt; Расписать все сообщения: что отправляется, какие типы данных, что значат параметры и что принимаем, какие типы данных, обязательные параметры.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h3&gt;SM:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot;&gt; Расписать все стейты: для чего, почему, что происходит, какой в этом смысл &lt;/label&gt;&lt;del&gt;жизни&lt;/del&gt;, какие возможные дальнейшие &lt;del&gt;пути&lt;/del&gt; стейты могут быть для заявки, исходя из того или иного ответа.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1580106077934&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48594&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1531&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Документирование&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577474777067,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1554&quot;,&quot;entityId&quot;:&quot;86-73311&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Проработать устаревание заявки КК&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1578911470641&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1554&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Требуется додумать реализацию устаревания заявки на КК в ПП.&lt;br/&gt;На текущий момент получается так :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Была попытка создания заявки в КК на оформление.&lt;/li&gt;\n&lt;li&gt;Заявка сменила стейт&lt;/li&gt;\n&lt;li&gt;Заявка устарела в КК (её например бросили заводить)&lt;/li&gt;\n&lt;li&gt;На ПП мы видим ссылку на КК и один из стейтов (последний пришедший по шине)&lt;/li&gt;\n&lt;li&gt;Мы не можем узнать, что заявка устарела в КК&lt;br/&gt;Что предлагаю (Дима) :&lt;br/&gt;Фронт должен смотреть на поле &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Обработка в КН. Относится к заявкам, по которым доступна выдача КК и агент начал оформление КК.&lt;br/&gt;&lt;strong&gt;КН&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;получать от нас  &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt; .&lt;/li&gt;\n&lt;li&gt;Сделать устаревание заявок Авто. Если  &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt; наступило, а карту не выдали, то присылать нам стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;, что заявка по карте устарела. (СВЯЗАННАЯ ЗАДАЧА)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt;&lt;br/&gt;Передавать на бэк дату и время первого одобрения &lt;code class=\&quot;inline-code\&quot;&gt;first_approve_time&lt;/code&gt;:&lt;br/&gt;брать из &lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;flags_rgsb-&amp;gt;first_approve&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; принимать от bpm дату первого одобрения &lt;code class=\&quot;inline-code\&quot;&gt;first_approve_time&lt;/code&gt; (нужно будет для будущей доработки)&lt;/li&gt;\n&lt;li&gt;Отправлять в КН &amp;#39;cc_available_until`, когда начали оформлять КК.&lt;/li&gt;\n&lt;li&gt;Принимать от КН новый стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;, что заявка КК устарела. В нашей стет-машине это будет один из терминальных стейтов.&lt;/li&gt;\n&lt;li&gt;Передавать стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt; фронту.&lt;/li&gt;\n&lt;li&gt;При подсчете количества заявок в cc_available_state не учитывать заявки в стейте &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;. И при формировании заявок для этого фильтра фронту.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;Если пришел стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;,  не давать возможность оформить такую карту - то есть убрать с 10-го шага плашку &amp;quot;кредитная карта&amp;quot; слева в меню и под надписью &amp;quot;кредит выдан&amp;quot;.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Не показываются в списке кк заявки в стейте &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Обработка в АВТО. Относится к заявкам, по которым доступна выдача КК, но агент так и не начал оформлять КК.&lt;br/&gt;БЭК Отправляет на фронт значение поля &amp;#39;cc_available_until&lt;code class=\&quot;inline-code\&quot;&gt;. Предложение действует до окончания следующего дня после выдачи Автокредита. Если 'cc_available_until&lt;/code&gt; наступил и заявка так и не ушла с первоначального стейта, то  карта больше не доступна.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анастасия Кряжова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kryazhova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1579856661145&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Tech&quot;],&quot;valueId&quot;:[&quot;Tech&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#8d5100&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1608&quot;,&quot;entityId&quot;:&quot;86-74461&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Разрешить заемщику отказаться от кредита на сделке&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1579854090808&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1608&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1579854090808&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Бизнес Ценность&quot;,&quot;value&quot;:[&quot;Med&quot;],&quot;valueId&quot;:[&quot;Med&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#fed74a&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Queue&quot;],&quot;valueId&quot;:[&quot;Queue&quot;],&quot;color&quot;:null}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1603&quot;,&quot;entityId&quot;:&quot;86-74386&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Проблема неоднозначности названия методов&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Каратеев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1579779545498&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1603&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В базовом классе (например &lt;code class=\&quot;inline-code\&quot;&gt;PartnerkaBase&lt;/code&gt;) есть вспомогательные методы &lt;code class=\&quot;inline-code\&quot;&gt;parse_*&lt;/code&gt; (&lt;code class=\&quot;inline-code\&quot;&gt;parse_conditions&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;parse_car&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;parse_attachments&lt;/code&gt; и т.д.), названия которых подразумеют парсинг входных данных. Но по факту эти методы парсят эти данные и сохраняют их в &lt;code class=\&quot;inline-code\&quot;&gt;memory&lt;/code&gt;. Это не есть хорошо, поскольку названия методов не отображают их сути полностью.&lt;/p&gt;\n&lt;p&gt;Хороший вариант — оставить методы как есть, но убрать функционал сохранения в &lt;code class=\&quot;inline-code\&quot;&gt;memory&lt;/code&gt;, чтобы они возвращали результат парсинга. Опционально можно написать к каждому такому методу еще один вспомогательный метод &lt;code class=\&quot;inline-code\&quot;&gt;parse_*_with_save&lt;/code&gt; (&lt;code class=\&quot;inline-code\&quot;&gt;parse_conditions_with_save&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;parse_car_with_save&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;parse_attachments_with_save&lt;/code&gt; и т.д.). Исходя из названий понятно, что данные парсятся и сохраняются.&lt;/p&gt;\n&lt;p&gt;Первый метод без сохранения необходим для того, чтобы можно было распарсить данные и без их сохранения работать с этими данными для написания дальнейшей логики и/или последующего сохранения (в том числе будет использоваться и во втором вспомогательном методе).&lt;/p&gt;\n&lt;p&gt;Второй метод будет востребован в тех местах, где нет необходимости в написании логики, связанной с этими методами.&lt;/p&gt;\n&lt;p&gt;Два метода позволяют создать модульную структуру, где метод делает ровно одно действие/задачу. В данном случае парсинг данных -- первый, а сохранение распаршенных данных -- второй.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Каратеев&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.karateev&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.karateev&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1579780203487&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Norm&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e6f6cf&quot;,&quot;fg&quot;:&quot;#4da400&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Backlog&quot;],&quot;valueId&quot;:[&quot;Backlog&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Исполнители&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;},{&quot;value&quot;:&quot;p.nikulshin&quot;,&quot;fullName&quot;:&quot;Павел Никульшин&quot;},{&quot;value&quot;:&quot;alexander.karateev&quot;,&quot;fullName&quot;:&quot;Александр Каратеев&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}]" />
      </map>
    </option>
  </component>
</application>