<application>
  <component name="YouTrack Issues">
    <option name="persistentIssues">
      <map>
        <entry key="bpm_engine p.nikulshin@https://balance.myjetbrains.com/youtrack" value="[{&quot;id&quot;:&quot;ARGS-1945&quot;,&quot;entityId&quot;:&quot;86-80601&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Не проверять согласие на ОПД&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585899076457&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1945&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;В связи с карантином всё заполнение web- анкеты вплоть до сделки будет происходить с клиентом удалённо. Чтобы не перегружать клиента задачами, Согласие на ОПД (обработку перс данных) больше не должно запрашиваться на 2 шаге.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;выкатывать связные задачи вместе&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;тест&lt;/strong&gt;&lt;br/&gt;На 2 шаге можно не загружать согласие на ОПД(по подгрузить его и распечатать ест возможнось)-но оно не обязательно&lt;br/&gt;если не приложить, то при попытке пройти на 3 шаг ни БЭК ни ФРОНТ не присылают ошибки и заявка  посылается на проверку БПМ&lt;br/&gt;после проверки паспорт на верификацию , проверка на согласие не осуществляется , заявка переходит в get_user_state&lt;br/&gt;далее заявка доходит успешно до одобрения и выдачи.&lt;br/&gt;проверить кейс, где приходит доработка по паспорту , и при исправлении и попытке пройти дальше, согласие так же не будет запрашиваться&lt;br/&gt;так же проверить кейс, что согласие было приложено, по нему пришла ошибка с верификации, после доработки клиент удаляет документ, больше н ехочет его прикладывать, система пропускает его дальше и согласие не влияет за заявку&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585914511235&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1946&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;},{&quot;value&quot;:&quot;ARGS-1947&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;},{&quot;value&quot;:&quot;ARGS-1948&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.kriventsova&quot;,&quot;fullName&quot;:&quot;Кривенцова Александра&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1948&quot;,&quot;entityId&quot;:&quot;86-80616&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Не проверять согласие на ОПД БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585903024145&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1948&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Требования и описание см. в связанной задаче&lt;br/&gt;&lt;strong&gt;что нужно&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Документ от партнерки в attachments &amp;quot;group_cid&amp;quot;: 12 (Согласие на ОПД)- становится не обязательным&lt;/li&gt;\n&lt;li&gt;Если он не пришел в extend, то не посылать в &lt;code class=\&quot;inline-code\&quot;&gt;consent_verification_state&lt;/code&gt; проверку  document_constructor.verify - Согласие Партнер (consent_partner) и не ждать ответ&lt;br/&gt;Т. е фактически пройти мимо этого стейта (из конца &lt;code class=\&quot;inline-code\&quot;&gt;passport_verification_state&lt;/code&gt; попадаем сразу в начало &lt;code class=\&quot;inline-code\&quot;&gt;get_user_state&lt;/code&gt;)&lt;br/&gt;Так же из &lt;code class=\&quot;inline-code\&quot;&gt;consent_verification_state&lt;/code&gt; нельзя попасть в &lt;code class=\&quot;inline-code\&quot;&gt;passport_revision_state&lt;/code&gt;.&lt;br/&gt;&lt;em&gt;логично что qr_code_state не должен использоваться, т. к не с чего смотреть QR&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;Если он пришел, то должна сработать текущая логика, послать на верификацию, ждать ответ, если пришла ошибка, то идти в revision  и посылать ошибку на БЭК (но есть кейс, что после такой ошибки, клиент решит больше не прикладывать согласие и БЭК его не пришлет , должна сработать опять старая логика)&lt;br/&gt;реализовать как временную меру&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585914383662&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1945&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;подзадача&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1926&quot;,&quot;entityId&quot;:&quot;86-80323&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Четкое объяснение доработок&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585664736749&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1926&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;От банка:&lt;br/&gt;Есть ли возможность при ошибках верификации более корректно указывать причину доработки в следующем случае:&lt;br/&gt;например, при отсутствии подписи в документах, БП выдает ошибку, что подписи не совпадают. Сотрудник печатает документы, прикладывает снова, и опять выдает ошибку.&lt;br/&gt;А реальная причина была в том, что не хватало 1 подписи на странице.&lt;br/&gt;Замечание не критичное, но было бы здорово, если бы смогли скорректировать.&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Дополнить (конкретизировать) отображение доработок в ПП&lt;/p&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;p&gt;Доработать задания, посылаемые на верификацию:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_signature&lt;/code&gt; (Анкета-заявление) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfTheClient&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27711?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc3MTF8ZEc4XzBFcU81czhlb3dTX1ZlVWRxb1FUVzc0%0D%0AamM2dV9MdkIyckhYSkVRRQ0K%0D%0A&amp;amp;updated=1585843347754\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если для скана сработал свитч thereIsASignatureOfTheClient, то необходимо посылать в deal_revision_state в сообщении deal_revision доработку на BACK по скану (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_signature&lt;/code&gt; (Договор-залога) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfThePledger&lt;/code&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfThePledgeHolder&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27712?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc3MTJ8ZVpOOE5EcndKT0ZPZEZtUFZFTzhJcU9GVlJH%0D%0AeGFuLW1YXzVhRlVFeUhJdw0K%0D%0A&amp;amp;updated=1585846734855\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если для скана сработал свитч thereIsASignatureOfThePledger, то необходимо посылать в deal_revision_state в сообщении deal_revision доработку на BACK по скану (текст ошибки из свитча), иначе как сейчас\n___\nЕсли сработал свитч thereIsASignatureOfThePledgeHolder, то необходимо посылать в deal_revision_state в сообщении deal_revision доработку на BACK по договору залогу (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_constructor&lt;/code&gt; (Соглашение о взаимодействии) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfTheClient&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27734?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc3MzR8bGFSQ2tJZG80UXNBeGhfXzdWLWJtcTNfRmtQ%0D%0AaHRxdk9XRWtON3lYRUJxMA0K%0D%0A&amp;amp;updated=1585895411403\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если сработал свитч thereIsASignatureOfTheClient, то необходимо посылать в deal_revision_state в сообщении deal_revision на BACK доработку (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_signature&lt;/code&gt; (Индивидуальные условия) добавить свитч: &lt;code class=\&quot;inline-code\&quot;&gt;thereIsASignatureOfTheClient&lt;/code&gt; (пример конструктора &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27737?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc3Mzd8akFyRWo0S2Y3QWhlTzZlRENuM2VKVnJBV2p4%0D%0Aa3pwTWgwS0RUZ3FRNjlfZw0K%0D%0A&amp;amp;updated=1585895711871\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если для скана сработал свитч thereIsASignatureOfTheClient, то необходимо посылать в deal_revision_state в сообщении deal_revision на BACK доработку по скану (текст ошибки из свитча), иначе как сейчас\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Тест-кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;После прохождения 9 шага ПП должны создаваться по приложенным документам проверки на верификацию. Если в заданиях &amp;quot;Проверка подписей Анкета-заявление&amp;quot;, &amp;quot;Проверка подписей Индивидуальные условия&amp;quot; сработал свитч thereIsASignatureOfTheClient, то должна приходить доработка для скана&lt;/li&gt;\n&lt;li&gt;После прохождения 9 шага ПП должны создаваться по приложенным документам проверки на верификацию.  Если в задании &amp;quot;Проверка договор-залога&amp;quot; сработал свитч thereIsASignatureOfThePledger, то должна приходить доработка по скану&lt;/li&gt;\n&lt;li&gt;После прохождения 9 шага ПП должны создаваться по приложенным документам проверки на верификацию. Если в задании &amp;quot;Проверка договор-залог&amp;quot; сработал свитч thereIsASignatureOfThePledgeHolder,  то должна приходить доработка по договор залогу&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585911125533&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;анкета-заявление отрицательный ответ по скану.txt&quot;,&quot;id&quot;:&quot;88-27710&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27710?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MTB8bUVKTXZDV2RQT3UwVlBVZklXYnZqRTBqRzVM%0D%0ARk03ZDJObjBlWnViV0VIZw0K%0D%0A&amp;updated=1585843347754&quot;},{&quot;value&quot;:&quot;конструктор анкета-заявление.txt&quot;,&quot;id&quot;:&quot;88-27711&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27711?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MTF8MEhBNmJCMGt3RWdKczNUUEY2aDNORUdsUWk0%0D%0AWTN6QVM5VkZhdWU0T3hCRQ0K%0D%0A&amp;updated=1585843347754&quot;},{&quot;value&quot;:&quot;конструктор договор залога.txt&quot;,&quot;id&quot;:&quot;88-27712&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27712?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MTJ8VnhlSGg5UUpLQXlJZHp2Z0tSUFNXZXVhWFlN%0D%0AejhhY0k4V1JmaTlNcGtEQQ0K%0D%0A&amp;updated=1585846734855&quot;},{&quot;value&quot;:&quot;договр залога отрицательный ответ.txt&quot;,&quot;id&quot;:&quot;88-27713&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27713?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MTN8NHg5RE5yS0VyeXFRMFRXUndEU2hobVNBZkRw%0D%0ANHhtX0s4NzRIcGNCcFBxSQ0K%0D%0A&amp;updated=1585846734855&quot;},{&quot;value&quot;:&quot;конструктор свидетельство о взаимодействии.txt&quot;,&quot;id&quot;:&quot;88-27734&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27734?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MzR8UE5ERmdKdE8zWDByWWsxeEdjZmswQ04zU29K%0D%0AaDNCVGJlZ1FHeUV3ZF9wNA0K%0D%0A&amp;updated=1585895411403&quot;},{&quot;value&quot;:&quot;свидетельство о взаимодействии отриательный ответ.txt&quot;,&quot;id&quot;:&quot;88-27735&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27735?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MzV8UEs2RGN4MGxDLUpZSWhFMndYYVFuNVpsZjNj%0D%0AenpfeFFzYTF0QjAtNXg3SQ0K%0D%0A&amp;updated=1585895411403&quot;},{&quot;value&quot;:&quot;индивидуальные условия отрицательный ответ.txt&quot;,&quot;id&quot;:&quot;88-27736&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27736?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MzZ8d2FoTDMwN25Gd0pqVGNIandYVHVkZEJYMERt%0D%0AdGJMNkdqMWVEa0o3ZGx2NA0K%0D%0A&amp;updated=1585895711872&quot;},{&quot;value&quot;:&quot;конструктор индивидуальные условия.txt&quot;,&quot;id&quot;:&quot;88-27737&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27737?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3Mzd8X0RLUF82by1HdE9VbWlCdktrTjV2YURUM1NP%0D%0ARDEtUWFmQ3FMWFFidHdMVQ0K%0D%0A&amp;updated=1585895711871&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1777&quot;,&quot;entityId&quot;:&quot;86-77729&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Stand-alone кредитная карта&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583158787055&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1777&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;em&gt;Описание требований от банка:&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;В рамках проработки бизнес требований по кредитным картам Stand Alone выявили необходимость дополнить функционал проверки в Userdata:&lt;br/&gt;2.2.      По сочетанию ФИО, серия и номер паспорта провести проверку на наличие отказов по Кредитной карте Компаньон в течение последних 30 дней до даты подачи заявки на Кредитную карту. При наличии отказа по Кредитной карте Компаньон по заявке на Кредитную карту формируется отказ с кодом M002.&lt;br/&gt;2.3.      При наличии у клиента в течение 30 дней одобренной заявки по продукту, отличному от Кредитной карты, с лимитом менее запрошенного по данному продукту формируется отказ с кодом M003.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Бизнес-цель&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;В РГС добавляется новый продукт - кредитная карта Stand Alone. Реализацию данного продукта на КН, но со стороны Авто необходимо предусмотреть возможность перейти на форму оформления КК, а так же предоставить данные (лимит, дата) по одобренным\\выданным заявкам Авто для КН, путем добавления необходимой информации в user data.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ФРОНТ&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить кнопку с ссылкой на StandAlone в меню: см. приложенный макет (кнопка называется &lt;code class=\&quot;inline-code\&quot;&gt;Кредитные карты&lt;/code&gt;).&lt;br/&gt;Переход должен осуществляться по ссылке: &lt;a href=\&quot;https://front-cc-internal-st1.cash.b-pl.pro/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://front-cc-internal-st1.cash.b-pl.pro/&lt;/a&gt;&lt;br/&gt;(пока что есть только стейдж - обращаться к Салавату.)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Userdata&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; Userdata&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;0\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Добавить в юзердату новый проект &lt;code class=\&quot;inline-code\&quot;&gt;credit&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;ввести у заявки атрибут &lt;code class=\&quot;inline-code\&quot;&gt;limit_approved&lt;/code&gt;-одобренный лимит :&lt;br/&gt;При создании заявки все параметры равны 0 &lt;em&gt;(что значит все параметры? почему 0 а не None?)&lt;/em&gt;.&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;ДАВАЙ none&lt;/code&gt;&lt;br/&gt;По ходу жизни заявки бпм авто и КН будут записывать в них значения ОДОБРЕННОГО лимита и читать их. &lt;em&gt;(Считывать сумму по user или только значение по конкретной заявке?)&lt;/em&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;по конкретной заявке&lt;/code&gt;&lt;br/&gt;В случае изменения одобренного лимита необходимо его перезаписывать.&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;limit_approved&lt;/code&gt; - int, значение в копейках, ожидаем в копейках&lt;br/&gt;&lt;em&gt;(Нужна ли инициализация для предыдущих заявок?)&lt;/em&gt; &lt;code class=\&quot;inline-code\&quot;&gt;если такое сделать можно, то да, давай для последних, заведенных в последние 3 месяца&lt;/code&gt;&lt;br/&gt;Текущее значение &lt;code class=\&quot;inline-code\&quot;&gt;limit_approved&lt;/code&gt; сохраняется в &lt;code class=\&quot;inline-code\&quot;&gt;flags:limit_approved_kopecks&lt;/code&gt; независимо от выбранной программы кредитования&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;добавить поле для заявки для отображение флага доступности КК-Компаньон.&lt;br/&gt;Например, &lt;code class=\&quot;inline-code\&quot;&gt;companion_is_available&lt;/code&gt;:&lt;br/&gt;Значения: true/false/null (Дополнительно согласовать с КН).&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;2.1 Заполнить данный признак для заявок последних трех месяцев и заполнять всегда для новых заявок, когда заявка дошла до decision_state.&lt;br/&gt;Для новых заявок заполнять значением флага  cc_is_available. Всегда перезаписывать при изменении.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;2.2 Для Кредитных карт: Если &lt;code class=\&quot;inline-code\&quot;&gt;companion_is_available&lt;/code&gt;:false, то срабатывает отказ по кредитной карте M002. К АВТО или Компаньону это не относится&lt;br/&gt;&lt;em&gt;Подумать&lt;/em&gt; - предусмотреть, что флаг доступности мы учитываем только на протяжении 30 дней (сделать протухание флага или добавить время изменения статуса флага)&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить поля для заявки: max_limit_real_small.&lt;br/&gt;Для Авто &lt;em&gt;(что это значит? для запроса из проекта авто?)&lt;/em&gt;: заполняем &lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt;, если хотя бы раз из абакуса к нам пришло значение abacus:max_limit_real_small:true. True не перезаписываем.&lt;br/&gt;Иначе &lt;code class=\&quot;inline-code\&quot;&gt;false&lt;/code&gt;&lt;br/&gt;Для Кредитных карт &lt;em&gt;(что это значит? для запроса из проекта кредитных карт?)&lt;/em&gt;: Если по заявке  max_limit_real_small:true, то срабатывает отказ по кредитной карте M003.К АВТО или Компаньону это не относится&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Инициализация:&lt;/h1&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;strong&gt;companion_is_available&lt;/strong&gt; заполнить данный признак для заявок последних трех месяцев и заполнять всегда для новых заявок, когда заявка дошла до decision_state. Мигрировать данные в userdata по заявкам 3-х месяцев (с какого момента? смысл устанавлить null для companion_is_available_auto отсутствует): Если по Авто заявке флаг &lt;code class=\&quot;inline-code\&quot;&gt;credit_card:is_available == True&lt;/code&gt; и не прошло 30 дней &lt;em&gt;(не прошло с какого момента?)&lt;/em&gt;&lt;code class=\&quot;inline-code\&quot;&gt;не прошло в момента обновления данного статуса&lt;/code&gt;, то пишем  companion_is_available: True. Если &lt;code class=\&quot;inline-code\&quot;&gt;credit_card:is_available == False&lt;/code&gt; и не прошло 30 дней, то False. Иначе null (&lt;em&gt;а смысл устанавливать null&lt;/em&gt;)&lt;/li&gt;\n&lt;li&gt;Добавить коды отказа по кредитным картам M002 и M003. Моратория по ним нет. Нужны для КН. Описание в приложенном файле эксель. &lt;em&gt;(где файл?)&lt;/em&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h1&gt;Как реализовано&lt;/h1&gt;\n&lt;h1&gt;Введены следующие поля в userdata&lt;/h1&gt;\n&lt;ol start=\&quot;0\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;добавлен через миграциию новый проект с project_id &amp;quot;credit&amp;quot;. В юзердату через миграцию добавлены коды отказа M002, M003&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;limit_approved&lt;/p&gt;\n&lt;p&gt;текущий одобренный лимит по заявке: int, в копейках&lt;/p&gt;\n&lt;p&gt;из bpm отправляется запрос в юзердату из стейта decision_state если:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; 1) изменилось значение abacus:max_limit\n 2) условия считаются одобренными  \n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;max_limit_real_small&lt;/p&gt;\n&lt;p&gt;значение флага max_limit_real_small: bool из абакуса&lt;/p&gt;\n&lt;p&gt;из bpm отправляется запрос в юзердату при каждом ответе от абакуса&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;cc_companion_is_available&lt;/p&gt;\n&lt;p&gt;значение флага доступности кредитной карты компаньон&lt;/p&gt;\n&lt;p&gt;из bpm отправляется запрос в юзердату если значение флага credit_card:is_available изменилось&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Для обновления полей limit_approved, max_limit_real_small, cc_companion_is_available используется запрос&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;method&amp;quot;: &amp;quot;log_field_update_or_create&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;internal_id&amp;quot;: 30021686,\n    &amp;quot;fields&amp;quot;: {\n      &amp;quot;limit_approved&amp;quot;: 20000,\n      &amp;quot;max_limit_real_small&amp;quot;: false,\n      &amp;quot;cc_companion_is_available&amp;quot;: true,\n    },\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;в параметре params:fields может быть передано как одно значении так и несколько&lt;/p&gt;\n&lt;h1&gt;Логика сохранения полей в Userdata&lt;/h1&gt;\n&lt;p&gt;Поля limit_approved, max_limit_real_small, cc_companion_is_available&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если небыло значений то они сохраняются&lt;/li&gt;\n&lt;li&gt;если значение было, то обновляется метка &lt;code class=\&quot;inline-code\&quot;&gt;updated&lt;/code&gt; у поля&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Новые &amp;quot;фичи&amp;quot; в Userdata&lt;/h1&gt;\n&lt;p&gt;Пример запроса&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 1221134,\n\n    &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n    &amp;quot;method&amp;quot;: &amp;quot;check_limit_in_other_projects&amp;quot;,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;checking_limit&amp;quot;: 15000\n\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;credit&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Параметр &lt;code class=\&quot;inline-code\&quot;&gt;checking_limit&lt;/code&gt; может отсутсвовать, тогда расчет по фиче limit_approved_smaller_exists_30_days произведен не будет&lt;/p&gt;\n&lt;p&gt;Расчет всех фич происходит за последние 30 дней, по заявкам которые в статусе активные/выданные.&lt;br/&gt;Расчет производится по каждому &lt;code class=\&quot;inline-code\&quot;&gt;другому&lt;/code&gt; проекту банка отличному от того из которого пришел запрос.&lt;br/&gt;В пределах проекта выбираются самые свежие данные по заявкам.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;limit_approved_smaller_exists_30_days - есть ли одобренный лимит который меньше запрашиваемого &lt;code class=\&quot;inline-code\&quot;&gt;checking_limit&lt;/code&gt; в других проектах&lt;/li&gt;\n&lt;li&gt;companion_credit_card_is_not_available_30_days - есть ли флаг доступности карты компаньон в других проектах&lt;/li&gt;\n&lt;li&gt;max_limit_real_small_30_days - был ли установлен флаг max_limit_real_small в других проектах&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Если расчет фичи невозможен (например отсутсвует параметр &lt;code class=\&quot;inline-code\&quot;&gt;checking_limit&lt;/code&gt; или нет заявок в которых задавались расчетные поля), то возвращаемые значения будут null&lt;/p&gt;\n&lt;p&gt;Пример ответа:&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;credit&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;limit_approved_smaller_exists_30_days&amp;quot;: false,\n    &amp;quot;companion_credit_card_is_not_available_30_days&amp;quot;: false,\n    &amp;quot;max_limit_real_small_30_days&amp;quot;: true,\n    &amp;quot;error&amp;quot;: {},\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1&gt;Примеры запросов&lt;/h1&gt;\n&lt;p&gt;Запрос на установку флагов&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;method&amp;quot;: &amp;quot;log_field_update_or_create&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;internal_id&amp;quot;: 300,\n    &amp;quot;fields&amp;quot;: {\n      &amp;quot;limit_approved&amp;quot;: 10000,\n      &amp;quot;max_limit_real_small&amp;quot;: false,\n      &amp;quot;cc_companion_is_available&amp;quot;: true,\n    },\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;cash&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;limit_approved: int - значение одобренного лимита в копейках&lt;br/&gt;max_limit_real_small: bool - флаг max_limit_real_small&lt;br/&gt;cc_companion_is_available: bool - флаг cc_companion_is_available&lt;/p&gt;\n&lt;p&gt;если значение устанавливать ненужно, то ненужно передавать&lt;/p&gt;\n&lt;p&gt;ответ&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;cash&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;updated&amp;quot;: true,\n    &amp;quot;error&amp;quot;: {},\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;в случае если что-то переданно некоректно ключ params:error будет содержать ошибку&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;project_id&amp;quot;: &amp;quot;cash&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;error&amp;quot;: {\n      &amp;quot;params&amp;quot;: {\n        &amp;quot;fields&amp;quot;: {\n          &amp;quot;cc_companion_is_available&amp;quot;: [\n            &amp;quot;Field may not be null.&amp;quot;\n          ]\n        }\n      }\n    },\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;запрос на получение фич&lt;/p&gt;\n&lt;p&gt;checking_limit: int - проверяемый лимит в копейках&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;bpm.st1.auto.rgsb&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;id&amp;quot;: 1221134,\n\n    &amp;quot;action&amp;quot;: &amp;quot;userid&amp;quot;,\n    &amp;quot;method&amp;quot;: &amp;quot;check_limit_in_other_projects&amp;quot;,\n    &amp;quot;userId&amp;quot;: 4,\n    &amp;quot;checking_limit&amp;quot;: 15000\n\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto_&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ответ&lt;/p&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;json&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-json\&quot;&gt;{\n  &amp;quot;project_id&amp;quot;: &amp;quot;auto_&amp;quot;,\n  &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n  &amp;quot;params&amp;quot;: {\n    &amp;quot;limit_approved_smaller_exists_30_days&amp;quot;: true,\n    &amp;quot;companion_credit_card_is_not_available_30_days&amp;quot;: false,\n    &amp;quot;max_limit_real_small_30_days&amp;quot;: true,\n    &amp;quot;error&amp;quot;: {},\n    &amp;quot;resource&amp;quot;: &amp;quot;userdata&amp;quot;,\n    &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n    &amp;quot;id&amp;quot;: 1221134,\n    &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n  },\n  &amp;quot;bank_id&amp;quot;: &amp;quot;rgsb&amp;quot;,\n  &amp;quot;id&amp;quot;: 1221134,\n  &amp;quot;from&amp;quot;: &amp;quot;from_route&amp;quot;,\n  &amp;quot;action&amp;quot;: &amp;quot;userid_done&amp;quot;,\n  &amp;quot;system_code&amp;quot;: &amp;quot;bpm&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;В ответе будут содержатся поля&lt;/p&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;limit_approved_smaller_exists_30_days&lt;/code&gt; : true/false/null&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;companion_credit_card_is_not_available_30_days&lt;/code&gt;: true/false/null&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;max_limit_real_small_30_days&lt;/code&gt;: true/false/null&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;true - признак сработал (например limit_approved_smaller_exists_30_days: true - существуют заявки в других проектак в которых за последние 30 дней последний одобренный лимит меньше запрашиваемого)&lt;/li&gt;\n&lt;li&gt;false - признак не сработал&lt;/li&gt;\n&lt;li&gt;none - невозможно определить признак (например limit_approved_smaller_exists_30_days: none, если не передан в запросе checking_limit или нет заявок в других проектах с одобренным лимитом )&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;9&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585908980825&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1796&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;d.podshchekoldin&quot;,&quot;fullName&quot;:&quot;Дмитрий Подщеколдин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;01-2–Направление (РГС) КК.pdf&quot;,&quot;id&quot;:&quot;88-26450&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26450?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0NTB8QUFqdnJ0d1dzdjVPdFIxNnFmbUZpSW9IcWla%0D%0AWnM3TFhBNEhWajZYTEVfVQ0K%0D%0A&amp;updated=1583226271522&quot;},{&quot;value&quot;:&quot;Коды_отказа_РГС_МетодикаСПР_КК_БП v5.xls&quot;,&quot;id&quot;:&quot;88-27427&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27427?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc0Mjd8eWdTeFpRdUN4WVN5NDlEdkh3OWFwbng3LXVa%0D%0AYmVTb1lzN213VE5tOXVwbw0K%0D%0A&amp;updated=1585557871454&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53593&quot;,&quot;author&quot;:&quot;a.bogomolov&quot;,&quot;authorFullName&quot;:&quot;Алексей Богомолов&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;$app_credit_card  добавить в nginx&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584096004805,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53596&quot;,&quot;author&quot;:&quot;a.bogomolov&quot;,&quot;authorFullName&quot;:&quot;Алексей Богомолов&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt;  в остальных местах где был переход для получения кк ссылку не надо менять ?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584096766202,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53800&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Появились ответы от банка (обновленное СПР), необходимо внести изменения в задачу.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584450057192,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55242&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Вопросы:&lt;br/&gt;2.2. По сочетанию ФИО, серия и номер паспорта провести проверку на наличие отказов по Кредитной карте Компаньон в течение последних 30 дней до даты подачи заявки на Кредитную карту. При наличии отказа по Кредитной карте Компаньон по заявке на Кредитную карту формируется отказ с кодом M002.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Что считается датой отказа по кредитное карте - момент расчета этого флага? Если он рассчитался заново, но не изменился, должна ли обновиться дата?&lt;/li&gt;\n&lt;li&gt;Нужно ли в transfer отправлять флажок в юзердату&lt;/li&gt;\n&lt;li&gt;На стороне юзердаты рассчитывать фичу (вместо отказа M002) companion_credit_card_is_not_available_30_days, отказ будут делать КН на своей стороне.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585569634541,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55243&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;2.3. При наличии у клиента в течение 30 дней одобренной заявки по продукту, отличному от Кредитной карты, с лимитом менее запрошенного по данному продукту формируется отказ с кодом M003.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Зачем добавляем поле лимит? В задаче далее никак не участвует&lt;/li&gt;\n&lt;li&gt;&amp;quot;лимит менее запрошенного по данному продукту&amp;quot; - речь о наличии в заявке флага max_limit_real_small?&lt;/li&gt;\n&lt;li&gt;Что означает &amp;quot;True не перезаписываем&amp;quot;?&lt;br/&gt;Если было true, а потом изменили условия, и стало false - в юзердате должно остаться true?&lt;br/&gt;Если было true, а потом изменили условия, и стало false, потом снова стало false - в юзердате должно остаться true с более новой датой?&lt;/li&gt;\n&lt;li&gt;Должна ли все-таки участвовать дата в проверке? В бизнес-описании есть, в тексте задачи нет?&lt;/li&gt;\n&lt;li&gt;На стороне юзердаты рассчитывать фичу (вместо отказа M003) max_limit_real_small_30_days,  отказ будут делать КН на своей стороне на основании фичи.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585569657917,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55268&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;2.2&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Что считается датой отказа по кредитное карте - момент расчета этого флага? Если он рассчитался заново, но не изменился, должна ли обновиться дата?&lt;br/&gt;Ответ: Да, обновляем дату&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Нужно ли в transfer отправлять флажок в юзердату&lt;br/&gt;Ответ: Да (так как флаг мог измениться).&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;2.3&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Зачем добавляем поле лимит? В задаче далее никак не участвует&lt;br/&gt;Ответ: нужно для того, чтоб делать отказы по Кредитной Карте в КН (При наличии у клиента в течение 30 дней одобренной заявки по продукту, отличному от Кредитной карты, с лимитом менее запрошенного по данному продукту формируется отказ с кодом M003.)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&amp;quot;лимит менее запрошенного по данному продукту&amp;quot; - речь о наличии в заявке флага max_limit_real_small?&lt;br/&gt;Ответ: Нет. сравниваются лимиты по заявке Авто, КН и запрошенный по Кредитной карте.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Что означает &amp;quot;True не перезаписываем&amp;quot;?&lt;br/&gt;Если было true, а потом изменили условия, и стало false - в юзердате должно остаться true?&lt;br/&gt;Ответ: да&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если было true, а потом изменили условия, и стало false, потом снова стало false - в юзердате должно остаться true с более новой датой?&lt;br/&gt;Ответ: не поняла вопрос. Имелось ввиду, что потом снова стало true? Если снова true, то давайте обновлять более новой датой.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Должна ли все-таки участвовать дата в проверке? В бизнес-описании есть, в тексте задачи нет?&lt;br/&gt;На стороне юзердаты рассчитывать фичу (вместо отказа M003) max_limit_real_small_30_days, отказ будут делать КН на своей стороне на основании фичи.&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Нужна дата проставлении данной фичи для КН&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585575956330,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55632&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;заметки с обсуждения Лиза, Федя, Я&lt;br/&gt;--добавить project_id для standalone&lt;/p&gt;\n&lt;p&gt;? что делать если КН прислали лимит 500&lt;br/&gt;а авто потом прислали 400&lt;/p&gt;\n&lt;p&gt;Что выводить как лимит&lt;/p&gt;\n&lt;p&gt;max_limit_real_small - 30 дней&lt;/p&gt;\n&lt;p&gt;по всем проектам кроме КК&lt;/p&gt;\n&lt;p&gt;запрос от стедналоне придет с лимитом&lt;br/&gt;если хоть один лимит меньше чем он запросил сейчас превышает&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;берем самый свежий по проекту&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;все что мы считаем в пределах 30 дней&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;возвращаем три фичи&lt;/p&gt;\n&lt;p&gt;projectd_id credit&lt;/p&gt;\n&lt;p&gt;check_limit&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585752151723,&quot;updated&quot;:1585909134429,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55700&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; добавить коды отказа в юзердату stage&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt;  добавить коды отказа в юзердату prod&lt;/label&gt;&lt;br/&gt;реализовано миграцией&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;p&gt;для какого проекта? или для всех трех?&lt;br/&gt;нужен код проекта stand-alone&lt;/p&gt;\n&lt;hr /&gt;\n&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot;&gt; скрипты инициализации&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt; проверить что из другого проекта поля обновляются и вносят изменения&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot; checked=\&quot;\&quot;&gt; написать примеры вызовов к юзердате&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;p&gt;todo&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot;&gt; написать тесты в стейтмашине&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585821251796,&quot;updated&quot;:1585909147377,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55777&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1777&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;span class=\&quot;markdown-language-tag\&quot;&gt;yaml&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-yaml\&quot;&gt;userdata_ng_admin_git_version: feature/ARGS-1777\nuserdata_ng_bpm_engine_version: develop\nuserdata_ng_bpm_transport_version: develop\nuserdata_ng_main_version: feature/ARGS-1777\n\n\nbpm_ng_composite_version: feature/ARGS-1777\nbpm_ng_engine_version: feature/ARGS-1777\nbpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1777\n    version_name: pre_release\n    import_name: sm1\nbpm_ng_transport_version: develop\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/bpm_composite/pull-requests/134/args-1777-stand-alone\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/bpm_composite/pull-requests/134/args-1777-stand-alone&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/sm_rgsb/pull-requests/136/args-1777-stand-alone\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/sm_rgsb/pull-requests/136/args-1777-stand-alone&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/bpm_engine/pull-requests/22/feature-args-1777\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/bpm_engine/pull-requests/22/feature-args-1777&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/userdata/pull-requests/14/args-1777-stand-alone\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/userdata/pull-requests/14/args-1777-stand-alone&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://bitbucket.org/pr30/userdata_admin/pull-requests/6/args-1777-updated\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bitbucket.org/pr30/userdata_admin/pull-requests/6/args-1777-updated&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585840446766,&quot;updated&quot;:1585847179639,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Согл деплой с КН&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1627&quot;,&quot;entityId&quot;:&quot;86-74794&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Справочник агентов и автосалонов (настройка антифрода по автосалонам)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580233132054&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1627&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9009 Справочник агентов и автосалонов (настройка антифрода по автосалонам)&lt;br/&gt;Нужен функционал в Баланс платформе.&lt;/p&gt;\n&lt;hr /&gt;\n&lt;p&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; &lt;/label&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;В УП создается новая страничка &amp;quot;Антифрод&amp;quot;&lt;br/&gt;При нажатии на кнопку &amp;quot;Добавить&amp;quot; открывается карточка добавления антифрода.&lt;br/&gt;Содержимое карточки:&lt;br/&gt;Кнопка активации настроек&lt;br/&gt;выбор типа сущности,на которую назначается проверка(автосалон/маб/агент)&lt;br/&gt;соответственно выбранному типу в следующую выпадайку передается список автосалонов,мабов или агентов(вместе с id и поиском по нему)&lt;br/&gt;поле &amp;quot;тип проверки&amp;quot;(занятость, личность, контактное лицо, андеррайтинг)&lt;br/&gt;поля дата начала и дата конца проверки&lt;br/&gt;сумма кредита (начиная с этой суммы кредита и выше осуществляется перевод на проверку)&lt;br/&gt;Причина (будет комментарием фичи)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Фильтры&lt;br/&gt;Тип: автосалон,маб,агент&lt;br/&gt;Дата (с... по ...)&lt;br/&gt;Регион&lt;/p&gt;\n&lt;p&gt;выводить id карточки на самой карточке и в списке&lt;br/&gt;выводить id сущности (автосалон,маб,агент)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;ГК&lt;/strong&gt;&lt;br/&gt;сделать метод, по которому передавать в УП список пользователей&lt;br/&gt;Фильтровать его по:&lt;br/&gt;-доступ в приложение in (Партнерка Авто,КН)&lt;br/&gt;-роль=agent&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;Бэк УП&lt;/strong&gt;&lt;br/&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;(Для заполнения карточки смотри п.на фронт)&lt;br/&gt;Когда заполняется карточка и выбирается тип &amp;quot;Агент&amp;quot;&lt;br/&gt;из ГК запрашивать список пользователей (см п. на ГК)&lt;br/&gt;&lt;strong&gt;таблица antifrod&lt;/strong&gt;&lt;br/&gt;id&lt;br/&gt;enabled:true/false&lt;br/&gt;scope_type:AutoShow/MAB/Manager&lt;br/&gt;scope_id&lt;br/&gt;verification_type:(соответственно типу)&lt;br/&gt;(занятость-work_and_income, личность-person, контактное лицо-third_person, андеррайтинг-manual_check)&lt;br/&gt;start_date&lt;br/&gt;end_date&lt;br/&gt;credit_amount&lt;br/&gt;reason&lt;/p&gt;\n&lt;p&gt;Все поля в карточке являются обязательными&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;БэкПП&lt;/strong&gt;&lt;br/&gt;при заведении заявки по мабу, автосалону,агенту проверять наличие карточки антифрод enabled:true и start_date &amp;lt;= текущая дата &amp;lt;= end_date&lt;br/&gt;Передавать на BPM в extend2 этот признак &amp;quot;antifrod:true&amp;quot;, а также &amp;quot;credit_amount&amp;quot;,&amp;quot;reason&amp;quot;, &amp;quot;verification_type&amp;quot;&lt;br/&gt;(если у нас сработали несколько карточек по автосалону,мабу и агенту,то передаем все карточки)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;в scoring_1_state смотреть, если по автосалону,мабу или агенту пришел признак &amp;quot;antifrod:true&amp;quot;,&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;расшифровывать тип проверки и преобразовывать в соответствующую матрицу для верификации&lt;br/&gt;(manual_check- подразумевает и manual_check_documents, и manual_check_expert)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;matrix = [0,0,0,0,0]\nгде \nmatrix[0] - прозвоны (work_and_income) \nmatrix[1] - прозвоны (person) \nmatrix[2] - прозвоны (third_person) \nmatrix[3] - underwriting (manual_check_documents)\nmatrix[4] - underwriting (manual_check_expert)\nпринимает два значения 0 и 1, если 1 то производим верификацию данного типа, иначе нет\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверять,что&lt;br/&gt;-сумма кредита &amp;gt;= credit_amount&lt;br/&gt;-segment in (3, 4)&lt;br/&gt;тогда в verification_state направлять заявку на конкретный тип проверки &amp;quot;verification_type&amp;quot; и в качестве комментария(для андеррайтинга) передавать содержимое поля &amp;quot;reason&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;(фича №44-антифрод рисков)&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt;для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;пример1:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=400тыс\nкарточка на прозвон с суммой кредита=200тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка прозвон по сумме 200тыс, комментарий на андеррайтинг не учитывается&lt;/p&gt;\n&lt;p&gt;пример2:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=200тыс\nкарточка на прозвон с суммой кредита=400тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка на андеррайтинг по сумме 200тыс с комментарием &lt;em&gt;андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot; checked=\&quot;\&quot;&gt;доработать селект для КН&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;“SELECT point_of_sales.*, auto_business_modules.*, point_of_sales.species FROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}”\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjYxNTd8bjl2X3FqZjFrOFU5SUszTW1oUVUzNThjZ3dq%0D%0AUDJIblM5MWR1ZGJ1VDdKdw0K%0D%0A&amp;amp;updated=1582702719772\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26157\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjYxNTl8eWY4SENaaXlPYVhrcE1BZzZJaG5jQXl4S29q%0D%0ARmY1LWl3YWR6VzlpSGhQTQ0K%0D%0A&amp;amp;updated=1582702742130\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26159\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjYyNTF8eHo5VW5KdEdUZHdnVk1MbnBWN0oyaGlMTFNz%0D%0AM0VvQjN3NF9rb1dnM3lVUQ0K%0D%0A&amp;amp;updated=1582809897473\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26251\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Кравченко&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;23&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;anna.kravchenko&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585902908071&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;anna.kravchenko&quot;,&quot;fullName&quot;:&quot;Анна Кравченко&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Справочник агентов (1).doc&quot;,&quot;id&quot;:&quot;88-25892&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25892?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjU4OTJ8REszcmRaRUg1c2I0ZDlSemRMdjhGSFF4Qi1o%0D%0AV2xXWFpJZG5BRWo5TGtMSQ0K%0D%0A&amp;updated=1582103461421&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26157&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYxNTd8amRuaXR1RHV2Vkt3Wk1fMy1iQ3g2Zk5reG5Z%0D%0AcmtQUE5Jc1FSeFpJM1ZfZw0K%0D%0A&amp;updated=1582702719772&quot;},{&quot;value&quot;:&quot;image2.png&quot;,&quot;id&quot;:&quot;88-26159&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYxNTl8TkdBNzItVmY4NUNvb2FNRkMydXFuLUJjRUtf%0D%0ASXJva1FRNmlTdUNsRkl6TQ0K%0D%0A&amp;updated=1582702742130&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26251&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYyNTF8SUpuSk51U1h3d2tqNlB6Q0syUjNBcEdIeUVx%0D%0AV0xjSm84aVJyS3VJTkwxNA0K%0D%0A&amp;updated=1582809897473&quot;},{&quot;value&quot;:&quot;image1585820109080.png&quot;,&quot;id&quot;:&quot;88-27678&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27678?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc2Nzh8OWs4OEdoN1VNcjZZSHhoWkdfdktMMGdYRUVC%0D%0AMXVtc092T0tZTl9IVnNyTQ0K%0D%0A&amp;updated=1585820109693&quot;},{&quot;value&quot;:&quot;image1585821544231.png&quot;,&quot;id&quot;:&quot;88-27680&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27680?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc2ODB8U1p2aE5STVdUSlZ5c3d2LXJ6ajJvTW8xSWdi%0D%0AZnFEaGdzSmZEcHlianZVOA0K%0D%0A&amp;updated=1585821544945&quot;},{&quot;value&quot;:&quot;image1585821955844.png&quot;,&quot;id&quot;:&quot;88-27681&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27681?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc2ODF8YkhneUdiY2pDRm55VHVpUmF4TXBnYkZudnV1%0D%0AbjFhQ19HVEppYnA3XzNfdw0K%0D%0A&amp;updated=1585821956477&quot;},{&quot;value&quot;:&quot;image1585832993152.png&quot;,&quot;id&quot;:&quot;88-27700&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27700?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MDB8MFVPWDYyRjNjd2dHY1gzUVlfZURwc25EdXkw%0D%0ARzRMUnVaNmRrQkJrVVl3TQ0K%0D%0A&amp;updated=1585832993970&quot;},{&quot;value&quot;:&quot;image1585833017220.png&quot;,&quot;id&quot;:&quot;88-27701&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27701?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc3MDF8bEczVzNMenNpcklyQ1l5bEZiQ284U25XM0Nj%0D%0AUm05VzlOSEhNSi1oRXBZUQ0K%0D%0A&amp;updated=1585833017890&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50528&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;нужно приложить письмо&lt;br/&gt;требования не готовы, как именно на верификацию попадают?&lt;/p&gt;\n&lt;p&gt;делать будем в УП, предварительно 50-70 SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580715089476,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52672&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582896179438,&quot;updated&quot;:1582896702266,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52764&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; как будет использоваться&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;instance:rgsb_auto/rgsb_cash(может быть оба значения,если доступ есть и там,и там)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;предлагаю в базу писать gatekeeper_id в поле scope_id, тогда по нему можно будет сразу отсекать тех, кто не принадлежит текущему приложению&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583136194955,&quot;updated&quot;:1583136206644,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52776&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;p&gt;фильтр по региону оставляет только записи с МАБом или все салоны и агентов тоже надо фильтровать?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583138832460,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52779&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/i.smelkov\&quot; title=\&quot;Илья Смелков\&quot; data-user-id=\&quot;24-251\&quot;&gt;@Илья Смелков&lt;/a&gt; на первый вопрос ок,можно сделать так&lt;br/&gt;На второй,нужно фильтровать все записи по мабу. И агентов с автосалонами тоже&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139386646,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52782&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139978839,&quot;updated&quot;:1583143544279,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52848&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{:id=&amp;gt;2831,\n :action=&amp;gt;&amp;quot;extend&amp;quot;,\n :resource=&amp;gt;&amp;quot;sm_rgsb&amp;quot;,\n :bank_id=&amp;gt;&amp;quot;rgsb&amp;quot;,\n :project_id=&amp;gt;&amp;quot;auto&amp;quot;,\n :params=&amp;gt;\n  {:request_id=&amp;gt;2831,\n   :id=&amp;gt;2831,\n   :point_of_sale=&amp;gt;\n    {:id=&amp;gt;4507,\n     :title=&amp;gt;&amp;quot;Iona Frisbee&amp;quot;,\n     :cluster=&amp;gt;\n      {:id=&amp;gt;33451,\n       :name=&amp;gt;nil,\n       :role=&amp;gt;&amp;quot;director_light_network&amp;quot;,\n       :auto_business_module=&amp;gt;\n        {:id=&amp;gt;7168,\n         :title=&amp;gt;&amp;quot;Izzy Backyet&amp;quot;,\n         :is_dfo=&amp;gt;false,\n         :subsidiary=&amp;gt;{:id=&amp;gt;7353, :director_level_1=&amp;gt;{:id=&amp;gt;33450, :full_name=&amp;gt;&amp;quot;  &amp;quot;}},\n         :antifrods=&amp;gt;[{:id=&amp;gt;67, :verification_type=&amp;gt;&amp;quot;third_person&amp;quot;, :credit_amount=&amp;gt;0.33333e3, :reason=&amp;gt;&amp;quot;reason3&amp;quot;}]}}},\n   :auto_show=&amp;gt;\n    {:id=&amp;gt;6819,\n     :antifrods=&amp;gt;[{:id=&amp;gt;66, :verification_type=&amp;gt;&amp;quot;person&amp;quot;, :credit_amount=&amp;gt;0.22222e3, :reason=&amp;gt;&amp;quot;reason2&amp;quot;}]},\n   :manager=&amp;gt;\n    {:id=&amp;gt;5810,\n     :antifrods=&amp;gt;[{:id=&amp;gt;65, :verification_type=&amp;gt;&amp;quot;work_and_income&amp;quot;, :credit_amount=&amp;gt;0.11111e3, :reason=&amp;gt;&amp;quot;reason1&amp;quot;}]}}}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160165070,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52849&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка ПП &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160289908,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52955&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка УП и каталог &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583248604146,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53204&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;В связи с обновлением в требованиях, в каком случае должна быть одна проверка с двумя комментариями?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479273986,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53206&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; в примерах в задаче описано&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479796760,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53208&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Ок&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583480720517,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53236&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt; для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;пример2:&lt;br/&gt; карточка на андерратинг с суммой кредита=200тыс&lt;br/&gt; карточка на прозвон с суммой кредита=400тыс&lt;br/&gt; карточка на андерратинг с суммой кредита=300тыс&lt;br/&gt; -выполняется проверка на андеррайтинг по сумме 200тыс с комментарием андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;Я правильно понимаю, что когда у нас несколько карточек, мы ищем тип проверки, у которой сумма минимальна, по ней выполняем сравнение суммы, и, если условие сработало, комментарии используем от всех карточек с таким же типом проверки, даже если у них условие на сумму не выполняется?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583493805292,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53238&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; да,верно. Но это только если у нас андеррайтинг как проверка проходит&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494514532,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53241&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Но это только если у нас андеррайтинг как проверка проходит&lt;/div&gt;&lt;br/&gt;Что это означает?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494743231,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53244&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; мы же для других типов проверок не отправляем комментарий&lt;br/&gt;смотри пример 1&lt;br/&gt;Если у нас выпал прозвон,то мы игнорируем комментарии в карточках андеррайтинга&lt;br/&gt;но если у нас выпал андеррайтинг, то мы берем и отправляем комментарии со всех присутствующих для заявки карточек андеррайтинга&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583495282302,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53929&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; фича с номером 39 уже участвует в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1625\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-74790\&quot; title=\&quot;Интеграция с сервисом Дирекции по управлению Рисками\&quot;&gt;ARGS-1625&lt;/a&gt;, нужно поменять номер здесь или там&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517542037,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53932&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; давай 44, раз все меньше занято&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517806033,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54046&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1627-refactor&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1627-refactor&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584546390717,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54440&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;доработать селект для КН&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;SELECT \n  point_of_sales.*, \n  auto_business_modules.*, \n  point_of_sales.species,\n  antifrods.*\n\nFROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_shows ON auto_shows.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  INNER JOIN antifrods ON \n    (scope_id = auto_business_modules.id AND scope_type = 'MAB')\n    OR\n    (scope_id = auto_shows.id AND scope_type = 'AutoShow')\n    OR\n    (scope_id = #{@gatekeeper_id} AND scope_type = 'Manager')\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584950554270,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55698&quot;,&quot;author&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Синельников&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ГК&lt;br/&gt;branch: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585820908491,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55701&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;АКТЫ &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585821512359,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55763&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В ГК появилась новая роль:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27678?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc2Nzh8SkZsSHBBbjV6dE5LRGFfZFZMcUtyUDhjQ0Vs%0D%0AVVBiOU5SS3FCRVhMQi00VQ0K%0D%0A&amp;amp;updated=1585820109693\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27678\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;выводить id карточки на самой карточке и в списке&lt;br/&gt;выводить id сущности (автосалон,маб,агент)&lt;br/&gt;Фильтры&lt;br/&gt;Тип: автосалон,маб,агент&lt;br/&gt;Дата (с... по ...)&lt;br/&gt;Регион&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27680?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc2ODB8TEFSaUhHUTg5b1RGdHdHQ1djUDdlN1VsVXVD%0D%0AQVZFRWNMY194RzY4S2Y4MA0K%0D%0A&amp;amp;updated=1585821544945\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27680\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Все поля в карточке являются обязательными&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27681?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc2ODF8LUJCT3h6bkFzRjA5S1hQWGJMbmdvYTVLb3A4%0D%0ALUdLcDdsOFk1bi05MmNvaw0K%0D%0A&amp;amp;updated=1585821956477\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27681\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;соответственно выбранному типу в следующую выпадайку передается список автосалонов,мабов или агентов(вместе с id и поиском по нему)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27700?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc3MDB8RlZSY0c3bmlFTmpYeko1Q3BWUFVMLVNtMGxN%0D%0ATnJtNmlBbWlMTlNDWFp5TQ0K%0D%0A&amp;amp;updated=1585832993970\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27700\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27701?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjc3MDF8Z3d4VVJmbVBZV1ozdXNxMDZXdGhTbGlCdEdC%0D%0ARDBxN3ViMlZMOEhyMmVqVQ0K%0D%0A&amp;amp;updated=1585833017890\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27701\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585833082140,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1933&quot;,&quot;entityId&quot;:&quot;86-80446&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Выгрузка для тест-дня 3 апреля&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585742090987&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1933&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать выгрузку всех заявок за последние 6 месяцев. Нужны следующие параметры:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;номер заявки&lt;/li&gt;\n&lt;li&gt;признак одобрено / отказано -    &lt;code class=\&quot;inline-code\&quot;&gt;Статус заявки&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;код отказа                                       &lt;code class=\&quot;inline-code\&quot;&gt;reject-&amp;gt;codes&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;дата подачи заявления&lt;/li&gt;\n&lt;li&gt;дата одобрения или отказа         &lt;code class=\&quot;inline-code\&quot;&gt;Дата выдачи или Дата отказа по заявке&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Последняя запрошенная сумма по отказной заявке и выданная по одобренной - &lt;code class=\&quot;inline-code\&quot;&gt;последние актуальные данные: request-&amp;gt;conditions-&amp;gt;loan_amount&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;скор был НБКИ     &lt;code class=\&quot;inline-code\&quot;&gt; current_scoring-&amp;gt;&amp;quot;fact_nbki_cos&amp;quot;&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;скор бал ОКБ          &lt;code class=\&quot;inline-code\&quot;&gt;current_scoring-&amp;gt;fact_okb_cos&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;скор бал Эквифакса   &lt;code class=\&quot;inline-code\&quot;&gt; current_scoring-&amp;gt;&amp;quot;fact_equifax_cos&amp;quot;&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;pd:        &lt;code class=\&quot;inline-code\&quot;&gt;current_scoring-&amp;gt;pd&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;последнее значение ПВ в рублях:      &lt;code class=\&quot;inline-code\&quot;&gt;request-&amp;gt;conditions-&amp;gt;initial_payment&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;id точки продаж         &lt;code class=\&quot;inline-code\&quot;&gt;request-&amp;gt;conditions-&amp;gt;trade_point-&amp;gt;dealer_id&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;project_id&lt;/li&gt;\n&lt;li&gt;bank_id&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из этих заявок прислать номера 5, где&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Самый высокий PD&lt;/li&gt;\n&lt;li&gt;Самый низкий PD&lt;/li&gt;\n&lt;li&gt;Самая высокая сумма кредита&lt;/li&gt;\n&lt;li&gt;Самая низкая сумма кредита&lt;/li&gt;\n&lt;li&gt;Случайная отказная заявка&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585899951571&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1931&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55743&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1933&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;with request_last_6_month as (SELECT walkers.id                                                             request_number,\n                                     sm.current_state                                                       request_state,\n                                     walkers.memory -&amp;gt; 'reject' -&amp;gt; 'codes'                                  reject_codes,\n                                     walkers.created_at,\n                                     walkers.updated_at                                                     declined_or_approved_at,\n                                     (walkers.memory -&amp;gt; 'request' -&amp;gt; 'conditions' -&amp;gt;&amp;gt; 'loan_amount')::float loan_amount,\n                                     walkers.memory -&amp;gt; 'current_scoring' -&amp;gt; 'fact_nbki_cos'                 fact_nbki_cos,\n                                     walkers.memory -&amp;gt; 'current_scoring' -&amp;gt; 'fact_okb_cos'                  fact_okb_cos,\n                                     walkers.memory -&amp;gt; 'current_scoring' -&amp;gt; 'fact_equifax_cos'              fact_equifax_cos,\n                                     (walkers.memory -&amp;gt; 'current_scoring' -&amp;gt;&amp;gt; 'pd')::float                  pd,\n                                     walkers.memory -&amp;gt; 'request' -&amp;gt; 'conditions' -&amp;gt; 'initial_payment'       initial_payment,\n                                     walkers.memory -&amp;gt; 'request' -&amp;gt; 'trade_point' -&amp;gt; 'dealer_id'            dealer_id,\n                                     e.project_id,\n                                     e.bank_id\n                              FROM walkers\n                                       inner join state_machines sm on walkers.id = sm.walker_id\n                                       left join events e on walkers.id = e.walker_id and e.action = 'initialize'\n                              WHERE walkers.created_at &amp;gt;= date_trunc('month', current_date - interval '6' month)\n                                AND sm.current_state in ('decline_cft_state', 'completed_state'))\n-- обычный запрос\nselect * from request_last_6_month;\n\n-- Первые 5 номеров с наименьшим pd\n-- select request_number from request_last_6_month order by pd limit 5;\n\n-- Первые 5 номеров с наибольшим pd\n-- select request_number from request_last_6_month order by pd desc nulls last limit 5;\n\n-- Самая высокая сумма кредита\n-- select MAX(loan_amount) max_loan_amount from request_last_6_month;\n\n-- Самая низкая сумма кредита\n-- select MIN(loan_amount) max_loan_amount from request_last_6_month;\n\n-- Случайная отказанная заявка\n-- select * from request_last_6_month where request_state = 'decline_cft_state' ORDER BY random() LIMIT 1;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585826952244,&quot;updated&quot;:1585829623511,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55827&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1933&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Запрос с доработанным полем &amp;quot;Дата выдачи или дата отказа&amp;quot;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;with request_last_6_month as (SELECT walkers.id                                                             request_number,\n                                     sm.current_state                                                       request_state,\n                                     walkers.memory -&amp;gt; 'reject' -&amp;gt; 'codes'                                  reject_codes,\n                                     walkers.created_at,\n                                     COALESCE(td.starts_at, tc.starts_at)                                   issued_or_declined_at,\n                                     (walkers.memory -&amp;gt; 'request' -&amp;gt; 'conditions' -&amp;gt;&amp;gt; 'loan_amount')::float loan_amount,\n                                     walkers.memory -&amp;gt; 'current_scoring' -&amp;gt; 'fact_nbki_cos'                 fact_nbki_cos,\n                                     walkers.memory -&amp;gt; 'current_scoring' -&amp;gt; 'fact_okb_cos'                  fact_okb_cos,\n                                     walkers.memory -&amp;gt; 'current_scoring' -&amp;gt; 'fact_equifax_cos'              fact_equifax_cos,\n                                     (walkers.memory -&amp;gt; 'current_scoring' -&amp;gt;&amp;gt; 'pd')::float                  pd,\n                                     walkers.memory -&amp;gt; 'request' -&amp;gt; 'conditions' -&amp;gt; 'initial_payment'       initial_payment,\n                                     walkers.memory -&amp;gt; 'request' -&amp;gt; 'trade_point' -&amp;gt; 'dealer_id'            dealer_id,\n                                     e.project_id,\n                                     e.bank_id\n                              FROM walkers\n                                       inner join state_machines sm on walkers.id = sm.walker_id\n                                       left join events e on walkers.id = e.walker_id and e.action = 'initialize'\n                                       left join transitions td on sm.id = td.sm_id AND td.state = 'decline_cft_state'\n                                       left join transitions tc on sm.id = tc.sm_id AND tc.state = 'completed_state'\n                              WHERE walkers.created_at &amp;gt;= date_trunc('month', current_date - interval '6' month)\n)\n-- обычный запрос\nselect * from request_last_6_month;\n\n-- Первые 5 номеров с наименьшим pd\n-- select request_number from request_last_6_month order by pd limit 5;\n\n-- Первые 5 номеров с наибольшим pd\n-- select request_number from request_last_6_month order by pd desc nulls last limit 5;\n\n-- Самая высокая сумма кредита\n-- select MAX(loan_amount) max_loan_amount from request_last_6_month;\n\n-- Самая низкая сумма кредита\n-- select MIN(loan_amount) max_loan_amount from request_last_6_month;\n\n-- Случайная отказанная заявка\n-- select * from request_last_6_month where request_state = 'decline_cft_state' ORDER BY random() LIMIT 1;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585899951573,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1941&quot;,&quot;entityId&quot;:&quot;86-80538&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;ЭПТС для БУ БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585825482028&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1941&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;открыть эптс  для бу машин&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;сейчас стоит ограничение из связной задачи , что ЭПТС( а с ним и ИНФ. письмо) доступно только для НОВЫХ машин при &amp;quot;Залоговом кредите&amp;quot; и &amp;quot;Залоговый кредит на любое ТС&amp;quot;&lt;br/&gt;необходимо это ограничение снять , то есть доступность ЭПТС будет и для БУ и для новых ТС (Это не касается инф.писем!!)&lt;br/&gt;то есть теперь может прийти&lt;br/&gt;для БУ : ПТС,&lt;strong&gt;ЭПТС&lt;/strong&gt;&lt;br/&gt;для новых: ПТС,ЭПТС, инф письмо ПТС, инф письмо ЭПТС&lt;br/&gt;Т. е быть готовым принять для БУ машин ПТС и ЭПТС и в зависимости от типа отправить проверку в верификацию&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;на проверку истории ТС посылать в серии и номере  NULL для ЭПТС, задача на верификацию позволит игнорировать отсутствие полей и проверка совершится&lt;br/&gt;&lt;strong&gt;без связной задачи&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1919\&quot; title=\&quot;ЭПТС для БУ БЭК\&quot; data-issue-id=\&quot;86-80120\&quot;&gt;ARGS-1919&lt;/a&gt;( и 4420) проверка в гибдд на историю тс не пройдет и тестить нельзя&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585839848830&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1116&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1875&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;},{&quot;value&quot;:&quot;ARGS-1919&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;},{&quot;value&quot;:&quot;VR-4420&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;vladimir.goncharuk&quot;,&quot;fullName&quot;:&quot;Владимир Гончарук&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ПТС-ЭПТС для БУ.docx&quot;,&quot;id&quot;:&quot;88-27687&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27687?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc2ODd8RDFKODRvTHB1RktBcDJwN3AzRG54Um1TdDlp%0D%0AVlJWeHQ4bnJBaThBTEdEcw0K%0D%0A&amp;updated=1585825482046&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1823&quot;,&quot;entityId&quot;:&quot;86-78526&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Снятие ограничения VIN для «Кредит на авто с залогом» РОДИТЕЛЬ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584085754756&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1823&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;идея&lt;/strong&gt;&lt;br/&gt;для праворульных авто снять ограничение на валидацию поля VIN&lt;br/&gt;туда можно вводить любые символы&lt;br/&gt;&lt;strong&gt;тестировать и выкатывать вместе со связными, где задача РОДИТЕЛЬ&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;тест&lt;/strong&gt;&lt;br/&gt;для нового продукта - залоговый кредит на любое тс-доступен свитч &amp;quot;Праворульное ТС&amp;quot;&lt;br/&gt;при его активации поле VIN становится полем свободной формы заполнения( не более 30 символов) и поле все еще обязательно как для ПТС ,так и для ЭПТС&lt;br/&gt;параметр праворульного тс передается на БПМ, если параметр true, то БПМ передает  в верификацию новую проверку с измененным полем VIN (оно в свободной форме и не более 30 символов)&lt;br/&gt;проверить что ошибки на VIN приходят на фронт&lt;br/&gt;верификация успешная( БПМ включает нужное поле и они соответствуют требованиям задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/VR-4427\&quot; title=\&quot;Добавить в проверку ПТС(ЭПТС) 2 поле VIN\&quot; data-issue-id=\&quot;86-80432\&quot;&gt;VR-4427&lt;/a&gt;)&lt;br/&gt;после БПМ больше не посылает проверки тс(розыск ограничение и тд) в верификацию, только проверка птс(эптс ) и все&lt;br/&gt;заявка после поверки птс(эптс) проходит дальше&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585826126209&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1836&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;VR-4427&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1927&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;},{&quot;value&quot;:&quot;ARGS-1928&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;},{&quot;value&quot;:&quot;ARGS-1929&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;родитель для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.kriventsova&quot;,&quot;fullName&quot;:&quot;Кривенцова Александра&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;правый руль для КнАЗ.docx&quot;,&quot;id&quot;:&quot;88-26819&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26819?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY4MTl8RVliSDNBblp6bjN3ZVhVTGJUS3o3ZTRmNEcz%0D%0AUUZiN3Y2VHJ3VDQyNmJuWQ0K%0D%0A&amp;updated=1584085765159&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-27444&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27444?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc0NDR8VnFZX1F3aXdBN3hOQWt4YXNVbGZPdkZsRHNl%0D%0AdFQwS2xTZDI1NGE4V0VrVQ0K%0D%0A&amp;updated=1585569818664&quot;},{&quot;value&quot;:&quot;Шаг 5 (РГС) L.png&quot;,&quot;id&quot;:&quot;88-27445&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27445?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc0NDV8azZSc3VRTlpra0F0N2RESTJQTkVvOXpleDZE%0D%0AbThhMDhobWptcFItdGxXYw0K%0D%0A&amp;updated=1585571202202&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-27446&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27446?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc0NDZ8Z0hPS180YUh0a094dWNWX29jZ0dkbmtNZEdf%0D%0AaVFwYUM2UnFWWm9hbHZFVQ0K%0D%0A&amp;updated=1585571227930&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55250&quot;,&quot;author&quot;:&quot;arseny&quot;,&quot;authorFullName&quot;:&quot;Арсений Культиасов&quot;,&quot;issueId&quot;:&quot;ARGS-1823&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585571252073,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55397&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1823&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;от банка::&lt;/p&gt;\n&lt;p&gt;единственный вопрос, тестировали ли ЦФТ. Со стороны ЦФТ прорабатывали? ВИН передается в ЦФТ, в ЦФТ имеется определенная размерность, если аналитики бП вместе с вами и аналитиками ЦФТ не проработали данный вопрос может сломаться выдача там, где размерность вин будет превышена.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585661826766,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55568&quot;,&quot;author&quot;:&quot;arseny&quot;,&quot;authorFullName&quot;:&quot;Арсений Культиасов&quot;,&quot;issueId&quot;:&quot;ARGS-1823&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;По верификации. В системе есть два поля VIN. Одно с маской и ограничениями, другое — без. Верификатору показывается только одно в задаче.&lt;/p&gt;\n&lt;p&gt;Задача верификатора — вводить то, что видит. Задача масок и ограничений — минимизировать количество ошибок с учётом заданных правил. С учётом этого, верификатору даже не обязательно помечать, что поле с ограничениями или без. Можно попробовать запустить и потестировать так. Если увидим, что лучше всё-таки помечать — будем помечать.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585736806261,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;support&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1554&quot;,&quot;entityId&quot;:&quot;86-73311&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Проработать устаревание заявки КК&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1578911470641&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1554&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Требуется додумать реализацию устаревания заявки на КК в ПП.&lt;br/&gt;На текущий момент получается так :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Была попытка создания заявки в КК на оформление.&lt;/li&gt;\n&lt;li&gt;Заявка сменила стейт&lt;/li&gt;\n&lt;li&gt;Заявка устарела в КК (её например бросили заводить)&lt;/li&gt;\n&lt;li&gt;На ПП мы видим ссылку на КК и один из стейтов (последний пришедший по шине)&lt;/li&gt;\n&lt;li&gt;Мы не можем узнать, что заявка устарела в КК&lt;br/&gt;Что предлагаю (Дима) :&lt;br/&gt;Фронт должен смотреть на поле &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Обработка в КН. Относится к заявкам, по которым доступна выдача КК и агент начал оформление КК.&lt;br/&gt;&lt;strong&gt;КН&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;получать от нас  &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt; .&lt;/li&gt;\n&lt;li&gt;Сделать устаревание заявок Авто. Если  &lt;code class=\&quot;inline-code\&quot;&gt;cc_available_until&lt;/code&gt; наступило, а карту не выдали, то присылать нам стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;, что заявка по карте устарела. (СВЯЗАННАЯ ЗАДАЧА)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt;&lt;br/&gt;Передавать на бэк дату и время первого одобрения &lt;code class=\&quot;inline-code\&quot;&gt;first_approve_time&lt;/code&gt;:&lt;br/&gt;брать из &lt;code class=\&quot;inline-code\&quot;&gt;memory-&amp;gt;flags_rgsb-&amp;gt;first_approve&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; принимать от bpm дату первого одобрения &lt;code class=\&quot;inline-code\&quot;&gt;first_approve_time&lt;/code&gt; (нужно будет для будущей доработки)&lt;/li&gt;\n&lt;li&gt;Отправлять в КН &amp;#39;cc_available_until`, когда начали оформлять КК.&lt;/li&gt;\n&lt;li&gt;Принимать от КН новый стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;, что заявка КК устарела. В нашей стет-машине это будет один из терминальных стейтов.&lt;/li&gt;\n&lt;li&gt;Передавать стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt; фронту.&lt;/li&gt;\n&lt;li&gt;При подсчете количества заявок в cc_available_state не учитывать заявки в стейте &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;. И при формировании заявок для этого фильтра фронту.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;Если пришел стейт &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;,  не давать возможность оформить такую карту - то есть убрать с 10-го шага плашку &amp;quot;кредитная карта&amp;quot; слева в меню и под надписью &amp;quot;кредит выдан&amp;quot;.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Не показываются в списке кк заявки в стейте &lt;code class=\&quot;inline-code\&quot;&gt;outdated&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Обработка в АВТО. Относится к заявкам, по которым доступна выдача КК, но агент так и не начал оформлять КК.&lt;br/&gt;БЭК Отправляет на фронт значение поля &amp;#39;cc_available_until&lt;code class=\&quot;inline-code\&quot;&gt;. Предложение действует до окончания следующего дня после выдачи Автокредита. Если 'cc_available_until&lt;/code&gt; наступил и заявка так и не ушла с первоначального стейта, то  карта больше не доступна.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585819720763&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54268&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1554&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;это что еще не сделано? да быть такого не может, проверьте актуальность, если что закрывайте&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584686269396,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1749&quot;,&quot;entityId&quot;:&quot;86-77338&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Отправлять timestamp&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582719624263&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1749&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Отправлять timestamp при отправке задачи на верификацию&lt;br/&gt;Для приоритетных добавлять плюс 3 часа&lt;br/&gt;для остальных 24 часа&lt;/p&gt;\n&lt;p&gt;Проблема:&lt;br/&gt;на верификации из-за приоритетов по дате задачи сдвигаются на стыке месяцев&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Увеличить приоритет задач на верификации, созданных на этапе сделки&lt;/p&gt;\n&lt;h2&gt;Как сейчас:&lt;/h2&gt;\n&lt;p&gt;В задании верификации, создаваемом в BPM, мы посылаем параметр &lt;code class=\&quot;inline-code\&quot;&gt;priority&lt;/code&gt;, который считается по формуле (&lt;strong&gt;Пункт 1&lt;/strong&gt;). Далее верификация обрабатывает показатель согласно логике (&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/909049920\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/909049920&lt;/a&gt; модель 1):&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;В этом случае верификатор получает сначала задачи из инстанса с наиБОЛЬшим весом, в группах с которым он находится. Затем смотрим столбец &amp;quot;Пр.&amp;quot; - приоритет\n\nЧем меньше число, тем больше приоритет, значит задача с мЕньшим числом будет взята в работу раньше, чем задача с бОльшим числом\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Пункт 1. Формула расчет приоритета задач&lt;/strong&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;(Текущая дата (без миллисекунд) + timedelta) * 100 + приоритет&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;где приоритет:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;preorities -&amp;gt; pre-scoring -&amp;gt; priority = 1&lt;/li&gt;\n&lt;li&gt;preorities -&amp;gt; scoring -&amp;gt; priority = 2&lt;/li&gt;\n&lt;li&gt;preorities -&amp;gt; deal -&amp;gt; priority = 3&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Решение:&lt;/h2&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;p&gt;&lt;strong&gt;Новая формула:&lt;/strong&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;(Текущая дата (без миллисекунд) + timedelta) * 100 + (24 час - (приоритет - 1) * 10,5 час.)&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ПЕРЕВЕСТИ ЧАСЫ В СЕКУНДЫ&lt;/strong&gt;&lt;/p&gt;\n&lt;h2&gt;Тест - кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от создания заявки и до скоринга, должны иметь приоритет текущая_дата * 100 + 24 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от начала скоринга до одобрения, должны иметь приоритет текущая_дата * 100 + 13,5 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;li&gt;Задания, создающиеся на верификацию на этапах от начала одобрения до выдачи, должны иметь приоритет текущая_дата * 100 + 3 час (unix время, перевести часы в секунды)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585756852740&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-27538&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27538?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjc1Mzh8ZEVIZ3M3b2dkRlFheHlWV2k5T1EzWUZwOS1m%0D%0AZVJmYjJtSWV5eFBRVTY2Yw0K%0D%0A&amp;updated=1585657065973&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55648&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1749&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1749\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1749\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585756827493,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1929&quot;,&quot;entityId&quot;:&quot;86-80372&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Снятие ограничения VIN для «Кредит на авто с залогом» БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585723497935&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1929&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в в check_object будет приходить новый параметр на БПМ vehicle-&amp;gt;right_hand_drive_car-ТС праворульное&lt;/li&gt;\n&lt;li&gt;теперь проверка ПТС и ЭПТС изменена, необходимо в зависимости от параметра right_hand_drive_car включать и выключать поля VIN (их согласно связной задаче будет теперь 2 )&lt;/li&gt;\n&lt;li&gt;если параметр right_hand_drive_car: false, то ВКЛ vin и ВЫКЛ vin_2&lt;/li&gt;\n&lt;li&gt;если параметр right_hand_drive_car: true, то ВЫКЛ vin и ВКЛ vin_2&lt;/li&gt;\n&lt;li&gt;подробности включения и выключения будут известны  после реализации связной задачи , см &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/VR-4427\&quot; title=\&quot;Добавить в проверку ПТС(ЭПТС) 2 поле VIN\&quot; data-issue-id=\&quot;86-80432\&quot;&gt;VR-4427&lt;/a&gt;, а так же vin_2, тоже могут назвать по другому , так же см связную задачу.&lt;/li&gt;\n&lt;li&gt;если продукт &amp;quot;rgsb_pledge_true_every_ts&amp;quot;, то больше не посылать никакие проверки ТС в верификацию( розыск, ограничение, история и тд) то есть отключить ВСЕ, то есть для перехода а следующий стейт достаточно что проверка птс прошла успешно, и все&lt;/li&gt;\n&lt;li&gt;для БПМ поле vin и vin_2 верификации соответствует одному и тому же полю vin в системе авто, то есть если включено одно из полей, то туда мы отправляем данные на вход (и в нашей систем не будет никакого второго ВИН , это разделение только для верификации)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;тестировать и выкатывать вместе со связными&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585752892533&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;VR-4427&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;Z-1345&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1823&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;подзадача&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.kriventsova&quot;,&quot;fullName&quot;:&quot;Кривенцова Александра&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1920&quot;,&quot;entityId&quot;:&quot;86-80183&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Не подтягиваем внутренне наименовани ЮЛ в реквизиты&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585584660724&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1920&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В рамках связанной задачи 1588 должны были реализовать корректное отражение наименование ЮЛ реквизитов.&lt;br/&gt;Сейчас работает некорректно. Не подтягивается внтреннее наименование ЮЛ, если оно заполнено&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Отображать внутреннее название ЮЛ, не совпадающее с ДАДАТОЙ, на 8 шаге в ПП. Посылать в верификацию название ЮЛ, не совпадающих ДАДАТОЙ&lt;/p&gt;\n&lt;h2&gt;FRONT:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;На 8 шаге отображать &lt;strong&gt;Название&lt;/strong&gt; и &lt;strong&gt;Юр. лицо&lt;/strong&gt; в выпадалке реквизитов страховок (кнопка &lt;em&gt;Редактировать реквизиты&lt;/em&gt;)  из &lt;code class=\&quot;inline-code\&quot;&gt;insurances -&amp;gt; requisites -&amp;gt; title&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;На 8 шаге отображать &lt;strong&gt;Юр. лицо&lt;/strong&gt; в блоке &lt;em&gt;Счетов на оплату&lt;/em&gt; в части &lt;em&gt;Страховок&lt;/em&gt; из &lt;code class=\&quot;inline-code\&quot;&gt;insurances -&amp;gt; selected_requisite -&amp;gt; title&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В конструкторе счетов на оплату для свитча theNameOfTheRecipientMatches использовать &lt;code class=\&quot;inline-code\&quot;&gt;если НЕ ПУСТОЕ поле memory -&amp;gt; request -&amp;gt; insurances -&amp;gt; selected_requisite -&amp;gt; title, иначе название ЮЛ из ДАДАТЫ (ARGS-707)&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Тест-кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;На 8 шаге при выборе реквизитов страховок в названии и юр. лице должно отображаться  внутренние название Юр. лица, если оно заполнено в реквизитах&lt;/li&gt;\n&lt;li&gt;На 8 шаге должно отображаться внутреннее название юр. лица, если оно заполнено в реквизитах&lt;/li&gt;\n&lt;li&gt;В заданиях на верификацию (&amp;quot;Счета на оплату&amp;quot;) должен отображаться свитч с внутренним названием ЮЛ лица, если оно заполнено в реквизитах&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585752776837&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1934&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1935&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1588&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1935&quot;,&quot;entityId&quot;:&quot;86-80478&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Не подтягиваем внутренне наименование ЮЛ в реквизиты_БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585749630913&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1935&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Не подтягиваем внутренне наименовани ЮЛ в реквизиты&lt;br/&gt;В рамках связанной задачи 1588 должны были реализовать корректное отражение наименование ЮЛ реквизитов.&lt;br/&gt;Сейчас работает некорректно. Не подтягивается внтреннее наименование ЮЛ, если оно заполнено&lt;/p&gt;\n&lt;p&gt;Цель:&lt;br/&gt;Отображать внутреннее название ЮЛ, не совпадающее с ДАДАТОЙ, на 8 шаге в ПП. Посылать в верификацию название ЮЛ, не совпадающих ДАДАТОЙ&lt;/p&gt;\n&lt;p&gt;BPM:&lt;br/&gt;В конструкторе счетов на оплату для свитча theNameOfTheRecipientMatches использовать &lt;code class=\&quot;inline-code\&quot;&gt;если НЕ ПУСТОЕ поле memory -&amp;gt; request -&amp;gt; insurances -&amp;gt; selected_requisite -&amp;gt; title, иначе название ЮЛ из ДАДАТЫ (ARGS-707)&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585752747305&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1920&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1906&quot;,&quot;entityId&quot;:&quot;86-79976&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Рефакторинг bpm_composite&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585291406953&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1906&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В core.base_classes.base_composite.BaseComposite._constructor есть ад, тоска и печаль свзанная с функцией clean_strings.&lt;br/&gt;Что приводит к усложнению шаблонов /bpm_composite/templates и ненужным преобразованиям&lt;br/&gt;Решение:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;рефакторинг core.base_classes.base_composite.BaseComposite._constructor - удалить clean_strings&lt;/li&gt;\n&lt;li&gt;рефакторинг /bpm_composite/templates - изменить использование {{ value }} на {{ value|tojson }}&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585735127952&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55559&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1906&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_engine_version: feature/ARGS-1906\nbpm_ng_composite_version: feature/ARGS-1906\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1906\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585735116978,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1901&quot;,&quot;entityId&quot;:&quot;86-79862&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Передавать в Абакус тип занятости&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585220779673&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1901&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;в запросе в абакус &amp;quot;query&amp;quot;: &amp;quot;calc_credit_card_max_limit,auto_max_limit,and_related_rgsb&amp;quot;,&lt;br/&gt;необходим посылать тип занятости клиента&lt;br/&gt;брать из request-&amp;gt;job-&amp;gt;occupation_form_cid&lt;br/&gt;например &amp;quot;occupation_form_cid&amp;quot;: 1&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Выкатывать вместе со связной&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585726501189&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1897&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Окружение&quot;,&quot;value&quot;:[&quot;uat&quot;],&quot;valueId&quot;:[&quot;uat&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;anna.kravchenko&quot;,&quot;fullName&quot;:&quot;Анна Кравченко&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55060&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1901&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1901\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1901\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585296883393,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55192&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1901&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестовая заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16100/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/16100/details/&lt;/a&gt;&lt;br/&gt;В запросе в абакус:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;query&amp;quot;: &amp;quot;calc_credit_card_max_limit,auto_max_limit,and_related_rgsb&amp;quot;,\n...\n&amp;quot;occupation_form_cid&amp;quot;: 6,\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;брать из request-&amp;gt;job-&amp;gt;occupation_form_cid&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;occupation_form_cid&amp;quot;: 6,\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ФР=ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585554361523,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1783&quot;,&quot;entityId&quot;:&quot;86-77896&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Корректировка логики обработки результатов ФССП&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583303594503&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1783&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9027 Корректировка логики обработки результатов ФССП&lt;br/&gt;&lt;strong&gt;Бизнес -требования&lt;/strong&gt;&lt;br/&gt;Если в Долге ФССП отсутствует сумма, а в поле «Дата, причина окончания или прекращения ИП» указаны следующие причины прекращения:&lt;br/&gt;•\tст. 46 ч. 1 п. 2 – 7&lt;br/&gt;•\tст. 43 ч. 1 п. 1 – 2,&lt;br/&gt;то отказывать&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;В ответе по  ФССП(скоринг_0, скоринг_1, reverify) проверять параметр  &lt;code class=\&quot;inline-code\&quot;&gt;sign_of_termination&lt;/code&gt; , путь :&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;params-&amp;gt;sf-&amp;gt;features-&amp;gt;1-&amp;gt;bank_rgsb-&amp;gt;fssp-&amp;gt;sign_of_termination\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Если он&lt;code class=\&quot;inline-code\&quot;&gt; true&lt;/code&gt;, то отказывать с кодом BS003, передавать на бэк в партнерку причину отказа: &lt;code class=\&quot;inline-code\&quot;&gt;Отказ. Задолженность по ФССП&lt;/code&gt;&lt;br/&gt;Информация по коду отказа во вложении &amp;quot;Список_кодов_отказов&amp;quot; (как зашить в юзердату, что отправить в БКИ, что отправить на партнерку)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Юзердата&lt;/strong&gt;&lt;br/&gt;добавить новый код отказа BS003, информация во вложении  &amp;quot;Список_кодов_отказов&amp;quot;&lt;br/&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;прислать из скоринга sign_of_termination: true, проверить что произошел отказ BS003&lt;br/&gt;Проверить, что в партнерке корректно отразилась причина отказа&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585726125931&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Окружение&quot;,&quot;value&quot;:[&quot;uat&quot;],&quot;valueId&quot;:[&quot;uat&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9027_Корректировка отказов по ФССП.docx&quot;,&quot;id&quot;:&quot;88-26502&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26502?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY1MDJ8Z281YjFxSUR5SVI3NGZPYjdVV1BmaVI3M0Vy%0D%0Ac0JoQXVwZktlcXFJektmQQ0K%0D%0A&amp;updated=1583303610324&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_0503.xlsx&quot;,&quot;id&quot;:&quot;88-26594&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26594?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY1OTR8R0xkT004TjdiTTIzOTI3NE5tblJ0RW5xR1BY%0D%0AYmw2OGRwNkV3S1RIeG9UQQ0K%0D%0A&amp;updated=1583404513128&quot;},{&quot;value&quot;:&quot;image1584095289187.png&quot;,&quot;id&quot;:&quot;88-26822&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26822?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY4MjJ8S1ZzMXFMQlgtX1l5YWFIVnJWNGtoWlR3SGZL%0D%0AeGFfbVp0NVJwOWRaYXhkRQ0K%0D%0A&amp;updated=1584095289873&quot;},{&quot;value&quot;:&quot;image1584095308949.png&quot;,&quot;id&quot;:&quot;88-26823&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26823?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY4MjN8UXpQWmU4Q2RfbUpmZ0s2NHVScnR3VndnOXhS%0D%0AOXN4VHBkOE9Da1V1UUM5dw0K%0D%0A&amp;updated=1584095309540&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53577&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1783&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1783&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1783&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584081295666,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53592&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1783&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1:  (Добавив данные в фейкер, кредит не должен быть одобрен) ОР == ФР.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил в &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/7\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/7&lt;/a&gt; строку, добавив следующий параметр:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26822?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjY4MjJ8THA3WFJGcDlXN3J1YV8zdGRMNEd5UWp6RnZF%0D%0AWFZzMi0wdVk0Sng4SmZ5SQ0K%0D%0A&amp;amp;updated=1584095289873\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26822\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку со следующими параметрами:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019924\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019924&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Прошел верификацию документов.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Отказ.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26823?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjY4MjN8TWJ6WWE5a2cybnQxSVJJLXRKeVFjNmRpNXZW%0D%0AUHROc01KOXFZdkgydExSaw0K%0D%0A&amp;amp;updated=1584095309540\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26823\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&amp;quot;reject&amp;quot;: {&lt;br/&gt;-&amp;quot;info&amp;quot;: [&lt;br/&gt;&amp;quot;Отказ. Задолженность по ФССП&amp;quot;&lt;br/&gt;],&lt;br/&gt;-&amp;quot;codes&amp;quot;: [&lt;br/&gt;&amp;quot;BS003&amp;quot;&lt;br/&gt;],&lt;br/&gt;&amp;quot;status&amp;quot;: &amp;quot;DECLINE&amp;quot;,&lt;br/&gt;&amp;quot;is_cascade&amp;quot;: false&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14681/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14681/details/&lt;/a&gt;&lt;br/&gt;ОР == ФР.&lt;/p&gt;\n&lt;p&gt;Тест 2 изменение в скоринг 1 ОР==ФР:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил в &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/6\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/6&lt;/a&gt; строку, добавив следующий параметр: sign_of_termination&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019992\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019992&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;прошел все проверки верификации паспорта.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Отказ. Задолженность по ФССП.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14741/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14741/details/&lt;/a&gt;&lt;br/&gt;ОР==ФР.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 3 изменение в ресивер:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/20\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/20&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Использовал уже одобренную заявку: &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30018752\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30018752&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Ввел все данные автомобиля, началась проверка автомобиля.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Пришел отказ. Отказ. Задолженность по ФССП.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13977/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13977/details/&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584095337858,&quot;updated&quot;:1584114005379,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1498&quot;,&quot;entityId&quot;:&quot;86-72322&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;ФУТС&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577088829717&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1498&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;1145: Необходимо предоставить возможность в качестве информации о ТС прикладывать ФУТС, в котором отсутствует номер и дата выдачи.&lt;br/&gt;ФУТС - форма учета транспортного средства.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Задача&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;br/&gt;если в заявке отсутствуют госпрограммы: government_program = null&lt;br/&gt;Для типа подтверждения ТС &lt;strong&gt;Инфописьмо&lt;/strong&gt; ПТС/ЭПТС (vehicle_data_source:info_mail_pts и vehicle_data_source:info_mail_epts)&lt;br/&gt;Сделать проверку поля &amp;quot;Номер ПТС/ЭПТС&amp;quot; необязательной&lt;br/&gt;Добавить условие,что если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; не заполнено,то поле &amp;quot;Дата выдачи&amp;quot; также необязательно&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;Если в полях &lt;code class=\&quot;inline-code\&quot;&gt;number,series&lt;/code&gt; &lt;strong&gt;для ПТС&lt;/strong&gt; и  &lt;code class=\&quot;inline-code\&quot;&gt;epts_number&lt;/code&gt;  &lt;strong&gt;для ЭПТС&lt;/strong&gt; пришли пустые значения, то отправить блокировку полей(параметр disabled) на верификацию &amp;quot;Номер ПТС/ЭПТС&amp;quot; и &amp;quot;Дата выдачи&amp;quot;(issued_at)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверить корректность работы задачи ТОЛЬКО для Инфописьма. Подтверждение через ПТС/ЭПТС изменения затрагивать не должны&lt;/li&gt;\n&lt;li&gt;Проверить,что в случаях,когда номер и дата выдачи присутствуют - в верификации поля не блокируются и проверка данных происходит корректно&lt;/li&gt;\n&lt;li&gt;Проверить,что&lt;br/&gt;-если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; заполнено, а &amp;quot;Дата выдачи&amp;quot; не заполнено- выдается ошибка&lt;br/&gt;-если наоборот - не выдается (при этом на верификации поле &amp;quot;Дата выдачи&amp;quot; заблокировано для ввода данных вместе с полем &amp;quot;Номер ПТС/ЭПТС&amp;quot; )&lt;/li&gt;\n&lt;li&gt;Проверить, что данное условие работает ТОЛЬКО в случае отсутствия в заявке гос программы. Если гос программа в заявке присутствует- все поля валидируются. Связано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1566\&quot; title=\&quot;Проверка даты выдачи ПТС\\ЭПТС\\инф письма для госпрограммы\&quot; data-issue-id=\&quot;86-73546\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1566&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;12&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585726070521&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Окружение&quot;,&quot;value&quot;:[&quot;uat&quot;],&quot;valueId&quot;:[&quot;uat&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1579852994899.png&quot;,&quot;id&quot;:&quot;88-24965&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQ5NjV8OXJUcmhlNmI5Zjc0SVNKLW41VF9VNW5OQXlj%0D%0AYXM2NlhNLUJpSTFNYW9Pdw0K%0D%0A&amp;updated=1579852995583&quot;},{&quot;value&quot;:&quot;image1579853145593.png&quot;,&quot;id&quot;:&quot;88-24966&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8SEZDYzVvNDdOV3dYVjVnRVlvY0d5ek1yRDVJ%0D%0AdVZvT196QTFfVlJRX3pKVQ0K%0D%0A&amp;updated=1579853146182&quot;},{&quot;value&quot;:&quot;image1579862047901.png&quot;,&quot;id&quot;:&quot;88-24982&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8Vlh6NUVpQkp1STFpb0RZR21QZTF3NjVNMUsz%0D%0AU09ZZVluSXU5UVp2eDE4SQ0K%0D%0A&amp;updated=1579862048632&quot;},{&quot;value&quot;:&quot;image1585309196398.png&quot;,&quot;id&quot;:&quot;88-27374&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27374?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczNzR8aS1ZY05pR2pZcWxyTlhQYzMta2V1eFU5MUdD%0D%0ASkZaS1JwOG5kQzBFbWw3WQ0K%0D%0A&amp;updated=1585309197031&quot;},{&quot;value&quot;:&quot;image1585309228344.png&quot;,&quot;id&quot;:&quot;88-27375&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27375?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczNzV8NE1tQ2tfTGNScTUwMGxfWVNLRzAwRTA4VzJJ%0D%0AcThQa21tcG1aTV9xUU85dw0K%0D%0A&amp;updated=1585309228978&quot;},{&quot;value&quot;:&quot;image1585309430955.png&quot;,&quot;id&quot;:&quot;88-27376&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27376?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczNzZ8Wnp4dndkU0xuc3luMVlaNnpoR0pxa1hlRGRr%0D%0ARy1OWEVFSDRkUkNCdFJQWQ0K%0D%0A&amp;updated=1585309431630&quot;},{&quot;value&quot;:&quot;image1585309484364.png&quot;,&quot;id&quot;:&quot;88-27377&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27377?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczNzd8RTBLUkJubkJtSFhkaFF3cko3VHRiOHpjTnI1%0D%0AbDRnZEUzV092U25KMWtsaw0K%0D%0A&amp;updated=1585309485170&quot;},{&quot;value&quot;:&quot;image1585309766391.png&quot;,&quot;id&quot;:&quot;88-27379&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27379?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczNzl8elB0eTlRUVh6MW9HcENoQkVFQUViQl9yTXVj%0D%0AUVhJT283SmZtWlVCRE5Sdw0K%0D%0A&amp;updated=1585309767114&quot;},{&quot;value&quot;:&quot;image1585310093980.png&quot;,&quot;id&quot;:&quot;88-27381&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27381?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczODF8N0ZBYW9uYXgybjBmUC1IV0lZUGFaNl9sdklK%0D%0AVjhwZDg3eU41MDhmYjVSdw0K%0D%0A&amp;updated=1585310094781&quot;},{&quot;value&quot;:&quot;image1585310108427.png&quot;,&quot;id&quot;:&quot;88-27382&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27382?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczODJ8b2p3cnJWOUxQRURkNTh0c0I5VDF3REJYdmdo%0D%0AUVVMZWpBSXl6MkNtSmNmaw0K%0D%0A&amp;updated=1585310109051&quot;},{&quot;value&quot;:&quot;image1585311870215.png&quot;,&quot;id&quot;:&quot;88-27384&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27384?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczODR8amFlM0NDYzZfbXZOcDYwX19XNEVlVi0wck56%0D%0AX1l1eWlPZlB5ZkE3dVdtbw0K%0D%0A&amp;updated=1585311870849&quot;},{&quot;value&quot;:&quot;image1585311883092.png&quot;,&quot;id&quot;:&quot;88-27385&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27385?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczODV8UTlfQ21PNUdrbWNET096UF9aRGFwQnRkU1JF%0D%0ARGFtYnRKbF9lUHZaanc4Zw0K%0D%0A&amp;updated=1585311883665&quot;},{&quot;value&quot;:&quot;image1585311900719.png&quot;,&quot;id&quot;:&quot;88-27386&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27386?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczODZ8a09yU1BRak50d2U3OXo0R3Vvbi1oQ3FHSE9Z%0D%0AMnpoVWpfUUhPb0dDOGRVUQ0K%0D%0A&amp;updated=1585311901293&quot;},{&quot;value&quot;:&quot;image1585311911892.png&quot;,&quot;id&quot;:&quot;88-27387&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27387?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczODd8Q3FxVFJib0FfNjlOUFhqZ3JpOFdTQk5UZlVC%0D%0AZ3pkQ29YSGFqMGZURkVZNA0K%0D%0A&amp;updated=1585311912464&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48264&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Какой формат документа?&lt;br/&gt;Сколько страниц, какие поля?&lt;br/&gt;Что нужно проверять по данному документу?&lt;br/&gt;К какому продукту относится? То же самое, как и информационные письма?&lt;/p&gt;\n&lt;p&gt;Доработки следующие:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;6-й шаг добавить новую кнопку&lt;/li&gt;\n&lt;li&gt;Выводить список полей для ФУТС&lt;/li&gt;\n&lt;li&gt;Отправлять с бэка на bpm&lt;/li&gt;\n&lt;li&gt;Отправлять на верификацию и принимать результат проверки&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577097266464,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48710&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;При выборе закладки «Информационное письмо ПТС» или «Информационное письмо ЭПТС» сделать необязательными поля «Номер ЭПТС/ ПТС» и дата выдачи в случае отсутствия в скане/ фото данной информации.&lt;br/&gt;Если в приложенном документе заполнены поля Номер и дата выдачи ЭПТС/ ПТС, то в заявке они также должны быть заполнены.&lt;br/&gt;Обязательными для ввода и верификации оставить следующие поля:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; VIN\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Год изготовления ТС\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Модель, № двигателя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Номер шасси\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Цвет \n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Наличие подписи и печати дилера/ производителя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577780207854,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49338&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветка бэк &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579180707008,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49424&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;BPM&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sm, composite: feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579263091695,&quot;updated&quot;:1579263098436,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49933&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Поля заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/&lt;/a&gt;&lt;br/&gt;1. Даты выдачи и номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjQ5NjV8SmRYREpicnFJa0U4SWRoYWpldW1FS1FrcTNP%0D%0AVHE1eXI2Ymh1eUVDS1d1SQ0K%0D%0A&amp;updated=1579852995583\&quot;/&gt;&lt;/div&gt;&lt;br/&gt;2. Дата выдачи есть, номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8ZW41N05BaWJVbEs4SWs4U0xYbFE4aFM2dmRj%0D%0AbF8tLU5xel9MUkVqY0lnRQ0K%0D%0A&amp;updated=1579853146182\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579854186741,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49963&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Инфо письмо ЭПТС - при заполненных полях серия и номер и Дата выдачи поля не заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;entity=Document&amp;amp;id=75317\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;entity=Document&amp;id=75317&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8Qks2T2Vfb1BNZ2RrQmV3Zm5zd1lfeWJaaFpZ%0D%0ANjBnNFRXaHZIUFVyazJuRQ0K%0D%0A&amp;updated=1579862048632\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579862057441,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54413&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/Dmitry_Sinelnikov\&quot; title=\&quot;Дмитрий Синельников\&quot; data-user-id=\&quot;24-47\&quot;&gt;@Дмитрий Синельников&lt;/a&gt; выкатите задачу на препрод плиз&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584781849768,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54947&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;по задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1620\&quot; title=\&quot;Госпрограмма\&quot; data-issue-id=\&quot;86-74755\&quot; class=\&quot;issue-resolved\&quot;&gt;args-1620&lt;/a&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Если на 6-м шаге выбрана госпрограмма (не пустое поле government_program_type), то&lt;br/&gt;Не давать перейти на следующий шаг, если&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;выбрано не ПТС или ЭПТС&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;а по этой&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;если в заявке отсутствуют госпрограммы: government_program = null&lt;br/&gt;Для типа подтверждения ТС Инфописьмо ПТС/ЭПТС (vehicle_data_source:info_mail_pts и vehicle_data_source:info_mail_epts)&lt;br/&gt;Сделать проверку поля &amp;quot;Номер ПТС/ЭПТС&amp;quot; необязательной&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;итого Номер ПТС/ЭПТС для писем валидируется никогда&lt;/p&gt;\n&lt;p&gt;ветка пп &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585216645620,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55113&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Проверить, что данное условие работает ТОЛЬКО в случае отсутствия в заявке гос программы. Если гос программа в заявке присутствует- все поля валидируются. Связано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1566\&quot; title=\&quot;Проверка даты выдачи ПТС\\ЭПТС\\инф письма для госпрограммы\&quot; data-issue-id=\&quot;86-73546\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1566&lt;/a&gt;&lt;br/&gt;ФР == ОР&lt;/p&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27377?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNzd8V2ZjUXNaS0k5NzlxYXdIZ0t1TXRVLVJYazVj%0D%0AMHdqX0NPTS16MVNuRkt3aw0K%0D%0A&amp;amp;updated=1585309485170\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27377\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585309511244,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55115&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестовая заявка - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15787/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15787/details/&lt;/a&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Проверить,что&lt;br/&gt;-если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; заполнено, а &amp;quot;Дата выдачи&amp;quot; не заполнено- выдается ошибка&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27374?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNzR8SzRPS3Z5Z3NSaW5fbDhzSkFTVTI2blE5SFJk%0D%0ANi1aS3NJY2NyYzBCQTJZOA0K%0D%0A&amp;amp;updated=1585309197031\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27374\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;-если наоборот - не выдается (при этом на верификации поле &amp;quot;Дата выдачи&amp;quot; заблокировано для ввода данных вместе с полем &amp;quot;Номер ПТС/ЭПТС&amp;quot; )&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27375?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNzV8d1pyTEhSbW9jR25iZlRsOFN5cEpKLU42UHd4%0D%0AMzhqcGtLVk9pSkNxN0JLRQ0K%0D%0A&amp;amp;updated=1585309228978\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27375\&quot; /&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;issued_at&amp;quot;: {\n&amp;quot;disabled&amp;quot;: true\n},\n...\n-&amp;quot;epts_number&amp;quot;: {\n&amp;quot;disabled&amp;quot;: true\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;На верификации поля с номером ЭПТС и датой выдачи заблокированы.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27376?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNzZ8X2hzdGVnVnpBdTZqSVFFQVRvekt5TWptX2Zi%0D%0AeFhJSk11dTZ0c1Z0ODlEOA0K%0D%0A&amp;amp;updated=1585309431630\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27376\&quot; /&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Проверить корректность работы задачи ТОЛЬКО для Инфописьма. Подтверждение через ПТС/ЭПТС изменения затрагивать не должны&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Для ПТС и ЭПТС валидация по номеру и дате выдачи присутствует.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27379?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNzl8YzVVQXdnTWZ4M3VGVU9QZG1uQnRpblVpU3o2%0D%0AZnNnY2xWSzVKZlBVclJuQQ0K%0D%0A&amp;amp;updated=1585309767114\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27379\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585309801441,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55118&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Проверить,что в случаях,когда номер и дата выдачи присутствуют - в верификации поля не блокируются и проверка данных происходит корректно&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27381?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczODF8c0RKSnlBVmRnVUg3R3R3bWhMTlBVWVJpVnV3%0D%0AdU1icWVKTG9QSDVKTE5iUQ0K%0D%0A&amp;amp;updated=1585310094781\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27381\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27382?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczODJ8UGRWYXoydjlodkkxTzdqeUo1X1hKemhNc29Y%0D%0Ac1BuZjBlWEFfVkVUWm90Zw0K%0D%0A&amp;amp;updated=1585310109051\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27382\&quot; /&gt;&lt;br/&gt;ФР == ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585310114498,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55124&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 3 (инф. Письмо ПТС) ОР==ФР:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Взял заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020881\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020881&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Ввел следующие данные:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27384?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczODR8VC1qN1ZQLUNkUTVmR2RXb0F6VVFNXy1ick9k%0D%0AN2dOdnlKTDVEbUthSVRKdw0K%0D%0A&amp;amp;updated=1585311870849\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27384\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Началась верификация автомобиля:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27385?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczODV8SG80TkR5bmRacmkydTJYUVdNazhuempFTEZV%0D%0ATHFMXzhZTW9sRTlwVDF1OA0K%0D%0A&amp;amp;updated=1585311883665\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27385\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Верификация успешно пройдена.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 4 (инф. Письмо ЭПТС) ОР==ФР :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Взял заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020236\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020236&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Ввел следующие данные:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27386?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczODZ8RVktMFVma3B2Y180UDhPZlhNNW9mbGV3MTZu%0D%0AcmlTV0xvY29ZVU45U1NNWQ0K%0D%0A&amp;amp;updated=1585311901293\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27386\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Началась верификация автомобиля:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27387?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczODd8V3VONl9ZZzY4STlwWGhqNUJueWtPVjBoOVM3%0D%0AWGwwQlNfcHBiV0ZCdy1wRQ0K%0D%0A&amp;amp;updated=1585311912464\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27387\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Верификация успешно пройдена.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585311930257,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1860&quot;,&quot;entityId&quot;:&quot;86-79020&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Зашить в юзердату одобрение&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584604862032&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1860&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Для реализации перекрестной проверки Авто и КН необходимо использовать одобрение заявок с других проектов&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БПМ-Юзердата&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо в юзердате создать новый стейт у заявки&lt;br/&gt;Одобрение - &lt;code class=\&quot;inline-code\&quot;&gt;approval&lt;/code&gt;&lt;br/&gt;Дата одобрения &lt;code class=\&quot;inline-code\&quot;&gt;date_approval&lt;/code&gt;&lt;br/&gt;и заполнять их по следующей логике:&lt;br/&gt;при переходе заявки в&lt;code class=\&quot;inline-code\&quot;&gt;decision_state&lt;/code&gt;, отправлять в юзердату сообщение о том что клиента одобрили, она обновить стейт&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;`date_approval` : 'привычный формат даты для юзердаты' время  определить в таблице `events` по `created_at`\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;далее они будут использованы в фичах связной задачи&lt;br/&gt;логика, что если по заявке произошел отказ или клиент отказался или кредит выдан и тогда она заявка мняет свой стейт - остается&lt;/p&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;для всех заявок у которых был пройден  или в текущем их состоянии &lt;code class=\&quot;inline-code\&quot;&gt;decision_state&lt;/code&gt; ( исключить заявки у которых стейты уже- отказ и выдан в юзердате)  записать стейт  &lt;code class=\&quot;inline-code\&quot;&gt;approval&lt;/code&gt;&lt;br/&gt;время  определить в таблице &lt;code class=\&quot;inline-code\&quot;&gt;events&lt;/code&gt; по &lt;code class=\&quot;inline-code\&quot;&gt;created_at&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;одобрение в юзердату посылать 1 раз , при последующих переходах в decision_state, больше не отправлять сообщение&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;одобрить заявку, послалось сообщение в юзердату&lt;br/&gt;результат: ответ сервиса без ошибок&lt;br/&gt;работу фичей тестировать в связной задаче&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Выкатывать вместе со связными задачами&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585724254453&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1862&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1785&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54803&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1860&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветки:&lt;br/&gt;userdata_ng: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1860&lt;/code&gt;&lt;br/&gt;userdata_ng_admin: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1860&lt;/code&gt;&lt;br/&gt;bpm_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1860&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1860&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585130262729,&quot;updated&quot;:1585226859523,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;}]}, {&quot;id&quot;:&quot;ARGS-1687&quot;,&quot;entityId&quot;:&quot;86-76121&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Баг в платежках для сторонних СУ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1581424967786&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1687&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В платежках для сторонних СУ не заполняется номер полиса, пример из заявки &lt;a href=\&quot;https://bpm-ng-app-1.rgsb-prod.cloud.b-pl.pro/admin/bpm/walker/156518/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;3316189&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Оплата страховой премии по договору № %s от 10.02.2020 г. АНЧУГОВ НИКОЛАЙ ВЯЧЕСЛАВОВИЧ. НДС не облагается.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Причина: в рамках задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1250\&quot; title=\&quot;Убрать проверку сторонних СУ\&quot; data-issue-id=\&quot;86-68622\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1250&lt;/a&gt; убрали проверку полиса для таких страховок.&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Изменить формулировку в назначении платежа для доп. услуг, отсылаемое в сообщение pay_request в cfd:&lt;/p&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;p&gt;Для страховок &lt;code class=\&quot;inline-code\&quot;&gt;incurance_type_cid&lt;/code&gt; in (5, 6, 9, 10) выгружать назначение платежа согласно новому шаблону.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Как сейчас:&lt;/strong&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Оплата страховой премии по договору № %s от 25.03.2020 г. БАННИКОВА ТАТЬЯНА ВЛАДИМИРОВНА. НДС НЕ ОБЛАГАЕТСЯ.&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Как надо:&lt;/strong&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;Название_страховки. Оплата от 25.03.2020 г. БАННИКОВА ТАТЬЯНА ВЛАДИМИРОВНА. НДС НЕ ОБЛАГАЕТСЯ.&lt;/code&gt; (меняем только часть &lt;del&gt;Оплата страховой премии по договору № %s&lt;/del&gt;  от 25.03.2020 г. БАННИКОВА ТАТЬЯНА ВЛАДИМИРОВНА. НДС НЕ ОБЛАГАЕТСЯ.)&lt;/p&gt;\n&lt;p&gt;где &lt;strong&gt;Название_страховки&lt;/strong&gt; список:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;id = 5, &amp;quot;Сервисная или дорожная карта&amp;quot;&lt;/li&gt;\n&lt;li&gt;id = 6, &amp;quot;Продленная гарантия&amp;quot;&lt;/li&gt;\n&lt;li&gt;id = 9, &amp;quot;Дополнительное оборудование&amp;quot;&lt;/li&gt;\n&lt;li&gt;id = 10, &amp;quot;Иное&amp;quot;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Тест - кейс:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В сообщении pay_request в cfd назначение платежа должно формировать согласно описанию таска для страховок с &lt;code class=\&quot;inline-code\&quot;&gt;incurance_type_cid&lt;/code&gt; in (5, 6, 9, 10)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Все виды сообщений:\nid = 5, &amp;quot;Сервисная или дорожная карта&amp;quot; - Сервисная или дорожная карта. Оплата от 25.03.2020 г. БАННИКОВА ТАТЬЯНА ВЛАДИМИРОВНА. НДС НЕ ОБЛАГАЕТСЯ.\nid = 6, &amp;quot;Продленная гарантия&amp;quot; - Продленная гарантия. Оплата от 25.03.2020 г. БАННИКОВА ТАТЬЯНА ВЛАДИМИРОВНА. НДС НЕ ОБЛАГАЕТСЯ.\nid = 9, &amp;quot;Дополнительное оборудование&amp;quot; - Дополнительное оборудование. Оплата от 25.03.2020 г. БАННИКОВА ТАТЬЯНА ВЛАДИМИРОВНА. НДС НЕ ОБЛАГАЕТСЯ. \n* id = 10, &amp;quot;Иное&amp;quot; - Иное. Оплата от 25.03.2020 г. БАННИКОВА ТАТЬЯНА ВЛАДИМИРОВНА. НДС НЕ ОБЛАГАЕТСЯ.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585670042114&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54524&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1687&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/alexander.kan\&quot; title=\&quot;Александр Кан\&quot; data-user-id=\&quot;24-320\&quot;&gt;@Александр Кан&lt;/a&gt; решали данную проблему в рамках задачи по назначению платежа&lt;br/&gt;с НДС?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584967785599,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54532&quot;,&quot;author&quot;:&quot;alexander.kan&quot;,&quot;authorFullName&quot;:&quot;Александр Кан&quot;,&quot;issueId&quot;:&quot;ARGS-1687&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt;  не решали&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584968900403,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55463&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1687&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1687\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1687\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585670030370,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1922&quot;,&quot;entityId&quot;:&quot;86-80194&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Чистка кода BPM от legacy (31.03.2020)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585639365409&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1922&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Проверить весь код на наличие пометок об удалении/изменении кода с датой меньше 31.03.2020.&lt;br/&gt;Внести изменения, указанные в коментариях.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585656314579&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55372&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1922&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1922\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1922\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585656303566,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1880&quot;,&quot;entityId&quot;:&quot;86-79398&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;BPM Распознавание договоров о приемной семье, опекунах&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584956620637&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1880&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Обрабатывать документы, отличные от свидетельства о рождении/усыновлении для Госпрограммы-Семейный&lt;/p&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object &lt;/code&gt; сохранять новый тип вложений в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В начале шага &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; изменить проверку &lt;strong&gt;Свидетельство о рождении/усыновлении&lt;/strong&gt; (реализовано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;) на конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcyMzB8RHUxLTNOel9hTVNMcU1TUERNWFFTSHlzS1V6%0D%0AU3Q0TFk2aGNUYk1fZVFScw0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список изменений:\n1. Заменил название свитча # логика срабатывания свитча остается прежней\n2. Изменил название задания \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В начале шага  &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcyMzB8RHUxLTNOel9hTVNMcU1TUERNWFFTSHlzS1V6%0D%0AU3Q0TFk2aGNUYk1fZVFScw0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; И &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27231?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcyMzF8TWxCcU9rUlFVUGp0ZlMtTUtPOE9HWkF4RklH%0D%0AcTlCUmd5dFkzVDRZMTdGYw0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27232?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcyMzJ8STBRM00wZmtSV29GVjROd0JRVXpzbUJFN3hr%0D%0AVnMzczNBVzNJMDZQcTQxdw0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ждать ответ от верификации&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Для всех конструкторов&lt;/strong&gt; если сработал свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt; отправлять на доработку с ошибкой &amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot; (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;После ответа верификации делать дополнительные проверки (описаны ниже) если проверка пройдена, то одобрять семейную программу, иначе посылать доработку (текст ошибок описан ниже) (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Условия успешной проверки:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    (parent_last_name_1 &amp;amp; parent_first_name_1 == last_name &amp;amp; first_name ИЛИ parent_first_name_1 &amp;amp; parent_patronymic_name_1 == first_name &amp;amp; patronymic_name) И (parent_last_name_2 &amp;amp; parent_first_name_2 = last_name &amp;amp; first_name ИЛИ parent_first_name_2 &amp;amp; parent_patronymic_name_2 = first_name &amp;amp; patronymic_name):\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;ФИО родителя не совпадает с ФИО из анкеты&amp;quot;\n\nЕсли   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 216 ИЛИ которых целое_число_месяцев(текущая дата - \n           date_of_birth_1)  &amp;lt; 216) &amp;gt;= 2 :\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Один из детей старше 17-ти лет. Приложите другой документ&amp;quot;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Владимир Гончарук&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;vladimir.goncharuk&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585578381701&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1822&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1840&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Шаг 5, госпрограмма 1 (РГС) L (1).png&quot;,&quot;id&quot;:&quot;88-27116&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27116?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxMTZ8VDZqNlNYR00yMTJfYlBlX25XaFRLeHJlVHh6%0D%0AMGtwQTVwSVhYTTRGNXpDcw0K%0D%0A&amp;updated=1584956620645&quot;},{&quot;value&quot;:&quot;конструктор - договор и свидетельство (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27223&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27223?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMjN8WkNheXNfWXJJblRvRFdqTzRxVGt1NFRSdTZH%0D%0ASmhLTzktdmlHNzdla19DYw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27224&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27224?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMjR8LXd0aEd3dWhpUEcwM2VvRERweGgxWDhiMGcw%0D%0AWHJ2MTZ1MldPN1ZUODlnVQ0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27225&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27225?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMjV8ZmVNUV8tTTNBMHB5VzNwWU1Fb1pVb2tWUk1q%0D%0ARThHTkQ1Vi1vbUt6dElEZw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27227&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27227?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMjd8Z1phYmFuOFZZTlMyeXpzRmtYUXVYSUIwS2JP%0D%0ARlNFRGhjSHVZZW5xUHlCdw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конуструктор - свидетельство (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27228&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27228?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMjh8eFRzc0ZocHc0MXR0MkJmTlU3Nl83Tnl6UFdl%0D%0AWjFjS0NzcWM1VlZibzJVaw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - договор и свидететльство (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27229&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27229?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMjl8RWdqMmZPVENiX2hlMUdrelViRllKeWp6RGhx%0D%0Ad0UtRi1BbmZmQ2szS1Zmdw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27230&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMzB8ZzdDbUp0S2Q5c0xFRlJiaWVUTm1GUnRMYndq%0D%0ALXZxdm5GcnFHNjFNMVhEWQ0K%0D%0A&amp;updated=1585131097983&quot;},{&quot;value&quot;:&quot;конструкто - договор и свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27231&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27231?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMzF8bG5GQ05xbXNaR2gtNVZFZTdSd1B3WkQ3eEFi%0D%0ARWxMNEVBUHd4S1ZzUUZQTQ0K%0D%0A&amp;updated=1585131097983&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье.txt&quot;,&quot;id&quot;:&quot;88-27232&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27232?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyMzJ8RlZ6M1A5ZGhXaUI3Q0tPbm81OVBTUXVZQWxy%0D%0ALWdjRXotZGhzSDhCZnJzRQ0K%0D%0A&amp;updated=1585131097983&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54805&quot;,&quot;author&quot;:&quot;alexander.kan&quot;,&quot;authorFullName&quot;:&quot;Александр Кан&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;заменил конструктор для двух договоров о приемной семье - убрал селектор&lt;/li&gt;\n&lt;li&gt;добавил ответы для каждого&lt;/li&gt;\n&lt;li&gt;для полей фио в каждом конструкторе нужно подавать на вход данные из анкеты&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585131076405,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54888&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm_ng_composite_version: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1880\&quot; title=\&quot;BPM Распознавание договоров о приемной семье, опекунах\&quot; data-issue-id=\&quot;86-79398\&quot;&gt;ARGS-1880&lt;/a&gt;&lt;br/&gt;bpm_ng_state_machines_versions:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;version_name: pre_release&lt;br/&gt;import_name: sm1&lt;br/&gt;name: sm_rgsb&lt;br/&gt;version_tag: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1880\&quot; title=\&quot;BPM Распознавание договоров о приемной семье, опекунах\&quot; data-issue-id=\&quot;86-79398\&quot;&gt;ARGS-1880&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585150645572,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55259&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В рамках долго разработчика нужно заменить доступ к параметрам из request: на verified: и поправить тесты.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585573810741,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1899&quot;,&quot;entityId&quot;:&quot;86-79828&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Код отказа по мегафону&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585212191416&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1899&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h2&gt;Цель&lt;/h2&gt;\n&lt;p&gt;Запрашивать новый параметр в Мегафоне. Добавить новый отказ по Мегафону&lt;/p&gt;\n&lt;h2&gt;Userdata:&lt;/h2&gt;\n&lt;p&gt;Добавить новый код  отказа (см. приложенный файл с кодами отказов):&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;код &lt;code class=\&quot;inline-code\&quot;&gt;MEG004&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;описание отказа &lt;code class=\&quot;inline-code\&quot;&gt;Cрок жизни абонентского номера менее 6 месяцев и максимальный средне месячный платёж за период менее 100 рублей&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;сообщение на фронт &lt;code class=\&quot;inline-code\&quot;&gt;Отказ. Несоответствие политике банка&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;мораторий 90 дней&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В запросе &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.process&lt;/code&gt; передавать дополнительный параметр &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; varaibles == &amp;quot;PAY_MAX&amp;quot;&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Обрабатывать из ответа &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.done&lt;/code&gt;  в блоке &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;pay_max&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Если&lt;/strong&gt; &lt;em&gt;в ответе&lt;/em&gt;  &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;(params -&amp;gt; lifetime_bin -&amp;gt; value) in (0, 1, 2) AND (params -&amp;gt; pay_max -&amp;gt; value) in (0,  1)&lt;/code&gt;, то переводить заявку в отказ с кодом &lt;code class=\&quot;inline-code\&quot;&gt;MEG004&lt;/code&gt; - передавать ошибку в ПП &amp;quot;Отказ. Несоответствие политике банка&amp;quot;&lt;br/&gt;, Иначе дальше по процессу&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585556650703&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9030_Новый код отказа Мегафон авто.doc&quot;,&quot;id&quot;:&quot;88-27295&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27295?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyOTV8ZE9MZnF6ekR2UVRhb2VOQ0tKX09XakZLblFO%0D%0AUmdCc2VsRm1zWnJyTTU4bw0K%0D%0A&amp;updated=1585212187858&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_1110.xlsx&quot;,&quot;id&quot;:&quot;88-27314&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27314?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczMTR8aFh1anVOem84ZXJnMGtyTzVnalZyVTNxbDZO%0D%0AbW9wUDY3bjFzcEdpcUZzWQ0K%0D%0A&amp;updated=1585218847741&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-55066&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1899&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt; это касается всех номеров(основного и дополнительного) или только основного?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585300307562,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55079&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1899&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Только основного. На текущий момент с банком такая договоренность&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585303511313,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55160&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1899&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Сделал часть касательно BPM т.к к Userdata у меня пока нет доступов&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_composite_version: feature/ARGS-1899\nbpm_ng_state_machines_versions:\n    version_name: pre_release\n    import_name: sm1 \n    name: sm_rgsb\n    version_tag: feature/ARGS-1899\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585321816362,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1794&quot;,&quot;entityId&quot;:&quot;86-77993&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Запуск программ кредитования для сотрудников Банка зарплатных клиентов&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583390118712&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1794&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Спринт 5 8723_Запуск программ кредитования для сотрудников Банка зарплатных клиентов&lt;br/&gt;Цель в Спринте 4: 10.03.2020 задача проанализирована (должны быть проанализированы совместно с аналитиками на стороне ЦФТ), реализация согласована с Заказчиком и задача переведена в &amp;quot;Ready for Development&amp;quot;&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Добавление новых типов клиентов с льготными условиями кредитования&lt;/p&gt;\n&lt;h2&gt;FRONT&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить отображение радиобатона в калькуляторе с типами клиентов - &amp;quot;Стандартные условия&amp;quot;, &amp;quot;Сотрудник банка&amp;quot;, &amp;quot;Зарплатный клиент&amp;quot;&lt;br/&gt;&lt;strong&gt;По умолчанию&lt;/strong&gt; выбраны &amp;quot;Стандартные условия&amp;quot; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27372?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNzJ8aTlpZzV5b0w5MDRyN0E0dXh3eFZpODItYXc1%0D%0AS0RPNVFoekRNWWdVbVVkaw0K%0D%0A&amp;amp;updated=1585308774909\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;(макет во вложении)&lt;/a&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27168?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcxNjh8M2FUSkpaZG5yanptUnRBcUpvZnlCSmtOSHFr%0D%0AS2t6T1JqWTJUbTIyR3I2SQ0K%0D%0A&amp;amp;updated=1585044643401\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27168\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Отправлять на BACK параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если выбраны &amp;quot;Стандартные условия&amp;quot; &lt;code class=\&quot;inline-code\&quot;&gt;client_type = standart&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;если выбран &amp;quot;Сотрудник банка&amp;quot;, то &lt;code class=\&quot;inline-code\&quot;&gt;client_type = employee&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;если выбран &amp;quot;Зарплатный клиент&amp;quot;, то &lt;code class=\&quot;inline-code\&quot;&gt;client_type = salary&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В калькуляторе обрабатывать ошибку для новых типов клиентов (пункт 8. back - калькулятор)&lt;/li&gt;\n&lt;li&gt;На 5 шаге в выпадайке отображать еще один документ -  &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups -&amp;gt; 50: Зарплатные перечисления&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;client_type in (employee, salary)&lt;/code&gt;, то на 5 шаге по умолчанию отображать  &amp;quot;Зарплатные клиенты&amp;quot;. Если был изменен тип подтверждающего доход документа нужно сбрасывать выбранные в калькуляторе тип клиента на стандартный и посылать обновленное значение на BACK (&lt;code class=\&quot;inline-code\&quot;&gt;client_type = standart&lt;/code&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создать параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt; в блоке &lt;code class=\&quot;inline-code\&quot;&gt;customer&lt;/code&gt; (по умолчанию равен standart). Обновлять параметр по запросу с FRONT&lt;/li&gt;\n&lt;li&gt;Добавить в &lt;code class=\&quot;inline-code\&quot;&gt;catalogue.yml&lt;/code&gt; новый тип документа &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;50: Зарплатные перечисления&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Отправлять во втором extend cid нового типа документа подтверждающего доход документа&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;client_type in (employee, client)&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;income_proof_document_cid == &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt;, то необходимо убрать валидацию ПДН&lt;/li&gt;\n&lt;li&gt;Ожидать доработку по ПДН от BPM. Валидировать, что был приложен &lt;code class=\&quot;inline-code\&quot;&gt;income_proof_document_cid != &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Ждать в &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt;. Менять тип ПДН и отображение в калькуляторе в зависимости от полученного параметра&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h3&gt;Калькулятор&lt;/h3&gt;\n&lt;ol start=\&quot;6\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В зависимости от &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt; изменять расчет предложений:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;div class=\&quot;wiki-exception-wrapper\&quot;&gt;&lt;span class=\&quot;wiki-plus wiki-minus\&quot;&gt;&lt;/span&gt;&lt;pre class=\&quot;wiki-exception-title wiki-hidden\&quot;&gt;измененные значения добавил в обновленный_каталог.yml (во вложении)&lt;/pre&gt;&lt;span class=\&quot;wiki-hellip wiki-hidden\&quot;&gt;...&lt;/span&gt;&lt;pre class=\&quot;wiki-exception\&quot;&gt;&lt;p&gt;измененные значения добавил в обновленный_каталог.yml (во вложении)\nблоки для продуктов остались неизменными, т.е:&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;беззалог = условия_кредит_без_залог&lt;/li&gt;\n&lt;li&gt;залог на новое тс = условия_кредит_без_залог -&amp;gt; условия_новое_тс&lt;/li&gt;\n&lt;li&gt;залог на бу = условия_кредит_без_залог -&amp;gt; условия_тс_с_пробегом&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/pre&gt;&lt;/div&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если &lt;code class=\&quot;inline-code\&quot;&gt;client_type == standart&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; предложения рассчитываются как сейчас&lt;/li&gt;\n&lt;li&gt;если &lt;code class=\&quot;inline-code\&quot;&gt;client_type == employee&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; в расчете изменяется базовая ставка и показатели снижения конечной ставки по кредиту (расписал &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27354?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNTR8NWJuVkZHU3RTQXBfclZodVpXdUVvaW9sLU1B%0D%0AU3o4ZS1vQnBlZkV1Q3dWQQ0K%0D%0A&amp;amp;updated=1585238242043\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;если &lt;code class=\&quot;inline-code\&quot;&gt;client_type == salary&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; в расчете изменяется базовая ставка и показатели снижения конечной ставки по кредиту (расписал &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27354?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNTR8NWJuVkZHU3RTQXBfclZodVpXdUVvaW9sLU1B%0D%0AU3o4ZS1vQnBlZkV1Q3dWQQ0K%0D%0A&amp;amp;updated=1585238242043\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;8\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить валидацию предложений:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если (&lt;code class=\&quot;inline-code\&quot;&gt;client_type == client&lt;/code&gt; OR &lt;code class=\&quot;inline-code\&quot;&gt;client_type == employee&lt;/code&gt;) AND &lt;code class=\&quot;inline-code\&quot;&gt;БЕЗ_ЗАЛОГ&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; необходимо проверять &lt;strong&gt;ЕСЛИ&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;100_000 &amp;lt;= сумма_кредита &amp;lt;= 3_000_000&lt;/code&gt;, &lt;em&gt;ТО РАССЧИТЫВАТЬ ПРЕДЛОЖЕНИЕ&lt;/em&gt;, &lt;strong&gt;ИНАЧЕ ПЕРЕДАВАТЬ НА FRONT ОШИБКУ - Сумма кредита превышает Максимальный по продукту&lt;/strong&gt; (также указал диапазон суммы кредита &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27354?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNTR8NWJuVkZHU3RTQXBfclZodVpXdUVvaW9sLU1B%0D%0AU3o4ZS1vQnBlZkV1Q3dWQQ0K%0D%0A&amp;amp;updated=1585238242043\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;9\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить ограничение ПВ:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если (&lt;code class=\&quot;inline-code\&quot;&gt;client_type == client&lt;/code&gt; OR &lt;code class=\&quot;inline-code\&quot;&gt;client_type == employee&lt;/code&gt;) AND &lt;code class=\&quot;inline-code\&quot;&gt;ЗАЛОГ_НА_БУ&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;0.2 &amp;lt;= первоначальный взнос &amp;lt;= 1&lt;/code&gt; (расписал диапазон ПВ &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27354?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjczNTR8NWJuVkZHU3RTQXBfclZodVpXdUVvaW9sLU1B%0D%0AU3o4ZS1vQnBlZkV1Q3dWQQ0K%0D%0A&amp;amp;updated=1585238242043\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В статусе &lt;code class=\&quot;inline-code\&quot;&gt;get_user_state&lt;/code&gt; ожидать в ответе &lt;code class=\&quot;inline-code\&quot;&gt;lookup_request_done&lt;/code&gt; новые поля:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;SALARY_FLG (значения: 1 - зарплатные клиенты; 2 - пенсионеры; 3 - сотрудник банка; 0 - стандартные условия)&lt;/li&gt;\n&lt;li&gt;INC_PERIOD&lt;/li&gt;\n&lt;li&gt;SALARY_AMOUNT&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сохранять переменные из пункта 1 в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; cft -&amp;gt; client_status&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Добавить в блок &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; cft -&amp;gt; client_status&lt;/code&gt; показатель &lt;code class=\&quot;inline-code\&quot;&gt;main_income&lt;/code&gt;. Рассчитывать показатель &lt;code class=\&quot;inline-code\&quot;&gt;main_income&lt;/code&gt; по алгоритму, описанному ниже:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;strong&gt;если&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;SALARY_FLG IN (1,3) AND OCCUPATION_FORM_CID != 3&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;main_income = SALARY_AMOUNT / INC_PERIOD&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;если&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;SALARY_FLG = 2 AND OCCUPATION_FORM_CID = 3&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;main_income = SALARY_AMOUNT / INC_PERIOD&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;для всех остальных случаев &lt;code class=\&quot;inline-code\&quot;&gt;main_income = null&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;где OCCUPATION_FORM_CID = MEMORY -&amp;gt; REQUEST -&amp;gt; JOB -&amp;gt; OCCUPATION_FORM_CID&lt;/code&gt;&lt;br/&gt;5. Если рассчитанный &lt;code class=\&quot;inline-code\&quot;&gt;MAIN_INCOME&lt;/code&gt; &amp;lt; 20.000 рублей, то посылать отказ с кодом &lt;code class=\&quot;inline-code\&quot;&gt;MR008&lt;/code&gt; (уже есть)&lt;br/&gt;6. Если &lt;code class=\&quot;inline-code\&quot;&gt;MAIN_INCOME IS NOT NULL and MAIN_INCOME &amp;gt;= 20.000&lt;/code&gt;, ТО  посылать рассчитанный MAIN_INCOME в &lt;code class=\&quot;inline-code\&quot;&gt;ABACUS&lt;/code&gt;, иначе рассчитывать как сейчас&lt;br/&gt;7. Если &lt;code class=\&quot;inline-code\&quot;&gt;SALARY_FLG IN (1,3) AND INC_PERIOD &amp;lt; 3 AND extend -&amp;gt; params -&amp;gt; customer -&amp;gt; income_proof_document_cid = &amp;quot;Зарплатные перечисления&amp;quot; and OCCUPATION_FORM_CID != 3&lt;/code&gt;, то посылать доработку по ПДН в стейте &lt;code class=\&quot;inline-code\&quot;&gt;verification_state&lt;/code&gt; на BACK и &lt;code class=\&quot;inline-code\&quot;&gt;main_income = null&lt;/code&gt;&lt;br/&gt;8. Если &lt;code class=\&quot;inline-code\&quot;&gt;MAIN_INCOME IS NOT NULL&lt;/code&gt;, ТО  в стейтах &lt;code class=\&quot;inline-code\&quot;&gt;external_calls_state&lt;/code&gt;при срабатывании фичи не создавать задание для стратегии &amp;quot;work_and_income&amp;quot;&lt;br/&gt;9. В статусе &lt;code class=\&quot;inline-code\&quot;&gt;document_preparation_state&lt;/code&gt; ожидать в ответе &lt;code class=\&quot;inline-code\&quot;&gt;csd_request_done&lt;/code&gt; поля:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;SALARY_FLG (значения: 1 - зарплатные клиенты; 2 - пенсионеры; 3 - сотрудник банка; 0 - стандартные условия)&lt;/li&gt;\n&lt;li&gt;INC_PERIOD&lt;/li&gt;\n&lt;li&gt;SALARY_AMOUNT&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Если&lt;/strong&gt; в &lt;code class=\&quot;inline-code\&quot;&gt;csd_request_done&lt;/code&gt; поля &lt;strong&gt;не&lt;/strong&gt; совпадают с полученными из &lt;code class=\&quot;inline-code\&quot;&gt;lookup_request_done&lt;/code&gt; то отправлять на доработку по ПДН, при этом перезаписывать значения в блоке &lt;code class=\&quot;inline-code\&quot;&gt;client_status&lt;/code&gt; на новые (это нужно для того, чтобы после изменения документа, при расчете в абакус шли данные по main_income из анкеты, а не цфт)&lt;br/&gt;10. Если во втором &lt;code class=\&quot;inline-code\&quot;&gt;extend&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; customer -&amp;gt; income_proof_document_cid != &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;(salary_flg = 1  and OCCUPATION_FORM_CID != 3) OR (salary_flg in (2) and OCCUPATION_FORM_CID = 3)&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;INC_PERIOD &amp;gt;=3&lt;/code&gt; &lt;strong&gt;ТОГДА&lt;/strong&gt; отправлять на BACK в choose_deal_condition  параметр  &lt;code class=\&quot;inline-code\&quot;&gt;client_type = salary&lt;/code&gt; (нужно для того, если агент заполнит анкету с 1 по 6 шаг, а bpm будет только на тегирование паспорта, например)&lt;br/&gt;11. Если во втором &lt;code class=\&quot;inline-code\&quot;&gt;extend&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; customer -&amp;gt; income_proof_document_cid != &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;(salary_flg = 3  and OCCUPATION_FORM_CID != 3) &lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;INC_PERIOD &amp;gt;=3&lt;/code&gt; &lt;strong&gt;ТОГДА&lt;/strong&gt; отправлять на BACK в choose_deal_condition  параметр  &lt;code class=\&quot;inline-code\&quot;&gt;client_type = client&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585556425934&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]},{&quot;name&quot;:&quot;Дата начала работы&quot;,&quot;value&quot;:[&quot;1583409600000&quot;],&quot;valueId&quot;:[&quot;1583409600000&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8723_Запуск программ кредитования для сотрудников Банка зарплатных клиентов.docx&quot;,&quot;id&quot;:&quot;88-26573&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26573?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY1NzN8Y251UHZmQmw4NEtYcE5LQlF1b3ZHME92QlE4%0D%0AalVkVDRma3JtSm41UkpmWQ0K%0D%0A&amp;updated=1583390127437&quot;},{&quot;value&quot;:&quot;плашка в калькуляторе.png&quot;,&quot;id&quot;:&quot;88-27168&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27168?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxNjh8ZlJGX29nbmo4bzBKMXRfRHQ2VHVIbVZyZ1Jl%0D%0AcDhrS0NEMW16NVZaTzhwNA0K%0D%0A&amp;updated=1585044643401&quot;},{&quot;value&quot;:&quot;обновленный_каталог.yml&quot;,&quot;id&quot;:&quot;88-27354&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27354?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczNTR8TjM1Mm9mNF9KejBOcTBTVTdjVmdmamd2ZlZq%0D%0ANnFKWWtIZU1jbHYxS2hONA0K%0D%0A&amp;updated=1585238242043&quot;},{&quot;value&quot;:&quot;Новый калькулятор.png&quot;,&quot;id&quot;:&quot;88-27372&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27372?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjczNzJ8c1FleUhUSHV3SGxJWFVxN1lhSjByZk01R0Rx%0D%0AejZRdXRCOXMxTVJ6RkRyZw0K%0D%0A&amp;updated=1585308774909&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53105&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1794&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1725\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://balance.myjetbrains.com/youtrack/issue/ARGS-1725&lt;/a&gt; дубль.&lt;br/&gt;Все еще нет отдельных требований для Авто и обновленной СПР.&lt;br/&gt;Без нее анализ полный не сделать.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583394858786,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54262&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1794&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt; вернула на Александра, отпишитесь, почему задача была заблокирована&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584685453690,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54386&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1794&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Блок со стороны ЦФТ.&lt;br/&gt;Они не прислали обновленную интеграцию.&lt;br/&gt;Но задача в анализе. Пока описываем без ЦФТ.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584713764290,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55109&quot;,&quot;author&quot;:&quot;arseny&quot;,&quot;authorFullName&quot;:&quot;Арсений Культиасов&quot;,&quot;issueId&quot;:&quot;ARGS-1794&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585308777780,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;2&quot;,&quot;cssClass&quot;:&quot;c3&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;АнализСпринт&quot;,&quot;cssClass&quot;:&quot;c13&quot;}]}, {&quot;id&quot;:&quot;ARGS-1629&quot;,&quot;entityId&quot;:&quot;86-74876&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Устаревшие ч3 (синхронизация ПП и БЭК)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580299565019&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1629&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;необходимо провести работы по синхронизации стейтов заявок на ПП и БПМ&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;После того как скрипт по устареванию выполнил свою работу (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1027\&quot; title=\&quot;УСТАРЕВШИЕ ч1\&quot; data-issue-id=\&quot;86-64743\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1027&lt;/a&gt;) выяснилось:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;сложная логика по задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1194\&quot; title=\&quot;УСТАРЕВШИЕ ч2\&quot; data-issue-id=\&quot;86-67672\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1194&lt;/a&gt; не нужна, это связано с тем что больше 90 дней прошло с момента запуска штатного механизма устаревания (&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-749\&quot; title=\&quot;устаревшие\&quot; data-issue-id=\&quot;86-60403\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-749&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;возникла рассинхронизация, которую необходимо устранить. Рассинхронизация произошла по двум причинам:&lt;br/&gt;2.1) бэк не смог валидировать заявку и обработать сообщение на устаревание&lt;br/&gt;2.2) на бэке заявка была переведена в отказ клиента, но механизма передачи (и/или обработки) данного сообщения на бпм не было .&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;Результат работы скрипта делится на три части&lt;/h2&gt;\n&lt;h3&gt;1. Все хорошо&lt;/h3&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm state = 'obsolete_state'\npp state = 'obsolete_state'\n\nСтейт заявки в BPM совпадает с PP и равен obsolete_state\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;2. Все хорошо на BPM&lt;/h3&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm state = 'obsolete_state'\npp state != 'терминальный'\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Решение:&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;BPM&lt;/strong&gt;: Сформировать выгрузку устаревших заявок&lt;br/&gt;bpm_id - номер заявки&lt;br/&gt;obsolete_at - когда устарела&lt;br/&gt;&lt;strong&gt;BACK&lt;/strong&gt;:&lt;br/&gt;Сделать выборку по bpm_id и статус не терминальный из выгрузки&lt;br/&gt;Обновить стейт на &amp;#39;obsolete_state&amp;#39; с временем obsolete_at&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;Работы желательно проводить после того как бэк начнет переводить все заявки получающее сообщение&lt;br/&gt;об устаревании в устаревшии независимо от валидации.&lt;/em&gt;&lt;br/&gt;Это нужно для того чтобы исключить дальнейшую рассинхронизацию по стейтам в БПМ и ПП.&lt;/p&gt;\n&lt;h3&gt;3. Все хорошо на ПП&lt;/h3&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm state = 'obsolete_state'\npp_state in 'терминальный' and pp_state != 'obsolete_state' )\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Сюда попадают заявки которые устарели на БПМ но остались в терминальном статусе на ПП&lt;br/&gt;Решение:&lt;br/&gt;Для заявок в терминальном статусе на ПП &amp;#39;user_decline&amp;#39; ничего не делать.&lt;br/&gt;Для заявок в терминальных статусах на ПП отличных от &amp;#39;user_decline&amp;#39; необходим анализ по факту выявления таких заявок&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585311866214&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;fullName&quot;:&quot;Дмитрий Синельников&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50274&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1629&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;span class=\&quot;markdown-language-tag\&quot;&gt;sql&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-sql\&quot;&gt;select\n\tw.bpm_id,\n\tsm.current_state,\n\tsm.updated_at\nfrom\n\twalkers w,\n\tstate_machines sm\nwhere\n\tw.id = sm.walker_id\n\tand sm.current_state = 'obsolete_state'\norder by\n\tw.bpm_id desc;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580305114925,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54269&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1629&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;заявка древняя, ее еще не делалали или неактуально? &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/Dmitry_Sinelnikov\&quot; title=\&quot;Дмитрий Синельников\&quot; data-user-id=\&quot;24-47\&quot;&gt;@Дмитрий Синельников&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/i.smelkov\&quot; title=\&quot;Илья Смелков\&quot; data-user-id=\&quot;24-251\&quot;&gt;@Илья Смелков&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584686336869,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54272&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1629&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/Dmitry_Sinelnikov\&quot; title=\&quot;Дмитрий Синельников\&quot; data-user-id=\&quot;24-47\&quot;&gt;@Дмитрий Синельников&lt;/a&gt; говорит что задача неактуальна&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584686725654,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1470&quot;,&quot;entityId&quot;:&quot;86-71983&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Игнорировать сумму за КАСКО при проверке полиса и квитанции об оплате при оплате наличными&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анвар Анарбаев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576662850664&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1470&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Описание требования&lt;/strong&gt;&lt;br/&gt;Игнорировать сумму за КАСКО при проверке документа при оплате наличными&lt;br/&gt;При оплате наличными очень часто (почти всегда) при заведении заявки агент ставит примерную сумму за КАСКО и далее на проверке документа и квитанции об оплате сумма не сходится. Необходимо убрать проверку суммы или сделать обогащением.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение_BPM:&lt;/strong&gt;&lt;br/&gt;Актуально только для КАСКО НЕ В КРЕДИТ (insurances-&amp;gt;included:false).&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.anarbaev&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585238712579&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1857&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51469&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Актуально только для каско не в кредит (insurances-&amp;gt;included:false).&lt;br/&gt;Возможное решение:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори  и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581578569930,&quot;updated&quot;:1581584094592,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51494&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем согласования банка&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581587204371,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-55032&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Елизавета Черкесова  19:02&lt;br/&gt;она на стороне банка. Писала геворгу и фроловой об этом. мы обсудили верхнеуровне. Им нужно было это оформить как задачу, но после они ушли в тень&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585238707809,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;support&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1625&quot;,&quot;entityId&quot;:&quot;86-74790&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Интеграция с сервисом Дирекции по управлению Рисками&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580232728443&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1625&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Требования&lt;/strong&gt;&lt;br/&gt;9018 Баланс-платформа интегрируется с сервисом Дирекции по управлению Рисками. Отправляет запрос в этот сервис  и получает ответ.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;После скоринг_1 (scoring_state - после ответа от скоринга и кроноса):&lt;br/&gt;отослать запрос с данными в сервис общения с рисками (задача на написание сервиса у Ruby -договориться об общении)&lt;br/&gt;название сервиса &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;&lt;br/&gt;запрос -  &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt;&lt;br/&gt;ответ  -&lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;во вложении файл exel c набором данных (и путь к ним) &amp;quot;Интеграция Дирекция рисков&amp;quot; , если нет запроса в кронос , то не присылать кронос&lt;/li&gt;\n&lt;li&gt;необходимо ждать ответ от сервиса, и только после &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; идти дальше на &lt;code class=\&quot;inline-code\&quot;&gt;verification_state&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;если до ответа сервиса &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;,  БПМ уже увел заявку в деклайн, то  сообщение от сервиса не влияет на ее состояние (по какому коду отказывать не принципиально).&lt;/li&gt;\n&lt;li&gt;Если заявка не ушла в decline_state и в &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: false&lt;/code&gt;, то смотрим в statusList на код отказа или код андеррайтинга (см пункты 6-7) , если NULL, значит по клиенту от Банка фрода нет, идем дальше&lt;/li&gt;\n&lt;li&gt;Если в &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: true&lt;/code&gt;, то на другие параметры не смотрим, считаем что проверка rgsb_risks_service пройдена , можем переходить в verification_state&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;statusList =BL010, SCR010, BL011, SCR011, BL012, SCR012, BL013, SCR013, BL014,SCR014&lt;/code&gt; то по заявке отказ - &lt;code class=\&quot;inline-code\&quot;&gt;decline_state&lt;/code&gt;,-детали(юзердата,мораторий и тд) кодов отказа во вложении (коды отказа)&lt;br/&gt;может прийти только один код&lt;/li&gt;\n&lt;li&gt;Если `statusList =SF001, SF002, SF003, SF004,SF005), то посылать заявку на ручной андеррайтинг (номера фичей и текст для андеррайтера во вложении) &amp;quot;Прозвоны 5.1.3&amp;quot;&lt;/li&gt;\n&lt;li&gt;новые фичи как и старые должны записаться в triggered_features&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Юзердата&lt;/strong&gt;&lt;br/&gt;во вложении (кода отказы) коды отказа и пояснения, необходимо их зашить&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ЯЗЫК на выбор Тим-лидов&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо написать сервис(название- &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;)  который будет общаться по API с риск-сервисом банка: по URL (10.95.5.233:8080/application)&lt;/li&gt;\n&lt;li&gt;К сервису будет обращаться БПМ с Json запросом &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Данные из &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt; отправить по URL выше&lt;br/&gt;пример обратного ответа сервиса  по API -&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;без ошибок&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;с ошибкой&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [&amp;quot;BL001&amp;quot;],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;с двумя и более ошибками&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [&amp;quot;BL001&amp;quot;, &amp;quot;BL002&amp;quot;, ...],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ответ от сервиса ждать в течении 30 секунд&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если ответ приходит, то отправляем в БПМ &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; с параметром &lt;code class=\&quot;inline-code\&quot;&gt;no_answer: false&lt;/code&gt; (положить в &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt;)&lt;br/&gt;+тe данные, что пришли по API&lt;/li&gt;\n&lt;li&gt;если ответ не приходит в течении 30 сек, то отправляем в БПМ &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; с параметром &lt;code class=\&quot;inline-code\&quot;&gt;no_answer: true&lt;/code&gt; (положить в &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt;)&lt;br/&gt;договориться о деталях общения&lt;br/&gt;Для теста послать тестовое сообщение curl -X POST 10.95.5.233:8080/application -H &amp;#39;Content-type:application/json&amp;#39; -d &amp;#39;{}&amp;#39;&lt;br/&gt;для теста БПМ нужно развернуть сервис на стейдже  (но учитывать что сам сервис рисков работает только на проде)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;5\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если от сервиса рисков придет код ошибки который не был указан ранее, то стейт машина перейдет в &lt;code class=\&quot;inline-code\&quot;&gt;timeout_decline_state&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Формат ответа от прокси&lt;/li&gt;\n&lt;/ol&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;python&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-python\&quot;&gt;def create_payload(\n    meta_ok: bool,\n    errors: Optional[dict],\n    response_status: Optional[int],\n    requested_at: datetime,\n    response_json: Optional[dict],\n    response_at: Optional[datetime],\n    _result: Optional[dict],\n):\n    return {\n        &amp;quot;ok&amp;quot;: meta_ok,  # True только если стоит обрабатывать payload['result']\n        &amp;quot;data&amp;quot;: {\n            &amp;quot;meta&amp;quot;: {\n                &amp;quot;ok&amp;quot;: meta_ok,\n                &amp;quot;errors&amp;quot;: errors,\n                &amp;quot;http_status&amp;quot;: response_status,\n                &amp;quot;requested_at&amp;quot;: requested_at.isoformat(),\n                &amp;quot;response&amp;quot;: response_json,\n                &amp;quot;response_at&amp;quot;: response_at.isoformat() if response_at else None,\n            },\n            &amp;quot;result&amp;quot;: _result,  # dict содержащий ключ error_codes: list[str]\n        },\n    }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;DevOps&lt;/strong&gt;&lt;br/&gt;Развернуть сервис на стейдже и проде по договоренности с разработчиком сервиса&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест-прод-саппорт&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;смотреть после выкатки на сообщения об интеграции по первым заявкам, разбирать отдельные кейсы ,если наш сервис или Банка не реагирует на сообщения&lt;br/&gt;найти заявки где по интеграции отказ или андерратинг(оба кейса найти)&lt;br/&gt;&lt;strong&gt;по результатам ОБЯЗАТЕЛЬНО отписаться в комментарии-со скринами&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест-препрод-стейдж&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;симулировать сообщения от сервиса с кодом отказа(любыми 3)=работа корректная если отказ по заявке, в юзердату и reject записалось корректно(если до ответа сервиса БПМ уже проставил код отказа, то ок , заявка в деклайне, сообщение от сервиса не влияет на ее состояние)&lt;/li&gt;\n&lt;li&gt;симулировать сообщения от сервиса с кодом андерратинга(любыми 2)=работа корректная, если заявка отправилась на ручную проверку андеррайтером&lt;/li&gt;\n&lt;li&gt;проверить что бпм ждет ответ от сервиса и только после идет дальше по стейт машине&lt;/li&gt;\n&lt;li&gt;проверить что если &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: false&lt;/code&gt;, то БПМ смотрит есть ли код отказа или андеррайтинга(либо проверяем ,либо отказываем (проверить оба кейса) , может еще прийти NULL, тогда никак не реагирует, идет дальше по процессу&lt;/li&gt;\n&lt;li&gt;проверить что если &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: true&lt;/code&gt;, то БПМ  никак не реагирует, идет дальше по процессу(значит интеграция не отвеила&lt;/li&gt;\n&lt;li&gt;проверить что фичи записываются в triggered_features&lt;/li&gt;\n&lt;li&gt;проверить что если после 30 сек в сервис пришло сообщение по API, то он ничего не послал в БПМ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585224141601&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ADM-8792&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#a6e0fc&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Прозвоны_v5.1.3.xlsx&quot;,&quot;id&quot;:&quot;88-26193&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26193?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYxOTN8cnBOREhlV2xFZGJneVJpX2UwOS1pcTgxZnFh%0D%0ARzY0NTN4aXUyT0o5V1d3MA0K%0D%0A&amp;updated=1582721740226&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_1110.xlsx&quot;,&quot;id&quot;:&quot;88-26196&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26196?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYxOTZ8cW10YkFjQ215VGtxMk5DOEcyV252Zkt4QkVo%0D%0AM19DOU9ZMi1keTBFUmRqcw0K%0D%0A&amp;updated=1582729268793&quot;},{&quot;value&quot;:&quot;Интеграция Дирекция рисков.xlsx&quot;,&quot;id&quot;:&quot;88-26199&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26199?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYxOTl8MnFkdUtyaXMtUnRUcWtSd3dqOFNGak42RERX%0D%0AdlFzNTFabDNsUEo4ajJuYw0K%0D%0A&amp;updated=1582730103248&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50359&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;100 SP предварительно&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580383595049,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51471&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В Авто есть блок consolidated_credit_history. Будет аналогичная структура?&lt;br/&gt;Нужно после скоринга 0 отправлять в интеграции данные по КИ клиента?&lt;br/&gt;Что делать с xml? Просто принимать/отправлять?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581579545314,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51600&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем ответа от банка&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581675383887,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52480&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;нужен ответ от Ли по мораторию&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582723581180,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1838&quot;,&quot;entityId&quot;:&quot;86-78671&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Отображать в админке BPM причину проблемы/таймаута&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584352675955&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1838&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;1. Добавить во всех случаях, когда переходим в timeout_decline, запись во флаги описание причины переход в этот стейт (на русском и на английском в виду slug) для упрощения работы поддержи.&lt;br/&gt;2. В админку на страничку заявки добавить отображение поля описания причины перехода на русском. Поле выводить только для заявок в статусе timeout_decline&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;Решение&lt;/strong&gt; &lt;br/&gt;Перед переходом в timeout_decline_state устанавливать&lt;br/&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;&lt;li&gt; flags:timeout_decline_reason - название ошибки на английском&lt;br/&gt;&lt;/li&gt;&lt;li&gt; flags:timeout_decline_reason_text - текст ошибки на русском&lt;br/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\n&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Баир Загеев&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;bair.zangeev&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585141166246&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;bair.zangeev&quot;,&quot;fullName&quot;:&quot;Баир Загеев&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1585057914779.png&quot;,&quot;id&quot;:&quot;88-27180&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27180?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxODB8VS1DRHp4ZS1DMVViSXdfTTZUOU5Xai1zckQz%0D%0AOXQ5VEZsaEh2ZWttdXo5TQ0K%0D%0A&amp;updated=1585057915466&quot;},{&quot;value&quot;:&quot;image1585140711953.png&quot;,&quot;id&quot;:&quot;88-27245&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27245?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyNDV8ZTZrOXA2cFpvbi0tbUg4OFlaZ05RODlzR3g5%0D%0Aem1vaElBQUdUMWVXN2RjMA0K%0D%0A&amp;updated=1585140712549&quot;},{&quot;value&quot;:&quot;image1585140737671.png&quot;,&quot;id&quot;:&quot;88-27246&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27246?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcyNDZ8NF8zVVJjaDZhV3lvTS0yRUZyYzRzVUNYOFJE%0D%0AMVY5MXpOa1phTEpvRGhDNA0K%0D%0A&amp;updated=1585140738166&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54709&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1838&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_admin: feature/ARGS-1838\nsm: feature/ARGS-1838\ncomposite: feature/ARGS-1838\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585057819655,&quot;updated&quot;:1585132890876,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54710&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1838&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27180?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcxODB8YnJjRkJOdldvQkl4UXVFZjF2U0RUWUZ4ajJP%0D%0ALVMzM3lKMXVKV0JiZ2t1TQ0K%0D%0A&amp;amp;updated=1585057915466\&quot; alt=\&quot;Выглядит примерном так\&quot; data-attachment-id=\&quot;88-27180\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585057952712,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54843&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1838&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1 &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021406/step/6\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021406/step/6&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Перешел в БПМ:&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15943/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15943/details/&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;в Force State выбрал timeout_decline state&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27245?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcyNDV8WlZLTEdNTHJkTWRLN1JHUWhlaEg5bTFNUFpL%0D%0AQ3FlSzlaZ01ncmpGN0EtTQ0K%0D%0A&amp;amp;updated=1585140712549\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27245\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;Тест 2 &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Зашел в БПМ: &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/?state_machines__current_state=timeout_decline_state\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/?state_machines__current_state=timeout_decline_state&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Выбрал старые заявки со статусом: timeout_decline state:&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3540/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3540/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3777/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3777/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/4242/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/4242/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3888/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3888/details/&lt;/a&gt;&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27246?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjcyNDZ8WHdFSjVKdi1qcmktLXFsZ25maDQzWjJBQzlZ%0D%0ASVJKTkZ4VVU0LXNiUVhHbw0K%0D%0A&amp;amp;updated=1585140738166\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-27246\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585140768014,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1757&quot;,&quot;entityId&quot;:&quot;86-77516&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Настройка признака Партнерская СУ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582874398320&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1757&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;8763  Спринт 4&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;В &lt;strong&gt;csd_request&lt;/strong&gt; в блоке insurances добавить параметр &lt;strong&gt;partner_insurance&lt;/strong&gt; с возможными значениями «1» и «0».&lt;/p&gt;\n&lt;p&gt;Если в &lt;strong&gt;choose_deal_condition_done&lt;/strong&gt; от партнерки в insurances-&amp;gt;insurance_tariff effect_on_the_rate=&amp;#39;tariff_TradePoint&amp;#39;&lt;br/&gt;&lt;strong&gt;то partner_insurance=0&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;иначе&lt;/strong&gt; (например effect_on_the_rate in (КСЖ_ргсб,GAP_ргсб,Z_ROAD_rgsb_family))&lt;br/&gt;&lt;strong&gt;partner_insurance=1&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;Проверить,что&lt;br/&gt;-Значение «1» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые Банка».&lt;br/&gt;-Значение «0» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые партнеров».&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585134292145&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Окружение&quot;,&quot;value&quot;:[&quot;uat&quot;],&quot;valueId&quot;:[&quot;uat&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8763_БТ_признак Партнерская СУ_авто_кн_БП_v1.docx&quot;,&quot;id&quot;:&quot;88-26273&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26273?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYyNzN8bWZwM25FdmtFM0xpbGtSeVRLNHNIWVBhYzQ2%0D%0AUk1QR0dSSHdZR3ZJMDdMSQ0K%0D%0A&amp;updated=1582874406787&quot;},{&quot;value&quot;:&quot;8763_БТ_признак Партнерская СУ_авто_кн_БП_v11.docx&quot;,&quot;id&quot;:&quot;88-26283&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26283?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYyODN8eXFGdkZBZEtXNzZLVHJPMWd2VjZMdlhJZmk5%0D%0AX0dnQ2pDSHZLOXZleTJPbw0K%0D%0A&amp;updated=1582875730717&quot;},{&quot;value&quot;:&quot;image1583159777167.png&quot;,&quot;id&quot;:&quot;88-26423&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26423?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjN8WlU3T2xEcjZ1dDNxZWNMdGdlUkdQUERDLUdl%0D%0Ac1l2QnpDNzhsTnEyTEhiQQ0K%0D%0A&amp;updated=1583159777690&quot;},{&quot;value&quot;:&quot;image1583159929597.png&quot;,&quot;id&quot;:&quot;88-26424&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26424?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjR8VzI1bWZyS0wyOHU5bE9MZ2dOMjJIN1JSZm1F%0D%0ALWN3QmhFNzVNSnM2cDhBSQ0K%0D%0A&amp;updated=1583160062244&quot;},{&quot;value&quot;:&quot;image1583160628952.png&quot;,&quot;id&quot;:&quot;88-26425&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26425?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjV8RjhzTUYzajF3aDFmTVpGbms5d3NzaFJnaWdH%0D%0AZ0VQVl83YXRrb1FaY2RsVQ0K%0D%0A&amp;updated=1583160629633&quot;},{&quot;value&quot;:&quot;image1583160878992.png&quot;,&quot;id&quot;:&quot;88-26426&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26426?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjZ8aUIxelYtU1AxajJqMlhnRFkyT2FMODQtb091%0D%0AZFRiN0VjbXdtM3pxN2thcw0K%0D%0A&amp;updated=1583160879621&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52747&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в pay_request есть блок insurances, в нем те же самые данные, что и в csd (с учетом новых данных из верификации).&lt;br/&gt;В страховках в блоке insurances в pay_request должен быть параметр partner_insurance?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583059286894,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52748&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; по требованиям от банка необходимо только в csd направлять&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583059641405,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52749&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ок. Предлагаю включить в тесты проверку, что в pay_request не отправится этот параметр&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583060321212,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52753&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1757\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583074671582,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52795&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;регресс по старым заявка.&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Значение «1» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые Банка».&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14103/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14103/details/&lt;/a&gt;&lt;br/&gt;ФР = ОР&lt;/li&gt;\n&lt;li&gt;Значение «0» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые партнеров».&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13375/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13375/details/&lt;/a&gt;&lt;br/&gt;ФР = ОР&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583141887760,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52856&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1: заявка  только со СТРАХОВАНИЕМ ОТ БАНКА:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой только от банка.&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14194/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14194/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;ВКАСКО_ргсб&amp;quot;,&lt;br/&gt;&amp;quot;partner_insurance&amp;quot;: 1&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26423?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjY0MjN8YmJIa1hfQ1J2WjNxQS1Fa2hEWkphajRJNzVT%0D%0AUTVWdHF2N2NRY2tqY29qYw0K%0D%0A&amp;amp;updated=1583159777690\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26423\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 2: заявка только со СТРАХОВАНИЕМ ОТ ПАРТНЕРА :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой только от партнера.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26424?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjY0MjR8aExPbC15S1BadmdXR2pzU21PRXJ5ZWxHXzJy%0D%0AeXYtMC1TZ0pXNm1IcFUxWQ0K%0D%0A&amp;amp;updated=1583160062244\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26424\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14206/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14206/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;tariff_TradePoint&amp;quot;&lt;br/&gt;partner_insurance=0 не отображается в БПМ если не нажать свитч в кредит.&lt;br /&gt;\n&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26426?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjY0MjZ8MDQ1dXkzNW1ZbDFmNmdqZ1d5VWFHU0tPOHJP%0D%0ATk1uYksxMEtPUWpyV3BkVQ0K%0D%0A&amp;amp;updated=1583160879621\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26426\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Создал заявку со страховкой только партнера и нажал указанный свитч &amp;quot;В кредит&amp;quot;.&lt;/li&gt;\n&lt;li&gt;Прошел все этапы до выдачи кредита:&lt;br/&gt;&amp;quot;partner_insurance&amp;quot;: 0&lt;br/&gt;(ОР = ФР)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 3:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой от партнеров и от банка:&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14211/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14211/details/&lt;/a&gt;&lt;br/&gt;ФР:&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;tariff_TradePoint&amp;quot;,&lt;br/&gt;partner_insurance=1&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 4:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку не выбрав ни одной страховки.&lt;/li&gt;\n&lt;li&gt;Пройдя все проверки на 6 шагу система требует выбрать страховку:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26425?sign=MTU4NzA4MTYwMDAwMHwyNC0xODF8ODgtMjY0MjV8SjNSYXo0SVJXaHdMRS00SlZneTBObm9VeW1W%0D%0AM0RmZFkwcTdkdWhORVI4SQ0K%0D%0A&amp;amp;updated=1583160629633\&quot; alt=\&quot;\&quot; data-attachment-id=\&quot;88-26425\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583161326704,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;0&quot;,&quot;cssClass&quot;:&quot;c3&quot;}]}, {&quot;id&quot;:&quot;ARGS-1828&quot;,&quot;entityId&quot;:&quot;86-78602&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Доработка проверки ПТС&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584101818851&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1828&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;BPM РГС в запросе document_vehicle_passport.verify для полей isPrevHolderEntity и prevHolderInfo отправлять disabled: true&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Кравченко&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;anna.kravchenko&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585134127563&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Z-1246&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;anna.kravchenko&quot;,&quot;fullName&quot;:&quot;Анна Кравченко&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54623&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1828&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm_ng_composite_version: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1828\&quot; title=\&quot;Доработка проверки ПТС\&quot; data-issue-id=\&quot;86-78602\&quot;&gt;ARGS-1828&lt;/a&gt;&lt;br/&gt;bpm_ng_state_machines_versions:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;version_name: pre_release&lt;br/&gt;import_name: sm1&lt;br/&gt;name: sm_rgsb&lt;br/&gt;version_tag: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1828\&quot; title=\&quot;Доработка проверки ПТС\&quot; data-issue-id=\&quot;86-78602\&quot;&gt;ARGS-1828&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585039170116,&quot;updated&quot;:1585039738312,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54811&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1828&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестовые заявки:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;залоговый кредит, новое ТС - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15923/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15923/details/&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;залоговый кредит, ТС с пробегом - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15905/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15905/details/&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_vehicle_passport.verify&lt;/code&gt; появились поля:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;prev_holder_info&amp;quot;: {\n&amp;quot;disabled&amp;quot;: true\n},\n...\n-&amp;quot;is_prev_holder_entity&amp;quot;: {\n&amp;quot;disabled&amp;quot;: true\n...\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585133831968,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1531&quot;,&quot;entityId&quot;:&quot;86-72778&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Документация&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577474762271&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1531&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Необходима документация&lt;/h1&gt;\n&lt;p&gt;Важно описать что для чего есть, как оно работает, какие сообщения БПМ куда передает с какими параметрами и что оно ожидает в ответе.&lt;/p&gt;\n&lt;h2&gt;Roadmap &lt;em&gt;предварительный&lt;/em&gt;:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создать скелет документации (.rst):&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Composite&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; SM&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Composite:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot;&gt; Расписать все сообщения: что отправляется, какие типы данных, что значат параметры и что принимаем, какие типы данных, обязательные параметры.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h3&gt;SM:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot;&gt; Расписать все стейты: для чего, почему, что происходит, какой в этом смысл &lt;/label&gt;&lt;del&gt;жизни&lt;/del&gt;, какие возможные дальнейшие &lt;del&gt;пути&lt;/del&gt; стейты могут быть для заявки, исходя из того или иного ответа.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585038592121&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ff7bc3&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48594&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1531&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Документирование&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577474777067,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}]" />
      </map>
    </option>
  </component>
</application>