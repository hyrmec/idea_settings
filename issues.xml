<application>
  <component name="YouTrack Issues">
    <option name="persistentIssues">
      <map>
        <entry key="bpm_engine p.nikulshin@https://balance.myjetbrains.com/youtrack" value="[{&quot;id&quot;:&quot;ARGS-1899&quot;,&quot;entityId&quot;:&quot;86-79828&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Код отказа по мегафону&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1585212191416&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1899&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h2&gt;Цель&lt;/h2&gt;\n&lt;p&gt;Запрашивать новый параметр в Мегафоне. Добавить новый отказ по Мегафону&lt;/p&gt;\n&lt;h2&gt;Userdata:&lt;/h2&gt;\n&lt;p&gt;Добавить новый код  отказа (см. приложенный файл с кодами отказов):&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;код &lt;code class=\&quot;inline-code\&quot;&gt;MEG004&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;описание отказа &lt;code class=\&quot;inline-code\&quot;&gt;Cрок жизни абонентского номера менее 6 месяцев и максимальный средне месячный платёж за период менее 100 рублей&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;сообщение на фронт &lt;code class=\&quot;inline-code\&quot;&gt;Отказ. Несоответствие политике банка&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;мораторий 90 дней&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В запросе &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.process&lt;/code&gt; передавать дополнительный параметр &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; varaibles == &amp;quot;PAY_MAX&amp;quot;&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Обрабатывать из ответа &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.done&lt;/code&gt;  в блоке &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;pay_max&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Если&lt;/strong&gt; &lt;em&gt;в ответе&lt;/em&gt;  &lt;code class=\&quot;inline-code\&quot;&gt;megafon_scoring.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;(params -&amp;gt; lifetime_bin -&amp;gt; value) in (0, 1, 2) AND (params -&amp;gt; pay_max -&amp;gt; value) in (0,  1)&lt;/code&gt;, то переводить заявку в отказ с кодом &lt;code class=\&quot;inline-code\&quot;&gt;MEG004&lt;/code&gt; - передавать ошибку в ПП &amp;quot;Отказ. Несоответствие политике банка&amp;quot;&lt;br/&gt;, Иначе дальше по процессу&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585218344718&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9030_Новый код отказа Мегафон авто.doc&quot;,&quot;id&quot;:&quot;88-27295&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27295?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyOTV8dTczd0RMY3o4MHRWeUVjV0VRdTdlMGgxXzRn%0D%0Ac29Rb2I4UGtsejdZc2JDUQ0K%0D%0A&amp;updated=1585212187858&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1860&quot;,&quot;entityId&quot;:&quot;86-79020&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Зашить в юзердату одобрение&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584604862032&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1860&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Для реализации перекрестной проверки Авто и КН необходимо использовать одобрение заявок с других проектов&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БПМ-Юзердата&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо в юзердате создать новый стейт у заявки&lt;br/&gt;Одобрение - &lt;code class=\&quot;inline-code\&quot;&gt;approval&lt;/code&gt;&lt;br/&gt;Дата одобрения &lt;code class=\&quot;inline-code\&quot;&gt;date_approval&lt;/code&gt;&lt;br/&gt;и заполнять их по следующей логике:&lt;br/&gt;при переходе заявки в&lt;code class=\&quot;inline-code\&quot;&gt;decision_state&lt;/code&gt;, отправлять в юзердату сообщение о том что клиента одобрили, она обновить стейт&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;`date_approval` : 'привычный формат даты для юзердаты' время  определить в таблице `events` по `created_at`\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;далее они будут использованы в фичах связной задачи&lt;br/&gt;логика, что если по заявке произошел отказ или клиент отказался или кредит выдан и тогда она заявка мняет свой стейт - остается&lt;/p&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;для всех заявок у которых был пройден  или в текущем их состоянии &lt;code class=\&quot;inline-code\&quot;&gt;decision_state&lt;/code&gt; ( исключить заявки у которых стейты уже- отказ и выдан в юзердате)  записать стейт  &lt;code class=\&quot;inline-code\&quot;&gt;approval&lt;/code&gt;&lt;br/&gt;время  определить в таблице &lt;code class=\&quot;inline-code\&quot;&gt;events&lt;/code&gt; по &lt;code class=\&quot;inline-code\&quot;&gt;created_at&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;одобрение в юзердату посылать 1 раз , при последующих переходах в decision_state, больше не отправлять сообщение&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;одобрить заявку, послалось сообщение в юзердату&lt;br/&gt;результат: ответ сервиса без ошибок&lt;br/&gt;работу фичей тестировать в связной задаче&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Выкатывать вместе со связными задачами&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585217634091&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1862&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1785&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;d.podshchekoldin&quot;,&quot;fullName&quot;:&quot;Дмитрий Подщеколдин&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54803&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1860&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветки:&lt;br/&gt;userdata_ng: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1860&lt;/code&gt;&lt;br/&gt;bpm_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1860&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1860&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585130262729,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;}]}, {&quot;id&quot;:&quot;ARGS-1498&quot;,&quot;entityId&quot;:&quot;86-72322&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;ФУТС&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577088829717&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1498&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;1145: Необходимо предоставить возможность в качестве информации о ТС прикладывать ФУТС, в котором отсутствует номер и дата выдачи.&lt;br/&gt;ФУТС - форма учета транспортного средства.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Задача&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;br/&gt;если в заявке отсутствуют госпрограммы: government_program = null&lt;br/&gt;Для типа подтверждения ТС &lt;strong&gt;Инфописьмо&lt;/strong&gt; ПТС/ЭПТС (vehicle_data_source:info_mail_pts и vehicle_data_source:info_mail_epts)&lt;br/&gt;Сделать проверку поля &amp;quot;Номер ПТС/ЭПТС&amp;quot; необязательной&lt;br/&gt;Добавить условие,что если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; не заполнено,то поле &amp;quot;Дата выдачи&amp;quot; также необязательно&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;Если в полях &lt;code class=\&quot;inline-code\&quot;&gt;number,series&lt;/code&gt; &lt;strong&gt;для ПТС&lt;/strong&gt; и  &lt;code class=\&quot;inline-code\&quot;&gt;epts_number&lt;/code&gt;  &lt;strong&gt;для ЭПТС&lt;/strong&gt; пришли пустые значения, то отправить блокировку полей(параметр disabled) на верификацию &amp;quot;Номер ПТС/ЭПТС&amp;quot; и &amp;quot;Дата выдачи&amp;quot;(issued_at)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверить корректность работы задачи ТОЛЬКО для Инфописьма. Подтверждение через ПТС/ЭПТС изменения затрагивать не должны&lt;/li&gt;\n&lt;li&gt;Проверить,что в случаях,когда номер и дата выдачи присутствуют - в верификации поля не блокируются и проверка данных происходит корректно&lt;/li&gt;\n&lt;li&gt;Проверить,что&lt;br/&gt;-если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; заполнено, а &amp;quot;Дата выдачи&amp;quot; не заполнено- выдается ошибка&lt;br/&gt;-если наоборот - не выдается (при этом на верификации поле &amp;quot;Дата выдачи&amp;quot; заблокировано для ввода данных вместе с полем &amp;quot;Номер ПТС/ЭПТС&amp;quot; )&lt;/li&gt;\n&lt;li&gt;Проверить, что данное условие работает ТОЛЬКО в случае отсутствия в заявке гос программы. Если гос программа в заявке присутствует- все поля валидируются. Связано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1566\&quot; title=\&quot;Проверка даты выдачи ПТС\\ЭПТС\\инф письма для госпрограммы\&quot; data-issue-id=\&quot;86-73546\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1566&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Илья Смелков&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;8&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;i.smelkov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585216645618&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;ready for testing&quot;],&quot;valueId&quot;:[&quot;ready for testing&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1579852994899.png&quot;,&quot;id&quot;:&quot;88-24965&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjQ5NjV8TWl4SHoxRnpkT2lyNFBTeWFqRDdYOVBwRlJx%0D%0AOXNUQVJJSXRtWEt6QkRDZw0K%0D%0A&amp;updated=1579852995583&quot;},{&quot;value&quot;:&quot;image1579853145593.png&quot;,&quot;id&quot;:&quot;88-24966&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8MlM0Q1RxTzQ5REQ2N0lCUTFSMm5ENHJPeFhl%0D%0AOGd4aG1JY19OSkZkX3lOUQ0K%0D%0A&amp;updated=1579853146182&quot;},{&quot;value&quot;:&quot;image1579862047901.png&quot;,&quot;id&quot;:&quot;88-24982&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8aF9XVDJNYktVOWc5eWlhNGpienZ6M0ZkWkl5%0D%0AcXBQTHhUWHBOM1lIUXp0MA0K%0D%0A&amp;updated=1579862048632&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48264&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Какой формат документа?&lt;br/&gt;Сколько страниц, какие поля?&lt;br/&gt;Что нужно проверять по данному документу?&lt;br/&gt;К какому продукту относится? То же самое, как и информационные письма?&lt;/p&gt;\n&lt;p&gt;Доработки следующие:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;6-й шаг добавить новую кнопку&lt;/li&gt;\n&lt;li&gt;Выводить список полей для ФУТС&lt;/li&gt;\n&lt;li&gt;Отправлять с бэка на bpm&lt;/li&gt;\n&lt;li&gt;Отправлять на верификацию и принимать результат проверки&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577097266464,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48710&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;При выборе закладки «Информационное письмо ПТС» или «Информационное письмо ЭПТС» сделать необязательными поля «Номер ЭПТС/ ПТС» и дата выдачи в случае отсутствия в скане/ фото данной информации.&lt;br/&gt;Если в приложенном документе заполнены поля Номер и дата выдачи ЭПТС/ ПТС, то в заявке они также должны быть заполнены.&lt;br/&gt;Обязательными для ввода и верификации оставить следующие поля:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; VIN\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Год изготовления ТС\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Модель, № двигателя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Номер шасси\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Цвет \n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Наличие подписи и печати дилера/ производителя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577780207854,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49338&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветка бэк &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579180707008,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49424&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;BPM&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sm, composite: feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579263091695,&quot;updated&quot;:1579263098436,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49933&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Поля заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/&lt;/a&gt;&lt;br/&gt;1. Даты выдачи и номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjQ5NjV8ZE5BMnJJX0ZBQW9VVV9lZUlVbHB3ZUc4d0Rm%0D%0ATU9hb2NqQmprbll5RkFBUQ0K%0D%0A&amp;updated=1579852995583\&quot;/&gt;&lt;/div&gt;&lt;br/&gt;2. Дата выдачи есть, номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8NFFSejctRTU4OGtLbThXd1V6R0d0dkcwRm10%0D%0ANzhFMDc3cEpqSldXeXBrRQ0K%0D%0A&amp;updated=1579853146182\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579854186741,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49963&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Инфо письмо ЭПТС - при заполненных полях серия и номер и Дата выдачи поля не заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;entity=Document&amp;amp;id=75317\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;entity=Document&amp;id=75317&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8Q2xZQ01BV0l1Z1Bvcy1wSGVTWmJxZWFYX0ZW%0D%0ARHVFOURuOHg0RDFaaUhLQQ0K%0D%0A&amp;updated=1579862048632\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579862057441,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54413&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/Dmitry_Sinelnikov\&quot; title=\&quot;Дмитрий Синельников\&quot; data-user-id=\&quot;24-47\&quot;&gt;@Дмитрий Синельников&lt;/a&gt; выкатите задачу на препрод плиз&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584781849768,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54947&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;по задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1620\&quot; title=\&quot;Госпрограмма\&quot; data-issue-id=\&quot;86-74755\&quot; class=\&quot;issue-resolved\&quot;&gt;args-1620&lt;/a&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Если на 6-м шаге выбрана госпрограмма (не пустое поле government_program_type), то&lt;br/&gt;Не давать перейти на следующий шаг, если&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;выбрано не ПТС или ЭПТС&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;а по этой&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;если в заявке отсутствуют госпрограммы: government_program = null&lt;br/&gt;Для типа подтверждения ТС Инфописьмо ПТС/ЭПТС (vehicle_data_source:info_mail_pts и vehicle_data_source:info_mail_epts)&lt;br/&gt;Сделать проверку поля &amp;quot;Номер ПТС/ЭПТС&amp;quot; необязательной&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;итого Номер ПТС/ЭПТС для писем валидируется никогда&lt;/p&gt;\n&lt;p&gt;ветка пп &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585216645620,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1874&quot;,&quot;entityId&quot;:&quot;86-79259&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;При откате после закрытия операционного дня не чистятся проверенные счета на оплату&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Евгений Панков&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584708512298&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1874&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;При откате после закрытия операционного дня не чистятся проверенные счета на оплату, с вследствие чего в &amp;quot;pay&amp;quot; отправляется неверная сумма&lt;br/&gt;Пример заявки 3484974&lt;br/&gt;Возможный вариант решения: Возможно стоит удалять счета на оплату в ПП при переходе в state :operational_day_closed_state&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.pankov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585213739918&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54385&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1874&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;со сделке на кредит выдан отправляем на 10 тысяч больше. в pay request.&lt;br/&gt;убрали страховку, поменяли условия, а при интеграции старые данные отправились&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584713306619,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54406&quot;,&quot;author&quot;:&quot;e.pankov&quot;,&quot;authorFullName&quot;:&quot;Евгений Панков&quot;,&quot;issueId&quot;:&quot;ARGS-1874&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;3490138 отправляли на 95 000 больше чем надо. При этом этап заявка не попадал на этап &amp;quot;сделка не завершена&amp;quot;. Предположу, что не он является проблемой &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/Dmitry_Sinelnikov\&quot; title=\&quot;Дмитрий Синельников\&quot; data-user-id=\&quot;24-47\&quot;&gt;@Дмитрий Синельников&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584726770558,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54685&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1874&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm done&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;sm_rgsb: feature/ARGS-1874\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585051284670,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1794&quot;,&quot;entityId&quot;:&quot;86-77993&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Запуск программ кредитования для сотрудников Банка зарплатных клиентов&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583390118712&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1794&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Спринт 5 8723_Запуск программ кредитования для сотрудников Банка зарплатных клиентов&lt;br/&gt;Цель в Спринте 4: 10.03.2020 задача проанализирована (должны быть проанализированы совместно с аналитиками на стороне ЦФТ), реализация согласована с Заказчиком и задача переведена в &amp;quot;Ready for Development&amp;quot;&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Цель:&lt;/h2&gt;\n&lt;p&gt;Добавление новых типов клиентов с льготными условиями кредитования&lt;/p&gt;\n&lt;h2&gt;FRONT&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить отображение радиобатона в калькуляторе с типами клиентов - &amp;quot;Стандартные условия&amp;quot;, &amp;quot;Сотрудник банка&amp;quot;, &amp;quot;Зарплатный клиент&amp;quot;&lt;br/&gt;&lt;strong&gt;По умолчанию&lt;/strong&gt; выбраны &amp;quot;Стандартные условия&amp;quot;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27168?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcxNjh8bXlVX2o2bl9OUGhfVmItMnNrUTZDMjlxWVZO%0D%0AYm9wVWw0MWtIUDZOVlVvOA0K%0D%0A&amp;amp;updated=1585044643401\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Отправлять на BACK параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если выбраны (по умолчанию) &amp;quot;Стандартные условия&amp;quot; &lt;code class=\&quot;inline-code\&quot;&gt;client_type = standart&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;если выбран &amp;quot;Сотрудник банка&amp;quot;, то &lt;code class=\&quot;inline-code\&quot;&gt;client_type = employee&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;если выбран &amp;quot;Зарплатный клиент&amp;quot;, то &lt;code class=\&quot;inline-code\&quot;&gt;client_type = salary&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В калькуляторе обрабатывать ошибку для новых типов клиентов&lt;/li&gt;\n&lt;li&gt;На 5 шаге в выпадайке отображать еще один документ -  &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups -&amp;gt; 50: Зарплатные перечисления&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;client_type in (employee, salary)&lt;/code&gt;, то на 5 шаге по умолчанию отображать  &amp;quot;Зарплатные клиенты&amp;quot;. Если был изменен тип подтверждающего доход документа нужно сбрасывать выбранные в калькуляторе тип клиента на стандартный и посылать обновленное значение на BACK (&lt;code class=\&quot;inline-code\&quot;&gt;client_type = standart&lt;/code&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt;. Сохранять параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt; в блоке &lt;code class=\&quot;inline-code\&quot;&gt;customer&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Добавить в &lt;code class=\&quot;inline-code\&quot;&gt;catalogue.yml&lt;/code&gt; новый тип документа &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;50: Зарплатные перечисления&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Отправлять во втором extend cid нового типа документа подтверждающего доход документа&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;client_type in (employee, client)&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;income_proof_document_cid == &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt;, то необходимо убрать валидацию ПДН&lt;/li&gt;\n&lt;li&gt;Ожидать доработку по ПДН от BPM. Валидировать, что был приложен &lt;code class=\&quot;inline-code\&quot;&gt;income_proof_document_cid != &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Ждать в &lt;code class=\&quot;inline-code\&quot;&gt;choose_deal_condition&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt;. Менять тип ПДН и отображение в калькуляторе в зависимости от полученного параметра&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h3&gt;Калькулятор&lt;/h3&gt;\n&lt;ol start=\&quot;6\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать параметр &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В зависимости от &lt;code class=\&quot;inline-code\&quot;&gt;client_type&lt;/code&gt; изменять расчет предложений:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;div class=\&quot;wiki-exception-wrapper\&quot;&gt;&lt;span class=\&quot;wiki-plus wiki-minus\&quot;&gt;&lt;/span&gt;&lt;pre class=\&quot;wiki-exception-title wiki-hidden\&quot;&gt;измененные значения добавил в обновленный_каталог.yml (во вложении)&lt;/pre&gt;&lt;span class=\&quot;wiki-hellip wiki-hidden\&quot;&gt;...&lt;/span&gt;&lt;pre class=\&quot;wiki-exception\&quot;&gt;&lt;p&gt;измененные значения добавил в обновленный_каталог.yml (во вложении)\nблоки для продуктов остались неизменными, т.е:&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;беззалог = условия_кредит_без_залог&lt;/li&gt;\n&lt;li&gt;залог на новое тс = условия_кредит_без_залог -&amp;gt; условия_новое_тс&lt;/li&gt;\n&lt;li&gt;залог на бу = условия_кредит_без_залог -&amp;gt; условия_тс_с_пробегом&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/pre&gt;&lt;/div&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если &lt;code class=\&quot;inline-code\&quot;&gt;client_type == standart&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; предложения рассчитываются как сейчас&lt;/li&gt;\n&lt;li&gt;если &lt;code class=\&quot;inline-code\&quot;&gt;client_type == employee&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; в расчете изменяется базовая ставка и показатели снижения конечной ставки по кредиту (расписал &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27275?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyNzV8Q2xiRml5QnJyanQ4ampSMmZsYWppbDhFbUx1%0D%0ARWR4M1kzZ2VnXzROejVpVQ0K%0D%0A&amp;amp;updated=1585153043882\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;если &lt;code class=\&quot;inline-code\&quot;&gt;client_type == salary&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; в расчете изменяется базовая ставка и показатели снижения конечной ставки по кредиту (расписал &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27275?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyNzV8Q2xiRml5QnJyanQ4ampSMmZsYWppbDhFbUx1%0D%0ARWR4M1kzZ2VnXzROejVpVQ0K%0D%0A&amp;amp;updated=1585153043882\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;8\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить валидацию предложений:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если (&lt;code class=\&quot;inline-code\&quot;&gt;client_type == standart&lt;/code&gt; OR &lt;code class=\&quot;inline-code\&quot;&gt;client_type == employee&lt;/code&gt;) AND &lt;code class=\&quot;inline-code\&quot;&gt;БЕЗ_ЗАЛОГ&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; необходимо проверять &lt;strong&gt;ЕСЛИ&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;100_000 &amp;lt;= сумма_кредита &amp;lt;= 3_000_000&lt;/code&gt;, &lt;em&gt;ТО РАССЧИТЫВАТЬ ПРЕДЛОЖЕНИЕ&lt;/em&gt;, &lt;strong&gt;ИНАЧЕ ПЕРЕДАВАТЬ НА FRONT ОШИБКУ - Сумма кредита превышает Максимальный по продукту&lt;/strong&gt; (также указал диапазон суммы кредита &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27275?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyNzV8Q2xiRml5QnJyanQ4ampSMmZsYWppbDhFbUx1%0D%0ARWR4M1kzZ2VnXzROejVpVQ0K%0D%0A&amp;amp;updated=1585153043882\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;9\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить ограничение ПВ:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если (&lt;code class=\&quot;inline-code\&quot;&gt;client_type == standart&lt;/code&gt; OR &lt;code class=\&quot;inline-code\&quot;&gt;client_type == employee&lt;/code&gt;) AND &lt;code class=\&quot;inline-code\&quot;&gt;ЗАЛОГ_НА_БУ&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;0.2 &amp;lt;= первоначальный взнос &amp;lt;= 1&lt;/code&gt; (расписал диапазон ПВ &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27275?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyNzV8Q2xiRml5QnJyanQ4ampSMmZsYWppbDhFbUx1%0D%0ARWR4M1kzZ2VnXzROejVpVQ0K%0D%0A&amp;amp;updated=1585153043882\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;во вложении&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В статусе &lt;code class=\&quot;inline-code\&quot;&gt;get_user_state&lt;/code&gt; ожидать в ответе &lt;code class=\&quot;inline-code\&quot;&gt;lookup_request_done&lt;/code&gt; новые поля:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;SALARY_FLG (значения: 1 - зарплатные клиенты; 2 - пенсионеры; 3 - сотрудник банка; 0 - стандартные условия)&lt;/li&gt;\n&lt;li&gt;INC_PERIOD&lt;/li&gt;\n&lt;li&gt;SALARY_AMOUNT&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сохранять переменные из пункта 1 в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; cft -&amp;gt; client_status&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Добавить в блок &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; cft -&amp;gt; client_status&lt;/code&gt; показатель &lt;code class=\&quot;inline-code\&quot;&gt;main_income&lt;/code&gt;. Рассчитывать показатель &lt;code class=\&quot;inline-code\&quot;&gt;main_income&lt;/code&gt; по алгоритму, описанному ниже:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;strong&gt;если&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;SALARY_FLG IN (1,3) AND OCCUPATION_FORM_CID != 3&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;main_income = SALARY_AMOUNT / INC_PERIOD&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;если&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;SALARY_FLG = 2 AND OCCUPATION_FORM_CID = 3&lt;/code&gt;, &lt;strong&gt;то&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;main_income = SALARY_AMOUNT / INC_PERIOD&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;для всех остальных случаев &lt;code class=\&quot;inline-code\&quot;&gt;main_income = null&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;code class=\&quot;inline-code\&quot;&gt;где OCCUPATION_FORM_CID = MEMORY -&amp;gt; REQUEST -&amp;gt; JOB -&amp;gt; OCCUPATION_FORM_CID&lt;/code&gt;&lt;br/&gt;5. Если рассчитанный &lt;code class=\&quot;inline-code\&quot;&gt;MAIN_INCOME&lt;/code&gt; &amp;lt; 20.000 рублей, то посылать отказ с кодом &lt;code class=\&quot;inline-code\&quot;&gt;MR008&lt;/code&gt; (уже есть)&lt;br/&gt;6. Если &lt;code class=\&quot;inline-code\&quot;&gt;MAIN_INCOME IS NOT NULL&lt;/code&gt;, ТО  посылать рассчитанный MAIN_INCOME в &lt;code class=\&quot;inline-code\&quot;&gt;ABACUS&lt;/code&gt;, иначе рассчитывать как сейчас&lt;br/&gt;7. Если &lt;code class=\&quot;inline-code\&quot;&gt;SALARY_FLG IN (1,3) AND INC_PERIOD &amp;lt; 3 AND extend -&amp;gt; params -&amp;gt; customer -&amp;gt; income_proof_document_cid = &amp;quot;Зарплатные перечисления&amp;quot; and OCCUPATION_FORM_CID != 3&lt;/code&gt;, то посылать доработку по ПДН в стейте &lt;code class=\&quot;inline-code\&quot;&gt;verification_state&lt;/code&gt; на BACK и &lt;code class=\&quot;inline-code\&quot;&gt;main_income = null&lt;/code&gt;&lt;br/&gt;8. Если &lt;code class=\&quot;inline-code\&quot;&gt;MAIN_INCOME IS NOT NULL&lt;/code&gt;, ТО  в стейтах &lt;code class=\&quot;inline-code\&quot;&gt;external_calls_state&lt;/code&gt;при срабатывании фичи не создавать задание для стратегии &amp;quot;work_and_income&amp;quot;&lt;br/&gt;9. В статусе &lt;code class=\&quot;inline-code\&quot;&gt;document_preparation_state&lt;/code&gt; ожидать в ответе &lt;code class=\&quot;inline-code\&quot;&gt;csd_request_done&lt;/code&gt; поля:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;SALARY_FLG (значения: 1 - зарплатные клиенты; 2 - пенсионеры; 3 - сотрудник банка; 0 - стандартные условия)&lt;/li&gt;\n&lt;li&gt;INC_PERIOD&lt;/li&gt;\n&lt;li&gt;SALARY_AMOUNT&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Если&lt;/strong&gt; в &lt;code class=\&quot;inline-code\&quot;&gt;csd_request_done&lt;/code&gt; поля &lt;strong&gt;не&lt;/strong&gt; совпадают с полученными из &lt;code class=\&quot;inline-code\&quot;&gt;lookup_request_done&lt;/code&gt; то отправлять на доработку по ПДН, при этом перезаписывать значения в блоке &lt;code class=\&quot;inline-code\&quot;&gt;client_status&lt;/code&gt; на новые (это нужно для того, чтобы после изменения документа, при расчете в абакус шли данные по main_income из анкеты, а не цфт)&lt;br/&gt;10. Если во втором &lt;code class=\&quot;inline-code\&quot;&gt;extend&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; customer -&amp;gt; income_proof_document_cid != &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;(salary_flg = 1  and OCCUPATION_FORM_CID != 3) OR (salary_flg in (2) and OCCUPATION_FORM_CID = 3)&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;INC_PERIOD &amp;gt;=3&lt;/code&gt; &lt;strong&gt;ТОГДА&lt;/strong&gt; отправлять на BACK в choose_deal_condition  параметр  &lt;code class=\&quot;inline-code\&quot;&gt;client_type = salary&lt;/code&gt; (нужно для того, если агент заполнит анкету с 1 по 6 шаг, а bpm будет только на тегирование паспорта, например)&lt;br/&gt;11. Если во втором &lt;code class=\&quot;inline-code\&quot;&gt;extend&lt;/code&gt; - &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; customer -&amp;gt; income_proof_document_cid != &amp;quot;Зарплатные перечисления&amp;quot;&lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;(salary_flg = 3  and OCCUPATION_FORM_CID != 3) &lt;/code&gt; &lt;strong&gt;AND&lt;/strong&gt; &lt;code class=\&quot;inline-code\&quot;&gt;INC_PERIOD &amp;gt;=3&lt;/code&gt; &lt;strong&gt;ТОГДА&lt;/strong&gt; отправлять на BACK в choose_deal_condition  параметр  &lt;code class=\&quot;inline-code\&quot;&gt;client_type = client&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585212311601&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]},{&quot;name&quot;:&quot;Дата начала работы&quot;,&quot;value&quot;:[&quot;1583409600000&quot;],&quot;valueId&quot;:[&quot;1583409600000&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8723_Запуск программ кредитования для сотрудников Банка зарплатных клиентов.docx&quot;,&quot;id&quot;:&quot;88-26573&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26573?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY1NzN8bkpranZNa0ZzaGp6UElKTWNCZ3piMWx2Vzkz%0D%0AMnVhUXdDOEFHRFRVNEdvNA0K%0D%0A&amp;updated=1583390127437&quot;},{&quot;value&quot;:&quot;плашка в калькуляторе.png&quot;,&quot;id&quot;:&quot;88-27168&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27168?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcxNjh8blBBbERyQjExbnNfQk5zYi14VFNHNTVUQmFk%0D%0AX2FkVmxjUDhHZG5TekVoRQ0K%0D%0A&amp;updated=1585044643401&quot;},{&quot;value&quot;:&quot;обновленный_каталог.yml&quot;,&quot;id&quot;:&quot;88-27275&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27275?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyNzV8SVpReWVZNm1MR2lzcjFIS3d5Xy1rWUVyVDdr%0D%0AU3BnSHJ1NUhYTTNEbFlzaw0K%0D%0A&amp;updated=1585153043882&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53105&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1794&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1725\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://balance.myjetbrains.com/youtrack/issue/ARGS-1725&lt;/a&gt; дубль.&lt;br/&gt;Все еще нет отдельных требований для Авто и обновленной СПР.&lt;br/&gt;Без нее анализ полный не сделать.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583394858786,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54262&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1794&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt; вернула на Александра, отпишитесь, почему задача была заблокирована&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584685453690,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54386&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1794&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Блок со стороны ЦФТ.&lt;br/&gt;Они не прислали обновленную интеграцию.&lt;br/&gt;Но задача в анализе. Пока описываем без ЦФТ.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584713764290,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;2&quot;,&quot;cssClass&quot;:&quot;c3&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;АнализСпринт&quot;,&quot;cssClass&quot;:&quot;c13&quot;}]}, {&quot;id&quot;:&quot;ARGS-1880&quot;,&quot;entityId&quot;:&quot;86-79398&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;BPM Распознавание договоров о приемной семье, опекунах&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584956620637&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1880&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Обрабатывать документы, отличные от свидетельства о рождении/усыновлении для Госпрограммы-Семейный&lt;/p&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object &lt;/code&gt; сохранять новый тип вложений в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В начале шага &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; изменить проверку &lt;strong&gt;Свидетельство о рождении/усыновлении&lt;/strong&gt; (реализовано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;) на конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyMzB8MjlYQnFsTFBSTkJzN3J0T0ktalJJdGRrQVV3%0D%0AN0RjR1RjSWpoZTdyMVhVZw0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список изменений:\n1. Заменил название свитча # логика срабатывания свитча остается прежней\n2. Изменил название задания \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В начале шага  &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyMzB8MjlYQnFsTFBSTkJzN3J0T0ktalJJdGRrQVV3%0D%0AN0RjR1RjSWpoZTdyMVhVZw0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; И &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27231?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyMzF8M19zS0VVZWlyU0lfcFpGSmF6YlNVTFJKcW5m%0D%0Aemhid2FuSjA0UDlRSUpUaw0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27232?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyMzJ8OS14Y25ueDA4MC1WYWYtdmw0NGpUdXBmY0Fl%0D%0AQzRmUk9ZRnAtV3BEMXlRSQ0K%0D%0A&amp;amp;updated=1585131097983\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ждать ответ от верификации&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Для всех конструкторов&lt;/strong&gt; если сработал свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt; отправлять на доработку с ошибкой &amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot; (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;После ответа верификации делать дополнительные проверки (описаны ниже) если проверка пройдена, то одобрять семейную программу, иначе посылать доработку (текст ошибок описан ниже) (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Условия успешной проверки:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    (parent_last_name_1 &amp;amp; parent_first_name_1 == last_name &amp;amp; first_name)       ИЛИ       (parent_first_name_1 &amp;amp; parent_patronymic_name_1 == first_name &amp;amp; patronymic_name) ИЛИ (parent_last_name_2 &amp;amp; parent_first_name_2 = last_name &amp;amp; first_name)       ИЛИ        (parent_first_name_2 &amp;amp; parent_patronymic_name_2 = first_name &amp;amp; patronymic_name):\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;ФИО родителя не совпадает с ФИО из анкеты&amp;quot;\n\nЕсли   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 216 ИЛИ которых целое_число_месяцев(текущая дата - \n           date_of_birth_1)  &amp;lt; 216) &amp;gt;= 2 :\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Один из детей старше 17-ти лет. Приложите другой документ&amp;quot;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585207045171&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1822&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1840&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;d.podshchekoldin&quot;,&quot;fullName&quot;:&quot;Дмитрий Подщеколдин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Шаг 5, госпрограмма 1 (РГС) L (1).png&quot;,&quot;id&quot;:&quot;88-27116&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27116?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcxMTZ8dk51ck5IR2dIZEc1SVc2U05GMlo5SnM3U1Fh%0D%0AS3VIZllraW0xSUU4ajE0SQ0K%0D%0A&amp;updated=1584956620645&quot;},{&quot;value&quot;:&quot;конструктор - договор и свидетельство (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27223&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27223?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMjN8OTVXamJVWjdsTFRydTlmRGtvLUZ1YTJVZnpJ%0D%0AdXFJM1FEYzRQRjlGckd2UQ0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27224&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27224?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMjR8MEZ2OF80TkE4Z2c0aHdXNU1RektfTndoWWxq%0D%0ASzNVODdORnNiRjA5R2pRQQ0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27225&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27225?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMjV8UE1KT01pVS1NUFVDSDZsRFhaVVcwaGFadHNL%0D%0Ab0gxOFlkdGdETVd5OEtLaw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27227&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27227?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMjd8aHU2ejV0ZnhEOWF5eDd4TUtaTHVrVVRZWnNY%0D%0ASUlmWEpydmM4VHZ2NDdmaw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конуструктор - свидетельство (отказ по свитчам).txt&quot;,&quot;id&quot;:&quot;88-27228&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27228?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMjh8N2JpaXQtbm53Q3ZhNDBZaWdBcTR0STZsS0RO%0D%0ASUJjdnVUa3hGRXlhcmI4dw0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - договор и свидететльство (успешный ответ).txt&quot;,&quot;id&quot;:&quot;88-27229&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27229?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMjl8Z2VYOE93WWl3NU5vNTFTcENCbVQzTlhWYzht%0D%0AOFlvb3AtLUFFOWlranlvWQ0K%0D%0A&amp;updated=1585131092851&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27230&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27230?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMzB8aWxrczVUSWtxc2ZSRjVpTThUR2d1NlhKSndE%0D%0AOXRMbEFBbE8xaDlpalBiTQ0K%0D%0A&amp;updated=1585131097983&quot;},{&quot;value&quot;:&quot;конструкто - договор и свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27231&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27231?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMzF8TlY5b3h0eUFVODdERTdiXzBPR1lGc09WTjhp%0D%0AN3ExQmNQeGxFVnRJSWhPNA0K%0D%0A&amp;updated=1585131097983&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье.txt&quot;,&quot;id&quot;:&quot;88-27232&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27232?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyMzJ8T1l0bmwySF9paWtLdkg0U2h1UWxrMThtbXE3%0D%0AMTJxem1wcmZJalo0U28xOA0K%0D%0A&amp;updated=1585131097983&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54805&quot;,&quot;author&quot;:&quot;alexander.kan&quot;,&quot;authorFullName&quot;:&quot;Александр Кан&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;заменил конструктор для двух договоров о приемной семье - убрал селектор&lt;/li&gt;\n&lt;li&gt;добавил ответы для каждого&lt;/li&gt;\n&lt;li&gt;для полей фио в каждом конструкторе нужно подавать на вход данные из анкеты&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585131076405,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54888&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1880&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm_ng_composite_version: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1880\&quot; title=\&quot;BPM Распознавание договоров о приемной семье, опекунах\&quot; data-issue-id=\&quot;86-79398\&quot;&gt;ARGS-1880&lt;/a&gt;&lt;br/&gt;bpm_ng_state_machines_versions:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;version_name: pre_release&lt;br/&gt;import_name: sm1&lt;br/&gt;name: sm_rgsb&lt;br/&gt;version_tag: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1880\&quot; title=\&quot;BPM Распознавание договоров о приемной семье, опекунах\&quot; data-issue-id=\&quot;86-79398\&quot;&gt;ARGS-1880&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585150645572,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1627&quot;,&quot;entityId&quot;:&quot;86-74794&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Справочник агентов и автосалонов (настройка антифрода по автосалонам)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580233132054&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1627&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9009 Справочник агентов и автосалонов (настройка антифрода по автосалонам)&lt;br/&gt;Нужен функционал в Баланс платформе.&lt;/p&gt;\n&lt;hr /&gt;\n&lt;p&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; &lt;/label&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;В УП создается новая страничка &amp;quot;Антифрод&amp;quot;&lt;br/&gt;При нажатии на кнопку &amp;quot;Добавить&amp;quot; открывается карточка добавления антифрода.&lt;br/&gt;Содержимое карточки:&lt;br/&gt;Кнопка активации настроек&lt;br/&gt;выбор типа сущности,на которую назначается проверка(автосалон/маб/агент)&lt;br/&gt;соответственно выбранному типу в следующую выпадайку передается список автосалонов,мабов или агентов(вместе с id и поиском по нему)&lt;br/&gt;поле &amp;quot;тип проверки&amp;quot;(занятость, личность, контактное лицо, андеррайтинг)&lt;br/&gt;поля дата начала и дата конца проверки&lt;br/&gt;сумма кредита (начиная с этой суммы кредита и выше осуществляется перевод на проверку)&lt;br/&gt;Причина (будет комментарием фичи)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Фильтры&lt;br/&gt;Тип: автосалон,маб,агент&lt;br/&gt;Дата (с... по ...)&lt;br/&gt;Регион&lt;/p&gt;\n&lt;p&gt;выводить id карточки на самой карточке и в списке&lt;br/&gt;выводить id сущности (автосалон,маб,агент)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;ГК&lt;/strong&gt;&lt;br/&gt;сделать метод, по которому передавать в УП список пользователей&lt;br/&gt;Фильтровать его по:&lt;br/&gt;-доступ в приложение in (Партнерка Авто,КН)&lt;br/&gt;-роль=agent&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;Бэк УП&lt;/strong&gt;&lt;br/&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;(Для заполнения карточки смотри п.на фронт)&lt;br/&gt;Когда заполняется карточка и выбирается тип &amp;quot;Агент&amp;quot;&lt;br/&gt;из ГК запрашивать список пользователей (см п. на ГК)&lt;br/&gt;&lt;strong&gt;таблица antifrod&lt;/strong&gt;&lt;br/&gt;id&lt;br/&gt;enabled:true/false&lt;br/&gt;scope_type:AutoShow/MAB/Manager&lt;br/&gt;scope_id&lt;br/&gt;verification_type:(соответственно типу)&lt;br/&gt;(занятость-work_and_income, личность-person, контактное лицо-third_person, андеррайтинг-manual_check)&lt;br/&gt;start_date&lt;br/&gt;end_date&lt;br/&gt;credit_amount&lt;br/&gt;reason&lt;/p&gt;\n&lt;p&gt;Все поля в карточке являются обязательными&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;БэкПП&lt;/strong&gt;&lt;br/&gt;при заведении заявки по мабу, автосалону,агенту проверять наличие карточки антифрод enabled:true и start_date &amp;lt;= текущая дата &amp;lt;= end_date&lt;br/&gt;Передавать на BPM в extend2 этот признак &amp;quot;antifrod:true&amp;quot;, а также &amp;quot;credit_amount&amp;quot;,&amp;quot;reason&amp;quot;, &amp;quot;verification_type&amp;quot;&lt;br/&gt;(если у нас сработали несколько карточек по автосалону,мабу и агенту,то передаем все карточки)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;в scoring_1_state смотреть, если по автосалону,мабу или агенту пришел признак &amp;quot;antifrod:true&amp;quot;,&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;расшифровывать тип проверки и преобразовывать в соответствующую матрицу для верификации&lt;br/&gt;(manual_check- подразумевает и manual_check_documents, и manual_check_expert)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;matrix = [0,0,0,0,0]\nгде \nmatrix[0] - прозвоны (work_and_income) \nmatrix[1] - прозвоны (person) \nmatrix[2] - прозвоны (third_person) \nmatrix[3] - underwriting (manual_check_documents)\nmatrix[4] - underwriting (manual_check_expert)\nпринимает два значения 0 и 1, если 1 то производим верификацию данного типа, иначе нет\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверять,что&lt;br/&gt;-сумма кредита &amp;gt;= credit_amount&lt;br/&gt;-segment in (3, 4)&lt;br/&gt;тогда в verification_state направлять заявку на конкретный тип проверки &amp;quot;verification_type&amp;quot; и в качестве комментария(для андеррайтинга) передавать содержимое поля &amp;quot;reason&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;(фича №44-антифрод рисков)&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt;для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;пример1:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=400тыс\nкарточка на прозвон с суммой кредита=200тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка прозвон по сумме 200тыс, комментарий на андеррайтинг не учитывается&lt;/p&gt;\n&lt;p&gt;пример2:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=200тыс\nкарточка на прозвон с суммой кредита=400тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка на андеррайтинг по сумме 200тыс с комментарием &lt;em&gt;андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot; checked=\&quot;\&quot;&gt;доработать селект для КН&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;“SELECT point_of_sales.*, auto_business_modules.*, point_of_sales.species FROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}”\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjYxNTd8WjFGRHRCZUhqMzBXaTJJcmFBQWVlRTBnT0FE%0D%0ATzhLWWVYblZpc19WbE4tMA0K%0D%0A&amp;amp;updated=1582702719772\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjYxNTl8Z3dESlRubm94MkhxOVZWZHAxMnZlaXUzUWxC%0D%0ANFA1Qm9mWXFBX2RjZ19xTQ0K%0D%0A&amp;amp;updated=1582702742130\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjYyNTF8R1I5cm82ZVFlZjlSaHh3ajktZnhjMllqWW9S%0D%0Aa0R0Y19WdVJ2akFtbldCYw0K%0D%0A&amp;amp;updated=1582809897473\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Алексей Богомолов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;20&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.bogomolov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585145995116&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;ready for testing&quot;],&quot;valueId&quot;:[&quot;ready for testing&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.bogomolov&quot;,&quot;fullName&quot;:&quot;Алексей Богомолов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Справочник агентов (1).doc&quot;,&quot;id&quot;:&quot;88-25892&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25892?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjU4OTJ8TnQ0UkRhOEs5Ykl1RFZsVDVhMUQyOW5iZEF5%0D%0AcmJxMVE1TzhEU3ZlejktWQ0K%0D%0A&amp;updated=1582103461421&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26157&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYxNTd8UUVEbm5SMGsyZlI5NUtDdWk4TkhhcVJ4RnJo%0D%0AOHRBdXBHbG1qemRGakRqMA0K%0D%0A&amp;updated=1582702719772&quot;},{&quot;value&quot;:&quot;image2.png&quot;,&quot;id&quot;:&quot;88-26159&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYxNTl8V1BxMFl3RDV6Y05XT0x4a0NkVlVTa2ZYdlNP%0D%0AZ0M2bGJjcHAyX0p2aU1JWQ0K%0D%0A&amp;updated=1582702742130&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26251&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYyNTF8cHNDYjBhVk01MTk1X3FxaDhGcEFyQzBfcE9m%0D%0AaFR5UE1LSkpDZ0hJY1cxYw0K%0D%0A&amp;updated=1582809897473&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50528&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;нужно приложить письмо&lt;br/&gt;требования не готовы, как именно на верификацию попадают?&lt;/p&gt;\n&lt;p&gt;делать будем в УП, предварительно 50-70 SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580715089476,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52672&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582896179438,&quot;updated&quot;:1582896702266,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52764&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; как будет использоваться&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;instance:rgsb_auto/rgsb_cash(может быть оба значения,если доступ есть и там,и там)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;предлагаю в базу писать gatekeeper_id в поле scope_id, тогда по нему можно будет сразу отсекать тех, кто не принадлежит текущему приложению&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583136194955,&quot;updated&quot;:1583136206644,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52776&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;p&gt;фильтр по региону оставляет только записи с МАБом или все салоны и агентов тоже надо фильтровать?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583138832460,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52779&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/i.smelkov\&quot; title=\&quot;Илья Смелков\&quot; data-user-id=\&quot;24-251\&quot;&gt;@Илья Смелков&lt;/a&gt; на первый вопрос ок,можно сделать так&lt;br/&gt;На второй,нужно фильтровать все записи по мабу. И агентов с автосалонами тоже&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139386646,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52782&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139978839,&quot;updated&quot;:1583143544279,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52848&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{:id=&amp;gt;2831,\n :action=&amp;gt;&amp;quot;extend&amp;quot;,\n :resource=&amp;gt;&amp;quot;sm_rgsb&amp;quot;,\n :bank_id=&amp;gt;&amp;quot;rgsb&amp;quot;,\n :project_id=&amp;gt;&amp;quot;auto&amp;quot;,\n :params=&amp;gt;\n  {:request_id=&amp;gt;2831,\n   :id=&amp;gt;2831,\n   :point_of_sale=&amp;gt;\n    {:id=&amp;gt;4507,\n     :title=&amp;gt;&amp;quot;Iona Frisbee&amp;quot;,\n     :cluster=&amp;gt;\n      {:id=&amp;gt;33451,\n       :name=&amp;gt;nil,\n       :role=&amp;gt;&amp;quot;director_light_network&amp;quot;,\n       :auto_business_module=&amp;gt;\n        {:id=&amp;gt;7168,\n         :title=&amp;gt;&amp;quot;Izzy Backyet&amp;quot;,\n         :is_dfo=&amp;gt;false,\n         :subsidiary=&amp;gt;{:id=&amp;gt;7353, :director_level_1=&amp;gt;{:id=&amp;gt;33450, :full_name=&amp;gt;&amp;quot;  &amp;quot;}},\n         :antifrods=&amp;gt;[{:id=&amp;gt;67, :verification_type=&amp;gt;&amp;quot;third_person&amp;quot;, :credit_amount=&amp;gt;0.33333e3, :reason=&amp;gt;&amp;quot;reason3&amp;quot;}]}}},\n   :auto_show=&amp;gt;\n    {:id=&amp;gt;6819,\n     :antifrods=&amp;gt;[{:id=&amp;gt;66, :verification_type=&amp;gt;&amp;quot;person&amp;quot;, :credit_amount=&amp;gt;0.22222e3, :reason=&amp;gt;&amp;quot;reason2&amp;quot;}]},\n   :manager=&amp;gt;\n    {:id=&amp;gt;5810,\n     :antifrods=&amp;gt;[{:id=&amp;gt;65, :verification_type=&amp;gt;&amp;quot;work_and_income&amp;quot;, :credit_amount=&amp;gt;0.11111e3, :reason=&amp;gt;&amp;quot;reason1&amp;quot;}]}}}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160165070,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52849&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка ПП &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160289908,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52955&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка УП и каталог &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583248604146,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53204&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;В связи с обновлением в требованиях, в каком случае должна быть одна проверка с двумя комментариями?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479273986,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53206&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; в примерах в задаче описано&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479796760,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53208&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Ок&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583480720517,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53236&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt; для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;пример2:&lt;br/&gt; карточка на андерратинг с суммой кредита=200тыс&lt;br/&gt; карточка на прозвон с суммой кредита=400тыс&lt;br/&gt; карточка на андерратинг с суммой кредита=300тыс&lt;br/&gt; -выполняется проверка на андеррайтинг по сумме 200тыс с комментарием андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;Я правильно понимаю, что когда у нас несколько карточек, мы ищем тип проверки, у которой сумма минимальна, по ней выполняем сравнение суммы, и, если условие сработало, комментарии используем от всех карточек с таким же типом проверки, даже если у них условие на сумму не выполняется?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583493805292,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53238&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; да,верно. Но это только если у нас андеррайтинг как проверка проходит&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494514532,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53241&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Но это только если у нас андеррайтинг как проверка проходит&lt;/div&gt;&lt;br/&gt;Что это означает?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494743231,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53244&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; мы же для других типов проверок не отправляем комментарий&lt;br/&gt;смотри пример 1&lt;br/&gt;Если у нас выпал прозвон,то мы игнорируем комментарии в карточках андеррайтинга&lt;br/&gt;но если у нас выпал андеррайтинг, то мы берем и отправляем комментарии со всех присутствующих для заявки карточек андеррайтинга&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583495282302,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53929&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; фича с номером 39 уже участвует в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1625\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-74790\&quot; title=\&quot;Интеграция с сервисом Дирекции по управлению Рисками\&quot;&gt;ARGS-1625&lt;/a&gt;, нужно поменять номер здесь или там&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517542037,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53932&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; давай 44, раз все меньше занято&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517806033,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54046&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1627-refactor&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1627-refactor&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584546390717,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54440&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;доработать селект для КН&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;SELECT \n  point_of_sales.*, \n  auto_business_modules.*, \n  point_of_sales.species,\n  antifrods.*\n\nFROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_shows ON auto_shows.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  INNER JOIN antifrods ON \n    (scope_id = auto_business_modules.id AND scope_type = 'MAB')\n    OR\n    (scope_id = auto_shows.id AND scope_type = 'AutoShow')\n    OR\n    (scope_id = #{@gatekeeper_id} AND scope_type = 'Manager')\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584950554270,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1838&quot;,&quot;entityId&quot;:&quot;86-78671&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Отображать в админке BPM причину проблемы/таймаута&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584352675955&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1838&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;1. Добавить во всех случаях, когда переходим в timeout_decline, запись во флаги описание причины переход в этот стейт (на русском и на английском в виду slug) для упрощения работы поддержи.&lt;br/&gt;2. В админку на страничку заявки добавить отображение поля описания причины перехода на русском. Поле выводить только для заявок в статусе timeout_decline&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;Решение&lt;/strong&gt; &lt;br/&gt;Перед переходом в timeout_decline_state устанавливать&lt;br/&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;&lt;li&gt; flags:timeout_decline_reason - название ошибки на английском&lt;br/&gt;&lt;/li&gt;&lt;li&gt; flags:timeout_decline_reason_text - текст ошибки на русском&lt;br/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\n&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Баир Загеев&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;bair.zangeev&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585141166246&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;bair.zangeev&quot;,&quot;fullName&quot;:&quot;Баир Загеев&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1585057914779.png&quot;,&quot;id&quot;:&quot;88-27180&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27180?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcxODB8Mmhnam5FbDNvbVh2a2h4aVRuQ0U0cU1OQVJq%0D%0ASEE2RUw4cDNrSi0wdlZ3Zw0K%0D%0A&amp;updated=1585057915466&quot;},{&quot;value&quot;:&quot;image1585140711953.png&quot;,&quot;id&quot;:&quot;88-27245&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27245?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyNDV8V3NlOVpKY0tjcEkwLXp1U09wUk05aElyTXJX%0D%0AREU5Qkw1UEpWQnhxRVI3aw0K%0D%0A&amp;updated=1585140712549&quot;},{&quot;value&quot;:&quot;image1585140737671.png&quot;,&quot;id&quot;:&quot;88-27246&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27246?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcyNDZ8RlFoTXFNRmUxMDRscmUweEh4RzlxOHN5Tzlp%0D%0AQ1IydTdPVkFwUmRnbEFHZw0K%0D%0A&amp;updated=1585140738166&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54709&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1838&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_admin: feature/ARGS-1838\nsm: feature/ARGS-1838\ncomposite: feature/ARGS-1838\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585057819655,&quot;updated&quot;:1585132890876,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54710&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1838&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27180?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcxODB8MFlOWUx4ZTlnQzg0dERpTFZpTzVpT2JZSmRr%0D%0ATXJQUjFmaE83eWlDS05qNA0K%0D%0A&amp;amp;updated=1585057915466\&quot; alt=\&quot;Выглядит примерном так\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585057952712,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54843&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1838&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1 &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021406/step/6\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021406/step/6&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Перешел в БПМ:&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15943/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15943/details/&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;в Force State выбрал timeout_decline state&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27245?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyNDV8QWF3N1BZYjFBeWJzd3ZfRGV1UXJGNFhaVF85%0D%0AMWlwUEZRaDNJVXZGZ0lhSQ0K%0D%0A&amp;amp;updated=1585140712549\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;Тест 2 &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Зашел в БПМ: &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/?state_machines__current_state=timeout_decline_state\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/?state_machines__current_state=timeout_decline_state&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Выбрал старые заявки со статусом: timeout_decline state:&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3540/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3540/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3777/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3777/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/4242/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/4242/details/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3888/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/3888/details/&lt;/a&gt;&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27246?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcyNDZ8S2tKVDU2T3lnUTAtcDA4MTJzcG8tZWVSRkV0%0D%0AUUpiOTZKMi1TSmRkTmE3dw0K%0D%0A&amp;amp;updated=1585140738166\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585140768014,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1470&quot;,&quot;entityId&quot;:&quot;86-71983&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Игнорировать сумму за КАСКО при проверке полиса и квитанции об оплате при оплате наличными&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анвар Анарбаев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576662850664&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1470&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Описание требования&lt;/strong&gt;&lt;br/&gt;Игнорировать сумму за КАСКО при проверке документа при оплате наличными&lt;br/&gt;При оплате наличными очень часто (почти всегда) при заведении заявки агент ставит примерную сумму за КАСКО и далее на проверке документа и квитанции об оплате сумма не сходится. Необходимо убрать проверку суммы или сделать обогащением.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение_BPM:&lt;/strong&gt;&lt;br/&gt;Актуально только для КАСКО НЕ В КРЕДИТ (insurances-&amp;gt;included:false).&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.anarbaev&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585139857501&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1857&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51469&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Актуально только для каско не в кредит (insurances-&amp;gt;included:false).&lt;br/&gt;Возможное решение:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори  и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581578569930,&quot;updated&quot;:1581584094592,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51494&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем согласования банка&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581587204371,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1757&quot;,&quot;entityId&quot;:&quot;86-77516&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Настройка признака Партнерская СУ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582874398320&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1757&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;8763  Спринт 4&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;В &lt;strong&gt;csd_request&lt;/strong&gt; в блоке insurances добавить параметр &lt;strong&gt;partner_insurance&lt;/strong&gt; с возможными значениями «1» и «0».&lt;/p&gt;\n&lt;p&gt;Если в &lt;strong&gt;choose_deal_condition_done&lt;/strong&gt; от партнерки в insurances-&amp;gt;insurance_tariff effect_on_the_rate=&amp;#39;tariff_TradePoint&amp;#39;&lt;br/&gt;&lt;strong&gt;то partner_insurance=0&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;иначе&lt;/strong&gt; (например effect_on_the_rate in (КСЖ_ргсб,GAP_ргсб,Z_ROAD_rgsb_family))&lt;br/&gt;&lt;strong&gt;partner_insurance=1&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;Проверить,что&lt;br/&gt;-Значение «1» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые Банка».&lt;br/&gt;-Значение «0» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые партнеров».&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585134292145&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Окружение&quot;,&quot;value&quot;:[&quot;uat&quot;],&quot;valueId&quot;:[&quot;uat&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8763_БТ_признак Партнерская СУ_авто_кн_БП_v1.docx&quot;,&quot;id&quot;:&quot;88-26273&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26273?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYyNzN8ZEU4aGpZTkh0SzFXR2libzN1YWVCdllXa29G%0D%0AMVdFUXpYSm5ScXB4b0dpOA0K%0D%0A&amp;updated=1582874406787&quot;},{&quot;value&quot;:&quot;8763_БТ_признак Партнерская СУ_авто_кн_БП_v11.docx&quot;,&quot;id&quot;:&quot;88-26283&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26283?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYyODN8M1BaZ2pjbEdEc3ZtYlM1blV5eUc2YWNRN1VC%0D%0AOERmT1JQSXU1NlBteVpROA0K%0D%0A&amp;updated=1582875730717&quot;},{&quot;value&quot;:&quot;image1583159777167.png&quot;,&quot;id&quot;:&quot;88-26423&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26423?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY0MjN8N09QYmJXY1lOZ3Q2TFYyZl9iOUxGMkdvY0ZG%0D%0AR19PakVac01Rbl9wUW41WQ0K%0D%0A&amp;updated=1583159777690&quot;},{&quot;value&quot;:&quot;image1583159929597.png&quot;,&quot;id&quot;:&quot;88-26424&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26424?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY0MjR8b0JQNThsM1RNQU1POUY4cHFDeWRhVG5sWXhS%0D%0AM01tUEk0c1pYYWk2a25hNA0K%0D%0A&amp;updated=1583160062244&quot;},{&quot;value&quot;:&quot;image1583160628952.png&quot;,&quot;id&quot;:&quot;88-26425&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26425?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY0MjV8S3dNS2twR3B4LTdnTHI0RW1XajljajNTejMw%0D%0AQUVfV3BmX1BCZkpGcHpsWQ0K%0D%0A&amp;updated=1583160629633&quot;},{&quot;value&quot;:&quot;image1583160878992.png&quot;,&quot;id&quot;:&quot;88-26426&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26426?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY0MjZ8cDNpTVFfUnN3WEozVXY0Z3NkUzlFUXU4bTdv%0D%0AdURDVHUyTnh0T2VpSm00SQ0K%0D%0A&amp;updated=1583160879621&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52747&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в pay_request есть блок insurances, в нем те же самые данные, что и в csd (с учетом новых данных из верификации).&lt;br/&gt;В страховках в блоке insurances в pay_request должен быть параметр partner_insurance?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583059286894,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52748&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; по требованиям от банка необходимо только в csd направлять&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583059641405,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52749&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ок. Предлагаю включить в тесты проверку, что в pay_request не отправится этот параметр&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583060321212,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52753&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1757\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583074671582,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52795&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;регресс по старым заявка.&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Значение «1» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые Банка».&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14103/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14103/details/&lt;/a&gt;&lt;br/&gt;ФР = ОР&lt;/li&gt;\n&lt;li&gt;Значение «0» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые партнеров».&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13375/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13375/details/&lt;/a&gt;&lt;br/&gt;ФР = ОР&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583141887760,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52856&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1: заявка  только со СТРАХОВАНИЕМ ОТ БАНКА:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой только от банка.&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14194/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14194/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;ВКАСКО_ргсб&amp;quot;,&lt;br/&gt;&amp;quot;partner_insurance&amp;quot;: 1&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26423?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY0MjN8c2c5SVpRZFlnWGNwVFY4WmtuRzlVRWNMSGho%0D%0AT09mbjVTdlM4cVRFMVBJWQ0K%0D%0A&amp;amp;updated=1583159777690\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 2: заявка только со СТРАХОВАНИЕМ ОТ ПАРТНЕРА :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой только от партнера.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26424?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY0MjR8S1RZQnpsdGgtbThiNFBkNFpmd29EYWM5a0hx%0D%0AWGlhNlZqOERyS0VGX3k3SQ0K%0D%0A&amp;amp;updated=1583160062244\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14206/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14206/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;tariff_TradePoint&amp;quot;&lt;br/&gt;partner_insurance=0 не отображается в БПМ если не нажать свитч в кредит.&lt;br /&gt;\n&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26426?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY0MjZ8dmdhNXgyUzd6MTRiVmZ4OG9SZk9tbldDSE1O%0D%0AQ19LOGlERGxyZF8wVm5fbw0K%0D%0A&amp;amp;updated=1583160879621\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Создал заявку со страховкой только партнера и нажал указанный свитч &amp;quot;В кредит&amp;quot;.&lt;/li&gt;\n&lt;li&gt;Прошел все этапы до выдачи кредита:&lt;br/&gt;&amp;quot;partner_insurance&amp;quot;: 0&lt;br/&gt;(ОР = ФР)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 3:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой от партнеров и от банка:&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14211/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14211/details/&lt;/a&gt;&lt;br/&gt;ФР:&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;tariff_TradePoint&amp;quot;,&lt;br/&gt;partner_insurance=1&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 4:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку не выбрав ни одной страховки.&lt;/li&gt;\n&lt;li&gt;Пройдя все проверки на 6 шагу система требует выбрать страховку:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26425?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY0MjV8Wlhoem04cVBJYlZ6V1BGcU1uTzJCdUlpa1Ux%0D%0AZEJfTUFwcjVvZWJPUkdUcw0K%0D%0A&amp;amp;updated=1583160629633\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583161326704,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;0&quot;,&quot;cssClass&quot;:&quot;c3&quot;}]}, {&quot;id&quot;:&quot;ARGS-1828&quot;,&quot;entityId&quot;:&quot;86-78602&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Доработка проверки ПТС&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584101818851&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1828&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;BPM РГС в запросе document_vehicle_passport.verify для полей isPrevHolderEntity и prevHolderInfo отправлять disabled: true&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Кравченко&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;anna.kravchenko&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585134127563&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Z-1246&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;anna.kravchenko&quot;,&quot;fullName&quot;:&quot;Анна Кравченко&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54623&quot;,&quot;author&quot;:&quot;vladimir.goncharuk&quot;,&quot;authorFullName&quot;:&quot;Владимир Гончарук&quot;,&quot;issueId&quot;:&quot;ARGS-1828&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;bpm_ng_composite_version: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1828\&quot; title=\&quot;Доработка проверки ПТС\&quot; data-issue-id=\&quot;86-78602\&quot;&gt;ARGS-1828&lt;/a&gt;&lt;br/&gt;bpm_ng_state_machines_versions:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;version_name: pre_release&lt;br/&gt;import_name: sm1&lt;br/&gt;name: sm_rgsb&lt;br/&gt;version_tag: feature/&lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1828\&quot; title=\&quot;Доработка проверки ПТС\&quot; data-issue-id=\&quot;86-78602\&quot;&gt;ARGS-1828&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585039170116,&quot;updated&quot;:1585039738312,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54811&quot;,&quot;author&quot;:&quot;anna.kravchenko&quot;,&quot;authorFullName&quot;:&quot;Анна Кравченко&quot;,&quot;issueId&quot;:&quot;ARGS-1828&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тестовые заявки:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;залоговый кредит, новое ТС - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15923/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15923/details/&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;залоговый кредит, ТС с пробегом - &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15905/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15905/details/&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;В сообщении &lt;code class=\&quot;inline-code\&quot;&gt;document_vehicle_passport.verify&lt;/code&gt; появились поля:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;prev_holder_info&amp;quot;: {\n&amp;quot;disabled&amp;quot;: true\n},\n...\n-&amp;quot;is_prev_holder_entity&amp;quot;: {\n&amp;quot;disabled&amp;quot;: true\n...\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ФР = ОР&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1585133831968,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1749&quot;,&quot;entityId&quot;:&quot;86-77338&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Отправлять timestamp&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582719624263&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1749&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Отправлять timestamp при отправке задачи на верификацию&lt;br/&gt;Для приоритетных добавлять плюс 3 часа&lt;br/&gt;для остальных 24 часа&lt;/p&gt;\n&lt;p&gt;Проблема:&lt;br/&gt;на верификации из-за приоритетов по дате задачи сдвигаются на стыке месяцев&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585038608359&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1531&quot;,&quot;entityId&quot;:&quot;86-72778&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Документация&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577474762271&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1531&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Необходима документация&lt;/h1&gt;\n&lt;p&gt;Важно описать что для чего есть, как оно работает, какие сообщения БПМ куда передает с какими параметрами и что оно ожидает в ответе.&lt;/p&gt;\n&lt;h2&gt;Roadmap &lt;em&gt;предварительный&lt;/em&gt;:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создать скелет документации (.rst):&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Composite&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; SM&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Composite:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot;&gt; Расписать все сообщения: что отправляется, какие типы данных, что значат параметры и что принимаем, какие типы данных, обязательные параметры.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h3&gt;SM:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot;&gt; Расписать все стейты: для чего, почему, что происходит, какой в этом смысл &lt;/label&gt;&lt;del&gt;жизни&lt;/del&gt;, какие возможные дальнейшие &lt;del&gt;пути&lt;/del&gt; стейты могут быть для заявки, исходя из того или иного ответа.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1585038592121&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48594&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1531&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Документирование&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577474777067,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1840&quot;,&quot;entityId&quot;:&quot;86-78711&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Распознавание договоров о приемной семье, опекунах&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584363355425&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1840&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Обрабатывать документы, отличные от свидетельства о рождении/усыновлении для Госпрограммы-Семейный&lt;/p&gt;\n&lt;h2&gt;FRONT:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;При выборе гос. программы &amp;quot;семейный автомобиль&amp;quot; отображать подзаголовок &amp;quot;Документы по детям&amp;quot; и два блока для добавления вложений&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Названия блоков:\n1. свидетельство о рождении (усыновлении)/договор об осуществлении опеки  \n2. договор о приемной семье/постановление суда об опеке   \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Отправлять новое вложение &amp;quot;договор о приемной семье/постановление суда об опеке&amp;quot; на BACK (&lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;Ограничить максимальное количество вложений равное 2 для каждого блока. Ограничить минимальное количество вложений равное 0 для каждого блока&lt;/li&gt;\n&lt;li&gt;Принимать от BACK валидацию на 6 шаге&lt;/li&gt;\n&lt;li&gt;Принимать  подсказки от BACK для каждого пункта&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BACK:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить в &lt;strong&gt;catalogue.yaml&lt;/strong&gt; новый cid &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; ( если нужно то добавить &lt;code class=\&quot;inline-code\&quot;&gt;afterloading_documents_groups&lt;/code&gt; &lt;strong&gt;== 49&lt;/strong&gt;) и  для &amp;quot;Договор о приемной семье/Постановление о назначении опекуна&amp;quot;&lt;/li&gt;\n&lt;li&gt;Принимать новые типы документов с FRONT&lt;/li&gt;\n&lt;li&gt;Добавить валидацию на 6 шаге - если выбрана &lt;code class=\&quot;inline-code\&quot;&gt;гос. программа: семейный автомобиль&lt;/code&gt;, то валидоровать количество документов равное 2 (должно быть приложено в сумме два документа, где &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;in (51, 49)&lt;/strong&gt;). Если условие не выполнено - не пускать дальше и посылать ошибку на FRONT, иначе идти по процессу&lt;/li&gt;\n&lt;li&gt;Отправлять в BPM новый тип вложений в сообщении &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Добавить в блок &lt;code class=\&quot;inline-code\&quot;&gt;document_config&lt;/code&gt; массив &lt;code class=\&quot;inline-code\&quot;&gt;documents_for_childrens&lt;/code&gt;.  Отправлять в блоке &lt;code class=\&quot;inline-code\&quot;&gt;document_for_childrens&lt;/code&gt; ключ  &lt;code class=\&quot;inline-code\&quot;&gt;tips&lt;/code&gt; только для &lt;code class=\&quot;inline-code\&quot;&gt;documents_gorups&lt;/code&gt; in &lt;strong&gt;(49, 51)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;table class=\&quot;wiki-tbl\&quot;&gt;\n&lt;thead&gt;\n&lt;tr&gt;&lt;th align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;documents_groups&lt;/th&gt;&lt;th align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;tips&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;свидетельство о рождении (усыновлении)/договор об осуществлении опеки - &lt;strong&gt;51&lt;/strong&gt;&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Главный разворот и первая страница договора&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;договор о приемной семье/постановление суда об опеке - &lt;strong&gt;49&lt;/strong&gt;&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Договор - первая страница; постановление - страница с разделом &amp;quot;Постановляю&amp;quot;&lt;/td&gt;&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object &lt;/code&gt; сохранять новый тип вложений в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В начале шага &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; изменить проверку &lt;strong&gt;Свидетельство о рождении/усыновлении&lt;/strong&gt; (реализовано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;) на конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwMDB8LTVQSm5tSDJuY3dkaUVfQXBxa0lNbUtlZlF5%0D%0AQmhZSUFqQTQzRU1yMmloYw0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список изменений:\n1. Заменил название свитча # логика срабатывания свитча остается прежней\n2. Изменил название задания \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В начале шага  &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwMDB8LTVQSm5tSDJuY3dkaUVfQXBxa0lNbUtlZlF5%0D%0AQmhZSUFqQTQzRU1yMmloYw0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; И &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26999?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY5OTl8OU9BZzljSVljaU4zTU1iaE1hOE1IbnJPTWdy%0D%0AX0p3by1PVktnLWhuNzVTOA0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26998?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY5OTh8UGdNTjdzejFWUXh5c2FMeWtmYVY2Vklzck5O%0D%0AVHg5Mm5OdFc5VTNGQWQ2OA0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 49&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ждать ответ от верификации&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Для всех конструкторов&lt;/strong&gt; если сработал свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt; отправлять на доработку с ошибкой &amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot; (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;После ответа верификации делать дополнительные проверки (описаны ниже) если проверка пройдена, то одобрять семейную программу, иначе посылать доработку (текст ошибок описан ниже) (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Условия успешной проверки:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    (parent_last_name_1 &amp;amp; parent_first_name_1 == last_name &amp;amp; first_name)       ИЛИ       (parent_first_name_1 &amp;amp; parent_patronymic_name_1 == first_name &amp;amp; patronymic_name) ИЛИ (parent_last_name_2 &amp;amp; parent_first_name_2 = last_name &amp;amp; first_name)       ИЛИ        (parent_first_name_2 &amp;amp; parent_patronymic_name_2 = first_name &amp;amp; patronymic_name):\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;ФИО родителя не совпадает с ФИО из анкеты&amp;quot;\n\nЕсли   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 213 ИЛИ которых целое_число_месяцев(текущая дата - \n           date_of_birth_1)  &amp;lt; 213) &amp;gt;= 2 :\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Один из детей старше 17-ти лет. Приложите другой документ&amp;quot;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Тест-кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;На верификации надо ввести по обоим документам:&lt;br/&gt;Фамилию клиента&lt;br/&gt;Имя клиента&lt;br/&gt;Отчество клиента&lt;br/&gt;Дата рождения ребенка&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если приложен только для одного ребенка договор о приемной семье, на верификации можно ввести несколько дат рождения для одного документа&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если приложен для двух детей договор о приемной семье, на верификации можно ввести несколько дат рождения для нескольких документов&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Проверить, что проверка по детям делается параллельно проверке ПТС&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Доработки работают&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584980342335&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1878&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1879&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1880&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1822&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Шаг 5, госпрограмма 1 (РГС) L (1).png&quot;,&quot;id&quot;:&quot;88-26983&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26983?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY5ODN8RnVud3p4YVE5ZkFPQTdsbjJMLUoySmVxbFlY%0D%0AbEEwanBaV1dOOE4xekdTNA0K%0D%0A&amp;updated=1584535922386&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье.txt&quot;,&quot;id&quot;:&quot;88-26998&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26998?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY5OTh8ZzlpRFFHQ0lBdkF6dkNVTDFhRnRhLTFPQlRk%0D%0AZVpkZlZ3c3NfMk05Nzh2TQ0K%0D%0A&amp;updated=1584603354467&quot;},{&quot;value&quot;:&quot;конструкто - договор и свидетельство.txt&quot;,&quot;id&quot;:&quot;88-26999&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26999?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY5OTl8dFVqLUtjWWdyWWNJaDliN19oYWl3NEdnN3Rs%0D%0ARzVkM0EtX1hoUmlwUHV5SQ0K%0D%0A&amp;updated=1584603354467&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27000&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcwMDB8bTFfaDd6Nk1BQkF5dEV3SVVwZ1VQQ0I1UjVX%0D%0AcmtSOG1UWDRMdHhMLWNqbw0K%0D%0A&amp;updated=1584603354467&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1687&quot;,&quot;entityId&quot;:&quot;86-76121&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Баг в платежках для сторонних СУ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1581424967786&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1687&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В платежках для сторонних СУ не заполняется номер полиса, пример из заявки &lt;a href=\&quot;https://bpm-ng-app-1.rgsb-prod.cloud.b-pl.pro/admin/bpm/walker/156518/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;3316189&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Оплата страховой премии по договору № %s от 10.02.2020 г. АНЧУГОВ НИКОЛАЙ ВЯЧЕСЛАВОВИЧ. НДС не облагается.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Причина: в рамках задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1250\&quot; title=\&quot;Убрать проверку сторонних СУ\&quot; data-issue-id=\&quot;86-68622\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1250&lt;/a&gt; убрали проверку полиса для таких страховок.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584968900401&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54524&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1687&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/alexander.kan\&quot; title=\&quot;Александр Кан\&quot; data-user-id=\&quot;24-320\&quot;&gt;@Александр Кан&lt;/a&gt; решали данную проблему в рамках задачи по назначению платежа&lt;br/&gt;с НДС?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584967785599,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54532&quot;,&quot;author&quot;:&quot;alexander.kan&quot;,&quot;authorFullName&quot;:&quot;Александр Кан&quot;,&quot;issueId&quot;:&quot;ARGS-1687&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt;  не решали&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584968900403,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1877&quot;,&quot;entityId&quot;:&quot;86-79379&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Убрать лаг в 3 месяца при проверке свидетельства о рождении&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584955112107&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1877&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В рамках задачи 1364 реализовывали проверку возраста ребенка:&lt;br/&gt;Проверяли, что каждый ребенок должен быть не старше 18 лет-3 месяца.&lt;/p&gt;\n&lt;p&gt;Проверка осуществляется в check_object_state (при переходе с 6 на 7-й шаг)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;Убрать при проверке условие про доп 3 месяца.&lt;br/&gt;То есть изменить проверку по возрасту:&lt;/p&gt;\n&lt;p&gt;Проверяем по каждой странице:&lt;br/&gt;...&lt;br/&gt;2) Проверка Даты рождения ребенка&lt;br/&gt;(Дата текущая-Дата рождения ребенка)округленно в месяцах &amp;lt;18*12 месяцев.&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;\nЕсли    целое_число_месяцев(текущая дата - date_of_birth_1)        &amp;lt; 216:\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Документ 1: Ребенок старше 17-ти лет. Приложите другое свидетельство&amp;quot;\n\n\n\nЕсли    целое_число_месяцев(текущая дата - date_of_birth_2)    &amp;lt; 216:\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Документ 2: Ребенок старше 17-ти лет. Приложите другое свидетельство&amp;quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Баир Загеев&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;bair.zangeev&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584966177713&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1364&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;bair.zangeev&quot;,&quot;fullName&quot;:&quot;Баир Загеев&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1584966046547.png&quot;,&quot;id&quot;:&quot;88-27134&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27134?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcxMzR8WDI2cmVpY1pQTGF2TXZLUlBELWJJeFh0LUdi%0D%0ASkt5Mk5ya2dBOTViMnFtdw0K%0D%0A&amp;updated=1584966047249&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54484&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1877&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Также изменено сообщение об ошибке на&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Документ 1: Ребенок старше 18-ти лет. Приложите другое свидетельство\nДокумент 2: Ребенок старше 18-ти лет. Приложите другое свидетельство\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;done&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;composite: hotfix/ARGS-1877\nsm: hotfix/ARGS-1877\nостальное master\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584960077211,&quot;updated&quot;:1584961279813,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54514&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1877&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1 (создать заявку на семейный автомобиль, указать двух детей, одному 17,9, второму 18) ОР==ФР:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021016\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021016&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Прошел верификацию.&lt;/li&gt;\n&lt;li&gt;Указал, двоих детей:&lt;br/&gt;Одному 17,9м, второму 18 ровно.&lt;/li&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27134?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcxMzR8NGg3R3hzdWcxRG5KdTNzRm1RSkQ1bHdIT3gw%0D%0ANkkzRG5NZWNJSkhIekdhYw0K%0D%0A&amp;amp;updated=1584966047249\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;5. Возраст первого 17 лет и 10 месяцев, второму указал, что 18 лет и 1 месяц:&lt;br/&gt;&lt;em&gt;Документ №2: Ребенок старше 18-ти лет. Приложите другое свидетельство.&lt;/em&gt;&lt;br/&gt;6. Возраст первого 17 лет и 10 месяцев, возраст второго 17 лет и 9 месяцев:&lt;br/&gt;Верификация пройдена.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584966073305,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1795&quot;,&quot;entityId&quot;:&quot;86-77995&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Сумма НДС в назначении платежа&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583390230427&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1795&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Спринт 5  8749 АВТО. Сумма НДС в назначении платежа&lt;br/&gt;Цель в Спринте 4: 10.03.2020 задача проанализирована (должны быть проанализированы совместно с аналитиками на стороне ЦФТ), реализация согласована с Заказчиком и задача переведена в &amp;quot;Ready for Development&amp;quot;&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Решение:&lt;/h2&gt;\n&lt;h3&gt;BPM:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В state &lt;code class=\&quot;inline-code\&quot;&gt;pre_deal_verification_state&lt;/code&gt;: Добавить в конструктор заданий (&amp;quot;Счет на оплату&amp;quot; и &amp;quot;Счет на оплату ТС&amp;quot;) на верификацию поле для ввода НДС - &lt;code class=\&quot;inline-code\&quot;&gt;vat_amount&lt;/code&gt; (пример конструкторов во вложении)&lt;/li&gt;\n&lt;li&gt;Сохранять из ответа поле &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; vat_amount -&amp;gt; out&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Счет на оплату ТС - &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; verified -&amp;gt; invoice_vehicle -&amp;gt; vat_amount&lt;/code&gt;&lt;br/&gt;Счет на оплату - &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; verified -&amp;gt; invoice_additional -&amp;gt; страховка -&amp;gt; vat_amount&lt;/code&gt;&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;strong&gt;Изменить формулировку назначения платежа&lt;/strong&gt;, отсылаемое в сообщении pay_request в cfd:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Для всех формулировок, в которых есть фраза &amp;quot;В том числе НДС&amp;quot; добавить строку: &lt;code class=\&quot;inline-code\&quot;&gt;Сумма НДС без копеек&lt;/code&gt; &amp;amp; &lt;code class=\&quot;inline-code\&quot;&gt;(Сумма НДС без копеек прописью)&lt;/code&gt; &amp;amp; &amp;quot;руб.&amp;quot; &amp;amp; &lt;code class=\&quot;inline-code\&quot;&gt;Сумма копеек&lt;/code&gt; &amp;amp; &amp;quot;коп.&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;Пример:&lt;/em&gt;&lt;br/&gt;В том числе НДС 10 833 (Десять тысяч восемьсот тридцать три) руб 33 коп.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Найти задания в верификации &amp;quot;счет на оплату&amp;quot;, &amp;quot;счет на оплату ТС&amp;quot;&lt;/li&gt;\n&lt;li&gt;Выбрать в каждом задании облагает ндс, указать сумму&lt;/li&gt;\n&lt;li&gt;Убедиться в том, что сумма ндс сохраняется в memory для тс (обычный счет) и страховок (счет на оплату страховки) для заявки&lt;/li&gt;\n&lt;li&gt;Убедиться в том, что в cfd в pay_request отправляется формулировка согласно описанию таска (для счета на оплату ТС и счета на оплату страховки)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584961638793&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-385&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1679&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;Дата начала работы&quot;,&quot;value&quot;:[&quot;1583409600000&quot;],&quot;valueId&quot;:[&quot;1583409600000&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8749_АВТО. Сумма НДС в назначении платежа.docx&quot;,&quot;id&quot;:&quot;88-26578&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26578?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY1Nzh8bEY2OF90anQ1bGt4ZURhOHBjcl9aaGxuR25W%0D%0AVFNlYnNxcTR3a1dHX1UxUQ0K%0D%0A&amp;updated=1583396257817&quot;},{&quot;value&quot;:&quot;счет на оплату тс - ответ с ндс.txt&quot;,&quot;id&quot;:&quot;88-26723&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26723?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY3MjN8U0M4bXA4YlI5ZmxZMnVCQUNmSmNCM0l6T1Ft%0D%0ATmdVQXJXOXV5c0NLYzd6UQ0K%0D%0A&amp;updated=1583843077440&quot;},{&quot;value&quot;:&quot;счет на оплату - ответ с ндс без тс.txt&quot;,&quot;id&quot;:&quot;88-26725&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26725?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY3MjV8X2l1V2lsb2RKX3BrYWQxWXJIV0FHd2REWlM0%0D%0AYlJBLWF6ZVlZVF9sdU5kUQ0K%0D%0A&amp;updated=1583843077440&quot;},{&quot;value&quot;:&quot;счет на оплату - конструкотр с ндс.txt&quot;,&quot;id&quot;:&quot;88-26727&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26727?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY3Mjd8ZTZ6cDBFMHZlZWVTQ3Z3bmFNaEszanI5bmZF%0D%0AcnlvSXJjUzVacjdoOEVpNA0K%0D%0A&amp;updated=1583843143086&quot;},{&quot;value&quot;:&quot;счет на оплату тс - конструктор поле ввода ндс.txt&quot;,&quot;id&quot;:&quot;88-26728&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26728?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY3Mjh8Z0g2SUs0bjluUVl4SUVpNG1NVjJHRkFRMGhS%0D%0Ad3hnc0lOeEU3cFdjLU9zUQ0K%0D%0A&amp;updated=1583843143086&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53112&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Где требования?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583396176999,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53136&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Была еще проблема, что некорректно отправляем номер сервисной карты. В рамках этой задачи тоже можно уточнить повторно у банка. Письма у &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kriventsova\&quot; title=\&quot;Кривенцова Александра\&quot; data-user-id=\&quot;24-205\&quot;&gt;@Кривенцова Александра&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583407403891,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53728&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветки:&lt;br/&gt;bpm_ng_engine: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;br/&gt;bpm_ng_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584372706535,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;},{&quot;value&quot;:&quot;1&quot;,&quot;cssClass&quot;:&quot;c3&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;АнализСпринт&quot;,&quot;cssClass&quot;:&quot;c13&quot;}]}, {&quot;id&quot;:&quot;ARGS-805&quot;,&quot;entityId&quot;:&quot;86-61632&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;bpm (админка) - спрятать за keycloak или реализовать аутентификацию через openid-connect&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Владимир Астафьев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1568201470614&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;805&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;va&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584958279731&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Z-1225&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-718&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирована&quot;},{&quot;value&quot;:&quot;ARGS-1005&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирована&quot;},{&quot;value&quot;:&quot;ADM-7196&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;подзадача&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;m.nuzhnyj&quot;,&quot;fullName&quot;:&quot;Максим Нужный&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53346&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Причина задержки: отсутствие второго девопса (на три банка) - вопрос о найме эскалировался неоднократно.&lt;br/&gt;Макса Нужного разрывают - куча задач:&lt;br/&gt;Самая приоритетная - масштабирование ГК на РГСБ&lt;br/&gt;Еще: акты на зените в прод.&lt;br/&gt;И т.д.&lt;br/&gt;Исходя из текущих задач М. Нужного:&lt;br/&gt;предполагаемый срок реализации - середина следующей недели:&lt;br/&gt;После ГК, надо масштабировать ПП РГСБ - Нагрузка растет:&lt;br/&gt;Масштабирование ГК и ПП до конца этой недели&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583842654566,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53353&quot;,&quot;author&quot;:&quot;m.nuzhnyj&quot;,&quot;authorFullName&quot;:&quot;Максим Нужный&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;У этого сервиса есть внутренняя система аутентификации, которая ограничивает доступ. Интеграция с keycloak реализуется программистами в рамках смежных задач.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583846879266,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53652&quot;,&quot;author&quot;:&quot;evgeniy.mikhaylov&quot;,&quot;authorFullName&quot;:&quot;Евгений Михайлов&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тем не менее, прошу указать актуальный реалистичные срок выполнения задачи.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584342608777,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53724&quot;,&quot;author&quot;:&quot;evgeniy.mikhaylov&quot;,&quot;authorFullName&quot;:&quot;Евгений Михайлов&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.krutilina\&quot; title=\&quot;Анна Крутилина\&quot; data-user-id=\&quot;24-242\&quot;&gt;@Анна Крутилина&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584372389989,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1479&quot;,&quot;entityId&quot;:&quot;86-72088&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Заявка виснет при отсутствии ИНН работодателя&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Карина Сафарова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576747771528&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1479&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В заявке 3159568 клиент указал как место работы ликвидированную компанию ООО &amp;quot;ПАМО&amp;quot;, в Дадате у этой компании нет ИНН, в следствии чего заявка зависла на pre_scoring_decision_state и не могла пройти далее.&lt;/p&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24048?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjQwNDh8YUY3MzBGOHdUMVFWLTN5YUZudUlxWXBVS2pk%0D%0AWnA2WmNLLXFDUFQycVlzVQ0K%0D%0A&amp;amp;updated=1576747692636\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;k.safarova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584950513474&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-24048&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24048?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjQwNDh8UGFZZGw1S1g1V19fYUR0bkpmVzVRazNsUUR2%0D%0AeXhBWnJlU0tSLXo3YjNaaw0K%0D%0A&amp;updated=1576747692636&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-49478&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Баг всплывает периодически, свежий пример:&lt;br/&gt;3238464&lt;br/&gt;АИО &amp;quot;АГЕНСТВО РАЗВИТИЯ ИНВЕСТИЦИЙ И ИННОВАЦИЙ&amp;quot;&lt;/p&gt;\n&lt;p&gt;Нужно автоматизировать решение проблемы, либо выработать ручной алгоритм решения такой проблемы&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579419757069,&quot;updated&quot;:1579419767729,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51659&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Повторение: 3342216&lt;br/&gt;ООО &amp;quot;ГАЗПРОМ ПЕРЕРАБОТКА ОРЕНБУРГ&amp;quot;&lt;br/&gt;По ЕГРЮЛ компания ликвидирована, отправил в отказ&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581915938497,&quot;updated&quot;:1581916306396,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51660&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Запрос в СПАРК можно осуществлять как по ИНН, так и по ОГРН:&lt;br/&gt;&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/825163825\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/825163825&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/952205393\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/952205393&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;На ИНН компании так же завязана логика определения типа работодателя (ИП или ЮЛ), нужно найти другой способ получения этой информации&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581916290469,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51695&quot;,&quot;author&quot;:&quot;a.anarbaev&quot;,&quot;authorFullName&quot;:&quot;Анвар Анарбаев&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;3329843  еще один пример данной проблемы&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581939093540,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51961&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Выводить ошибку на фронте и не пропускать дальше. &amp;quot;У компании отсутствует ИНН - недостаточно данных&amp;quot; или еще чего.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;+написать банку&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582115875913,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1625&quot;,&quot;entityId&quot;:&quot;86-74790&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Интеграция с сервисом Дирекции по управлению Рисками&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580232728443&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1625&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Требования&lt;/strong&gt;&lt;br/&gt;9018 Баланс-платформа интегрируется с сервисом Дирекции по управлению Рисками. Отправляет запрос в этот сервис  и получает ответ.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;После скоринг_1 (scoring_state - после ответа от скоринга и кроноса):&lt;br/&gt;отослать запрос с данными в сервис общения с рисками (задача на написание сервиса у Ruby -договориться об общении)&lt;br/&gt;название сервиса &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;&lt;br/&gt;запрос -  &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt;&lt;br/&gt;ответ  -&lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;во вложении файл exel c набором данных (и путь к ним) &amp;quot;Интеграция Дирекция рисков&amp;quot; , если нет запроса в кронос , то не присылать кронос&lt;/li&gt;\n&lt;li&gt;необходимо ждать ответ от сервиса, и только после &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; идти дальше на &lt;code class=\&quot;inline-code\&quot;&gt;verification_state&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;если до ответа сервиса &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;,  БПМ уже увел заявку в деклайн, то  сообщение от сервиса не влияет на ее состояние (по какому коду отказывать не принципиально).&lt;/li&gt;\n&lt;li&gt;Если заявка не ушла в decline_state и в &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: false&lt;/code&gt;, то смотрим в statusList на код отказа или код андеррайтинга (см пункты 6-7) , если NULL, значит по клиенту от Банка фрода нет, идем дальше&lt;/li&gt;\n&lt;li&gt;Если в &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: true&lt;/code&gt;, то на другие параметры не смотрим, считаем что проверка rgsb_risks_service пройдена , можем переходить в verification_state&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;statusList =BL010, SCR010, BL011, SCR011, BL012, SCR012, BL013, SCR013, BL014,SCR014&lt;/code&gt; то по заявке отказ - &lt;code class=\&quot;inline-code\&quot;&gt;decline_state&lt;/code&gt;,-детали(юзердата,мораторий и тд) кодов отказа во вложении (коды отказа)&lt;br/&gt;может прийти только один код&lt;/li&gt;\n&lt;li&gt;Если `statusList =SF001, SF002, SF003, SF004,SF005), то посылать заявку на ручной андеррайтинг (номера фичей и текст для андеррайтера во вложении) &amp;quot;Прозвоны 5.1.3&amp;quot;&lt;/li&gt;\n&lt;li&gt;новые фичи как и старые должны записаться в triggered_features&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Юзердата&lt;/strong&gt;&lt;br/&gt;во вложении (кода отказы) коды отказа и пояснения, необходимо их зашить&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ЯЗЫК на выбор Тим-лидов&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо написать сервис(название- &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;)  который будет общаться по API с риск-сервисом банка: по URL (10.95.5.233:8080/application)&lt;/li&gt;\n&lt;li&gt;К сервису будет обращаться БПМ с Json запросом &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Данные из &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt; отправить по URL выше&lt;br/&gt;пример обратного ответа сервиса  по API -&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;без ошибок&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;с ошибкой&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [&amp;quot;BL001&amp;quot;],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;с двумя и более ошибками&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [&amp;quot;BL001&amp;quot;, &amp;quot;BL002&amp;quot;, ...],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ответ от сервиса ждать в течении 30 секунд&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если ответ приходит, то отправляем в БПМ &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; с параметром &lt;code class=\&quot;inline-code\&quot;&gt;no_answer: false&lt;/code&gt; (положить в &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt;)&lt;br/&gt;+тe данные, что пришли по API&lt;/li&gt;\n&lt;li&gt;если ответ не приходит в течении 30 сек, то отправляем в БПМ &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; с параметром &lt;code class=\&quot;inline-code\&quot;&gt;no_answer: true&lt;/code&gt; (положить в &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt;)&lt;br/&gt;договориться о деталях общения&lt;br/&gt;Для теста послать тестовое сообщение curl -X POST 10.95.5.233:8080/application -H &amp;#39;Content-type:application/json&amp;#39; -d &amp;#39;{}&amp;#39;&lt;br/&gt;для теста БПМ нужно развернуть сервис на стейдже  (но учитывать что сам сервис рисков работает только на проде)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;5\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если от сервиса рисков придет код ошибки который не был указан ранее, то стейт машина перейдет в &lt;code class=\&quot;inline-code\&quot;&gt;timeout_decline_state&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Формат ответа от прокси&lt;/li&gt;\n&lt;/ol&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;python&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-python\&quot;&gt;def create_payload(\n    meta_ok: bool,\n    errors: Optional[dict],\n    response_status: Optional[int],\n    requested_at: datetime,\n    response_json: Optional[dict],\n    response_at: Optional[datetime],\n    _result: Optional[dict],\n):\n    return {\n        &amp;quot;ok&amp;quot;: meta_ok,  # True только если стоит обрабатывать payload['result']\n        &amp;quot;data&amp;quot;: {\n            &amp;quot;meta&amp;quot;: {\n                &amp;quot;ok&amp;quot;: meta_ok,\n                &amp;quot;errors&amp;quot;: errors,\n                &amp;quot;http_status&amp;quot;: response_status,\n                &amp;quot;requested_at&amp;quot;: requested_at.isoformat(),\n                &amp;quot;response&amp;quot;: response_json,\n                &amp;quot;response_at&amp;quot;: response_at.isoformat() if response_at else None,\n            },\n            &amp;quot;result&amp;quot;: _result,  # dict содержащий ключ error_codes: list[str]\n        },\n    }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;DevOps&lt;/strong&gt;&lt;br/&gt;Развернуть сервис на стейдже и проде по договоренности с разработчиком сервиса&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест-прод-саппорт&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;смотреть после выкатки на сообщения об интеграции по первым заявкам, разбирать отдельные кейсы ,если наш сервис или Банка не реагирует на сообщения&lt;br/&gt;найти заявки где по интеграции отказ или андерратинг(оба кейса найти)&lt;br/&gt;&lt;strong&gt;по результатам ОБЯЗАТЕЛЬНО отписаться в комментарии-со скринами&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест-препрод-стейдж&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;симулировать сообщения от сервиса с кодом отказа(любыми 3)=работа корректная если отказ по заявке, в юзердату и reject записалось корректно(если до ответа сервиса БПМ уже проставил код отказа, то ок , заявка в деклайне, сообщение от сервиса не влияет на ее состояние)&lt;/li&gt;\n&lt;li&gt;симулировать сообщения от сервиса с кодом андерратинга(любыми 2)=работа корректная, если заявка отправилась на ручную проверку андеррайтером&lt;/li&gt;\n&lt;li&gt;проверить что бпм ждет ответ от сервиса и только после идет дальше по стейт машине&lt;/li&gt;\n&lt;li&gt;проверить что если &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: false&lt;/code&gt;, то БПМ смотрит есть ли код отказа или андеррайтинга(либо проверяем ,либо отказываем (проверить оба кейса) , может еще прийти NULL, тогда никак не реагирует, идет дальше по процессу&lt;/li&gt;\n&lt;li&gt;проверить что если &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: true&lt;/code&gt;, то БПМ  никак не реагирует, идет дальше по процессу(значит интеграция не отвеила&lt;/li&gt;\n&lt;li&gt;проверить что фичи записываются в triggered_features&lt;/li&gt;\n&lt;li&gt;проверить что если после 30 сек в сервис пришло сообщение по API, то он ничего не послал в БПМ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584947242975&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Прозвоны_v5.1.3.xlsx&quot;,&quot;id&quot;:&quot;88-26193&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26193?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYxOTN8UWttbjJsMExFS2VQaTl6NzBvUktoUEZ3dDZ4%0D%0AT3BYWlpQd1NpN3BYLUxoTQ0K%0D%0A&amp;updated=1582721740226&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_1110.xlsx&quot;,&quot;id&quot;:&quot;88-26196&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26196?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYxOTZ8WURxaXBDRHBSTjg0eTZTRnNoVl80V1F0UzBi%0D%0AZkl0aVZMZ0c1X3NRaGlVRQ0K%0D%0A&amp;updated=1582729268793&quot;},{&quot;value&quot;:&quot;Интеграция Дирекция рисков.xlsx&quot;,&quot;id&quot;:&quot;88-26199&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26199?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYxOTl8SjNHWWZtcHd0RWNqLW05WHBoNVRZWHpPOWND%0D%0AWExFZ1VuU3ZmQUZSQUE5Yw0K%0D%0A&amp;updated=1582730103248&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50359&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;100 SP предварительно&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580383595049,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51471&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В Авто есть блок consolidated_credit_history. Будет аналогичная структура?&lt;br/&gt;Нужно после скоринга 0 отправлять в интеграции данные по КИ клиента?&lt;br/&gt;Что делать с xml? Просто принимать/отправлять?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581579545314,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51600&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем ответа от банка&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581675383887,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52480&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;нужен ответ от Ли по мораторию&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582723581180,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1142&quot;,&quot;entityId&quot;:&quot;86-66636&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Docker образ для Userdata&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Каратеев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1572266367252&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1142&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Сделать Docker образ для userdata.&lt;br/&gt;Для этого сделать возможность загрузки настроек из переменных окружения, по максимуму вынести параметры в дефолтный конфиг.&lt;br/&gt;Решить, каким образом будут подключаться к образу все 3 репозитория.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.karateev&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584784401535&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-823&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1466&quot;,&quot;entityId&quot;:&quot;86-71962&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Тесты для модуля Transport в BPM&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576658126043&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1466&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Покрыть тестами то, что не покрыто&lt;/li&gt;\n&lt;li&gt;Включить тесты в pipeline&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584784377849&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1639&quot;,&quot;entityId&quot;:&quot;86-75029&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Изменение порядка отправления запросов из BPM в Scoring&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Никита Лукьянов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580395573668&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1639&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Для того, чтобы при повторном запросе в скоринг по тому же клиенту использовать не протухшие данные, необходимо реализовать процесс подачи запросов в форме каскада.&lt;/p&gt;\n&lt;p&gt;На данный момент из BPM РГСБ отправляются запросы по клиенту в скоринг в формате:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;ФССП&lt;/li&gt;\n&lt;li&gt;НБКИ&lt;/li&gt;\n&lt;li&gt;Эквифакс&lt;/li&gt;\n&lt;li&gt;ОКБ&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;Необходимо&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;pre_scoring_state&lt;/code&gt; привести запросы BPM в формат каскада, то есть запросы по клиенту в скоринг должны выглядеть таким образом:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;ФССП&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ + Эквифакс&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ + Эквифакс + ОКБ&lt;br/&gt;Уточнения по &lt;code class=\&quot;inline-code\&quot;&gt;source&lt;/code&gt;:&lt;br/&gt;-&amp;quot;fssp&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;nbki&amp;quot;: &amp;quot;ch_only&amp;quot;&lt;br/&gt;-&amp;quot;equifax&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;okb&amp;quot;: &amp;quot;user_info&amp;quot;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;в scoring_1_state&lt;br/&gt;ДОПОЛНИТЕЛЬНО Запрашивать историю по клиенту&lt;br/&gt;Т. е к sources добавить: (получиться как в reverify - все возможные проверки - кэш не нужен)&lt;br/&gt;-&amp;quot;fssp&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;nbki&amp;quot;: &amp;quot;ch_only&amp;quot;&lt;br/&gt;-&amp;quot;equifax&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;okb&amp;quot;: &amp;quot;user_info&amp;quot;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;В reverify_state&lt;br/&gt;Убиваем свой кэш (ходим всегда в скоринг со всеми сорсами - как в scoring_1_state)&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;! Также необходимо приложить комит по отправляемым запросам для Дмитрия Г. (&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/houdini\&quot; title=\&quot;Дима Голубь\&quot; data-user-id=\&quot;24-1\&quot;&gt;@Дима Голубь&lt;/a&gt;)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;br/&gt;Разные поведения заявок проверить&lt;br/&gt;Проверить отказы, доработки (предеклайны)&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;nikita.lukyanov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584784149487&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52325&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;span class=\&quot;markdown-language-tag\&quot;&gt;yaml&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-yaml\&quot;&gt;\n# настройки запросов в скоринг\nscoring_settings:\n    strategies:\n        pre_scoring_fssp:\n            sources:\n                fssp:\n                    - user_info\n            max_attempts: 5\n            timeout: 2\n        pre_scoring_nbki:\n            sources:\n                fssp:\n                    - user_info\n                nbki:\n                    - ch_only\n            max_attempts: 5\n            timeout: 2\n        pre_scoring_equifax:\n            sources:\n                fssp:\n                    - user_info\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n            max_attempts: 5\n            timeout: 2\n        pre_scoring_okb:\n            sources:\n                fssp:\n                    - user_info\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                okb:\n                    - user_info\n            max_attempts: 5\n            timeout: 2\n        scoring1:\n            sources:\n                fssp:\n                    - user_info\n                    - user_score\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                    - user_score\n                    - fraud\n                okb:\n                    - user_info\n                    - user_score\n            max_attempts: 5\n        reverify_scoring:\n            sources:\n                fssp:\n                    - user_info\n                    - user_score\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                    - user_score\n                    - fraud\n                okb:\n                    - user_info\n                    - user_score\n            max_attempts: 5\n        scoring_update_pd:\n            sources:\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                okb:\n                    - user_info\n    pre_scoring_order:\n        - pre_scoring_fssp\n        - pre_scoring_nbki\n        - pre_scoring_equifax\n        - pre_scoring_okb\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582641841552,&quot;updated&quot;:1582810391933,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52572&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Вопросы от Федора&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Я тут посмотрел на твою ветку скоринга, и у меня опять вопросы возникли к задаче. Возможно чуток еще поанализиоровать придется.&lt;br/&gt;Как-то так вышло, почитай, понятно ли написал:&lt;br/&gt;Вопросы:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сейчас мы запрашиваем источники последовательно, если какой-то из источников не отвечает, запрашиваем следующий, предыдущий больше не запрашиваем. В связи с изменениями увеличится ли время ожидания запросов, если один источник не работает, а мы его запрашиваем во всех последующих? На сколько максимально оно может увеличиться?&lt;/li&gt;\n&lt;li&gt;В БПМ запросы и проверки выполняются последовательно (в последовательности, указанной в СПР, т.е. на последующих этапах предыдущие проверки не выполняются. Возможна ли сейчас (до внесения изменений) ситуация, например, что мы запрашиваем скор по НБКИ, на этапе запроса кредитной истории НБКИ не работал, и в результате (при запросе скора) по НБКИ запросилась кредитная история? (вместо НБКИ может быть любой другой источник)&lt;/li&gt;\n&lt;li&gt;Возможна ли такая ситуация после внесения изменений?&lt;/li&gt;\n&lt;li&gt;Возможна ли сейчас (до внесения изменений) ситуация, например, что мы запрашиваем скор по НБКИ, по кредитной истории уже истекло время кэша, и в результате (при запросе скора, но без запроса КИ) по НБКИ запросилась кредитная история?&lt;/li&gt;\n&lt;li&gt;Возможна ли такая ситуация после внесения изменений?&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Я по своим вопросам вижу три варианта развития этой задачи:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Больше ее не делаем&lt;/li&gt;\n&lt;li&gt;Делаем как написано, плюс включаем проверки всех предыдущих скорингов в следующие&lt;/li&gt;\n&lt;li&gt;Скоринг придумывает какой-то другой формат, чтобы оно работало как нам надо, но и чтобы их устраивало.&lt;br/&gt;Во втором варианте ты обновляешь метки, в первом и третьем не обновляешь&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/blockquote&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582810229156,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52662&quot;,&quot;author&quot;:&quot;nikita.lukyanov&quot;,&quot;authorFullName&quot;:&quot;Никита Лукьянов&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Да, время ожидания увеличится.&lt;br/&gt;2,3 Как до внесения изменений, так и после, если в какой-то запрос источник не отработал, то он будет запрошен в следующий раз, если в запросе он будет указан.&lt;br/&gt;4,5 Не зависит от внесения изменений в bpm.&lt;br/&gt;В описанной ситуации если кэш КИ НКБИ истек, и он явно не запрашивался в новом запросе, то он а) не будет запрашиваться заново и б) старый ответ КИ НБКИ не будет подмешиваться в ответ.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Если кэш КИ НБКИ не истек и явно не запрашивался:&lt;br/&gt;а) не будет запрашиваться заново&lt;br/&gt;б) данные КИ НБКИ будут подмешено в ответ по этому клиенту&lt;/p&gt;\n&lt;p&gt;Если кэш КИ НБКИ истек и явно запрошен:&lt;br/&gt;а) будет запрос в нбки&lt;br/&gt;б) данные будет взяты только свежие данные, если нбки ответил&lt;/p&gt;\n&lt;p&gt;Если кэш КИ НБКИ не истек и явно запрашивался:&lt;br/&gt;а) не будет запроса в НБКИ&lt;br/&gt;б) будут взяты данные из кэша и подмешены в результат&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582892816232,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52685&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Нам не очень подходит, что время запросов увеличится. Вариант решения проблемы: добавить флажок или что-то вроде того, чтобы бпм мог управлять, нужен ли нам запрос по конкретному источнику/фиче (т.е. источник в данном случае, например, fssp, фича - user_info, я не знаю точно, какие тут термины правильные), или же нам нужны только данные из кэша для расчётов.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;По остальным пунктам будем с нашей стороны решать.&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/nikita.lukyanov\&quot; title=\&quot;Никита Лукьянов\&quot; data-user-id=\&quot;24-317\&quot;&gt;@Никита Лукьянов&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582902655599,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52834&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Поговорили с Д. Голубем, ждем доработок по кэшам в скоринге&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583155957527,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1806&quot;,&quot;entityId&quot;:&quot;86-78314&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Заявка не реагировала на восстановление сделки&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Евгений Панков&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583854609890&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1806&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Заявка 3437285 не реагирована на команду восстановления сделки, из за падения в таймаут делайн перед сменой дня. Можно ли как то доработать систему дабы избежать подобных зависаний? ( или сделать кнопку &amp;quot;восстановления сделки&amp;quot; недоступной при активной ошибке из ЦФТ.&lt;/p&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26738?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY3Mzh8SjhnQ21ZY3NXSmtzMWdwZlZJYWdOM3RqZ1l3%0D%0AVUt6T0xIYWt0QnE2MW9BYw0K%0D%0A&amp;amp;updated=1583854306698\&quot; alt=\&quot;\&quot; /&gt;   &lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26739?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY3Mzl8ZllYMGU3cEpjQUEwTVlNeUEyaENVVGNQQVlw%0D%0AMGJzSmdILWxGX1E2MWxzVQ0K%0D%0A&amp;amp;updated=1583854567624\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.pankov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783747507&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26738&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26738?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY3Mzh8UU45RVJtZUtSRGgtOXpCWnZvS3hxdVFTM2lB%0D%0Ad2o0cmJmZnU1RkVFTXp5UQ0K%0D%0A&amp;updated=1583854306698&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26739&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26739?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY3Mzl8Z3dLTjlQbC05SG5IT2J3ZEJaVEdOSXFvZjUy%0D%0AQkdoNDRJeWo4Q005eGdxMA0K%0D%0A&amp;updated=1583854567624&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1381&quot;,&quot;entityId&quot;:&quot;86-70980&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Рефакторинг проверок подписей в БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1575634061948&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1381&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;em&gt;Проблема&lt;/em&gt;&lt;br/&gt;В рамках задач &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1353\&quot; title=\&quot;ресо проверка подписей\&quot; data-issue-id=\&quot;86-70479\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1353&lt;/a&gt; и &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1359\&quot; title=\&quot;Корректировка проверки подписей СЖ,ВК,ДК\&quot; data-issue-id=\&quot;86-70600\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1359&lt;/a&gt; (фасттреки) в код была внесена логика, не вписывающаяся в текущую структуру кода без ее изменения (т.е. костыли).&lt;br/&gt;Т.к. времени на нормальное решение выделено не было, нужно сделать структуру, более приспособленную к изменениям.&lt;br/&gt;&lt;em&gt;Анализ&lt;/em&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если полис (insurances_type_id in (1,2,3,4), ниже последняя версия изменений&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24769?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjQ3Njl8QjZhX0h2dXZwVUxfZDl6Y1JJdmFDTU1SYjhM%0D%0AVDB0WjIxazRlNXpMckJxUQ0K%0D%0A&amp;amp;updated=1579599694787\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Если полис (insurances_company_id in (4)&lt;br/&gt;убран свитч signatureMatch&lt;br/&gt;добавлен&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;thereInsSignature&amp;quot;: \n{\n&amp;quot;caption&amp;quot;: &amp;quot;Везде присутствует подпись Страхователя и совпадает с эталоном&amp;quot;,\n&amp;quot;error_message&amp;quot;: &amp;quot;Не везде присутствует подпись Страхователя или не совпадает с эталоном&amp;quot;,\n&amp;quot;type&amp;quot;: &amp;quot;reject&amp;quot;,\n&amp;quot;scope&amp;quot;: &amp;quot;document&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;как работает сейчас&lt;/em&gt;&lt;br/&gt;сейчас каждая проверка инициализирует себя по ID документа, то есть для Вкаско, Каско, СЖ, Гэп проверки отсылаются разные , но состав свичей у них одинаковый&lt;br/&gt;захардкожено 1 условие для компании РЕСО, которое меняет любую из этих проверок (как именно в связной задаче)&lt;br/&gt;скриншоты выше единственные которые используются для проверки подписей в полисах&lt;br/&gt;&lt;em&gt;итог&lt;/em&gt;&lt;br/&gt;на данный момент логика проверки подписей простая&lt;br/&gt;усложняться и модифицироваться могут только логика проверки полисов от определенных компаний(insurances_company_id, но это прогноз, пока доп требований не было)&lt;br/&gt;&lt;strong&gt;что нужно БПМ&lt;/strong&gt;&lt;br/&gt;прорефакторить код условия с ресо, продумать лучшее решение, если условия с компаниями будут еще добавляться&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783575076&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1353&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1359&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-24768&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24768?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjQ3Njh8Z190Z0xxUzVuUWQ4S2xhcWdHZEJhZ2kxaXhU%0D%0AeXZHWnFNZnlwcXpFbHJkQQ0K%0D%0A&amp;updated=1579599466366&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-24769&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24769?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjQ3Njl8WnU4TFRMYUlxQ0VUNzhmQ0EtQ1J2LUswZWF6%0D%0AeDlJSTBieGFOdXRVdXBXUQ0K%0D%0A&amp;updated=1579599694787&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1008&quot;,&quot;entityId&quot;:&quot;86-64522&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;(userdata-app) SSO KeyCloak&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Кубасов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1570458154594&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1008&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Аутентификацию на ресурсе &lt;a href=\&quot;https://userdata-app-1.auto-rgsb-st1.cloud.b-pl.pro\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://userdata-app-1.auto-rgsb-st1.cloud.b-pl.pro&lt;/a&gt; (userdata-app) нужно настроить для работы через SSO KeyCloak. т.е. перевести внутренний сервис на работу с единой системой идентификации и управления доступом&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;dmitry.kubasov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783455375&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-717&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирует&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;m.nuzhnyj&quot;,&quot;fullName&quot;:&quot;Максим Нужный&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-46399&quot;,&quot;author&quot;:&quot;ka&quot;,&quot;authorFullName&quot;:&quot;Константин Астраханцев&quot;,&quot;issueId&quot;:&quot;ARGS-1008&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Вопрос тот же, что и для &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1005\&quot; title=\&quot;(bpm-ng-app) SSO KeyCloak\&quot; data-issue-id=\&quot;86-64516\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1005&lt;/a&gt;: поддержка КК в админке уже есть? В ЮД вроде тоже джанговская.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1574960746459,&quot;updated&quot;:1574960768291,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;ИБ-средний&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1783&quot;,&quot;entityId&quot;:&quot;86-77896&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Корректировка логики обработки результатов ФССП&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583303594503&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1783&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9027 Корректировка логики обработки результатов ФССП&lt;br/&gt;&lt;strong&gt;Бизнес -требования&lt;/strong&gt;&lt;br/&gt;Если в Долге ФССП отсутствует сумма, а в поле «Дата, причина окончания или прекращения ИП» указаны следующие причины прекращения:&lt;br/&gt;•\tст. 46 ч. 1 п. 2 – 7&lt;br/&gt;•\tст. 43 ч. 1 п. 1 – 2,&lt;br/&gt;то отказывать&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;В ответе по  ФССП(скоринг_0, скоринг_1, reverify) проверять параметр  &lt;code class=\&quot;inline-code\&quot;&gt;sign_of_termination&lt;/code&gt; , путь :&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;params-&amp;gt;sf-&amp;gt;features-&amp;gt;1-&amp;gt;bank_rgsb-&amp;gt;fssp-&amp;gt;sign_of_termination\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Если он&lt;code class=\&quot;inline-code\&quot;&gt; true&lt;/code&gt;, то отказывать с кодом BS003, передавать на бэк в партнерку причину отказа: &lt;code class=\&quot;inline-code\&quot;&gt;Отказ. Задолженность по ФССП&lt;/code&gt;&lt;br/&gt;Информация по коду отказа во вложении &amp;quot;Список_кодов_отказов&amp;quot; (как зашить в юзердату, что отправить в БКИ, что отправить на партнерку)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Юзердата&lt;/strong&gt;&lt;br/&gt;добавить новый код отказа BS003, информация во вложении  &amp;quot;Список_кодов_отказов&amp;quot;&lt;br/&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;прислать из скоринга sign_of_termination: true, проверить что произошел отказ BS003&lt;br/&gt;Проверить, что в партнерке корректно отразилась причина отказа&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584782956313&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9027_Корректировка отказов по ФССП.docx&quot;,&quot;id&quot;:&quot;88-26502&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26502?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY1MDJ8aS1xY2EycTM1OGZ4X1BZd3lzSFp0aFlkR0ww%0D%0AcnlQWUR0UDZmcE5icFp3cw0K%0D%0A&amp;updated=1583303610324&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_0503.xlsx&quot;,&quot;id&quot;:&quot;88-26594&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26594?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY1OTR8dHozdTc5ckQ2RVNOZ0w1Z19KT3NzazJPdW9n%0D%0AaGtlbXNOZ0R3QU5janBSUQ0K%0D%0A&amp;updated=1583404513128&quot;},{&quot;value&quot;:&quot;image1584095289187.png&quot;,&quot;id&quot;:&quot;88-26822&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26822?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY4MjJ8QjkxZXJkQ0lkbXVlcC1nSWRWUzIxSE9QbnZw%0D%0Ab2R0eGxJdWhFYnBfbWIwTQ0K%0D%0A&amp;updated=1584095289873&quot;},{&quot;value&quot;:&quot;image1584095308949.png&quot;,&quot;id&quot;:&quot;88-26823&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26823?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjY4MjN8eFRsQTI2LWt5V0Rja1RIODFKMHRRNWllbEc0%0D%0AdkZUM1RRcnYydklrZTVmOA0K%0D%0A&amp;updated=1584095309540&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53577&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1783&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1783&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1783&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584081295666,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53592&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1783&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1:  (Добавив данные в фейкер, кредит не должен быть одобрен) ОР == ФР.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил в &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/7\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/7&lt;/a&gt; строку, добавив следующий параметр:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26822?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY4MjJ8R1FicXZBYVZ6RXNTTmZiSTUwSGtLWE8yTzFn%0D%0ANWRIS2FkWWlYYWpPWE5RVQ0K%0D%0A&amp;amp;updated=1584095289873\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку со следующими параметрами:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019924\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019924&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Прошел верификацию документов.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Отказ.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26823?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjY4MjN8WU1tNVBZM2hpM3hLZ0NOTkJyTWxfbC1wb3hT%0D%0AdmJSNDVvLUpIRFY2RjV3VQ0K%0D%0A&amp;amp;updated=1584095309540\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&amp;quot;reject&amp;quot;: {&lt;br/&gt;-&amp;quot;info&amp;quot;: [&lt;br/&gt;&amp;quot;Отказ. Задолженность по ФССП&amp;quot;&lt;br/&gt;],&lt;br/&gt;-&amp;quot;codes&amp;quot;: [&lt;br/&gt;&amp;quot;BS003&amp;quot;&lt;br/&gt;],&lt;br/&gt;&amp;quot;status&amp;quot;: &amp;quot;DECLINE&amp;quot;,&lt;br/&gt;&amp;quot;is_cascade&amp;quot;: false&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14681/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14681/details/&lt;/a&gt;&lt;br/&gt;ОР == ФР.&lt;/p&gt;\n&lt;p&gt;Тест 2 изменение в скоринг 1 ОР==ФР:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил в &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/6\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/6&lt;/a&gt; строку, добавив следующий параметр: sign_of_termination&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019992\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019992&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;прошел все проверки верификации паспорта.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Отказ. Задолженность по ФССП.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14741/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14741/details/&lt;/a&gt;&lt;br/&gt;ОР==ФР.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 3 изменение в ресивер:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/20\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/20&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Использовал уже одобренную заявку: &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30018752\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30018752&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Ввел все данные автомобиля, началась проверка автомобиля.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Пришел отказ. Отказ. Задолженность по ФССП.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13977/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13977/details/&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584095337858,&quot;updated&quot;:1584114005379,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1078&quot;,&quot;entityId&quot;:&quot;86-65628&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Docker образ для BPM&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1571305241968&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1078&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Сделать Docker образ для BPM.&lt;br/&gt;Для этого сделать возможность загрузки настроек из переменных окружения, по максимуму вынести параметры в дефолтный конфиг.&lt;br/&gt;Решить, каким образом будут подключаться к образу все 4 репозитория&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584782368184&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-823&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1042&quot;,&quot;entityId&quot;:&quot;86-64914&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Подготовка DRS к масштабированию&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1570692388773&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1042&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Проблема&lt;/h1&gt;\n&lt;p&gt;При выполнении одновременно нескольких задач по распознаванию процессы DRS убиваются OOM киллером. Со временем это приводит к тому, что DRS не работает в принципе.&lt;br/&gt;При получении задачи на распознавание сообщение из Rabbit сразу акается. Из-за этого новые сообщение берутся сразу этой же машиной и выполняются одновременно в большом количестве.&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо переделать структуру проекта таким образом, чтобы сообщение акалось только после обработки, либо при возникновении ошибки.&lt;/li&gt;\n&lt;li&gt;Уменьшить количество процессов и установить prefetch_count равным количеству процессов.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Доработать&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;airbrake - не подключать если нет ключей&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584781474693&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1523&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51755&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1042&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1042&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581953181946,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54411&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1042&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; что за задача[, ей уже 5 месяцев? еще не на проде? если надо тетсировать, то переведи на Макса, плиз&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584781474694,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1728&quot;,&quot;entityId&quot;:&quot;86-77025&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Добавление дополнительного контактного номера клиента&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582269191433&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1728&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;8824&lt;/p&gt;\n&lt;h2&gt;Дизайн&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Дизайн&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо отрисовать макет &lt;strong&gt;Шаг 1, Общие сведения&lt;/strong&gt; с полем (ячейкой) для ввода дополнительного контактного номера клиента. Поле (ячейка) должна называться &lt;strong&gt;Дополнительные номер&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;Отрисовать валидацию (под полем), если введенный номер совпадает с основным. Текст валидации: &amp;quot;Не должен совпадать с основным мобильным&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;ПП FRONT&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt; фронт&lt;/label&gt;&lt;br/&gt;Изменить первый шаг, согласно приложенным шаблонам.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Поле (ячейка) &lt;strong&gt;Дополнительный номер&lt;/strong&gt; должно отвечать следующим требованиям:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Должны быть все валидации, что и у поля &lt;strong&gt;Мобильный телефон&lt;/strong&gt;;&lt;/li&gt;\n&lt;li&gt;Плейсхолдер (шаблон) должен быть что и у поля &lt;strong&gt;Мобильный телефон&lt;/strong&gt;;&lt;/li&gt;\n&lt;li&gt;Дополнительный номер не должен совпадать с основным номером (поле &lt;strong&gt;Мобильный телефон&lt;/strong&gt;);&lt;/li&gt;\n&lt;li&gt;Поле &lt;strong&gt;Дополнительные номер&lt;/strong&gt; необязательно для заполнения.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;ПП BACK&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; бэк&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Для хранения дополнительного контактного номера клиента, необходимо в таблицу &lt;strong&gt;msisdns&lt;/strong&gt;&lt;br/&gt;записывать новую строку с атрибутом is_current is FALSE, если в заявке он указан.&lt;/li&gt;\n&lt;li&gt;Передавать на BPM доп номер в блоке &amp;quot;additional_msisdn&amp;quot; (аналогично основному номеру, см. структуру в блоке BPM п.1)&lt;br/&gt;Для ИнФО: Таким образом, у заемщика может быть 1 основной (is_current is TRUE) и 1 дополнительный номер телефона (is_current is FALSE).&lt;br/&gt;При изменении основного или дополнительного номера телефона, должны перезаписываться текущие данные (msisdn, updated_at).&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt; BPM&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать от партнерки в extend допномер клиента в блоке &amp;quot;additional_msisdn&amp;quot;:&lt;br/&gt;Должен выглядеть так:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;additional_msisdn&amp;quot;: {\n&amp;quot;id&amp;quot;: 14626,\n&amp;quot;state&amp;quot;: 0,\n&amp;quot;msisdn&amp;quot;: 79099099990,\n&amp;quot;created_at&amp;quot;: &amp;quot;2020-02-28T09:30:01.519Z&amp;quot;,\n&amp;quot;is_current&amp;quot;: false,\n&amp;quot;updated_at&amp;quot;: &amp;quot;2020-02-28T09:30:01.519Z&amp;quot;,\n&amp;quot;customer_id&amp;quot;: 14642\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В memory добавить и сохранять новый атрибут &lt;strong&gt;additional_phone&lt;/strong&gt; в блоке &lt;code class=\&quot;inline-code\&quot;&gt;requets-&amp;gt;additional_phone&lt;/code&gt; (после атрибута &lt;strong&gt;phone&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;На вопросник по Клиенту отправлять оба номера телефона.  В блоке &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt; phones-&amp;gt;client-&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;client-&amp;gt;additional_phones&lt;/code&gt;&lt;br/&gt;Принимать ответы по всем номерам.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;UserData&lt;/h2&gt;\n&lt;p&gt;Необходимо в userdata записывать доп номер по клиенту: type_user=user. ! ПОСМОТРЕТЬ, НА ЧТО ЭТО ПОВЛИЯЕТ!&lt;br/&gt;Почему записывать с таким же типом?&lt;br/&gt;Потом что по нему должны срабатывать фичи как по соновному номеру:&lt;br/&gt;Фича №2 - Номер мобильного телефона клиента совпадает с номером телефона другого клиента - &amp;quot;client_phone_other_user_client&amp;quot;&lt;br/&gt;Фича №4 - Номер мобильного телефона контактного лица совпадает с номером другого клиента  по user data - &amp;quot;contact_phone_other_user_client&amp;quot;&lt;/p&gt;\n&lt;h2&gt;Мегафон&lt;/h2&gt;\n&lt;p&gt;За один запрос проверки телефона можно проверить только один телефон.&lt;br/&gt;Так как у нас теперь будет 2 телефона, необходимо делать 2-й запрос в мегафон, только если указано 2 номера телефона.&lt;/p&gt;\n&lt;p&gt;Необходимо так же как и с основным номером телефона запрашивать:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;скор (&amp;quot;SCORE&amp;quot;)&lt;/li&gt;\n&lt;li&gt;срок действия номера (&amp;quot;LIFETIME_BIN&amp;quot;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Полученную информацию (&amp;quot;value&amp;quot;, &amp;quot;status&amp;quot;) логировать и добавить в memory.&lt;/p&gt;\n&lt;p&gt;Фичи по мегафону должны срабатывать аналогично фичам с основным номеров : фичи 11 и 12&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;11&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584713000415&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1774&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1786&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;xxxx_АВТO_КН_Добавление контактного номера телефона.docx&quot;,&quot;id&quot;:&quot;88-26031&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26031?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYwMzF8U2h6NERBOVY1ZXdRRDZ5MlZEOTd0YllZbldp%0D%0AQVJTTFFlNW50MEktUS1RRQ0K%0D%0A&amp;updated=1582269200557&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26142&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26142?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYxNDJ8bXdfdUtuY2tkZ2FkQThGLUxyVERHbTB2YTJZ%0D%0AYnVxLVZHendXamdSanpoNA0K%0D%0A&amp;updated=1582637178984&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26161&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26161?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYxNjF8RHFXbk1jWWdwTHM5VnBWS1FxM2k0R0JHZUZI%0D%0Ab2lwdjNFSXdGX3Z4Q19Raw0K%0D%0A&amp;updated=1582702974711&quot;},{&quot;value&quot;:&quot;8824_АВТО+КН. Добавление контактного номера телефона.docx&quot;,&quot;id&quot;:&quot;88-26284&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26284?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjYyODR8dHowcWRzSmVDZ2NNVjJHSFN0TEZNaGJlZjdC%0D%0AYkVPcHBnLXBRSFlrZzd1NA0K%0D%0A&amp;updated=1582875749253&quot;},{&quot;value&quot;:&quot;image1584633539259.png&quot;,&quot;id&quot;:&quot;88-27057&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27057?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcwNTd8VWQxTVd1V040QUdIQ0Y2dl9GYU5BZG1sQ24w%0D%0AVWtTVmQzX1BoMjNUYTA0SQ0K%0D%0A&amp;updated=1584633539910&quot;},{&quot;value&quot;:&quot;image1584633573143.png&quot;,&quot;id&quot;:&quot;88-27058&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27058?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcwNTh8UU16Q0pIbWdWZGVRdEtJcmRMZFFiQ05sME5V%0D%0AdkRuaS1GbUVnT1hpYkZDZw0K%0D%0A&amp;updated=1584633573714&quot;},{&quot;value&quot;:&quot;image1584633586885.png&quot;,&quot;id&quot;:&quot;88-27059&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27059?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcwNTl8cm9yWkF6TlBydGxqSDFYc0hoQUF5U1lvTHNQ%0D%0ASXNpSHVhRmJ6Qi1XeXRFQQ0K%0D%0A&amp;updated=1584633587462&quot;},{&quot;value&quot;:&quot;image1584707470195.png&quot;,&quot;id&quot;:&quot;88-27077&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27077?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcwNzd8Z2FnMHVVVDVfWDhPNjlzR3p5OEtfQm1XRzFu%0D%0AZG9JSDlxLVVPOWExWmZISQ0K%0D%0A&amp;updated=1584707470848&quot;},{&quot;value&quot;:&quot;image1584707523759.png&quot;,&quot;id&quot;:&quot;88-27078&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27078?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcwNzh8SFM5aFk1bGtPYzc2S3RXS3lqTHl4RnVUcmRl%0D%0AdjNaTGhRWnBnelhseGNLTQ0K%0D%0A&amp;updated=1584707524257&quot;},{&quot;value&quot;:&quot;image1584707599477.png&quot;,&quot;id&quot;:&quot;88-27079&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27079?sign=MTU4NTQ0MDAwMDAwMHwyNC0xODF8ODgtMjcwNzl8b0RKQ3owLXN4Z1VRQnc1ZVZTNi10QlNEeGJ6%0D%0ASzlidEhneFdCVjlyd1dFaw0K%0D%0A&amp;updated=1584707600137&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52196&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Доработки: Фронт, бэк, бпм, вопросник, мегафон (допномер), интеграция с цфт (использование допномера).&lt;/p&gt;\n&lt;p&gt;Вопросы: как повлияет допномер на фичи? нужна инфа от рисков.&lt;/p&gt;\n&lt;p&gt;Предварительно: 20SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582291138804,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52591&quot;,&quot;author&quot;:&quot;vitaly.pervoy&quot;,&quot;authorFullName&quot;:&quot;Виталий Первой&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;По вопроснику доработок не требуется (Паша Косых)&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582815693162,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52842&quot;,&quot;author&quot;:&quot;vitaly.pervoy&quot;,&quot;authorFullName&quot;:&quot;Виталий Первой&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Задача на интеграцию с ЦФТ по дополнительному номеру выделена в отдельную задачу - &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1774\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://balance.myjetbrains.com/youtrack/issue/ARGS-1774&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583157261445,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52916&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка ПП &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583237983390,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53415&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветки&lt;br/&gt;bpm_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;br/&gt;rgsb_userdata_ng_main_version: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583925089469,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54206&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;по комментарию разработчиков - &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.bogomolov\&quot; title=\&quot;Алексей Богомолов\&quot; data-user-id=\&quot;24-208\&quot;&gt;@Алексей Богомолов&lt;/a&gt;  - требуется более детальное описание задачи по части разработки и валидации полей&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584627850465,&quot;updated&quot;:1584627890130,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54207&quot;,&quot;author&quot;:&quot;a.bogomolov&quot;,&quot;authorFullName&quot;:&quot;Алексей Богомолов&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;у нас везде вся валидация на бэке&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584628072504,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54236&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1 Дизайн ПП FRONT &lt;strong&gt;ОР == ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020784\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020784&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ввел только дополнительный номер (ОР==ФР):&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27057?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwNTd8QWNiSzlCY2R6bFV1eU9IczZTYzlXV3EyaUZw%0D%0AQXBaSGcxZHhmT1E5NU9Wcw0K%0D%0A&amp;amp;updated=1584633539910\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Ввел только «Мобильный телефон» перешел на 2 шаг (ОР == ФР).&lt;/li&gt;\n&lt;li&gt;Ввел два одинаковых номера (ОР==ФР):&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27058?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwNTh8N3F2QTRMQ0RDSkxWS3FQWW1oX21HQ1NtaUtl%0D%0AWTZjcEtuQkcyaHh6eDh1SQ0K%0D%0A&amp;amp;updated=1584633573714\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Ввел два номера телефона: дополнительный и основной (ОР==ФР).&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27059?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwNTl8WnotOUlIVElTZzRDc0RNYXpTalV2NHZLVGhF%0D%0Aby1oNURVWW5HR3lqb2UzZw0K%0D%0A&amp;amp;updated=1584633587462\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584633642407,&quot;updated&quot;:1584711016606,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54356&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 2  ПП BACK, BPM :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020851\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020851&lt;/a&gt;&lt;br/&gt;Указал два номера:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27077?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwNzd8aGwwQlFMeFNsblpBTllaWU1OTlN0Y0dNUzZI%0D%0ALVBMd2w3Tk9LUXMxNnJ6RQ0K%0D%0A&amp;amp;updated=1584707470848\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Прошел верификацию.&lt;/li&gt;\n&lt;li&gt;Прошел верификацию автомобиля.&lt;/li&gt;\n&lt;li&gt;Открыл консоль:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;Для хранения дополнительного контактного номера клиента, необходимо в таблицу msisdns&lt;br/&gt;записывать новую строку с атрибутом is_current is FALSE, если в заявке он указан.&amp;quot;&lt;/p&gt;\n&lt;p&gt;additional_msisdn: {id: 16126, msisdn: 79994446666, state: 0, is_current: false, customer_id: 16080,…}&lt;br/&gt;1. id: 16126&lt;br/&gt;2. msisdn: 79994446666&lt;br/&gt;3. state: 0&lt;br/&gt;4. is_current: false&lt;br/&gt;5. customer_id: 16080&lt;br/&gt;6. created_at: &amp;quot;2020-03-20T09:42:15.037Z&amp;quot;&lt;br/&gt;7. updated_at: &amp;quot;2020-03-20T11:22:48.697Z&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;Передавать на BPM доп номер в блоке &amp;quot;additional_msisdn&amp;quot; (аналогично основному номеру, см. структуру в блоке BPM п.1)&lt;br/&gt;Для ИнФО: Таким образом, у заемщика может быть 1 основной (is_current is TRUE) и 1 дополнительный номер телефона (is_current is FALSE).&lt;br/&gt;При изменении основного или дополнительного номера телефона, должны перезаписываться текущие данные (msisdn, updated_at).&amp;quot;&lt;/p&gt;\n&lt;p&gt;Изменил номер:&lt;/p&gt;\n&lt;p&gt;additional_msisdn: {id: 16124, msisdn: 79993332222, state: 0, is_current: false, customer_id: 16079,…}&lt;br/&gt;1. id: 16124&lt;br/&gt;2. msisdn: 79993332222&lt;br/&gt;3. state: 0&lt;br/&gt;4. is_current: false&lt;br/&gt;5. customer_id: 16079&lt;br/&gt;6. created_at: &amp;quot;2020-03-20T09:40:36.930Z&amp;quot;&lt;br/&gt;7. updated_at: &amp;quot;2020-03-20T09:40:36.930Z&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;В memory добавить и сохранять новый атрибут additional_phone в блоке requets-&amp;gt;additional_phone (после атрибута phone)&amp;quot;&lt;br/&gt;Откры BPM: &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/&lt;/a&gt;&lt;br/&gt;открыл блок «request»:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27078?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwNzh8UEdva1hXV1RBbUdvOGVvSGJMMkdLbk9ZOV9a%0D%0ATXdsSzFYM200LVl2NENrWQ0K%0D%0A&amp;amp;updated=1584707524257\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;На вопросник по Клиенту отправлять оба номера телефона. В блоке params-&amp;gt; phones-&amp;gt;client-, params-&amp;gt;client-&amp;gt;additional_phones&lt;br/&gt;Принимать ответы по всем номерам.&amp;quot;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27079?sign=MTU4NjM5MDQwMDAwMHwyNC0xODF8ODgtMjcwNzl8M2hSd0Z5QU81OHY0Qlk4RklPZFhjSUMwRmti%0D%0AZDRJZ1hOOVlpOEZxSXJfUQ0K%0D%0A&amp;amp;updated=1584707600137\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584707748538,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54371&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 3 МЕГАФОН &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;открыл БПМ:&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;megafon&amp;quot;: {&lt;br/&gt;&amp;quot;not_answer&amp;quot;: false,&lt;br/&gt;-&amp;quot;other_phones&amp;quot;: {&lt;br/&gt;+&amp;quot;additional_phone&amp;quot;: { … }&lt;br/&gt;},&lt;br/&gt;&amp;quot;megafon_score&amp;quot;: 5,&lt;br/&gt;&amp;quot;megafon_lifetime&amp;quot;: 5,&lt;br/&gt;&amp;quot;megafon_one_month&amp;quot;: false,&lt;br/&gt;&amp;quot;megafon_three_month&amp;quot;: false,&lt;br/&gt;&amp;quot;megafon_response_received_at&amp;quot;: 1571916146&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584710702132,&quot;updated&quot;:1584710767802,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54372&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 4 UserData &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;br/&gt;Фича №4 - Номер мобильного телефона контактного лица совпадает с номером другого клиента по user data - “contact_phone_other_user_client”&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15489/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15489/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;triggered_features&amp;quot;: [&lt;br/&gt;&amp;quot;3&amp;quot;,&lt;br/&gt;&amp;quot;4&amp;quot;&lt;br/&gt;],&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584710907106,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;},{&quot;value&quot;:&quot;0&quot;,&quot;cssClass&quot;:&quot;c3&quot;}]}]" />
      </map>
    </option>
  </component>
</application>