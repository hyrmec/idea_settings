<application>
  <component name="YouTrack Issues">
    <option name="persistentIssues">
      <map>
        <entry key="bpm_engine p.nikulshin@https://balance.myjetbrains.com/youtrack" value="[{&quot;id&quot;:&quot;ARGS-1880&quot;,&quot;entityId&quot;:&quot;86-79398&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Распознавание договоров о приемной семье, опекунах&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584956620637&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1880&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Обрабатывать документы, отличные от свидетельства о рождении/усыновлении для Госпрограммы-Семейный&lt;/p&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object &lt;/code&gt; сохранять новый тип вложений в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В начале шага &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; изменить проверку &lt;strong&gt;Свидетельство о рождении/усыновлении&lt;/strong&gt; (реализовано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;) на конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27119?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxMTl8MGtaV0xqODB6QlJpa0N3Ym5NakNrU29aN0lo%0D%0AZmR4dDRHMFFIMnMtOURfUQ0K%0D%0A&amp;amp;updated=1584956620647\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список изменений:\n1. Заменил название свитча # логика срабатывания свитча остается прежней\n2. Изменил название задания \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В начале шага  &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27119?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxMTl8MGtaV0xqODB6QlJpa0N3Ym5NakNrU29aN0lo%0D%0AZmR4dDRHMFFIMnMtOURfUQ0K%0D%0A&amp;amp;updated=1584956620647\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; И &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27118?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxMTh8dVpkOFRWRkFJc1p0Q2gtN3VjaWZzTnRRcld1%0D%0AMjBKMWV5ZjNlbVZpV3I3QQ0K%0D%0A&amp;amp;updated=1584956620646\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27117?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxMTd8RHNvZmVUMXdzTmZUOUVyZUNUOWhKYUpZMHBm%0D%0ALW1GZU91WHVFMTMxZFN2RQ0K%0D%0A&amp;amp;updated=1584956620646\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ждать ответ от верификации&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Для всех конструкторов&lt;/strong&gt; если сработал свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt; отправлять на доработку с ошибкой &amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot; (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;После ответа верификации делать дополнительные проверки (описаны ниже) если проверка пройдена, то одобрять семейную программу, иначе посылать доработку (текст ошибок описан ниже) (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Условия успешной проверки:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    (parent_last_name_1 &amp;amp; parent_first_name_1 == last_name &amp;amp; first_name)       ИЛИ       (parent_first_name_1 &amp;amp; parent_patronymic_name_1 == first_name &amp;amp; patronymic_name) ИЛИ (parent_last_name_2 &amp;amp; parent_first_name_2 = last_name &amp;amp; first_name)       ИЛИ        (parent_first_name_2 &amp;amp; parent_patronymic_name_2 = first_name &amp;amp; patronymic_name):\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;ФИО родителя не совпадает с ФИО из анкеты&amp;quot;\n\nЕсли   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 216 ИЛИ которых целое_число_месяцев(текущая дата - \n           date_of_birth_1)  &amp;lt; 216) &amp;gt;= 2 :\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Один из детей старше 17-ти лет. Приложите другой документ&amp;quot;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584969136228&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1822&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1840&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Шаг 5, госпрограмма 1 (РГС) L (1).png&quot;,&quot;id&quot;:&quot;88-27116&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27116?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcxMTZ8bW1rVVptaXJGbVJuYjBnZmlQY09aei15OHVV%0D%0AWVpzWlV5X1JPbU5sSHd3SQ0K%0D%0A&amp;updated=1584956620645&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье.txt&quot;,&quot;id&quot;:&quot;88-27117&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27117?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcxMTd8eFNVZlZucDF1ZVFfSWFNdXVib01HbXNCLWdJ%0D%0ANjh1MjYxOXhfRVpaWGZHOA0K%0D%0A&amp;updated=1584956620646&quot;},{&quot;value&quot;:&quot;конструкто - договор и свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27118&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27118?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcxMTh8M2h2UGM3YTdkLTZXZEh2VmMxV19CLUlFemdF%0D%0ATGdzT1YtRTRGeVhDVHprRQ0K%0D%0A&amp;updated=1584956620646&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27119&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27119?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcxMTl8aFdjOHhMTVI5OU85QU5qRnlWZjVWYVFCbkJh%0D%0AaXdqbnd3MWx0Vl9PMDlFdw0K%0D%0A&amp;updated=1584956620647&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1687&quot;,&quot;entityId&quot;:&quot;86-76121&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Баг в платежках для сторонних СУ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1581424967786&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1687&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В платежках для сторонних СУ не заполняется номер полиса, пример из заявки &lt;a href=\&quot;https://bpm-ng-app-1.rgsb-prod.cloud.b-pl.pro/admin/bpm/walker/156518/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;3316189&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Оплата страховой премии по договору № %s от 10.02.2020 г. АНЧУГОВ НИКОЛАЙ ВЯЧЕСЛАВОВИЧ. НДС не облагается.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Причина: в рамках задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1250\&quot; title=\&quot;Убрать проверку сторонних СУ\&quot; data-issue-id=\&quot;86-68622\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1250&lt;/a&gt; убрали проверку полиса для таких страховок.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584968900401&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54524&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1687&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/alexander.kan\&quot; title=\&quot;Александр Кан\&quot; data-user-id=\&quot;24-320\&quot;&gt;@Александр Кан&lt;/a&gt; решали данную проблему в рамках задачи по назначению платежа&lt;br/&gt;с НДС?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584967785599,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54532&quot;,&quot;author&quot;:&quot;alexander.kan&quot;,&quot;authorFullName&quot;:&quot;Александр Кан&quot;,&quot;issueId&quot;:&quot;ARGS-1687&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt;  не решали&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584968900403,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1840&quot;,&quot;entityId&quot;:&quot;86-78711&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Распознавание договоров о приемной семье, опекунах&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584363355425&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1840&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Цель&lt;/h1&gt;\n&lt;p&gt;Обрабатывать документы, отличные от свидетельства о рождении/усыновлении для Госпрограммы-Семейный&lt;/p&gt;\n&lt;h2&gt;FRONT:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;При выборе гос. программы &amp;quot;семейный автомобиль&amp;quot; отображать две выпадайки для выбора типа документа, подтверждающего наличие детей, и поля для добавления соответствующих документов. &lt;strong&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26983?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY5ODN8bmx4b21fU1IyT0xPWGJWZy1zTkNIODdtMlR1%0D%0AVURQY25MVE41R3EtUzdqMA0K%0D%0A&amp;amp;updated=1584535922386\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;Макет шага во вложении&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список выпадайки:\n1. свидетельство о рождении (усыновлении)/договор об осуществлении опеки   # тоже самое что и свидетельство о рождении\n2. договор о приемной семье/постановление суда об опеке   # новое вложение\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Отправлять новое вложение &amp;quot;договор о приемной семье/постановление суда об опеке&amp;quot; на BACK (&lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;Ограничить максимальное количество вложений равное 1 для каждого ребенка. Ограничить минимальное количество вложений равное 1 для каждого ребенка&lt;/li&gt;\n&lt;li&gt;Принимать от BACK валидацию на 6 шаге&lt;/li&gt;\n&lt;li&gt;При выборе пункта из выпадайки должна отображаться подсказка для этого пункта (как на макете)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;table class=\&quot;wiki-tbl\&quot;&gt;\n&lt;thead&gt;\n&lt;tr&gt;&lt;th align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Пункт выпадайки&lt;/th&gt;&lt;th align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Текст подсказки&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;свидетельство о рождении (усыновлении)/договор об осуществлении опеки&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Главный разворот и первая страница договора&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\&quot;left\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;договор о приемной семье/постановление суда об опеке&lt;/td&gt;&lt;td align=\&quot;right\&quot; class=\&quot;wiki-tbl-td\&quot;&gt;Договор - первая страница; постановление - страница с разделом &amp;quot;Постановляю&amp;quot;&lt;/td&gt;&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;h2&gt;BACK:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Добавить в &lt;strong&gt;catalogue.yaml&lt;/strong&gt; новый cid &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt; ( если нужно то добавить &lt;code class=\&quot;inline-code\&quot;&gt;afterloading_documents_groups&lt;/code&gt; &lt;strong&gt;== 116&lt;/strong&gt;) и  для &amp;quot;Договор о приемной семье/Постановление о назначении опекуна&amp;quot;&lt;/li&gt;\n&lt;li&gt;Принимать новые типы документов с FRONT&lt;/li&gt;\n&lt;li&gt;Добавить валидацию на 6 шаге - если выбрана &lt;code class=\&quot;inline-code\&quot;&gt;гос. программа: семейный автомобиль&lt;/code&gt;, то валидоровать количество документов равное 2 (должно быть приложено по 1 документу для 1-го и 2-го ребенка), где &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;in (51, 116)&lt;/strong&gt;. Если условие не выполнено - не пускать дальше и посылать ошибку на FRONT, иначе идти по процессу&lt;/li&gt;\n&lt;li&gt;Отправлять в BPM новый тип вложений в сообщении &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Из сообщения &lt;code class=\&quot;inline-code\&quot;&gt;sm_rgsb.check_object &lt;/code&gt; сохранять новый тип вложений в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;В начале шага &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; изменить проверку &lt;strong&gt;Свидетельство о рождении/усыновлении&lt;/strong&gt; (реализовано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;) на конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwMDB8c1ZRVWhXalpQTmtscnU0NnAzLXQyTGQ4ck9P%0D%0AYWpza3hmSEJPZ2VLbW9tYw0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Список изменений:\n1. Заменил название свитча # логика срабатывания свитча остается прежней\n2. Изменил название задания \n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В начале шага  &lt;code class=\&quot;inline-code\&quot;&gt;object_verification_state&lt;/code&gt; &lt;strong&gt;ЕСЛИ&lt;/strong&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwMDB8c1ZRVWhXalpQTmtscnU0NnAzLXQyTGQ4ck9P%0D%0AYWpza3hmSEJPZ2VLbW9tYw0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; И &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26999?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY5OTl8c0ZTT1A0NFMtcDdYWEN6MERXX1NoSzV6d3E3%0D%0AMlppbjZRVHBBLUFfQVZCTQ0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 51&lt;/strong&gt; и &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;в &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; attachments&lt;/code&gt; есть только вложения &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt; отправлять конструктор &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26998?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY5OTh8LVJEelRDWGF0MnZ3S3E0U0JESHBLeTNfUFpX%0D%0AcHVuOXZQUVREZ04ySE5hWQ0K%0D%0A&amp;amp;updated=1584603354467\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;из вложения&lt;/a&gt; (отправлять вложение с &lt;code class=\&quot;inline-code\&quot;&gt;documents_groups&lt;/code&gt; &lt;strong&gt;= 116&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ждать ответ от верификации&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Для всех конструкторов&lt;/strong&gt; если сработал свитч &lt;code class=\&quot;inline-code\&quot;&gt;thereIsBirthCertificate&lt;/code&gt; отправлять на доработку с ошибкой &amp;quot;Проверьте, что в приложенных документах содержится информация о разных детях.&amp;quot; (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;После ответа верификации делать дополнительные проверки (описаны ниже) если проверка пройдена, то одобрять семейную программу, иначе посылать доработку (текст ошибок описан ниже) (по аналогии с пукнтом 5 задачи &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1364\&quot; title=\&quot;проверка свидетельства о рождении/усыновлении:\&quot; data-issue-id=\&quot;86-70659\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1364&lt;/a&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Условия успешной проверки:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Если    (parent_last_name_1 &amp;amp; parent_first_name_1 == last_name &amp;amp; first_name)       ИЛИ       (parent_first_name_1 &amp;amp; parent_patronymic_name_1 == first_name &amp;amp; patronymic_name) ИЛИ (parent_last_name_2 &amp;amp; parent_first_name_2 = last_name &amp;amp; first_name)       ИЛИ        (parent_first_name_2 &amp;amp; parent_patronymic_name_2 = first_name &amp;amp; patronymic_name):\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;ФИО родителя не совпадает с ФИО из анкеты&amp;quot;\n\nЕсли   количество_записей( для которых целое_число_месяцев(текущая дата - date_of_birth_1)  &amp;lt; 213 ИЛИ которых целое_число_месяцев(текущая дата - \n           date_of_birth_1)  &amp;lt; 213) &amp;gt;= 2 :\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Один из детей старше 17-ти лет. Приложите другой документ&amp;quot;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Тест-кейсы:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;На верификации надо ввести по обоим документам:&lt;br/&gt;Фамилию клиента&lt;br/&gt;Имя клиента&lt;br/&gt;Отчество клиента&lt;br/&gt;Дата рождения ребенка&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если приложен только для одного ребенка договор о приемной семье, на верификации можно ввести несколько дат рождения для одного документа&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Если приложен для двух детей договор о приемной семье, на верификации можно ввести несколько дат рождения для нескольких документов&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Проверить, что проверка по детям делается параллельно проверке ПТС&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Доработки работают&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Александр Кан&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;alexander.kan&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584967623988&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1878&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1879&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1880&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1822&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;alexander.kan&quot;,&quot;fullName&quot;:&quot;Александр Кан&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Шаг 5, госпрограмма 1 (РГС) L (1).png&quot;,&quot;id&quot;:&quot;88-26983&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26983?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY5ODN8YmVsQ2gtSk1ZMnBjTHMxZ2J1MmdaMlFrZS1r%0D%0ARXFyc3labTRveTFZNzJmTQ0K%0D%0A&amp;updated=1584535922386&quot;},{&quot;value&quot;:&quot;конструктор - два договора о приемной семье.txt&quot;,&quot;id&quot;:&quot;88-26998&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26998?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY5OTh8VXU2dkthbVBoRkVNTWh2OG1oa2VxMTcxOEhU%0D%0Aa2lzbzNtbjBLdWpmX0tJQQ0K%0D%0A&amp;updated=1584603354467&quot;},{&quot;value&quot;:&quot;конструкто - договор и свидетельство.txt&quot;,&quot;id&quot;:&quot;88-26999&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26999?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY5OTl8ZmZIS3JERDlOMWVpOFdVeU1OUmNESE4tdXJI%0D%0ARzFUMWlSNnlfbVRBR2Q3bw0K%0D%0A&amp;updated=1584603354467&quot;},{&quot;value&quot;:&quot;конструктор - свидетельство.txt&quot;,&quot;id&quot;:&quot;88-27000&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27000?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcwMDB8eWdWNHlQTlJkV3Zfc1JBenF2RERhZDFrTFBj%0D%0AWnRCV3lLT3J0RlBQMGRGdw0K%0D%0A&amp;updated=1584603354467&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;верификация&quot;,&quot;cssClass&quot;:&quot;c9&quot;}]}, {&quot;id&quot;:&quot;ARGS-1848&quot;,&quot;entityId&quot;:&quot;86-78790&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Временно выключить повторный lookup&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584442205800&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1848&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;На этапе согласования сделки (&lt;code class=\&quot;inline-code\&quot;&gt;reverify_state&lt;/code&gt;) не делать повторный запрос lookup&lt;/div&gt;\n&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584966659764&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1877&quot;,&quot;entityId&quot;:&quot;86-79379&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Убрать лаг в 3 месяца при проверке свидетельства о рождении&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584955112107&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1877&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В рамках задачи 1364 реализовывали проверку возраста ребенка:&lt;br/&gt;Проверяли, что каждый ребенок должен быть не старше 18 лет-3 месяца.&lt;/p&gt;\n&lt;p&gt;Проверка осуществляется в check_object_state (при переходе с 6 на 7-й шаг)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;Убрать при проверке условие про доп 3 месяца.&lt;br/&gt;То есть изменить проверку по возрасту:&lt;/p&gt;\n&lt;p&gt;Проверяем по каждой странице:&lt;br/&gt;...&lt;br/&gt;2) Проверка Даты рождения ребенка&lt;br/&gt;(Дата текущая-Дата рождения ребенка)округленно в месяцах &amp;lt;18*12 месяцев.&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;\nЕсли    целое_число_месяцев(текущая дата - date_of_birth_1)        &amp;lt; 216:\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Документ 1: Ребенок старше 17-ти лет. Приложите другое свидетельство&amp;quot;\n\n\n\nЕсли    целое_число_месяцев(текущая дата - date_of_birth_2)    &amp;lt; 216:\n          ок\nИначе:\n            то передавать доработку по документу с ошибкой: &amp;quot;Документ 2: Ребенок старше 17-ти лет. Приложите другое свидетельство&amp;quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Баир Загеев&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;bair.zangeev&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584966177713&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1364&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;bair.zangeev&quot;,&quot;fullName&quot;:&quot;Баир Загеев&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1584966046547.png&quot;,&quot;id&quot;:&quot;88-27134&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27134?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcxMzR8aUNGNUFwQ1NZTjhJaW1ERjFna3N5Y2VycDFT%0D%0ARW1Ndks5dU8za2RBcFhIZw0K%0D%0A&amp;updated=1584966047249&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54484&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1877&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Также изменено сообщение об ошибке на&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;Документ 1: Ребенок старше 18-ти лет. Приложите другое свидетельство\nДокумент 2: Ребенок старше 18-ти лет. Приложите другое свидетельство\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;done&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;composite: hotfix/ARGS-1877\nsm: hotfix/ARGS-1877\nостальное master\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584960077211,&quot;updated&quot;:1584961279813,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54514&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1877&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1 (создать заявку на семейный автомобиль, указать двух детей, одному 17,9, второму 18) ОР==ФР:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021016\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30021016&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Прошел верификацию.&lt;/li&gt;\n&lt;li&gt;Указал, двоих детей:&lt;br/&gt;Одному 17,9м, второму 18 ровно.&lt;/li&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27134?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcxMzR8OTdOMENVa2t5ME5iN0FwelVRemJDZlprMXp1%0D%0AdzlxZmdxcTF2Z0pPWFF6MA0K%0D%0A&amp;amp;updated=1584966047249\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;5. Возраст первого 17 лет и 10 месяцев, второму указал, что 18 лет и 1 месяц:&lt;br/&gt;&lt;em&gt;Документ №2: Ребенок старше 18-ти лет. Приложите другое свидетельство.&lt;/em&gt;&lt;br/&gt;6. Возраст первого 17 лет и 10 месяцев, возраст второго 17 лет и 9 месяцев:&lt;br/&gt;Верификация пройдена.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584966073305,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1795&quot;,&quot;entityId&quot;:&quot;86-77995&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Сумма НДС в назначении платежа&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583390230427&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1795&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Спринт 5  8749 АВТО. Сумма НДС в назначении платежа&lt;br/&gt;Цель в Спринте 4: 10.03.2020 задача проанализирована (должны быть проанализированы совместно с аналитиками на стороне ЦФТ), реализация согласована с Заказчиком и задача переведена в &amp;quot;Ready for Development&amp;quot;&lt;/p&gt;\n&lt;hr /&gt;\n&lt;h2&gt;Решение:&lt;/h2&gt;\n&lt;h3&gt;BPM:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В state &lt;code class=\&quot;inline-code\&quot;&gt;pre_deal_verification_state&lt;/code&gt;: Добавить в конструктор заданий (&amp;quot;Счет на оплату&amp;quot; и &amp;quot;Счет на оплату ТС&amp;quot;) на верификацию поле для ввода НДС - &lt;code class=\&quot;inline-code\&quot;&gt;vat_amount&lt;/code&gt; (пример конструкторов во вложении)&lt;/li&gt;\n&lt;li&gt;Сохранять из ответа поле &lt;code class=\&quot;inline-code\&quot;&gt;params -&amp;gt; vat_amount -&amp;gt; out&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Счет на оплату ТС - &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; verified -&amp;gt; invoice_vehicle -&amp;gt; vat_amount&lt;/code&gt;&lt;br/&gt;Счет на оплату - &lt;code class=\&quot;inline-code\&quot;&gt;memory -&amp;gt; verified -&amp;gt; invoice_additional -&amp;gt; страховка -&amp;gt; vat_amount&lt;/code&gt;&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;strong&gt;Изменить формулировку назначения платежа&lt;/strong&gt;, отсылаемое в сообщении pay_request в cfd:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Для всех формулировок, в которых есть фраза &amp;quot;В том числе НДС&amp;quot; добавить строку: &lt;code class=\&quot;inline-code\&quot;&gt;Сумма НДС без копеек&lt;/code&gt; &amp;amp; &lt;code class=\&quot;inline-code\&quot;&gt;(Сумма НДС без копеек прописью)&lt;/code&gt; &amp;amp; &amp;quot;руб.&amp;quot; &amp;amp; &lt;code class=\&quot;inline-code\&quot;&gt;Сумма копеек&lt;/code&gt; &amp;amp; &amp;quot;коп.&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;Пример:&lt;/em&gt;&lt;br/&gt;В том числе НДС 10 833 (Десять тысяч восемьсот тридцать три) руб 33 коп.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Найти задания в верификации &amp;quot;счет на оплату&amp;quot;, &amp;quot;счет на оплату ТС&amp;quot;&lt;/li&gt;\n&lt;li&gt;Выбрать в каждом задании облагает ндс, указать сумму&lt;/li&gt;\n&lt;li&gt;Убедиться в том, что сумма ндс сохраняется в memory для тс (обычный счет) и страховок (счет на оплату страховки) для заявки&lt;/li&gt;\n&lt;li&gt;Убедиться в том, что в cfd в pay_request отправляется формулировка согласно описанию таска (для счета на оплату ТС и счета на оплату страховки)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584961638793&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-385&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1679&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;Дата начала работы&quot;,&quot;value&quot;:[&quot;1583409600000&quot;],&quot;valueId&quot;:[&quot;1583409600000&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8749_АВТО. Сумма НДС в назначении платежа.docx&quot;,&quot;id&quot;:&quot;88-26578&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26578?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY1Nzh8bko5SXBkY011TzJPZ3FOSHNfQUpqelBBUWIx%0D%0Ad2taZ3NsbVBicUloLW42Yw0K%0D%0A&amp;updated=1583396257817&quot;},{&quot;value&quot;:&quot;счет на оплату тс - ответ с ндс.txt&quot;,&quot;id&quot;:&quot;88-26723&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26723?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY3MjN8QUdJUW4yYm5LS3Npbkw0aUhRV1BrSEkyYXg5%0D%0ATFExYTVZazdpMDFod1Uwbw0K%0D%0A&amp;updated=1583843077440&quot;},{&quot;value&quot;:&quot;счет на оплату - ответ с ндс без тс.txt&quot;,&quot;id&quot;:&quot;88-26725&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26725?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY3MjV8RDdvbUh3NEtpeENvVU56ZXJQeUtLejlEUjhG%0D%0AMnNOa25hWkU4YzVWUzJSSQ0K%0D%0A&amp;updated=1583843077440&quot;},{&quot;value&quot;:&quot;счет на оплату - конструкотр с ндс.txt&quot;,&quot;id&quot;:&quot;88-26727&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26727?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY3Mjd8QTRUSXVvMkxKSWdJeU1KcDlIcTF6bFNCdjFp%0D%0AZFNWZTFHX08zVGxOWVhIdw0K%0D%0A&amp;updated=1583843143086&quot;},{&quot;value&quot;:&quot;счет на оплату тс - конструктор поле ввода ндс.txt&quot;,&quot;id&quot;:&quot;88-26728&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26728?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY3Mjh8U21kN1ktLVdtcWpBZk93NnM4U3JrUjRZV2tX%0D%0AMFd3TXp5Um16dU1kVm50RQ0K%0D%0A&amp;updated=1583843143086&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53112&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Где требования?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583396176999,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53136&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Была еще проблема, что некорректно отправляем номер сервисной карты. В рамках этой задачи тоже можно уточнить повторно у банка. Письма у &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.kriventsova\&quot; title=\&quot;Кривенцова Александра\&quot; data-user-id=\&quot;24-205\&quot;&gt;@Кривенцова Александра&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583407403891,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53728&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1795&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветки:&lt;br/&gt;bpm_ng_engine: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;br/&gt;bpm_ng_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1795&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584372706535,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;},{&quot;value&quot;:&quot;1&quot;,&quot;cssClass&quot;:&quot;c3&quot;},{&quot;value&quot;:&quot;*&quot;,&quot;cssClass&quot;:&quot;c9&quot;},{&quot;value&quot;:&quot;АнализСпринт&quot;,&quot;cssClass&quot;:&quot;c13&quot;}]}, {&quot;id&quot;:&quot;ARGS-805&quot;,&quot;entityId&quot;:&quot;86-61632&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;bpm (админка) - спрятать за keycloak или реализовать аутентификацию через openid-connect&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Владимир Астафьев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1568201470614&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;805&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;va&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584958279731&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Z-1225&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-718&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирована&quot;},{&quot;value&quot;:&quot;ARGS-1005&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирована&quot;},{&quot;value&quot;:&quot;ADM-7196&quot;,&quot;type&quot;:&quot;Subtask&quot;,&quot;role&quot;:&quot;подзадача&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;m.nuzhnyj&quot;,&quot;fullName&quot;:&quot;Максим Нужный&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53346&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Причина задержки: отсутствие второго девопса (на три банка) - вопрос о найме эскалировался неоднократно.&lt;br/&gt;Макса Нужного разрывают - куча задач:&lt;br/&gt;Самая приоритетная - масштабирование ГК на РГСБ&lt;br/&gt;Еще: акты на зените в прод.&lt;br/&gt;И т.д.&lt;br/&gt;Исходя из текущих задач М. Нужного:&lt;br/&gt;предполагаемый срок реализации - середина следующей недели:&lt;br/&gt;После ГК, надо масштабировать ПП РГСБ - Нагрузка растет:&lt;br/&gt;Масштабирование ГК и ПП до конца этой недели&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583842654566,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53353&quot;,&quot;author&quot;:&quot;m.nuzhnyj&quot;,&quot;authorFullName&quot;:&quot;Максим Нужный&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;У этого сервиса есть внутренняя система аутентификации, которая ограничивает доступ. Интеграция с keycloak реализуется программистами в рамках смежных задач.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583846879266,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53652&quot;,&quot;author&quot;:&quot;evgeniy.mikhaylov&quot;,&quot;authorFullName&quot;:&quot;Евгений Михайлов&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тем не менее, прошу указать актуальный реалистичные срок выполнения задачи.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584342608777,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53724&quot;,&quot;author&quot;:&quot;evgeniy.mikhaylov&quot;,&quot;authorFullName&quot;:&quot;Евгений Михайлов&quot;,&quot;issueId&quot;:&quot;ARGS-805&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.krutilina\&quot; title=\&quot;Анна Крутилина\&quot; data-user-id=\&quot;24-242\&quot;&gt;@Анна Крутилина&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584372389989,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1627&quot;,&quot;entityId&quot;:&quot;86-74794&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Справочник агентов и автосалонов (настройка антифрода по автосалонам)&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580233132054&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1627&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9009 Справочник агентов и автосалонов (настройка антифрода по автосалонам)&lt;br/&gt;Нужен функционал в Баланс платформе.&lt;/p&gt;\n&lt;hr /&gt;\n&lt;p&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot;&gt; &lt;/label&gt;&lt;strong&gt;Фронт&lt;/strong&gt;&lt;br/&gt;В УП создается новая страничка &amp;quot;Антифрод&amp;quot;&lt;br/&gt;При нажатии на кнопку &amp;quot;Добавить&amp;quot; открывается карточка добавления антифрода.&lt;br/&gt;Содержимое карточки:&lt;br/&gt;Кнопка активации настроек&lt;br/&gt;выбор типа сущности,на которую назначается проверка(автосалон/маб/агент)&lt;br/&gt;соответственно выбранному типу в следующую выпадайку передается список автосалонов,мабов или агентов(вместе с id и поиском по нему)&lt;br/&gt;поле &amp;quot;тип проверки&amp;quot;(занятость, личность, контактное лицо, андеррайтинг)&lt;br/&gt;поля дата начала и дата конца проверки&lt;br/&gt;сумма кредита (начиная с этой суммы кредита и выше осуществляется перевод на проверку)&lt;br/&gt;Причина (будет комментарием фичи)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Фильтры&lt;br/&gt;Тип: автосалон,маб,агент&lt;br/&gt;Дата (с... по ...)&lt;br/&gt;Регион&lt;/p&gt;\n&lt;p&gt;выводить id карточки на самой карточке и в списке&lt;br/&gt;выводить id сущности (автосалон,маб,агент)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;ГК&lt;/strong&gt;&lt;br/&gt;сделать метод, по которому передавать в УП список пользователей&lt;br/&gt;Фильтровать его по:&lt;br/&gt;-доступ в приложение in (Партнерка Авто,КН)&lt;br/&gt;-роль=agent&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;Бэк УП&lt;/strong&gt;&lt;br/&gt;Создать новую роль в модуле управления партнерами – «Антифрод»&lt;br/&gt;весь дальнейший функционал доступен только пользователям с данной ролью + полный просмотр страницы &amp;quot;Дилеры&amp;quot; и содержимого&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;(Для заполнения карточки смотри п.на фронт)&lt;br/&gt;Когда заполняется карточка и выбирается тип &amp;quot;Агент&amp;quot;&lt;br/&gt;из ГК запрашивать список пользователей (см п. на ГК)&lt;br/&gt;&lt;strong&gt;таблица antifrod&lt;/strong&gt;&lt;br/&gt;id&lt;br/&gt;enabled:true/false&lt;br/&gt;scope_type:AutoShow/MAB/Manager&lt;br/&gt;scope_id&lt;br/&gt;verification_type:(соответственно типу)&lt;br/&gt;(занятость-work_and_income, личность-person, контактное лицо-third_person, андеррайтинг-manual_check)&lt;br/&gt;start_date&lt;br/&gt;end_date&lt;br/&gt;credit_amount&lt;br/&gt;reason&lt;/p&gt;\n&lt;p&gt;Все поля в карточке являются обязательными&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;БэкПП&lt;/strong&gt;&lt;br/&gt;при заведении заявки по мабу, автосалону,агенту проверять наличие карточки антифрод enabled:true и start_date &amp;lt;= текущая дата &amp;lt;= end_date&lt;br/&gt;Передавать на BPM в extend2 этот признак &amp;quot;antifrod:true&amp;quot;, а также &amp;quot;credit_amount&amp;quot;,&amp;quot;reason&amp;quot;, &amp;quot;verification_type&amp;quot;&lt;br/&gt;(если у нас сработали несколько карточек по автосалону,мабу и агенту,то передаем все карточки)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot; checked=\&quot;\&quot;&gt;&lt;/label&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;в scoring_1_state смотреть, если по автосалону,мабу или агенту пришел признак &amp;quot;antifrod:true&amp;quot;,&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;расшифровывать тип проверки и преобразовывать в соответствующую матрицу для верификации&lt;br/&gt;(manual_check- подразумевает и manual_check_documents, и manual_check_expert)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;matrix = [0,0,0,0,0]\nгде \nmatrix[0] - прозвоны (work_and_income) \nmatrix[1] - прозвоны (person) \nmatrix[2] - прозвоны (third_person) \nmatrix[3] - underwriting (manual_check_documents)\nmatrix[4] - underwriting (manual_check_expert)\nпринимает два значения 0 и 1, если 1 то производим верификацию данного типа, иначе нет\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверять,что&lt;br/&gt;-сумма кредита &amp;gt;= credit_amount&lt;br/&gt;-segment in (3, 4)&lt;br/&gt;тогда в verification_state направлять заявку на конкретный тип проверки &amp;quot;verification_type&amp;quot; и в качестве комментария(для андеррайтинга) передавать содержимое поля &amp;quot;reason&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;(фича №44-антифрод рисков)&lt;/p&gt;\n&lt;ol start=\&quot;3\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt;для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;пример1:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=400тыс\nкарточка на прозвон с суммой кредита=200тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка прозвон по сумме 200тыс, комментарий на андеррайтинг не учитывается&lt;/p&gt;\n&lt;p&gt;пример2:&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;карточка на андерратинг с суммой кредита=200тыс\nкарточка на прозвон с суммой кредита=400тыс\nкарточка на андерратинг с суммой кредита=300тыс\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;-выполняется проверка на андеррайтинг по сумме 200тыс с комментарием &lt;em&gt;андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/p&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot; checked=\&quot;\&quot;&gt;доработать селект для КН&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;“SELECT point_of_sales.*, auto_business_modules.*, point_of_sales.species FROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}”\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYxNTd8amRuaXR1RHV2Vkt3Wk1fMy1iQ3g2Zk5reG5Z%0D%0AcmtQUE5Jc1FSeFpJM1ZfZw0K%0D%0A&amp;amp;updated=1582702719772\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYxNTl8TkdBNzItVmY4NUNvb2FNRkMydXFuLUJjRUtf%0D%0ASXJva1FRNmlTdUNsRkl6TQ0K%0D%0A&amp;amp;updated=1582702742130\&quot; alt=\&quot;\&quot; /&gt;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjYyNTF8SUpuSk51U1h3d2tqNlB6Q0syUjNBcEdIeUVx%0D%0AV0xjSm84aVJyS3VJTkwxNA0K%0D%0A&amp;amp;updated=1582809897473\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Илья Смелков&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;20&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;i.smelkov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584950559976&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;УпрПартнерами&quot;,&quot;BPM&quot;,&quot;Front УП&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;a.bogomolov&quot;,&quot;fullName&quot;:&quot;Алексей Богомолов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Справочник агентов (1).doc&quot;,&quot;id&quot;:&quot;88-25892&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-25892?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjU4OTJ8cmF0RGdCMHExcGs3THJORkZNbjNaMHdodkZi%0D%0ATmp2ZmlnNWk2TFBwdTNxaw0K%0D%0A&amp;updated=1582103461421&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26157&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26157?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYxNTd8cFo0TWg0T1ViRnFzaFB1WWVtZ3d5TVhJLThf%0D%0ASUh3NlgwQkx6VlIyRFlXdw0K%0D%0A&amp;updated=1582702719772&quot;},{&quot;value&quot;:&quot;image2.png&quot;,&quot;id&quot;:&quot;88-26159&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26159?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYxNTl8RHQ0ejR2OWY5UFBRRDNkb2xUVXlhNDQ2RUxk%0D%0AdFYxWkVlNDdCM0t2UVdRbw0K%0D%0A&amp;updated=1582702742130&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26251&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26251?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYyNTF8eVRyMDN4SzJCUE5qakVqLTJBS2RrOXFqUGdn%0D%0ARVZOdThkT05Tdm05Q3VoQQ0K%0D%0A&amp;updated=1582809897473&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50528&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;нужно приложить письмо&lt;br/&gt;требования не готовы, как именно на верификацию попадают?&lt;/p&gt;\n&lt;p&gt;делать будем в УП, предварительно 50-70 SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580715089476,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52672&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582896179438,&quot;updated&quot;:1582896702266,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52764&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; как будет использоваться&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;instance:rgsb_auto/rgsb_cash(может быть оба значения,если доступ есть и там,и там)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;предлагаю в базу писать gatekeeper_id в поле scope_id, тогда по нему можно будет сразу отсекать тех, кто не принадлежит текущему приложению&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583136194955,&quot;updated&quot;:1583136206644,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52776&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;p&gt;фильтр по региону оставляет только записи с МАБом или все салоны и агентов тоже надо фильтровать?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583138832460,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52779&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/i.smelkov\&quot; title=\&quot;Илья Смелков\&quot; data-user-id=\&quot;24-251\&quot;&gt;@Илья Смелков&lt;/a&gt; на первый вопрос ок,можно сделать так&lt;br/&gt;На второй,нужно фильтровать все записи по мабу. И агентов с автосалонами тоже&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139386646,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52782&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в фильтрах вижу фильтр по региону. что выбирается в верхнем селекте? что выбирается в нижнем?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583139978839,&quot;updated&quot;:1583143544279,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52848&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{:id=&amp;gt;2831,\n :action=&amp;gt;&amp;quot;extend&amp;quot;,\n :resource=&amp;gt;&amp;quot;sm_rgsb&amp;quot;,\n :bank_id=&amp;gt;&amp;quot;rgsb&amp;quot;,\n :project_id=&amp;gt;&amp;quot;auto&amp;quot;,\n :params=&amp;gt;\n  {:request_id=&amp;gt;2831,\n   :id=&amp;gt;2831,\n   :point_of_sale=&amp;gt;\n    {:id=&amp;gt;4507,\n     :title=&amp;gt;&amp;quot;Iona Frisbee&amp;quot;,\n     :cluster=&amp;gt;\n      {:id=&amp;gt;33451,\n       :name=&amp;gt;nil,\n       :role=&amp;gt;&amp;quot;director_light_network&amp;quot;,\n       :auto_business_module=&amp;gt;\n        {:id=&amp;gt;7168,\n         :title=&amp;gt;&amp;quot;Izzy Backyet&amp;quot;,\n         :is_dfo=&amp;gt;false,\n         :subsidiary=&amp;gt;{:id=&amp;gt;7353, :director_level_1=&amp;gt;{:id=&amp;gt;33450, :full_name=&amp;gt;&amp;quot;  &amp;quot;}},\n         :antifrods=&amp;gt;[{:id=&amp;gt;67, :verification_type=&amp;gt;&amp;quot;third_person&amp;quot;, :credit_amount=&amp;gt;0.33333e3, :reason=&amp;gt;&amp;quot;reason3&amp;quot;}]}}},\n   :auto_show=&amp;gt;\n    {:id=&amp;gt;6819,\n     :antifrods=&amp;gt;[{:id=&amp;gt;66, :verification_type=&amp;gt;&amp;quot;person&amp;quot;, :credit_amount=&amp;gt;0.22222e3, :reason=&amp;gt;&amp;quot;reason2&amp;quot;}]},\n   :manager=&amp;gt;\n    {:id=&amp;gt;5810,\n     :antifrods=&amp;gt;[{:id=&amp;gt;65, :verification_type=&amp;gt;&amp;quot;work_and_income&amp;quot;, :credit_amount=&amp;gt;0.11111e3, :reason=&amp;gt;&amp;quot;reason1&amp;quot;}]}}}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160165070,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52849&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка ПП &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583160289908,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52955&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка УП и каталог &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1627&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583248604146,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53204&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; проверить,что если у заявки было направлено две одинаковые проверки, они пройдут в одной(для андеррайтинга одна проверка с двумя комментариями)&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;В связи с обновлением в требованиях, в каком случае должна быть одна проверка с двумя комментариями?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479273986,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53206&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; в примерах в задаче описано&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583479796760,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53208&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Ок&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583480720517,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53236&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; &lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Если нам пришло несколько карточек андеррайтинга (маб,агент,автосалон)&lt;br/&gt; для выполнения проверки выбираем карточку с наименьшим значением credit_amount&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;div class=\&quot;wiki quote\&quot;&gt;пример2:&lt;br/&gt; карточка на андерратинг с суммой кредита=200тыс&lt;br/&gt; карточка на прозвон с суммой кредита=400тыс&lt;br/&gt; карточка на андерратинг с суммой кредита=300тыс&lt;br/&gt; -выполняется проверка на андеррайтинг по сумме 200тыс с комментарием андеррайтинг на 200тыс+комментарий андеррайтинг на 300тыс&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;Я правильно понимаю, что когда у нас несколько карточек, мы ищем тип проверки, у которой сумма минимальна, по ней выполняем сравнение суммы, и, если условие сработало, комментарии используем от всех карточек с таким же типом проверки, даже если у них условие на сумму не выполняется?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583493805292,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53238&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; да,верно. Но это только если у нас андеррайтинг как проверка проходит&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494514532,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53241&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;div class=\&quot;wiki quote\&quot;&gt; Но это только если у нас андеррайтинг как проверка проходит&lt;/div&gt;&lt;br/&gt;Что это означает?&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583494743231,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53244&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; мы же для других типов проверок не отправляем комментарий&lt;br/&gt;смотри пример 1&lt;br/&gt;Если у нас выпал прозвон,то мы игнорируем комментарии в карточках андеррайтинга&lt;br/&gt;но если у нас выпал андеррайтинг, то мы берем и отправляем комментарии со всех присутствующих для заявки карточек андеррайтинга&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583495282302,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53929&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;n.myklyuchenko\&quot; data-user-id=\&quot;24-258\&quot;&gt;Наталья Мыключенко&lt;/a&gt; фича с номером 39 уже участвует в задаче &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1625\&quot; target=\&quot;_self\&quot; data-issue-id=\&quot;86-74790\&quot; title=\&quot;Интеграция с сервисом Дирекции по управлению Рисками\&quot;&gt;ARGS-1625&lt;/a&gt;, нужно поменять номер здесь или там&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517542037,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53932&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; давай 44, раз все меньше занято&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584517806033,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54046&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1627-refactor&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1627-refactor&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584546390717,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54440&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1627&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;доработать селект для КН&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;SELECT \n  point_of_sales.*, \n  auto_business_modules.*, \n  point_of_sales.species,\n  antifrods.*\n\nFROM point_of_sales\n  INNER JOIN managers_point_of_sales ON managers_point_of_sales.point_of_sale_id = point_of_sales.id\n  INNER JOIN admin_users ON admin_users.id = point_of_sales.admin_user_id\n  INNER JOIN auto_shows ON auto_shows.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules_admin_users ON auto_business_modules_admin_users.admin_user_id = admin_users.id\n  INNER JOIN auto_business_modules ON auto_business_modules.id = auto_business_modules_admin_users.auto_business_module_id\n  INNER JOIN antifrods ON \n    (scope_id = auto_business_modules.id AND scope_type = 'MAB')\n    OR\n    (scope_id = auto_shows.id AND scope_type = 'AutoShow')\n    OR\n    (scope_id = #{@gatekeeper_id} AND scope_type = 'Manager')\n  WHERE managers_point_of_sales.manager_id = #{@manager_id}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584950554270,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1479&quot;,&quot;entityId&quot;:&quot;86-72088&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Заявка виснет при отсутствии ИНН работодателя&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Карина Сафарова&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576747771528&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1479&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В заявке 3159568 клиент указал как место работы ликвидированную компанию ООО &amp;quot;ПАМО&amp;quot;, в Дадате у этой компании нет ИНН, в следствии чего заявка зависла на pre_scoring_decision_state и не могла пройти далее.&lt;/p&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24048?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQwNDh8eUZocmM4NmZCRkdjSGV3T3BleWFQbGJnTThE%0D%0AUXJvMEY4WTgza0dxRmVZWQ0K%0D%0A&amp;amp;updated=1576747692636\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;k.safarova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584950513474&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Pending&quot;],&quot;valueId&quot;:[&quot;Pending&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-24048&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24048?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjQwNDh8d1hzbHZUVXlBQU9WZktzRVhYaXhlamlUSGVC%0D%0AU05vdXVKRWZLS2c2Z2dZcw0K%0D%0A&amp;updated=1576747692636&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-49478&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Баг всплывает периодически, свежий пример:&lt;br/&gt;3238464&lt;br/&gt;АИО &amp;quot;АГЕНСТВО РАЗВИТИЯ ИНВЕСТИЦИЙ И ИННОВАЦИЙ&amp;quot;&lt;/p&gt;\n&lt;p&gt;Нужно автоматизировать решение проблемы, либо выработать ручной алгоритм решения такой проблемы&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579419757069,&quot;updated&quot;:1579419767729,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51659&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Повторение: 3342216&lt;br/&gt;ООО &amp;quot;ГАЗПРОМ ПЕРЕРАБОТКА ОРЕНБУРГ&amp;quot;&lt;br/&gt;По ЕГРЮЛ компания ликвидирована, отправил в отказ&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581915938497,&quot;updated&quot;:1581916306396,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51660&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Запрос в СПАРК можно осуществлять как по ИНН, так и по ОГРН:&lt;br/&gt;&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/825163825\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/825163825&lt;/a&gt;&lt;br/&gt;&lt;a href=\&quot;https://project30.atlassian.net/wiki/spaces/verif/pages/952205393\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://project30.atlassian.net/wiki/spaces/verif/pages/952205393&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;На ИНН компании так же завязана логика определения типа работодателя (ИП или ЮЛ), нужно найти другой способ получения этой информации&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581916290469,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51695&quot;,&quot;author&quot;:&quot;a.anarbaev&quot;,&quot;authorFullName&quot;:&quot;Анвар Анарбаев&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;3329843  еще один пример данной проблемы&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581939093540,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51961&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1479&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Выводить ошибку на фронте и не пропускать дальше. &amp;quot;У компании отсутствует ИНН - недостаточно данных&amp;quot; или еще чего.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;+написать банку&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582115875913,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1874&quot;,&quot;entityId&quot;:&quot;86-79259&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;При откате после закрытия операционного дня не чистятся проверенные счета на оплату&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Евгений Панков&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584708512298&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1874&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;При откате после закрытия операционного дня не чистятся проверенные счета на оплату, с вследствие чего в &amp;quot;pay&amp;quot; отправляется неверная сумма&lt;br/&gt;Пример заявки 3484974&lt;br/&gt;Возможный вариант решения: Возможно стоит удалять счета на оплату в ПП при переходе в state :operational_day_closed_state&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.pankov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584949215408&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;d.podshchekoldin&quot;,&quot;fullName&quot;:&quot;Дмитрий Подщеколдин&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54385&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1874&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;со сделке на кредит выдан отправляем на 10 тысяч больше. в pay request.&lt;br/&gt;убрали страховку, поменяли условия, а при интеграции старые данные отправились&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584713306619,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54406&quot;,&quot;author&quot;:&quot;e.pankov&quot;,&quot;authorFullName&quot;:&quot;Евгений Панков&quot;,&quot;issueId&quot;:&quot;ARGS-1874&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;3490138 отправляли на 95 000 больше чем надо. При этом этап заявка не попадал на этап &amp;quot;сделка не завершена&amp;quot;. Предположу, что не он является проблемой &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/e.ivanchenkova\&quot; title=\&quot;Елизавета Иванченкова\&quot; data-user-id=\&quot;24-243\&quot;&gt;@Елизавета Иванченкова&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/Dmitry_Sinelnikov\&quot; title=\&quot;Дмитрий Синельников\&quot; data-user-id=\&quot;24-47\&quot;&gt;@Дмитрий Синельников&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584726770558,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1625&quot;,&quot;entityId&quot;:&quot;86-74790&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Интеграция с сервисом Дирекции по управлению Рисками&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580232728443&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1625&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Требования&lt;/strong&gt;&lt;br/&gt;9018 Баланс-платформа интегрируется с сервисом Дирекции по управлению Рисками. Отправляет запрос в этот сервис  и получает ответ.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;После скоринг_1 (scoring_state - после ответа от скоринга и кроноса):&lt;br/&gt;отослать запрос с данными в сервис общения с рисками (задача на написание сервиса у Ruby -договориться об общении)&lt;br/&gt;название сервиса &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;&lt;br/&gt;запрос -  &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt;&lt;br/&gt;ответ  -&lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;во вложении файл exel c набором данных (и путь к ним) &amp;quot;Интеграция Дирекция рисков&amp;quot; , если нет запроса в кронос , то не присылать кронос&lt;/li&gt;\n&lt;li&gt;необходимо ждать ответ от сервиса, и только после &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; идти дальше на &lt;code class=\&quot;inline-code\&quot;&gt;verification_state&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;если до ответа сервиса &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;,  БПМ уже увел заявку в деклайн, то  сообщение от сервиса не влияет на ее состояние (по какому коду отказывать не принципиально).&lt;/li&gt;\n&lt;li&gt;Если заявка не ушла в decline_state и в &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: false&lt;/code&gt;, то смотрим в statusList на код отказа или код андеррайтинга (см пункты 6-7) , если NULL, значит по клиенту от Банка фрода нет, идем дальше&lt;/li&gt;\n&lt;li&gt;Если в &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; параметр &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: true&lt;/code&gt;, то на другие параметры не смотрим, считаем что проверка rgsb_risks_service пройдена , можем переходить в verification_state&lt;/li&gt;\n&lt;li&gt;Если &lt;code class=\&quot;inline-code\&quot;&gt;statusList =BL010, SCR010, BL011, SCR011, BL012, SCR012, BL013, SCR013, BL014,SCR014&lt;/code&gt; то по заявке отказ - &lt;code class=\&quot;inline-code\&quot;&gt;decline_state&lt;/code&gt;,-детали(юзердата,мораторий и тд) кодов отказа во вложении (коды отказа)&lt;br/&gt;может прийти только один код&lt;/li&gt;\n&lt;li&gt;Если `statusList =SF001, SF002, SF003, SF004,SF005), то посылать заявку на ручной андеррайтинг (номера фичей и текст для андеррайтера во вложении) &amp;quot;Прозвоны 5.1.3&amp;quot;&lt;/li&gt;\n&lt;li&gt;новые фичи как и старые должны записаться в triggered_features&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Юзердата&lt;/strong&gt;&lt;br/&gt;во вложении (кода отказы) коды отказа и пояснения, необходимо их зашить&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ЯЗЫК на выбор Тим-лидов&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо написать сервис(название- &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service&lt;/code&gt;)  который будет общаться по API с риск-сервисом банка: по URL (10.95.5.233:8080/application)&lt;/li&gt;\n&lt;li&gt;К сервису будет обращаться БПМ с Json запросом &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Данные из &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.check&lt;/code&gt; отправить по URL выше&lt;br/&gt;пример обратного ответа сервиса  по API -&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;без ошибок&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;с ошибкой&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [&amp;quot;BL001&amp;quot;],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;с двумя и более ошибками&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;{\n   &amp;quot;statusList&amp;quot;: [&amp;quot;BL001&amp;quot;, &amp;quot;BL002&amp;quot;, ...],\n   &amp;quot;dateTime&amp;quot;: &amp;quot;2020.01.27 11-45-02&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;4\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ответ от сервиса ждать в течении 30 секунд&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;если ответ приходит, то отправляем в БПМ &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; с параметром &lt;code class=\&quot;inline-code\&quot;&gt;no_answer: false&lt;/code&gt; (положить в &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt;)&lt;br/&gt;+тe данные, что пришли по API&lt;/li&gt;\n&lt;li&gt;если ответ не приходит в течении 30 сек, то отправляем в БПМ &lt;code class=\&quot;inline-code\&quot;&gt;rgsb_risks_service.done&lt;/code&gt; с параметром &lt;code class=\&quot;inline-code\&quot;&gt;no_answer: true&lt;/code&gt; (положить в &lt;code class=\&quot;inline-code\&quot;&gt;params&lt;/code&gt;)&lt;br/&gt;договориться о деталях общения&lt;br/&gt;Для теста послать тестовое сообщение curl -X POST 10.95.5.233:8080/application -H &amp;#39;Content-type:application/json&amp;#39; -d &amp;#39;{}&amp;#39;&lt;br/&gt;для теста БПМ нужно развернуть сервис на стейдже  (но учитывать что сам сервис рисков работает только на проде)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;5\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если от сервиса рисков придет код ошибки который не был указан ранее, то стейт машина перейдет в &lt;code class=\&quot;inline-code\&quot;&gt;timeout_decline_state&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Формат ответа от прокси&lt;/li&gt;\n&lt;/ol&gt;\n&lt;span class=\&quot;markdown-language-tag\&quot;&gt;python&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-python\&quot;&gt;def create_payload(\n    meta_ok: bool,\n    errors: Optional[dict],\n    response_status: Optional[int],\n    requested_at: datetime,\n    response_json: Optional[dict],\n    response_at: Optional[datetime],\n    _result: Optional[dict],\n):\n    return {\n        &amp;quot;ok&amp;quot;: meta_ok,  # True только если стоит обрабатывать payload['result']\n        &amp;quot;data&amp;quot;: {\n            &amp;quot;meta&amp;quot;: {\n                &amp;quot;ok&amp;quot;: meta_ok,\n                &amp;quot;errors&amp;quot;: errors,\n                &amp;quot;http_status&amp;quot;: response_status,\n                &amp;quot;requested_at&amp;quot;: requested_at.isoformat(),\n                &amp;quot;response&amp;quot;: response_json,\n                &amp;quot;response_at&amp;quot;: response_at.isoformat() if response_at else None,\n            },\n            &amp;quot;result&amp;quot;: _result,  # dict содержащий ключ error_codes: list[str]\n        },\n    }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;DevOps&lt;/strong&gt;&lt;br/&gt;Развернуть сервис на стейдже и проде по договоренности с разработчиком сервиса&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест-прод-саппорт&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;смотреть после выкатки на сообщения об интеграции по первым заявкам, разбирать отдельные кейсы ,если наш сервис или Банка не реагирует на сообщения&lt;br/&gt;найти заявки где по интеграции отказ или андерратинг(оба кейса найти)&lt;br/&gt;&lt;strong&gt;по результатам ОБЯЗАТЕЛЬНО отписаться в комментарии-со скринами&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест-препрод-стейдж&lt;/strong&gt;&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;симулировать сообщения от сервиса с кодом отказа(любыми 3)=работа корректная если отказ по заявке, в юзердату и reject записалось корректно(если до ответа сервиса БПМ уже проставил код отказа, то ок , заявка в деклайне, сообщение от сервиса не влияет на ее состояние)&lt;/li&gt;\n&lt;li&gt;симулировать сообщения от сервиса с кодом андерратинга(любыми 2)=работа корректная, если заявка отправилась на ручную проверку андеррайтером&lt;/li&gt;\n&lt;li&gt;проверить что бпм ждет ответ от сервиса и только после идет дальше по стейт машине&lt;/li&gt;\n&lt;li&gt;проверить что если &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: false&lt;/code&gt;, то БПМ смотрит есть ли код отказа или андеррайтинга(либо проверяем ,либо отказываем (проверить оба кейса) , может еще прийти NULL, тогда никак не реагирует, идет дальше по процессу&lt;/li&gt;\n&lt;li&gt;проверить что если &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;no_answer: true&lt;/code&gt;, то БПМ  никак не реагирует, идет дальше по процессу(значит интеграция не отвеила&lt;/li&gt;\n&lt;li&gt;проверить что фичи записываются в triggered_features&lt;/li&gt;\n&lt;li&gt;проверить что если после 30 сек в сервис пришло сообщение по API, то он ничего не послал в БПМ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Подщеколдин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;d.podshchekoldin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584947242975&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Code Review&quot;],&quot;valueId&quot;:[&quot;Code Review&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Прозвоны_v5.1.3.xlsx&quot;,&quot;id&quot;:&quot;88-26193&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26193?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYxOTN8ZnIyN2xYYVZpZzJyeUV4T2gzaVJOeFdyMXpp%0D%0AMVlzZHNiV2w2UTVlMU1oaw0K%0D%0A&amp;updated=1582721740226&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_1110.xlsx&quot;,&quot;id&quot;:&quot;88-26196&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26196?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYxOTZ8b1RZOWJNOFdZNHdTbU9CSmRfbzYzakFBUEl4%0D%0ARlpnbmluX1Rjb0d1ckNrRQ0K%0D%0A&amp;updated=1582729268793&quot;},{&quot;value&quot;:&quot;Интеграция Дирекция рисков.xlsx&quot;,&quot;id&quot;:&quot;88-26199&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26199?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYxOTl8Unoya29reWZfQ0N6ZDRlWFNUSGtpMzBoNGZK%0D%0AYlViUl9ka19IRUZPRGpvSQ0K%0D%0A&amp;updated=1582730103248&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-50359&quot;,&quot;author&quot;:&quot;a.kryazhova&quot;,&quot;authorFullName&quot;:&quot;Анастасия Кряжова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;100 SP предварительно&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580383595049,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51471&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В Авто есть блок consolidated_credit_history. Будет аналогичная структура?&lt;br/&gt;Нужно после скоринга 0 отправлять в интеграции данные по КИ клиента?&lt;br/&gt;Что делать с xml? Просто принимать/отправлять?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581579545314,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51600&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем ответа от банка&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581675383887,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52480&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1625&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;нужен ответ от Ли по мораторию&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582723581180,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1470&quot;,&quot;entityId&quot;:&quot;86-71983&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Игнорировать сумму за КАСКО при проверке полиса и квитанции об оплате при оплате наличными&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анвар Анарбаев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576662850664&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1470&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Описание требования&lt;/strong&gt;&lt;br/&gt;Игнорировать сумму за КАСКО при проверке документа при оплате наличными&lt;br/&gt;При оплате наличными очень часто (почти всегда) при заведении заявки агент ставит примерную сумму за КАСКО и далее на проверке документа и квитанции об оплате сумма не сходится. Необходимо убрать проверку суммы или сделать обогащением.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение_BPM:&lt;/strong&gt;&lt;br/&gt;Актуально только для КАСКО НЕ В КРЕДИТ (insurances-&amp;gt;included:false).&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Елизавета Иванченкова&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.anarbaev&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;e.ivanchenkova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584946538884&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51469&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Актуально только для каско не в кредит (insurances-&amp;gt;included:false).&lt;br/&gt;Возможное решение:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сделать поле &amp;quot;страховая премия&amp;quot; для верификации: надежным обогащением.&lt;/li&gt;\n&lt;li&gt;На bpm: принимать новое значение, сохранять в мемори  и передавать партнерке. (учесть во всех выгрузках и интеграциях)&lt;/li&gt;\n&lt;li&gt;Бэк: принимать и отправлять на фронт новое значение.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581578569930,&quot;updated&quot;:1581584094592,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-51494&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1470&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ждем согласования банка&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581587204371,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1142&quot;,&quot;entityId&quot;:&quot;86-66636&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Docker образ для Userdata&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Александр Каратеев&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1572266367252&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1142&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Сделать Docker образ для userdata.&lt;br/&gt;Для этого сделать возможность загрузки настроек из переменных окружения, по максимуму вынести параметры в дефолтный конфиг.&lt;br/&gt;Решить, каким образом будут подключаться к образу все 3 репозитория.&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;alexander.karateev&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584784401535&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-823&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1466&quot;,&quot;entityId&quot;:&quot;86-71962&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Тесты для модуля Transport в BPM&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1576658126043&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1466&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Покрыть тестами то, что не покрыто&lt;/li&gt;\n&lt;li&gt;Включить тесты в pipeline&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584784377849&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1639&quot;,&quot;entityId&quot;:&quot;86-75029&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Изменение порядка отправления запросов из BPM в Scoring&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Никита Лукьянов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1580395573668&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1639&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Для того, чтобы при повторном запросе в скоринг по тому же клиенту использовать не протухшие данные, необходимо реализовать процесс подачи запросов в форме каскада.&lt;/p&gt;\n&lt;p&gt;На данный момент из BPM РГСБ отправляются запросы по клиенту в скоринг в формате:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;ФССП&lt;/li&gt;\n&lt;li&gt;НБКИ&lt;/li&gt;\n&lt;li&gt;Эквифакс&lt;/li&gt;\n&lt;li&gt;ОКБ&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;Необходимо&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В &lt;code class=\&quot;inline-code\&quot;&gt;pre_scoring_state&lt;/code&gt; привести запросы BPM в формат каскада, то есть запросы по клиенту в скоринг должны выглядеть таким образом:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;ФССП&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ + Эквифакс&lt;/li&gt;\n&lt;li&gt;ФССП + НБКИ + Эквифакс + ОКБ&lt;br/&gt;Уточнения по &lt;code class=\&quot;inline-code\&quot;&gt;source&lt;/code&gt;:&lt;br/&gt;-&amp;quot;fssp&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;nbki&amp;quot;: &amp;quot;ch_only&amp;quot;&lt;br/&gt;-&amp;quot;equifax&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;okb&amp;quot;: &amp;quot;user_info&amp;quot;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;в scoring_1_state&lt;br/&gt;ДОПОЛНИТЕЛЬНО Запрашивать историю по клиенту&lt;br/&gt;Т. е к sources добавить: (получиться как в reverify - все возможные проверки - кэш не нужен)&lt;br/&gt;-&amp;quot;fssp&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;nbki&amp;quot;: &amp;quot;ch_only&amp;quot;&lt;br/&gt;-&amp;quot;equifax&amp;quot;: &amp;quot;user_info&amp;quot;&lt;br/&gt;-&amp;quot;okb&amp;quot;: &amp;quot;user_info&amp;quot;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;В reverify_state&lt;br/&gt;Убиваем свой кэш (ходим всегда в скоринг со всеми сорсами - как в scoring_1_state)&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;! Также необходимо приложить комит по отправляемым запросам для Дмитрия Г. (&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/houdini\&quot; title=\&quot;Дима Голубь\&quot; data-user-id=\&quot;24-1\&quot;&gt;@Дима Голубь&lt;/a&gt;)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;br/&gt;Разные поведения заявок проверить&lt;br/&gt;Проверить отказы, доработки (предеклайны)&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;nikita.lukyanov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;5&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584784149487&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52325&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;span class=\&quot;markdown-language-tag\&quot;&gt;yaml&lt;/span&gt;&lt;pre class=\&quot;wikicode prettyprint linenums\&quot;&gt;&lt;code class=\&quot;language-yaml\&quot;&gt;\n# настройки запросов в скоринг\nscoring_settings:\n    strategies:\n        pre_scoring_fssp:\n            sources:\n                fssp:\n                    - user_info\n            max_attempts: 5\n            timeout: 2\n        pre_scoring_nbki:\n            sources:\n                fssp:\n                    - user_info\n                nbki:\n                    - ch_only\n            max_attempts: 5\n            timeout: 2\n        pre_scoring_equifax:\n            sources:\n                fssp:\n                    - user_info\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n            max_attempts: 5\n            timeout: 2\n        pre_scoring_okb:\n            sources:\n                fssp:\n                    - user_info\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                okb:\n                    - user_info\n            max_attempts: 5\n            timeout: 2\n        scoring1:\n            sources:\n                fssp:\n                    - user_info\n                    - user_score\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                    - user_score\n                    - fraud\n                okb:\n                    - user_info\n                    - user_score\n            max_attempts: 5\n        reverify_scoring:\n            sources:\n                fssp:\n                    - user_info\n                    - user_score\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                    - user_score\n                    - fraud\n                okb:\n                    - user_info\n                    - user_score\n            max_attempts: 5\n        scoring_update_pd:\n            sources:\n                nbki:\n                    - ch_only\n                equifax:\n                    - user_info\n                okb:\n                    - user_info\n    pre_scoring_order:\n        - pre_scoring_fssp\n        - pre_scoring_nbki\n        - pre_scoring_equifax\n        - pre_scoring_okb\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582641841552,&quot;updated&quot;:1582810391933,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52572&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Вопросы от Федора&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Я тут посмотрел на твою ветку скоринга, и у меня опять вопросы возникли к задаче. Возможно чуток еще поанализиоровать придется.&lt;br/&gt;Как-то так вышло, почитай, понятно ли написал:&lt;br/&gt;Вопросы:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Сейчас мы запрашиваем источники последовательно, если какой-то из источников не отвечает, запрашиваем следующий, предыдущий больше не запрашиваем. В связи с изменениями увеличится ли время ожидания запросов, если один источник не работает, а мы его запрашиваем во всех последующих? На сколько максимально оно может увеличиться?&lt;/li&gt;\n&lt;li&gt;В БПМ запросы и проверки выполняются последовательно (в последовательности, указанной в СПР, т.е. на последующих этапах предыдущие проверки не выполняются. Возможна ли сейчас (до внесения изменений) ситуация, например, что мы запрашиваем скор по НБКИ, на этапе запроса кредитной истории НБКИ не работал, и в результате (при запросе скора) по НБКИ запросилась кредитная история? (вместо НБКИ может быть любой другой источник)&lt;/li&gt;\n&lt;li&gt;Возможна ли такая ситуация после внесения изменений?&lt;/li&gt;\n&lt;li&gt;Возможна ли сейчас (до внесения изменений) ситуация, например, что мы запрашиваем скор по НБКИ, по кредитной истории уже истекло время кэша, и в результате (при запросе скора, но без запроса КИ) по НБКИ запросилась кредитная история?&lt;/li&gt;\n&lt;li&gt;Возможна ли такая ситуация после внесения изменений?&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Я по своим вопросам вижу три варианта развития этой задачи:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Больше ее не делаем&lt;/li&gt;\n&lt;li&gt;Делаем как написано, плюс включаем проверки всех предыдущих скорингов в следующие&lt;/li&gt;\n&lt;li&gt;Скоринг придумывает какой-то другой формат, чтобы оно работало как нам надо, но и чтобы их устраивало.&lt;br/&gt;Во втором варианте ты обновляешь метки, в первом и третьем не обновляешь&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/blockquote&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582810229156,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52662&quot;,&quot;author&quot;:&quot;nikita.lukyanov&quot;,&quot;authorFullName&quot;:&quot;Никита Лукьянов&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Да, время ожидания увеличится.&lt;br/&gt;2,3 Как до внесения изменений, так и после, если в какой-то запрос источник не отработал, то он будет запрошен в следующий раз, если в запросе он будет указан.&lt;br/&gt;4,5 Не зависит от внесения изменений в bpm.&lt;br/&gt;В описанной ситуации если кэш КИ НКБИ истек, и он явно не запрашивался в новом запросе, то он а) не будет запрашиваться заново и б) старый ответ КИ НБКИ не будет подмешиваться в ответ.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Если кэш КИ НБКИ не истек и явно не запрашивался:&lt;br/&gt;а) не будет запрашиваться заново&lt;br/&gt;б) данные КИ НБКИ будут подмешено в ответ по этому клиенту&lt;/p&gt;\n&lt;p&gt;Если кэш КИ НБКИ истек и явно запрошен:&lt;br/&gt;а) будет запрос в нбки&lt;br/&gt;б) данные будет взяты только свежие данные, если нбки ответил&lt;/p&gt;\n&lt;p&gt;Если кэш КИ НБКИ не истек и явно запрашивался:&lt;br/&gt;а) не будет запроса в НБКИ&lt;br/&gt;б) будут взяты данные из кэша и подмешены в результат&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582892816232,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52685&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Нам не очень подходит, что время запросов увеличится. Вариант решения проблемы: добавить флажок или что-то вроде того, чтобы бпм мог управлять, нужен ли нам запрос по конкретному источнику/фиче (т.е. источник в данном случае, например, fssp, фича - user_info, я не знаю точно, какие тут термины правильные), или же нам нужны только данные из кэша для расчётов.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;По остальным пунктам будем с нашей стороны решать.&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/nikita.lukyanov\&quot; title=\&quot;Никита Лукьянов\&quot; data-user-id=\&quot;24-317\&quot;&gt;@Никита Лукьянов&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582902655599,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52834&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1639&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Поговорили с Д. Голубем, ждем доработок по кэшам в скоринге&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583155957527,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1757&quot;,&quot;entityId&quot;:&quot;86-77516&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Настройка признака Партнерская СУ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582874398320&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1757&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;8763  Спринт 4&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;В &lt;strong&gt;csd_request&lt;/strong&gt; в блоке insurances добавить параметр &lt;strong&gt;partner_insurance&lt;/strong&gt; с возможными значениями «1» и «0».&lt;/p&gt;\n&lt;p&gt;Если в &lt;strong&gt;choose_deal_condition_done&lt;/strong&gt; от партнерки в insurances-&amp;gt;insurance_tariff effect_on_the_rate=&amp;#39;tariff_TradePoint&amp;#39;&lt;br/&gt;&lt;strong&gt;то partner_insurance=0&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;иначе&lt;/strong&gt; (например effect_on_the_rate in (КСЖ_ргсб,GAP_ргсб,Z_ROAD_rgsb_family))&lt;br/&gt;&lt;strong&gt;partner_insurance=1&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;Проверить,что&lt;br/&gt;-Значение «1» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые Банка».&lt;br/&gt;-Значение «0» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые партнеров».&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;6&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584784096189&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;8763_БТ_признак Партнерская СУ_авто_кн_БП_v1.docx&quot;,&quot;id&quot;:&quot;88-26273&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26273?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYyNzN8TmJtd0lhMnJseWQ2dVVQTE10QjNCLUx2Tkdn%0D%0ARlZFall4ZUFmUDdaWFB3OA0K%0D%0A&amp;updated=1582874406787&quot;},{&quot;value&quot;:&quot;8763_БТ_признак Партнерская СУ_авто_кн_БП_v11.docx&quot;,&quot;id&quot;:&quot;88-26283&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26283?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYyODN8eVRfaUdNam56Wk1LZGlCZTB1andNblhWZl9P%0D%0Abno5RF9xX3UxQktwYlFoTQ0K%0D%0A&amp;updated=1582875730717&quot;},{&quot;value&quot;:&quot;image1583159777167.png&quot;,&quot;id&quot;:&quot;88-26423&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26423?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY0MjN8TXcxOE51QlM3amM5bWZkeGppanh4dk82Tmtf%0D%0ASHNIRmRGTjAyVkRoZUJVNA0K%0D%0A&amp;updated=1583159777690&quot;},{&quot;value&quot;:&quot;image1583159929597.png&quot;,&quot;id&quot;:&quot;88-26424&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26424?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY0MjR8Skk5bWZkY1pGR1NsMXhTZmE4ek1NU3ZaYUZY%0D%0AcU9QSXRMdTAwUktzMmpJUQ0K%0D%0A&amp;updated=1583160062244&quot;},{&quot;value&quot;:&quot;image1583160628952.png&quot;,&quot;id&quot;:&quot;88-26425&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26425?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY0MjV8TWxMMjc4N0JIeEVidFh0RXNEU3FNMjVpTjBD%0D%0AWG82TWhqSUc4cHhKVUZfSQ0K%0D%0A&amp;updated=1583160629633&quot;},{&quot;value&quot;:&quot;image1583160878992.png&quot;,&quot;id&quot;:&quot;88-26426&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26426?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY0MjZ8clBncFg3X01pOTR2aFpDeFAwblBpS21sWnpo%0D%0ARThfTjBoR0xmTmxTSnk5Yw0K%0D%0A&amp;updated=1583160879621&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52747&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/n.myklyuchenko\&quot; title=\&quot;Наталья Мыключенко\&quot; data-user-id=\&quot;24-258\&quot;&gt;@Наталья Мыключенко&lt;/a&gt; в pay_request есть блок insurances, в нем те же самые данные, что и в csd (с учетом новых данных из верификации).&lt;br/&gt;В страховках в блоке insurances в pay_request должен быть параметр partner_insurance?&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583059286894,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52748&quot;,&quot;author&quot;:&quot;n.myklyuchenko&quot;,&quot;authorFullName&quot;:&quot;Наталья Мыключенко&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; по требованиям от банка необходимо только в csd направлять&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583059641405,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52749&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ок. Предлагаю включить в тесты проверку, что в pay_request не отправится этот параметр&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583060321212,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52753&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;bpm_ng_state_machines_versions:\n  - name: sm_rgsb\n    version_tag: feature/ARGS-1757\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583074671582,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52795&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;регресс по старым заявка.&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Значение «1» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые Банка».&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14103/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14103/details/&lt;/a&gt;&lt;br/&gt;ФР = ОР&lt;/li&gt;\n&lt;li&gt;Значение «0» присваивается параметру «partner_insurance», если к кредиту была добавлена страховка из раздела «Страховые партнеров».&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13375/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13375/details/&lt;/a&gt;&lt;br/&gt;ФР = ОР&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583141887760,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52856&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1757&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1: заявка  только со СТРАХОВАНИЕМ ОТ БАНКА:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой только от банка.&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14194/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14194/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;ВКАСКО_ргсб&amp;quot;,&lt;br/&gt;&amp;quot;partner_insurance&amp;quot;: 1&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26423?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjN8WlU3T2xEcjZ1dDNxZWNMdGdlUkdQUERDLUdl%0D%0Ac1l2QnpDNzhsTnEyTEhiQQ0K%0D%0A&amp;amp;updated=1583159777690\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 2: заявка только со СТРАХОВАНИЕМ ОТ ПАРТНЕРА :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой только от партнера.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26424?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjR8VzI1bWZyS0wyOHU5bE9MZ2dOMjJIN1JSZm1F%0D%0ALWN3QmhFNzVNSnM2cDhBSQ0K%0D%0A&amp;amp;updated=1583160062244\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14206/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14206/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;tariff_TradePoint&amp;quot;&lt;br/&gt;partner_insurance=0 не отображается в БПМ если не нажать свитч в кредит.&lt;br /&gt;\n&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26426?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjZ8aUIxelYtU1AxajJqMlhnRFkyT2FMODQtb091%0D%0AZFRiN0VjbXdtM3pxN2thcw0K%0D%0A&amp;amp;updated=1583160879621\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Создал заявку со страховкой только партнера и нажал указанный свитч &amp;quot;В кредит&amp;quot;.&lt;/li&gt;\n&lt;li&gt;Прошел все этапы до выдачи кредита:&lt;br/&gt;&amp;quot;partner_insurance&amp;quot;: 0&lt;br/&gt;(ОР = ФР)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 3:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку со страховкой от партнеров и от банка:&lt;/li&gt;\n&lt;li&gt;Довел сделку до выдачи кредита со всеми этапами проверки.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14211/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14211/details/&lt;/a&gt;&lt;br/&gt;ФР:&lt;br/&gt;&amp;quot;effect_on_the_rate&amp;quot;: &amp;quot;tariff_TradePoint&amp;quot;,&lt;br/&gt;partner_insurance=1&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 4:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку не выбрав ни одной страховки.&lt;/li&gt;\n&lt;li&gt;Пройдя все проверки на 6 шагу система требует выбрать страховку:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26425?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY0MjV8RjhzTUYzajF3aDFmTVpGbms5d3NzaFJnaWdH%0D%0AZ0VQVl83YXRrb1FaY2RsVQ0K%0D%0A&amp;amp;updated=1583160629633\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583161326704,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;},{&quot;value&quot;:&quot;0&quot;,&quot;cssClass&quot;:&quot;c3&quot;}]}, {&quot;id&quot;:&quot;ARGS-1806&quot;,&quot;entityId&quot;:&quot;86-78314&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Заявка не реагировала на восстановление сделки&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Евгений Панков&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583854609890&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1806&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Заявка 3437285 не реагирована на команду восстановления сделки, из за падения в таймаут делайн перед сменой дня. Можно ли как то доработать систему дабы избежать подобных зависаний? ( или сделать кнопку &amp;quot;восстановления сделки&amp;quot; недоступной при активной ошибке из ЦФТ.&lt;/p&gt;\n&lt;p&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26738?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY3Mzh8WlJqVjd4anVzakIwaWZ4YmMtbnFpbmlmMXpY%0D%0AUkRrSkQ2ZUpHT0IyVW9KZw0K%0D%0A&amp;amp;updated=1583854306698\&quot; alt=\&quot;\&quot; /&gt;   &lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26739?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY3Mzl8ZWdvUTRfY3k4SlR4elRYbFdxT1NlYlQ0YW1k%0D%0AV0FZQXpXMENlRXB0SnJxTQ0K%0D%0A&amp;amp;updated=1583854567624\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;e.pankov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783747507&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26738&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26738?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY3Mzh8Wm5VSGQwaWhMLVdoT3gtYVF3R0R6ejZ4WmNH%0D%0AWkxFU3pZY3lmU3hYMzlXNA0K%0D%0A&amp;updated=1583854306698&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26739&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26739?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY3Mzl8NVFCRmdFaWxPQy1WZ2ctSk1tN3hONjR6S1ZN%0D%0AQ0ZFZjByMnBBdGduWWF4SQ0K%0D%0A&amp;updated=1583854567624&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1531&quot;,&quot;entityId&quot;:&quot;86-72778&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Документация&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577474762271&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1531&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Необходима документация&lt;/h1&gt;\n&lt;p&gt;Важно описать что для чего есть, как оно работает, какие сообщения БПМ куда передает с какими параметрами и что оно ожидает в ответе.&lt;/p&gt;\n&lt;h2&gt;Roadmap &lt;em&gt;предварительный&lt;/em&gt;:&lt;/h2&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создать скелет документации (.rst):&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Composite&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; SM&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Composite:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot;&gt; Расписать все сообщения: что отправляется, какие типы данных, что значат параметры и что принимаем, какие типы данных, обязательные параметры.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h3&gt;SM:&lt;/h3&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;4\&quot;&gt; Описать понятным языком какие модули для чего.&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;5\&quot;&gt; Расписать все стейты: для чего, почему, что происходит, какой в этом смысл &lt;/label&gt;&lt;del&gt;жизни&lt;/del&gt;, какие возможные дальнейшие &lt;del&gt;пути&lt;/del&gt; стейты могут быть для заявки, исходя из того или иного ответа.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783599666&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Critical&quot;],&quot;valueId&quot;:[&quot;Critical&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for analysis&quot;],&quot;valueId&quot;:[&quot;Ready for analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;e.ivanchenkova&quot;,&quot;fullName&quot;:&quot;Елизавета Иванченкова&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48594&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1531&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Документирование&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577474777067,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1381&quot;,&quot;entityId&quot;:&quot;86-70980&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Рефакторинг проверок подписей в БПМ&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1575634061948&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1381&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;em&gt;Проблема&lt;/em&gt;&lt;br/&gt;В рамках задач &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1353\&quot; title=\&quot;ресо проверка подписей\&quot; data-issue-id=\&quot;86-70479\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1353&lt;/a&gt; и &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1359\&quot; title=\&quot;Корректировка проверки подписей СЖ,ВК,ДК\&quot; data-issue-id=\&quot;86-70600\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1359&lt;/a&gt; (фасттреки) в код была внесена логика, не вписывающаяся в текущую структуру кода без ее изменения (т.е. костыли).&lt;br/&gt;Т.к. времени на нормальное решение выделено не было, нужно сделать структуру, более приспособленную к изменениям.&lt;br/&gt;&lt;em&gt;Анализ&lt;/em&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Если полис (insurances_type_id in (1,2,3,4), ниже последняя версия изменений&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24769?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQ3Njl8eVROay1zRWZ6dkRJMWhnYmJuQmIzby0yUF9o%0D%0AOUx3bEs0bFZqZlNMV28zNA0K%0D%0A&amp;amp;updated=1579599694787\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Если полис (insurances_company_id in (4)&lt;br/&gt;убран свитч signatureMatch&lt;br/&gt;добавлен&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;thereInsSignature&amp;quot;: \n{\n&amp;quot;caption&amp;quot;: &amp;quot;Везде присутствует подпись Страхователя и совпадает с эталоном&amp;quot;,\n&amp;quot;error_message&amp;quot;: &amp;quot;Не везде присутствует подпись Страхователя или не совпадает с эталоном&amp;quot;,\n&amp;quot;type&amp;quot;: &amp;quot;reject&amp;quot;,\n&amp;quot;scope&amp;quot;: &amp;quot;document&amp;quot;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;как работает сейчас&lt;/em&gt;&lt;br/&gt;сейчас каждая проверка инициализирует себя по ID документа, то есть для Вкаско, Каско, СЖ, Гэп проверки отсылаются разные , но состав свичей у них одинаковый&lt;br/&gt;захардкожено 1 условие для компании РЕСО, которое меняет любую из этих проверок (как именно в связной задаче)&lt;br/&gt;скриншоты выше единственные которые используются для проверки подписей в полисах&lt;br/&gt;&lt;em&gt;итог&lt;/em&gt;&lt;br/&gt;на данный момент логика проверки подписей простая&lt;br/&gt;усложняться и модифицироваться могут только логика проверки полисов от определенных компаний(insurances_company_id, но это прогноз, пока доп требований не было)&lt;br/&gt;&lt;strong&gt;что нужно БПМ&lt;/strong&gt;&lt;br/&gt;прорефакторить код условия с ресо, продумать лучшее решение, если условия с компаниями будут еще добавляться&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783575076&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1353&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1359&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-24768&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24768?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjQ3Njh8RzEtd0tDdHl5RXRYU2Q2bTJxMnlvLWc2dmYy%0D%0AVFpERUV2RXhXLTE2T1V1Zw0K%0D%0A&amp;updated=1579599466366&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-24769&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24769?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjQ3Njl8OUNVd2dEU1owVHBLd2NjQWxxVWkzUmNvZUJ4%0D%0AbzlHOUtRY21GN1VRd3BEWQ0K%0D%0A&amp;updated=1579599694787&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1008&quot;,&quot;entityId&quot;:&quot;86-64522&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;(userdata-app) SSO KeyCloak&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Кубасов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1570458154594&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1008&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Аутентификацию на ресурсе &lt;a href=\&quot;https://userdata-app-1.auto-rgsb-st1.cloud.b-pl.pro\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://userdata-app-1.auto-rgsb-st1.cloud.b-pl.pro&lt;/a&gt; (userdata-app) нужно настроить для работы через SSO KeyCloak. т.е. перевести внутренний сервис на работу с единой системой идентификации и управления доступом&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;dmitry.kubasov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783455375&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-717&quot;,&quot;type&quot;:&quot;Duplicate&quot;,&quot;role&quot;:&quot;дублирует&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;m.nuzhnyj&quot;,&quot;fullName&quot;:&quot;Максим Нужный&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-46399&quot;,&quot;author&quot;:&quot;ka&quot;,&quot;authorFullName&quot;:&quot;Константин Астраханцев&quot;,&quot;issueId&quot;:&quot;ARGS-1008&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Вопрос тот же, что и для &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1005\&quot; title=\&quot;(bpm-ng-app) SSO KeyCloak\&quot; data-issue-id=\&quot;86-64516\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1005&lt;/a&gt;: поддержка КК в админке уже есть? В ЮД вроде тоже джанговская.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1574960746459,&quot;updated&quot;:1574960768291,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;ИБ-средний&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1838&quot;,&quot;entityId&quot;:&quot;86-78671&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Отображать в админке BPM причину проблемы/таймаута&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584352675955&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1838&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584783371058&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Task&quot;],&quot;valueId&quot;:[&quot;Task&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#00665e&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Analysis&quot;],&quot;valueId&quot;:[&quot;Analysis&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1783&quot;,&quot;entityId&quot;:&quot;86-77896&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Корректировка логики обработки результатов ФССП&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583303594503&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1783&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9027 Корректировка логики обработки результатов ФССП&lt;br/&gt;&lt;strong&gt;Бизнес -требования&lt;/strong&gt;&lt;br/&gt;Если в Долге ФССП отсутствует сумма, а в поле «Дата, причина окончания или прекращения ИП» указаны следующие причины прекращения:&lt;br/&gt;•\tст. 46 ч. 1 п. 2 – 7&lt;br/&gt;•\tст. 43 ч. 1 п. 1 – 2,&lt;br/&gt;то отказывать&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БПМ&lt;/strong&gt;&lt;br/&gt;В ответе по  ФССП(скоринг_0, скоринг_1, reverify) проверять параметр  &lt;code class=\&quot;inline-code\&quot;&gt;sign_of_termination&lt;/code&gt; , путь :&lt;/p&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;params-&amp;gt;sf-&amp;gt;features-&amp;gt;1-&amp;gt;bank_rgsb-&amp;gt;fssp-&amp;gt;sign_of_termination\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Если он&lt;code class=\&quot;inline-code\&quot;&gt; true&lt;/code&gt;, то отказывать с кодом BS003, передавать на бэк в партнерку причину отказа: &lt;code class=\&quot;inline-code\&quot;&gt;Отказ. Задолженность по ФССП&lt;/code&gt;&lt;br/&gt;Информация по коду отказа во вложении &amp;quot;Список_кодов_отказов&amp;quot; (как зашить в юзердату, что отправить в БКИ, что отправить на партнерку)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Юзердата&lt;/strong&gt;&lt;br/&gt;добавить новый код отказа BS003, информация во вложении  &amp;quot;Список_кодов_отказов&amp;quot;&lt;br/&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;прислать из скоринга sign_of_termination: true, проверить что произошел отказ BS003&lt;br/&gt;Проверить, что в партнерке корректно отразилась причина отказа&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584782956313&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9027_Корректировка отказов по ФССП.docx&quot;,&quot;id&quot;:&quot;88-26502&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26502?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY1MDJ8WlJPVjUtaHhJMEVUQ0xzVmJGRGllY2F3MlMy%0D%0AVFNKb2RIOG1SSjMwdFhCWQ0K%0D%0A&amp;updated=1583303610324&quot;},{&quot;value&quot;:&quot;Список_кодов_отказов_0503.xlsx&quot;,&quot;id&quot;:&quot;88-26594&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26594?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY1OTR8NHRTc3ZMcDV6NHFtLXE2Yl9lUjYyaFRQUnhD%0D%0AbUN2bUZ6VWw1OV91eWFZNA0K%0D%0A&amp;updated=1583404513128&quot;},{&quot;value&quot;:&quot;image1584095289187.png&quot;,&quot;id&quot;:&quot;88-26822&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26822?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY4MjJ8OWNTeTVGOGVsSk8tdXE3T2wteVZnRW84R0ZQ%0D%0AV3JpSVRvd1dTQXZUVFd0bw0K%0D%0A&amp;updated=1584095289873&quot;},{&quot;value&quot;:&quot;image1584095308949.png&quot;,&quot;id&quot;:&quot;88-26823&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26823?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY4MjN8ZUpoQW44SXI3TGoyZmRoMVVHZUlGSUxjaDJo%0D%0ANWgyZUVBNkdvOVZQVHp6OA0K%0D%0A&amp;updated=1584095309540&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53577&quot;,&quot;author&quot;:&quot;fedor.hramov&quot;,&quot;authorFullName&quot;:&quot;Федор Храмов&quot;,&quot;issueId&quot;:&quot;ARGS-1783&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;bpm_ng_composite_version: feature/ARGS-1783&lt;br/&gt;bpm_ng_state_machines_versions:&lt;br/&gt;- version_name: pre_release&lt;br/&gt;  import_name: sm1 &lt;br/&gt;  name: sm_rgsb&lt;br/&gt;  version_tag: feature/ARGS-1783&lt;/pre&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584081295666,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53592&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1783&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1:  (Добавив данные в фейкер, кредит не должен быть одобрен) ОР == ФР.&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил в &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/7\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/7&lt;/a&gt; строку, добавив следующий параметр:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26822?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY4MjJ8S1ZzMXFMQlgtX1l5YWFIVnJWNGtoWlR3SGZL%0D%0AeGFfbVp0NVJwOWRaYXhkRQ0K%0D%0A&amp;amp;updated=1584095289873\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку со следующими параметрами:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019924\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019924&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Прошел верификацию документов.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Отказ.&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26823?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjY4MjN8UXpQWmU4Q2RfbUpmZ0s2NHVScnR3VndnOXhS%0D%0AOXN4VHBkOE9Da1V1UUM5dw0K%0D%0A&amp;amp;updated=1584095309540\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&amp;quot;reject&amp;quot;: {&lt;br/&gt;-&amp;quot;info&amp;quot;: [&lt;br/&gt;&amp;quot;Отказ. Задолженность по ФССП&amp;quot;&lt;br/&gt;],&lt;br/&gt;-&amp;quot;codes&amp;quot;: [&lt;br/&gt;&amp;quot;BS003&amp;quot;&lt;br/&gt;],&lt;br/&gt;&amp;quot;status&amp;quot;: &amp;quot;DECLINE&amp;quot;,&lt;br/&gt;&amp;quot;is_cascade&amp;quot;: false&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14681/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14681/details/&lt;/a&gt;&lt;br/&gt;ОР == ФР.&lt;/p&gt;\n&lt;p&gt;Тест 2 изменение в скоринг 1 ОР==ФР:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил в &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/6\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/6&lt;/a&gt; строку, добавив следующий параметр: sign_of_termination&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Создал заявку &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019992\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30019992&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;прошел все проверки верификации паспорта.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Отказ. Задолженность по ФССП.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14741/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/14741/details/&lt;/a&gt;&lt;br/&gt;ОР==ФР.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Тест 3 изменение в ресивер:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Изменил &lt;a href=\&quot;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/20\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://faker-1.auto-rgsb-st1.cloud.b-pl.pro/admin/fakes/20&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Использовал уже одобренную заявку: &lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30018752\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30018752&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Ввел все данные автомобиля, началась проверка автомобиля.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Пришел отказ. Отказ. Задолженность по ФССП.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13977/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/13977/details/&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584095337858,&quot;updated&quot;:1584114005379,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1078&quot;,&quot;entityId&quot;:&quot;86-65628&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Docker образ для BPM&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1571305241968&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1078&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Сделать Docker образ для BPM.&lt;br/&gt;Для этого сделать возможность загрузки настроек из переменных окружения, по максимуму вынести параметры в дефолтный конфиг.&lt;br/&gt;Решить, каким образом будут подключаться к образу все 4 репозитория&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584782368184&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-823&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1498&quot;,&quot;entityId&quot;:&quot;86-72322&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;ФУТС&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577088829717&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1498&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;1145: Необходимо предоставить возможность в качестве информации о ТС прикладывать ФУТС, в котором отсутствует номер и дата выдачи.&lt;br/&gt;ФУТС - форма учета транспортного средства.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Задача&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БЭК&lt;/strong&gt;&lt;br/&gt;если в заявке отсутствуют госпрограммы: government_program = null&lt;br/&gt;Для типа подтверждения ТС &lt;strong&gt;Инфописьмо&lt;/strong&gt; ПТС/ЭПТС (vehicle_data_source:info_mail_pts и vehicle_data_source:info_mail_epts)&lt;br/&gt;Сделать проверку поля &amp;quot;Номер ПТС/ЭПТС&amp;quot; необязательной&lt;br/&gt;Добавить условие,что если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; не заполнено,то поле &amp;quot;Дата выдачи&amp;quot; также необязательно&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;BPM&lt;/strong&gt;&lt;br/&gt;Если в полях &lt;code class=\&quot;inline-code\&quot;&gt;number,series&lt;/code&gt; &lt;strong&gt;для ПТС&lt;/strong&gt; и  &lt;code class=\&quot;inline-code\&quot;&gt;epts_number&lt;/code&gt;  &lt;strong&gt;для ЭПТС&lt;/strong&gt; пришли пустые значения, то отправить блокировку полей(параметр disabled) на верификацию &amp;quot;Номер ПТС/ЭПТС&amp;quot; и &amp;quot;Дата выдачи&amp;quot;(issued_at)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Тестирование&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Проверить корректность работы задачи ТОЛЬКО для Инфописьма. Подтверждение через ПТС/ЭПТС изменения затрагивать не должны&lt;/li&gt;\n&lt;li&gt;Проверить,что в случаях,когда номер и дата выдачи присутствуют - в верификации поля не блокируются и проверка данных происходит корректно&lt;/li&gt;\n&lt;li&gt;Проверить,что&lt;br/&gt;-если поле &amp;quot;Номер ПТС/ЭПТС&amp;quot; заполнено, а &amp;quot;Дата выдачи&amp;quot; не заполнено- выдается ошибка&lt;br/&gt;-если наоборот - не выдается (при этом на верификации поле &amp;quot;Дата выдачи&amp;quot; заблокировано для ввода данных вместе с полем &amp;quot;Номер ПТС/ЭПТС&amp;quot; )&lt;/li&gt;\n&lt;li&gt;Проверить, что данное условие работает ТОЛЬКО в случае отсутствия в заявке гос программы. Если гос программа в заявке присутствует- все поля валидируются. Связано &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1566\&quot; title=\&quot;Проверка даты выдачи ПТС\\ЭПТС\\инф письма для госпрограммы\&quot; data-issue-id=\&quot;86-73546\&quot; class=\&quot;issue-resolved\&quot;&gt;ARGS-1566&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;7&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584781856137&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;image1579852994899.png&quot;,&quot;id&quot;:&quot;88-24965&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjQ5NjV8SnNoUC1XV3Q3V2s1dVhGVlRmc01fRjR4U3RR%0D%0AVy1OOGZ0RC1rdVRGMTBQMA0K%0D%0A&amp;updated=1579852995583&quot;},{&quot;value&quot;:&quot;image1579853145593.png&quot;,&quot;id&quot;:&quot;88-24966&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8aFh6eGFaZDdIenVKcW5BZDNsOXhsT2RNdHpR%0D%0AZ3lJTHV3RGRMVkQzdi0xSQ0K%0D%0A&amp;updated=1579853146182&quot;},{&quot;value&quot;:&quot;image1579862047901.png&quot;,&quot;id&quot;:&quot;88-24982&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8a2p0bDMyamllbE9CMEdibTV5UzMta2xIVm5z%0D%0ALS0tYm5XY2hZSmstbFdTaw0K%0D%0A&amp;updated=1579862048632&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48264&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Какой формат документа?&lt;br/&gt;Сколько страниц, какие поля?&lt;br/&gt;Что нужно проверять по данному документу?&lt;br/&gt;К какому продукту относится? То же самое, как и информационные письма?&lt;/p&gt;\n&lt;p&gt;Доработки следующие:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;6-й шаг добавить новую кнопку&lt;/li&gt;\n&lt;li&gt;Выводить список полей для ФУТС&lt;/li&gt;\n&lt;li&gt;Отправлять с бэка на bpm&lt;/li&gt;\n&lt;li&gt;Отправлять на верификацию и принимать результат проверки&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577097266464,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48710&quot;,&quot;author&quot;:&quot;a.solonovich&quot;,&quot;authorFullName&quot;:&quot;Солонович Алексей&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;При выборе закладки «Информационное письмо ПТС» или «Информационное письмо ЭПТС» сделать необязательными поля «Номер ЭПТС/ ПТС» и дата выдачи в случае отсутствия в скане/ фото данной информации.&lt;br/&gt;Если в приложенном документе заполнены поля Номер и дата выдачи ЭПТС/ ПТС, то в заявке они также должны быть заполнены.&lt;br/&gt;Обязательными для ввода и верификации оставить следующие поля:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; VIN\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Год изготовления ТС\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Модель, № двигателя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Номер шасси\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Цвет \n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt; Наличие подписи и печати дилера/ производителя\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577780207854,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49338&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветка бэк &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579180707008,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49424&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;BPM&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;sm, composite: feature/ARGS-1498&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579263091695,&quot;updated&quot;:1579263098436,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49933&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Поля заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/11926/details/&lt;/a&gt;&lt;br/&gt;1. Даты выдачи и номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24965?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQ5NjV8OXJUcmhlNmI5Zjc0SVNKLW41VF9VNW5OQXlj%0D%0AYXM2NlhNLUJpSTFNYW9Pdw0K%0D%0A&amp;updated=1579852995583\&quot;/&gt;&lt;/div&gt;&lt;br/&gt;2. Дата выдачи есть, номера ЭПТС из инфо письма нет.&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24966?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQ5NjZ8SEZDYzVvNDdOV3dYVjVnRVlvY0d5ek1yRDVJ%0D%0AdVZvT196QTFfVlJRX3pKVQ0K%0D%0A&amp;updated=1579853146182\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579854186741,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-49963&quot;,&quot;author&quot;:&quot;e.rybakova&quot;,&quot;authorFullName&quot;:&quot;Рыбакова Екатерина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;Инфо письмо ЭПТС - при заполненных полях серия и номер и Дата выдачи поля не заблокированы - ОК.&lt;br/&gt;&lt;a href=\&quot;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;amp;entity=Document&amp;amp;id=75317\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://verification-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/?action=show&amp;entity=Document&amp;id=75317&lt;/a&gt;&lt;br/&gt;&lt;div class=\&quot;wiki picture\&quot;&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-24982?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjQ5ODJ8Vlh6NUVpQkp1STFpb0RZR21QZTF3NjVNMUsz%0D%0AU09ZZVluSXU5UVp2eDE4SQ0K%0D%0A&amp;updated=1579862048632\&quot;/&gt;&lt;/div&gt;&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1579862057441,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54413&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1498&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/Dmitry_Sinelnikov\&quot; title=\&quot;Дмитрий Синельников\&quot; data-user-id=\&quot;24-47\&quot;&gt;@Дмитрий Синельников&lt;/a&gt; выкатите задачу на препрод плиз&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584781849768,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Blocked&quot;,&quot;cssClass&quot;:&quot;c20&quot;}]}, {&quot;id&quot;:&quot;ARGS-1042&quot;,&quot;entityId&quot;:&quot;86-64914&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Подготовка DRS к масштабированию&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Федор Храмов&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1570692388773&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1042&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;Проблема&lt;/h1&gt;\n&lt;p&gt;При выполнении одновременно нескольких задач по распознаванию процессы DRS убиваются OOM киллером. Со временем это приводит к тому, что DRS не работает в принципе.&lt;br/&gt;При получении задачи на распознавание сообщение из Rabbit сразу акается. Из-за этого новые сообщение берутся сразу этой же машиной и выполняются одновременно в большом количестве.&lt;/p&gt;\n&lt;h1&gt;Решение&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо переделать структуру проекта таким образом, чтобы сообщение акалось только после обработки, либо при возникновении ошибки.&lt;/li&gt;\n&lt;li&gt;Уменьшить количество процессов и установить prefetch_count равным количеству процессов.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Доработать&lt;/h1&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;airbrake - не подключать если нет ключей&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;fedor.hramov&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584781474693&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1523&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Type&quot;,&quot;value&quot;:[&quot;Bug&quot;],&quot;valueId&quot;:[&quot;Bug&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#e30000&quot;,&quot;fg&quot;:&quot;#fff&quot;}},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Testing&quot;],&quot;valueId&quot;:[&quot;Testing&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;fedor.hramov&quot;,&quot;fullName&quot;:&quot;Федор Храмов&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-51755&quot;,&quot;author&quot;:&quot;d.podshchekoldin&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Подщеколдин&quot;,&quot;issueId&quot;:&quot;ARGS-1042&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1042&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1581953181946,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54411&quot;,&quot;author&quot;:&quot;a.krutilina&quot;,&quot;authorFullName&quot;:&quot;Анна Крутилина&quot;,&quot;issueId&quot;:&quot;ARGS-1042&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/fedor.hramov\&quot; title=\&quot;Федор Храмов\&quot; data-user-id=\&quot;24-90\&quot;&gt;@Федор Храмов&lt;/a&gt; что за задача[, ей уже 5 месяцев? еще не на проде? если надо тетсировать, то переведи на Макса, плиз&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584781474694,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;BPM-Tech&quot;,&quot;cssClass&quot;:&quot;c24&quot;}]}, {&quot;id&quot;:&quot;ARGS-1728&quot;,&quot;entityId&quot;:&quot;86-77025&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Добавление дополнительного контактного номера клиента&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Солонович Алексей&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1582269191433&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1728&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;8824&lt;/p&gt;\n&lt;h2&gt;Дизайн&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Дизайн&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо отрисовать макет &lt;strong&gt;Шаг 1, Общие сведения&lt;/strong&gt; с полем (ячейкой) для ввода дополнительного контактного номера клиента. Поле (ячейка) должна называться &lt;strong&gt;Дополнительные номер&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;Отрисовать валидацию (под полем), если введенный номер совпадает с основным. Текст валидации: &amp;quot;Не должен совпадать с основным мобильным&amp;quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;ПП FRONT&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot; checked=\&quot;\&quot;&gt; фронт&lt;/label&gt;&lt;br/&gt;Изменить первый шаг, согласно приложенным шаблонам.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Поле (ячейка) &lt;strong&gt;Дополнительный номер&lt;/strong&gt; должно отвечать следующим требованиям:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Должны быть все валидации, что и у поля &lt;strong&gt;Мобильный телефон&lt;/strong&gt;;&lt;/li&gt;\n&lt;li&gt;Плейсхолдер (шаблон) должен быть что и у поля &lt;strong&gt;Мобильный телефон&lt;/strong&gt;;&lt;/li&gt;\n&lt;li&gt;Дополнительный номер не должен совпадать с основным номером (поле &lt;strong&gt;Мобильный телефон&lt;/strong&gt;);&lt;/li&gt;\n&lt;li&gt;Поле &lt;strong&gt;Дополнительные номер&lt;/strong&gt; необязательно для заполнения.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;ПП BACK&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot; checked=\&quot;\&quot;&gt; бэк&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Для хранения дополнительного контактного номера клиента, необходимо в таблицу &lt;strong&gt;msisdns&lt;/strong&gt;&lt;br/&gt;записывать новую строку с атрибутом is_current is FALSE, если в заявке он указан.&lt;/li&gt;\n&lt;li&gt;Передавать на BPM доп номер в блоке &amp;quot;additional_msisdn&amp;quot; (аналогично основному номеру, см. структуру в блоке BPM п.1)&lt;br/&gt;Для ИнФО: Таким образом, у заемщика может быть 1 основной (is_current is TRUE) и 1 дополнительный номер телефона (is_current is FALSE).&lt;br/&gt;При изменении основного или дополнительного номера телефона, должны перезаписываться текущие данные (msisdn, updated_at).&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;BPM&lt;/h2&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot; checked=\&quot;\&quot;&gt; BPM&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Принимать от партнерки в extend допномер клиента в блоке &amp;quot;additional_msisdn&amp;quot;:&lt;br/&gt;Должен выглядеть так:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;&amp;quot;additional_msisdn&amp;quot;: {\n&amp;quot;id&amp;quot;: 14626,\n&amp;quot;state&amp;quot;: 0,\n&amp;quot;msisdn&amp;quot;: 79099099990,\n&amp;quot;created_at&amp;quot;: &amp;quot;2020-02-28T09:30:01.519Z&amp;quot;,\n&amp;quot;is_current&amp;quot;: false,\n&amp;quot;updated_at&amp;quot;: &amp;quot;2020-02-28T09:30:01.519Z&amp;quot;,\n&amp;quot;customer_id&amp;quot;: 14642\n},\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;В memory добавить и сохранять новый атрибут &lt;strong&gt;additional_phone&lt;/strong&gt; в блоке &lt;code class=\&quot;inline-code\&quot;&gt;requets-&amp;gt;additional_phone&lt;/code&gt; (после атрибута &lt;strong&gt;phone&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;На вопросник по Клиенту отправлять оба номера телефона.  В блоке &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt; phones-&amp;gt;client-&lt;/code&gt;, &lt;code class=\&quot;inline-code\&quot;&gt;params-&amp;gt;client-&amp;gt;additional_phones&lt;/code&gt;&lt;br/&gt;Принимать ответы по всем номерам.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;UserData&lt;/h2&gt;\n&lt;p&gt;Необходимо в userdata записывать доп номер по клиенту: type_user=user. ! ПОСМОТРЕТЬ, НА ЧТО ЭТО ПОВЛИЯЕТ!&lt;br/&gt;Почему записывать с таким же типом?&lt;br/&gt;Потом что по нему должны срабатывать фичи как по соновному номеру:&lt;br/&gt;Фича №2 - Номер мобильного телефона клиента совпадает с номером телефона другого клиента - &amp;quot;client_phone_other_user_client&amp;quot;&lt;br/&gt;Фича №4 - Номер мобильного телефона контактного лица совпадает с номером другого клиента  по user data - &amp;quot;contact_phone_other_user_client&amp;quot;&lt;/p&gt;\n&lt;h2&gt;Мегафон&lt;/h2&gt;\n&lt;p&gt;За один запрос проверки телефона можно проверить только один телефон.&lt;br/&gt;Так как у нас теперь будет 2 телефона, необходимо делать 2-й запрос в мегафон, только если указано 2 номера телефона.&lt;/p&gt;\n&lt;p&gt;Необходимо так же как и с основным номером телефона запрашивать:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;скор (&amp;quot;SCORE&amp;quot;)&lt;/li&gt;\n&lt;li&gt;срок действия номера (&amp;quot;LIFETIME_BIN&amp;quot;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Полученную информацию (&amp;quot;value&amp;quot;, &amp;quot;status&amp;quot;) логировать и добавить в memory.&lt;/p&gt;\n&lt;p&gt;Фичи по мегафону должны срабатывать аналогично фичам с основным номеров : фичи 11 и 12&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Максим Сидоркин&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.solonovich&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;11&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;maxim.sidorkin&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584713000415&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1774&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1786&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;Back&quot;,&quot;UserData&quot;,&quot;Front&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready to Deploy&quot;],&quot;valueId&quot;:[&quot;Ready to Deploy&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;maxim.sidorkin&quot;,&quot;fullName&quot;:&quot;Максим Сидоркин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;xxxx_АВТO_КН_Добавление контактного номера телефона.docx&quot;,&quot;id&quot;:&quot;88-26031&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26031?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYwMzF8TEJyLXlBd1M3QVhSOG9wZGFpSE1xVUNnTllS%0D%0AanNMVTRHRUhRWFk1cmo3Yw0K%0D%0A&amp;updated=1582269200557&quot;},{&quot;value&quot;:&quot;image.png&quot;,&quot;id&quot;:&quot;88-26142&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26142?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYxNDJ8UlJXd3RyU3Uwc3FZbDVWakp1REdYb0tnRHls%0D%0ARy01STFtUTJoTkdza2JGZw0K%0D%0A&amp;updated=1582637178984&quot;},{&quot;value&quot;:&quot;image1.png&quot;,&quot;id&quot;:&quot;88-26161&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26161?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYxNjF8TUFVWlU5NnlMVWV6T1FFVFljd3o0S1FUTWFw%0D%0AaEhzQW9UX0JJbUNnYWUySQ0K%0D%0A&amp;updated=1582702974711&quot;},{&quot;value&quot;:&quot;8824_АВТО+КН. Добавление контактного номера телефона.docx&quot;,&quot;id&quot;:&quot;88-26284&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26284?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjYyODR8LTc4RUtlVWJkN2tYVVFXRVNtTmstdTFGaGFL%0D%0AaXVLLVR6VjB3eVEzT0FyOA0K%0D%0A&amp;updated=1582875749253&quot;},{&quot;value&quot;:&quot;image1584633539259.png&quot;,&quot;id&quot;:&quot;88-27057&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27057?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcwNTd8d2JDeVVwX1IwTjJEQzdFLXF1WEp0RldUXzYt%0D%0AQkpxQ2szcGswTkdaR0g4Zw0K%0D%0A&amp;updated=1584633539910&quot;},{&quot;value&quot;:&quot;image1584633573143.png&quot;,&quot;id&quot;:&quot;88-27058&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27058?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcwNTh8UGdpdFh5Y3lwV1pXdDVEdGJCSHF1YUxsTmJk%0D%0AQzdhN01iN2F6cWpDNVB5TQ0K%0D%0A&amp;updated=1584633573714&quot;},{&quot;value&quot;:&quot;image1584633586885.png&quot;,&quot;id&quot;:&quot;88-27059&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27059?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcwNTl8QzUwMFExQ01aaklIbV9iaEtkMEFMWDlsdTdU%0D%0AUFo1VUhtSXR0V3dRcU5ZUQ0K%0D%0A&amp;updated=1584633587462&quot;},{&quot;value&quot;:&quot;image1584707470195.png&quot;,&quot;id&quot;:&quot;88-27077&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27077?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcwNzd8T1N0cnBuMHhmdDl1Vy10Sm1SN2k2OHctdjVC%0D%0ANkhjMXNxN19rbjNnU3lZZw0K%0D%0A&amp;updated=1584707470848&quot;},{&quot;value&quot;:&quot;image1584707523759.png&quot;,&quot;id&quot;:&quot;88-27078&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27078?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcwNzh8LUZyYlcxSDFyenloSGkzU2ZsTm9uMWNJRkt0%0D%0AaWRnTjBHakU5Ymh6Yi1nNA0K%0D%0A&amp;updated=1584707524257&quot;},{&quot;value&quot;:&quot;image1584707599477.png&quot;,&quot;id&quot;:&quot;88-27079&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27079?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjcwNzl8OS1YNFI1azI0RlNZUGZxMnNZbjM5Ujl6aFRQ%0D%0AOWxkTFVXYmxHRDlTMUItSQ0K%0D%0A&amp;updated=1584707600137&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-52196&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Доработки: Фронт, бэк, бпм, вопросник, мегафон (допномер), интеграция с цфт (использование допномера).&lt;/p&gt;\n&lt;p&gt;Вопросы: как повлияет допномер на фичи? нужна инфа от рисков.&lt;/p&gt;\n&lt;p&gt;Предварительно: 20SP&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582291138804,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52591&quot;,&quot;author&quot;:&quot;vitaly.pervoy&quot;,&quot;authorFullName&quot;:&quot;Виталий Первой&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;По вопроснику доработок не требуется (Паша Косых)&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1582815693162,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52842&quot;,&quot;author&quot;:&quot;vitaly.pervoy&quot;,&quot;authorFullName&quot;:&quot;Виталий Первой&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Задача на интеграцию с ЦФТ по дополнительному номеру выделена в отдельную задачу - &lt;a href=\&quot;https://balance.myjetbrains.com/youtrack/issue/ARGS-1774\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://balance.myjetbrains.com/youtrack/issue/ARGS-1774&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583157261445,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-52916&quot;,&quot;author&quot;:&quot;i.smelkov&quot;,&quot;authorFullName&quot;:&quot;Илья Смелков&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;ветка ПП &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583237983390,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53415&quot;,&quot;author&quot;:&quot;p.nikulshin&quot;,&quot;authorFullName&quot;:&quot;Павел Никульшин&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Ветки&lt;br/&gt;bpm_composite: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;br/&gt;sm_rgsb: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;br/&gt;rgsb_userdata_ng_main_version: &lt;code class=\&quot;inline-code\&quot;&gt;feature/ARGS-1728&lt;/code&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583925089469,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54206&quot;,&quot;author&quot;:&quot;maxim.sidorkin&quot;,&quot;authorFullName&quot;:&quot;Максим Сидоркин&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;по комментарию разработчиков - &lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/a.bogomolov\&quot; title=\&quot;Алексей Богомолов\&quot; data-user-id=\&quot;24-208\&quot;&gt;@Алексей Богомолов&lt;/a&gt;  - требуется более детальное описание задачи по части разработки и валидации полей&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584627850465,&quot;updated&quot;:1584627890130,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54207&quot;,&quot;author&quot;:&quot;a.bogomolov&quot;,&quot;authorFullName&quot;:&quot;Алексей Богомолов&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;у нас везде вся валидация на бэке&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584628072504,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54236&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 1 Дизайн ПП FRONT &lt;strong&gt;ОР == ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020784\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020784&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Ввел только дополнительный номер (ОР==ФР):&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27057?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwNTd8N0V2dm9MSGlJdVJZVWVVZjQtNFdfWUdRUlVQ%0D%0AYm1JblBVcTJkaEw4SE0tUQ0K%0D%0A&amp;amp;updated=1584633539910\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Ввел только «Мобильный телефон» перешел на 2 шаг (ОР == ФР).&lt;/li&gt;\n&lt;li&gt;Ввел два одинаковых номера (ОР==ФР):&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27058?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwNTh8MVUwSGlrTjY0T053SVhKTTVrc0ptb29rSFFL%0D%0AM0t5U0FidmE5eXVnZHpqQQ0K%0D%0A&amp;amp;updated=1584633573714\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Ввел два номера телефона: дополнительный и основной (ОР==ФР).&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27059?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwNTl8ZmtjWmJJYWZhN2gxdEhmaTZCOUZUN1YxRnpW%0D%0AMDdmOUhVcVlWem5vM0lqZw0K%0D%0A&amp;amp;updated=1584633587462\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584633642407,&quot;updated&quot;:1584711016606,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54356&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 2  ПП BACK, BPM :&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Создал заявку:&lt;br/&gt;&lt;a href=\&quot;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020851\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://partnerka-front-1.auto-rgsb-st1.cloud.b-pl.pro/request/30020851&lt;/a&gt;&lt;br/&gt;Указал два номера:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27077?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwNzd8QUxPQVlTZ2JHVGpXNWFhek84UkVzSDlfVDh6%0D%0AOU5KZFJFYmV4aFFIWTFqTQ0K%0D%0A&amp;amp;updated=1584707470848\&quot; alt=\&quot;\&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;Прошел верификацию.&lt;/li&gt;\n&lt;li&gt;Прошел верификацию автомобиля.&lt;/li&gt;\n&lt;li&gt;Открыл консоль:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;Для хранения дополнительного контактного номера клиента, необходимо в таблицу msisdns&lt;br/&gt;записывать новую строку с атрибутом is_current is FALSE, если в заявке он указан.&amp;quot;&lt;/p&gt;\n&lt;p&gt;additional_msisdn: {id: 16126, msisdn: 79994446666, state: 0, is_current: false, customer_id: 16080,…}&lt;br/&gt;1. id: 16126&lt;br/&gt;2. msisdn: 79994446666&lt;br/&gt;3. state: 0&lt;br/&gt;4. is_current: false&lt;br/&gt;5. customer_id: 16080&lt;br/&gt;6. created_at: &amp;quot;2020-03-20T09:42:15.037Z&amp;quot;&lt;br/&gt;7. updated_at: &amp;quot;2020-03-20T11:22:48.697Z&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;Передавать на BPM доп номер в блоке &amp;quot;additional_msisdn&amp;quot; (аналогично основному номеру, см. структуру в блоке BPM п.1)&lt;br/&gt;Для ИнФО: Таким образом, у заемщика может быть 1 основной (is_current is TRUE) и 1 дополнительный номер телефона (is_current is FALSE).&lt;br/&gt;При изменении основного или дополнительного номера телефона, должны перезаписываться текущие данные (msisdn, updated_at).&amp;quot;&lt;/p&gt;\n&lt;p&gt;Изменил номер:&lt;/p&gt;\n&lt;p&gt;additional_msisdn: {id: 16124, msisdn: 79993332222, state: 0, is_current: false, customer_id: 16079,…}&lt;br/&gt;1. id: 16124&lt;br/&gt;2. msisdn: 79993332222&lt;br/&gt;3. state: 0&lt;br/&gt;4. is_current: false&lt;br/&gt;5. customer_id: 16079&lt;br/&gt;6. created_at: &amp;quot;2020-03-20T09:40:36.930Z&amp;quot;&lt;br/&gt;7. updated_at: &amp;quot;2020-03-20T09:40:36.930Z&amp;quot;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;В memory добавить и сохранять новый атрибут additional_phone в блоке requets-&amp;gt;additional_phone (после атрибута phone)&amp;quot;&lt;br/&gt;Откры BPM: &lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/&lt;/a&gt;&lt;br/&gt;открыл блок «request»:&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27078?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwNzh8SXdjbnljTWJnek5qZTF2cEk5Qzk3VHZEeExw%0D%0AcTBEOWlmYmpOZDNDRmd4MA0K%0D%0A&amp;amp;updated=1584707524257\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ОР==ФР&lt;/strong&gt;&lt;br/&gt;&amp;quot;На вопросник по Клиенту отправлять оба номера телефона. В блоке params-&amp;gt; phones-&amp;gt;client-, params-&amp;gt;client-&amp;gt;additional_phones&lt;br/&gt;Принимать ответы по всем номерам.&amp;quot;&lt;br/&gt;&lt;img src=\&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-27079?sign=MTU4NjEzMTIwMDAwMHwyNC0xODF8ODgtMjcwNzl8eG5vRDNzdC1YUmJvOEd6N3B1aGtja2hTMldQ%0D%0ATnNsVk5PQlBaZVhvai1GOA0K%0D%0A&amp;amp;updated=1584707600137\&quot; alt=\&quot;\&quot; /&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584707748538,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54371&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 3 МЕГАФОН &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;открыл БПМ:&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15461/details/&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;megafon&amp;quot;: {&lt;br/&gt;&amp;quot;not_answer&amp;quot;: false,&lt;br/&gt;-&amp;quot;other_phones&amp;quot;: {&lt;br/&gt;+&amp;quot;additional_phone&amp;quot;: { … }&lt;br/&gt;},&lt;br/&gt;&amp;quot;megafon_score&amp;quot;: 5,&lt;br/&gt;&amp;quot;megafon_lifetime&amp;quot;: 5,&lt;br/&gt;&amp;quot;megafon_one_month&amp;quot;: false,&lt;br/&gt;&amp;quot;megafon_three_month&amp;quot;: false,&lt;br/&gt;&amp;quot;megafon_response_received_at&amp;quot;: 1571916146&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584710702132,&quot;updated&quot;:1584710767802,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54372&quot;,&quot;author&quot;:&quot;bair.zangeev&quot;,&quot;authorFullName&quot;:&quot;Баир Загеев&quot;,&quot;issueId&quot;:&quot;ARGS-1728&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Тест 4 UserData &lt;strong&gt;ОР==ФР&lt;/strong&gt;:&lt;br/&gt;Фича №4 - Номер мобильного телефона контактного лица совпадает с номером другого клиента по user data - “contact_phone_other_user_client”&lt;br/&gt;&lt;a href=\&quot;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15489/details/\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://bpm-ng-app-1.auto-rgsb-st1.cloud.b-pl.pro/admin/bpm/walker/15489/details/&lt;/a&gt;&lt;br/&gt;&amp;quot;triggered_features&amp;quot;: [&lt;br/&gt;&amp;quot;3&amp;quot;,&lt;br/&gt;&amp;quot;4&amp;quot;&lt;br/&gt;],&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584710907106,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Звезда&quot;,&quot;cssClass&quot;:&quot;c0&quot;},{&quot;value&quot;:&quot;0&quot;,&quot;cssClass&quot;:&quot;c3&quot;}]}, {&quot;id&quot;:&quot;ARGS-1866&quot;,&quot;entityId&quot;:&quot;86-79115&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;выгрузки&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584625997956&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1866&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Выгрузить информацию из БПМ (инкремент) за последние 2 недели ночью по стандартному расписанию&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Дмитрий Синельников&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584709944702&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;ready for testing&quot;],&quot;valueId&quot;:[&quot;ready for testing&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;fullName&quot;:&quot;Дмитрий Синельников&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-54363&quot;,&quot;author&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Синельников&quot;,&quot;issueId&quot;:&quot;ARGS-1866&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Запущу через часик. Должно отработать минут за 20 - 30.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584709891990,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-54364&quot;,&quot;author&quot;:&quot;Dmitry_Sinelnikov&quot;,&quot;authorFullName&quot;:&quot;Дмитрий Синельников&quot;,&quot;issueId&quot;:&quot;ARGS-1866&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Со стороны тестировщиков работы не требуются.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1584709944703,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1785&quot;,&quot;entityId&quot;:&quot;86-77902&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Реализовать новые фичи в userdata&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1583306902808&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1785&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;9506 Во вложение описание фичей&lt;br/&gt;&lt;strong&gt;Требование&lt;/strong&gt;&lt;br/&gt;Реализовать для КН появление в userdata новых фичей&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Решение&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;БПМ- Юзердата&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;\n&lt;p&gt;Необходимо в userdata зашить новые фичи  названия следующие :&lt;br/&gt;&lt;em&gt;названия можете изменить, только отписать в задачу как назвали&lt;/em&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;number_replay_and_approved_1_month&lt;/code&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;number_replay_and_approved_3_month&lt;/code&gt;&lt;br/&gt;&lt;code class=\&quot;inline-code\&quot;&gt;number_replay_and_reject_and_fraud&lt;/code&gt;&lt;br/&gt;по умолчанию значения: &lt;code class=\&quot;inline-code\&quot;&gt; false&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Логика срабатывания следующая (КЛ-Контактное лицо):&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;code class=\&quot;inline-code\&quot;&gt;number_replay_and_approved_1_month&lt;/code&gt; -&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;1.Номер клиента = Номер КЛ из другой заявки\nИ\n2.ФИО клиента != ФИО КЛ из другой заявки\nИ\n3.заявка в статусе &amp;quot;одобрен&amp;quot; ИЛИ &amp;quot;выдан&amp;quot;\nИ\n4.текущая дата - date_approval(или дата выдачи) = &amp;lt; 1 мес\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;code class=\&quot;inline-code\&quot;&gt;number_replay_and_approved_3_month&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;1.Номер КЛ = Номер клиента из другой заявки\nИ\n2.ФИО КЛ != ФИО клиента из другой заявки\nИ\n3.заявка в статусе &amp;quot;одобрен&amp;quot; ИЛИ &amp;quot;выдан&amp;quot;\nИ\n4.текущая дата - date_approval(или дата выдачи) = &amp;lt; 3 мес\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;code class=\&quot;inline-code\&quot;&gt;number_replay_and_reject_and_fraud&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;1.Номер КЛ = Номеру КЛ из другой заявки\nИ\n2.ФИО КЛ != ФИО КЛ из другой заявки \nИ\n3.заявка в статусе &amp;quot;отказ&amp;quot;(не отказ клиента)\nИ\n4.отказ по коду ниже, сочетание нескольких из низ допустимо\n\nBL001, BCH001, BCH002, BCH003, BCH004, BCH005, BCH006, BCH007, BCH008,  KR001,\nKR002, KR003, KR004, KR005, TV001, TV003, TV005, TV006, N002, N003, N004, N005, N006, N007, V001 \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;После реализации сказать КН названия фичей&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;проверить работу фичей по сценариям выше&lt;br/&gt;проверить и кейсы с одобрением и кейсы с выдачей&lt;br/&gt;у фичи с отказом, проверить что срабатывание при нахождении одного или нескольких кодов&lt;br/&gt;проверить что Юзердата корректно присылает значение фичей  -&lt;code class=\&quot;inline-code\&quot;&gt;true&lt;/code&gt; если они сработали&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;реализовывать фичи после реализации ВСЕХ связных задач и КН и АВТО, без них работать не будет&lt;br/&gt;выкатывать тоже вместе&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Для реализации остальный БТ&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;КН необходимо научится реагировать на фичи&lt;/li&gt;\n&lt;li&gt;Старые фичи по номерам телефонов удалять не надо , только после того как у АВТО реализуют такие же, тогда можно их Delete&lt;/li&gt;\n&lt;li&gt;КН нужно реализовать -&amp;gt;&lt;br/&gt;•\t«cronos_zone_is_gray &amp;quot;Серая зона&amp;quot; по Кронос»  - оставить только для клиентов с  качеством кредитной истории = NO_HIST&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584692369802&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1860&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1861&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;},{&quot;value&quot;:&quot;ARGS-1862&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;зависит от&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Ready for development&quot;],&quot;valueId&quot;:[&quot;Ready for development&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;p.nikulshin&quot;,&quot;fullName&quot;:&quot;Павел Никульшин&quot;}]},{&quot;name&quot;:&quot;attachments&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;9506_новые фичи верификации КН.docx&quot;,&quot;id&quot;:&quot;88-26504&quot;,&quot;url&quot;:&quot;https://balance.myjetbrains.com:443/youtrack/api/files/88-26504?sign=MTU4NTE4MDgwMDAwMHwyNC0xODF8ODgtMjY1MDR8RUdyWEJlT0pBeFE0Vzdnc2tuNzlRbkY2czJG%0D%0AamMtWnZUWlZHX2F6Tzd3Zw0K%0D%0A&amp;updated=1583306956832&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-53064&quot;,&quot;author&quot;:&quot;e.ivanchenkova&quot;,&quot;authorFullName&quot;:&quot;Елизавета Иванченкова&quot;,&quot;issueId&quot;:&quot;ARGS-1785&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Это фичи для КН, но в авто захотят также (подтверждение от Эльдара), поэтому при реализации в userdata это нужно предусмотреть&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583329294736,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-53422&quot;,&quot;author&quot;:&quot;a.kriventsova&quot;,&quot;authorFullName&quot;:&quot;Кривенцова Александра&quot;,&quot;issueId&quot;:&quot;ARGS-1785&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text prewrapped\&quot;&gt;будем настраивать у себя фичи , когда поступ требование от Банка, между собой они никак не связаны&lt;/div&gt;\n&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1583930002354,&quot;updated&quot;:1583930030830,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:false,&quot;replies&quot;:[]}],&quot;tag&quot;:[{&quot;value&quot;:&quot;Согл деплой с КН&quot;,&quot;cssClass&quot;:&quot;c20&quot;},{&quot;value&quot;:&quot;БлРисков&quot;,&quot;cssClass&quot;:&quot;c11&quot;}]}, {&quot;id&quot;:&quot;ARGS-1860&quot;,&quot;entityId&quot;:&quot;86-79020&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Зашить в юзердату одобрение&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Кривенцова Александра&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1584604862032&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1860&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Цель&lt;/strong&gt;&lt;br/&gt;Для реализации перекрестной проверки Авто и КН необходимо юзать одобрение заявок с других проектов&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;БПМ-Юзердата&lt;/strong&gt;&lt;/p&gt;\n&lt;ol class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;Необходимо с юзердате создать новый стейт у заявки&lt;br/&gt;Одобрение - &lt;code class=\&quot;inline-code\&quot;&gt;approval&lt;/code&gt;&lt;br/&gt;Дата одобрения &lt;code class=\&quot;inline-code\&quot;&gt;date_approval&lt;/code&gt;&lt;br/&gt;и заполнять их по следующей логике:&lt;br/&gt;при переходе заявки в&lt;code class=\&quot;inline-code\&quot;&gt;decision_state&lt;/code&gt;, отправлять в юзердату сообщение о том что клиента одобрили, она обновить стейт&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=\&quot;wikicode prettyprint\&quot;&gt;&lt;code&gt;`date_approval` : 'привычный формат даты для юзердаты' время  определить в таблице `events` по `created_at`\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;далее они будут использованы в фичах связной задачи&lt;br/&gt;логика, что если по заявке произошел отказ или клиент отказался или кредит выдан и тогда она заявка мняет свой стейт - остается&lt;/p&gt;\n&lt;ol start=\&quot;2\&quot; class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;для всех заявок у которых был пройден  или в текущем их состоянии &lt;code class=\&quot;inline-code\&quot;&gt;decision_state&lt;/code&gt; ( исключить заявки у которых стейты уже- отказ и выдан в юзердате)  записать стейт  &lt;code class=\&quot;inline-code\&quot;&gt;approval&lt;/code&gt;&lt;br/&gt;время  определить в таблице &lt;code class=\&quot;inline-code\&quot;&gt;events&lt;/code&gt; по &lt;code class=\&quot;inline-code\&quot;&gt;created_at&lt;/code&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;Тест&lt;/strong&gt;&lt;br/&gt;одобрить заявку, послалось сообщение в юзердату&lt;br/&gt;результат: ответ сервиса без ошибок&lt;br/&gt;работу фичей тестировать в связной задаче&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Выкатывать вместе со связными задачами&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;a.kriventsova&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584687002571&quot;},{&quot;name&quot;:&quot;links&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;ARGS-1862&quot;,&quot;type&quot;:&quot;Relates&quot;,&quot;role&quot;:&quot;связана с&quot;},{&quot;value&quot;:&quot;ARGS-1785&quot;,&quot;type&quot;:&quot;Depend&quot;,&quot;role&quot;:&quot;обязательна для&quot;}]},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;valueId&quot;:[&quot;UserData&quot;,&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;p.nikulshin&quot;,&quot;fullName&quot;:&quot;Павел Никульшин&quot;}]}],&quot;comment&quot;:[],&quot;tag&quot;:[]}, {&quot;id&quot;:&quot;ARGS-1512&quot;,&quot;entityId&quot;:&quot;86-72548&quot;,&quot;jiraId&quot;:null,&quot;field&quot;:[{&quot;name&quot;:&quot;projectShortName&quot;,&quot;value&quot;:&quot;ARGS&quot;},{&quot;name&quot;:&quot;summary&quot;,&quot;value&quot;:&quot;Перенос репозиториев BPM в gitlab&quot;},{&quot;name&quot;:&quot;reporterFullName&quot;,&quot;value&quot;:&quot;Павел Никульшин&quot;},{&quot;name&quot;:&quot;created&quot;,&quot;value&quot;:&quot;1577347827100&quot;},{&quot;name&quot;:&quot;numberInProject&quot;,&quot;value&quot;:&quot;1512&quot;},{&quot;name&quot;:&quot;description&quot;,&quot;value&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;h1&gt;План действий:&lt;/h1&gt;\n&lt;ul class=\&quot;markdown-checkbox-list\&quot;&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;0\&quot; checked=\&quot;\&quot;&gt; Экспорт репозиториев в гитлаб&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;1\&quot;&gt; Настройка pipeline'ов под гитлаб&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;2\&quot;&gt; Тестирование деплоя&lt;/label&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label&gt;&lt;input type=\&quot;checkbox\&quot; data-position=\&quot;3\&quot;&gt; Поиграться с докером и пушем в нексус&lt;/label&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;},{&quot;name&quot;:&quot;updaterFullName&quot;,&quot;value&quot;:&quot;Анна Крутилина&quot;},{&quot;name&quot;:&quot;reporterName&quot;,&quot;value&quot;:&quot;p.nikulshin&quot;},{&quot;name&quot;:&quot;commentsCount&quot;,&quot;value&quot;:&quot;4&quot;},{&quot;name&quot;:&quot;updaterName&quot;,&quot;value&quot;:&quot;a.krutilina&quot;},{&quot;name&quot;:&quot;markdown&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;wikified&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;votes&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;name&quot;:&quot;updated&quot;,&quot;value&quot;:&quot;1584686784934&quot;},{&quot;name&quot;:&quot;Priority&quot;,&quot;value&quot;:[&quot;Normal&quot;],&quot;valueId&quot;:[&quot;Normal&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#b7e281&quot;,&quot;fg&quot;:&quot;#444&quot;}},{&quot;name&quot;:&quot;Модули&quot;,&quot;value&quot;:[&quot;BPM&quot;],&quot;valueId&quot;:[&quot;BPM&quot;],&quot;color&quot;:null},{&quot;name&quot;:&quot;State&quot;,&quot;value&quot;:[&quot;Development&quot;],&quot;valueId&quot;:[&quot;Development&quot;],&quot;color&quot;:{&quot;bg&quot;:&quot;#ffee9c&quot;,&quot;fg&quot;:&quot;#b45f06&quot;}},{&quot;name&quot;:&quot;Ответственный&quot;,&quot;value&quot;:[{&quot;value&quot;:&quot;m.nuzhnyj&quot;,&quot;fullName&quot;:&quot;Максим Нужный&quot;}]}],&quot;comment&quot;:[{&quot;id&quot;:&quot;96-48492&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Гитлаб репо:&lt;/p&gt;\n&lt;ul class=\&quot;wiki-list0\&quot;&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_engine\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_engine&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_transport\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_transport&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_composite\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/bpm_composite&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&quot;https://gitlab.infra.b-pl.pro/auto-rgsb/sm_rgsb\&quot; target=\&quot;_blank\&quot; rel=\&quot;noopener noreferrer\&quot;&gt;https://gitlab.infra.b-pl.pro/auto-rgsb/sm_rgsb&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577355744240,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48493&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;&lt;strong&gt;Настроена протекция ветки &lt;code class=\&quot;inline-code\&quot;&gt;master&lt;/code&gt; - пушить в ветку никому нельзя, можно только мержить.&lt;/strong&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577355814366,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-48604&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;Нужен ssh-ключ, чтобы гитлабовский раннер мог клонировать все 4 БМП репозитория&lt;br/&gt;&lt;a href=\&quot;https://balance.myjetbrains.com:443/youtrack/users/m.nuzhnyj\&quot; title=\&quot;Максим Нужный\&quot; data-user-id=\&quot;24-254\&quot;&gt;@Максим Нужный&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1577602057538,&quot;updated&quot;:1577602073679,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]},{&quot;id&quot;:&quot;96-50658&quot;,&quot;author&quot;:&quot;alexander.karateev&quot;,&quot;authorFullName&quot;:&quot;Александр Каратеев&quot;,&quot;issueId&quot;:&quot;ARGS-1512&quot;,&quot;parentId&quot;:null,&quot;deleted&quot;:false,&quot;jiraId&quot;:null,&quot;text&quot;:&quot;&lt;div class=\&quot;wiki text common-markdown\&quot;&gt;&lt;p&gt;В процессе настройки.&lt;/p&gt;\n&lt;/div&gt;&quot;,&quot;shownForIssueAuthor&quot;:false,&quot;created&quot;:1580812022984,&quot;updated&quot;:0,&quot;permittedGroup&quot;:null,&quot;markdown&quot;:true,&quot;replies&quot;:[]}],&quot;tag&quot;:[]}]" />
      </map>
    </option>
  </component>
</application>